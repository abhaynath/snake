(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}})();function M(){}function rt(t){return t()}function $e(){return Object.create(null)}function Ee(t){t.forEach(rt)}function it(t){return typeof t=="function"}function j(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function pt(t){return Object.keys(t).length===0}function Ie(t){return t==null?"":t}function _t(t){return t&&it(t.destroy)?t.destroy:M}function f(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function U(t){t.parentNode.removeChild(t)}function ct(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function I(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function W(t){return document.createTextNode(t)}function z(){return W(" ")}function Pe(){return W("")}function _e(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function s(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ht(t){return Array.from(t.childNodes)}function Q(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e,n,o){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}let Ue;function mt(){if(Ue===void 0){Ue=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ue=!0}}return Ue}function gt(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const o=I("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const l=mt();let i;return l?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=_e(window,"message",r=>{r.source===o.contentWindow&&e()})):(o.src="about:blank",o.onload=()=>{i=_e(o.contentWindow,"resize",e)}),f(t,o),()=>{(l||i&&o.contentWindow)&&i(),U(o)}}function Et(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,o,e),l}let Te;function Ce(t){Te=t}function qe(){if(!Te)throw new Error("Function called outside component initialization");return Te}function ft(t){qe().$$.on_mount.push(t)}function vt(t){qe().$$.after_update.push(t)}function wt(){const t=qe();return(e,n,{cancelable:o=!1}={})=>{const l=t.$$.callbacks[e];if(l){const i=Et(e,n,{cancelable:o});return l.slice().forEach(r=>{r.call(t,i)}),!i.defaultPrevented}return!0}}const Fe=[],Ye=[],xe=[],je=[],yt=Promise.resolve();let Ze=!1;function St(){Ze||(Ze=!0,yt.then(at))}function Ve(t){xe.push(t)}const Ke=new Set;let Re=0;function at(){const t=Te;do{for(;Re<Fe.length;){const e=Fe[Re];Re++,Ce(e),bt(e.$$)}for(Ce(null),Fe.length=0,Re=0;Ye.length;)Ye.pop()();for(let e=0;e<xe.length;e+=1){const n=xe[e];Ke.has(n)||(Ke.add(n),n())}xe.length=0}while(Fe.length);for(;je.length;)je.pop()();Ze=!1,Ke.clear(),Ce(t)}function bt(t){if(t.fragment!==null){t.update(),Ee(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ve)}}const ze=new Set;let ge;function Be(){ge={r:0,c:[],p:ge}}function De(){ge.r||Ee(ge.c),ge=ge.p}function x(t,e){t&&t.i&&(ze.delete(t),t.i(e))}function V(t,e,n,o){if(t&&t.o){if(ze.has(t))return;ze.add(t),ge.c.push(()=>{ze.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function kt(t,e){V(t,1,1,()=>{e.delete(t.key)})}function It(t,e,n,o,l,i,r,c,a,u,p,g){let S=t.length,G=i.length,h=S;const w={};for(;h--;)w[t[h].key]=h;const b=[],_=new Map,y=new Map;for(h=G;h--;){const k=g(l,i,h),F=n(k);let C=r.get(F);C?o&&C.p(k,e):(C=u(F,k),C.c()),_.set(F,b[h]=C),F in w&&y.set(F,Math.abs(h-w[F]))}const O=new Set,T=new Set;function D(k){x(k,1),k.m(c,p),r.set(k.key,k),p=k.first,G--}for(;S&&G;){const k=b[G-1],F=t[S-1],C=k.key,Z=F.key;k===F?(p=k.first,S--,G--):_.has(Z)?!r.has(C)||O.has(C)?D(k):T.has(Z)?S--:y.get(C)>y.get(Z)?(T.add(C),D(k)):(O.add(Z),S--):(a(F,r),S--)}for(;S--;){const k=t[S];_.has(k.key)||a(k,r)}for(;G;)D(b[G-1]);return b}function ue(t){t&&t.c()}function re(t,e,n,o){const{fragment:l,on_mount:i,on_destroy:r,after_update:c}=t.$$;l&&l.m(e,n),o||Ve(()=>{const a=i.map(rt).filter(it);r?r.push(...a):Ee(a),t.$$.on_mount=[]}),c.forEach(Ve)}function ie(t,e){const n=t.$$;n.fragment!==null&&(Ee(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Lt(t,e){t.$$.dirty[0]===-1&&(Fe.push(t),St(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,o,l,i,r,c=[-1]){const a=Te;Ce(t);const u=t.$$={fragment:null,ctx:null,props:i,update:M,not_equal:l,bound:$e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:$e(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let p=!1;if(u.ctx=n?n(t,e.props||{},(g,S,...G)=>{const h=G.length?G[0]:S;return u.ctx&&l(u.ctx[g],u.ctx[g]=h)&&(!u.skip_bound&&u.bound[g]&&u.bound[g](h),p&&Lt(t,g)),S}):[],u.update(),p=!0,Ee(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const g=ht(e.target);u.fragment&&u.fragment.l(g),g.forEach(U)}else u.fragment&&u.fragment.c();e.intro&&x(t.$$.fragment),re(t,e.target,e.anchor,e.customElement),at()}Ce(a)}class te{$destroy(){ie(this,1),this.$destroy=M}$on(e,n){const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(e){this.$$set&&!pt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var H=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(H||{});const N={SCREEN_WIDTH:600,SCREEN_HEIGHT:400,BLOCK_SIZE:50};var me=(t=>(t[t.DELAY=50]="DELAY",t[t.MAX_POINTS=10]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t))(me||{}),be=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(be||{}),Ne=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(Ne||{});const Se=[];function ut(t,e=M){let n;const o=new Set;function l(c){if(j(t,c)&&(t=c,n)){const a=!Se.length;for(const u of o)u[1](),Se.push(u,t);if(a){for(let u=0;u<Se.length;u+=2)Se[u][0](Se[u+1]);Se.length=0}}}function i(c){l(c(t))}function r(c,a=M){const u=[c,a];return o.add(u),o.size===1&&(n=e(l)||M),c(t),()=>{o.delete(u),o.size===0&&(n(),n=null)}}return{set:l,update:i,subscribe:r}}const Gt=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=ut(t);return{subscribe:n,resetScore:()=>{e(c=>(c.food=0,c.bonus=0,c.score=0,c))},eatFood:()=>{e(c=>(c.food=c.food+1,c.score=c.food*5+c.bonus*20,c.score>c.highScore&&(c.highScore=c.score),c))},getBonus:()=>{e(c=>(c.bonus=c.bonus+1,c))},nextLevel:()=>{e(c=>(c.level=c.level+1,c))}}};let de=Gt();function Ot(t){let e,n,o,l,i,r,c,a,u,p,g,S,G,h,w,b;return{c(){e=I("div"),n=d("svg"),o=d("g"),l=d("g"),i=d("g"),r=d("g"),c=d("ellipse"),a=d("g"),u=d("path"),p=d("path"),g=d("g"),S=d("path"),G=d("g"),h=d("path"),w=d("g"),b=d("ellipse"),s(o,"id","Layer_1"),s(c,"id","shadow"),s(c,"opacity","0.3"),s(c,"cx","438.7"),s(c,"cy","765.8"),s(c,"rx","283"),s(c,"ry","32.9"),s(u,"id","cup-shadow"),s(u,"fill","#E7F4FA"),s(u,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),s(p,"id","cup-light"),s(p,"fill","#FFFFFF"),s(p,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),s(S,"id","mainFood"),s(S,"fill","#DB343C"),s(S,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),s(h,"id","highlight"),s(h,"opacity","0.3"),s(h,"fill","#FFFFFF"),s(h,"stroke","#000000"),s(h,"stroke-width","0.25"),s(h,"stroke-miterlimit","10"),s(h,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),s(b,"id","c2"),s(b,"fill","#FFFFFF"),s(b,"cx","436.8"),s(b,"cy","144.3"),s(b,"rx","140.6"),s(b,"ry","138.4"),s(w,"id","c1"),s(l,"id","Layer_2"),s(n,"viewBox","0 0 855.6 798.6"),s(e,"class","food svelte-h8lqdv"),m(e,"left",t[1]+"px"),m(e,"top",t[0]+"px"),m(e,"width",t[2]-2+"px"),m(e,"height",t[2]-2+"px")},m(_,y){R(_,e,y),f(e,n),f(n,o),f(n,l),f(l,i),f(i,r),f(r,c),f(i,a),f(a,u),f(a,p),f(i,g),f(g,S),f(i,G),f(G,h),f(i,w),f(w,b)},p(_,[y]){y&2&&m(e,"left",_[1]+"px"),y&1&&m(e,"top",_[0]+"px"),y&4&&m(e,"width",_[2]-2+"px"),y&4&&m(e,"height",_[2]-2+"px")},i:M,o:M,d(_){_&&U(e)}}}function At(t,e,n){let{top:o=0}=e,{left:l=0}=e,{size:i=0}=e;return t.$$set=r=>{"top"in r&&n(0,o=r.top),"left"in r&&n(1,l=r.left),"size"in r&&n(2,i=r.size)},[o,l,i]}class Ft extends te{constructor(e){super(),ee(this,e,At,Ot,j,{top:0,left:1,size:2})}}function Nt(t){let e,n,o,l,i;return{c(){e=I("div"),n=d("svg"),o=d("style"),l=W(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),i=d("polygon"),s(o,"id","style2"),s(i,"fill","#FFA300"),s(i,"stroke","#EB0000"),s(i,"stroke-width","0.25"),s(i,"stroke-miterlimit","10"),s(i,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),s(i,"class","red"),s(n,"viewBox","0 0 443.3 421.6"),s(e,"class","bonus svelte-y90akj"),m(e,"width",t[2]+"px"),m(e,"height",t[2]+"px"),m(e,"left",t[0]*t[2]+"px"),m(e,"top",t[1]*t[2]+"px")},m(r,c){R(r,e,c),f(e,n),f(n,o),f(o,l),f(n,i)},p(r,[c]){c&4&&m(e,"width",r[2]+"px"),c&4&&m(e,"height",r[2]+"px"),c&5&&m(e,"left",r[0]*r[2]+"px"),c&6&&m(e,"top",r[1]*r[2]+"px")},i:M,o:M,d(r){r&&U(e)}}}function Ct(t,e,n){const o=wt();let{left:l}=e,{top:i}=e,{size:r=0}=e,{id:c}=e;return ft(()=>{setTimeout(()=>{o("bonusFinished",c)},me.BONUS_TIME)}),t.$$set=a=>{"left"in a&&n(0,l=a.left),"top"in a&&n(1,i=a.top),"size"in a&&n(2,r=a.size),"id"in a&&n(3,c=a.id)},[l,i,r,c]}class Tt extends te{constructor(e){super(),ee(this,e,Ct,Nt,j,{left:0,top:1,size:2,id:3})}}function Bt(t){let e,n,o,l,i,r,c,a=t[0].playerName+"",u,p,g,S,G,h=t[0].score+"",w,b,_,y,O,T=t[0].food+"",D,k,F,C,Z,oe=t[0].bonus+"",ce,P,le,ne,X,fe=t[0].highScore+"",B,v,L,K,J,se=t[0].level+"",Le,Ge,ve=t[0].stage+"",we,Me,E,A,q,he,ye,Oe;return{c(){e=I("div"),n=I("div"),n.textContent="Snake",o=z(),l=I("table"),i=I("tr"),r=I("td"),r.textContent="Player",c=I("td"),u=W(a),p=z(),g=I("tr"),S=I("td"),S.textContent="Score",G=I("td"),w=W(h),b=z(),_=I("tr"),y=I("td"),y.textContent="Food",O=I("td"),D=W(T),k=z(),F=I("tr"),C=I("td"),C.textContent="Bonus",Z=I("td"),ce=W(oe),P=z(),le=I("tr"),ne=I("td"),ne.textContent="High Score",X=I("td"),B=W(fe),v=z(),L=I("tr"),K=I("td"),K.textContent="Level-Stage",J=I("td"),Le=W(se),Ge=I("span"),Ge.textContent="-",we=W(ve),Me=z(),E=I("div"),A=I("button"),A.textContent="Replay",q=z(),he=I("button"),he.textContent="Menu",s(n,"class","title svelte-mdywih"),s(r,"class","c1 svelte-mdywih"),s(c,"class","c2 svelte-mdywih"),s(S,"class","c1 svelte-mdywih"),s(G,"class","c2 svelte-mdywih"),s(y,"class","c1 svelte-mdywih"),s(O,"class","c2 svelte-mdywih"),s(C,"class","c1 svelte-mdywih"),s(Z,"class","c2 svelte-mdywih"),s(ne,"class","c1 svelte-mdywih"),s(X,"class","c2 svelte-mdywih"),s(K,"class","c1 svelte-mdywih"),s(J,"class","c2 svelte-mdywih"),s(l,"class","svelte-mdywih"),s(E,"class","flex svelte-mdywih"),s(e,"class","game-over-screen svelte-mdywih")},m(Y,ae){R(Y,e,ae),f(e,n),f(e,o),f(e,l),f(l,i),f(i,r),f(i,c),f(c,u),f(l,p),f(l,g),f(g,S),f(g,G),f(G,w),f(l,b),f(l,_),f(_,y),f(_,O),f(O,D),f(l,k),f(l,F),f(F,C),f(F,Z),f(Z,ce),f(l,P),f(l,le),f(le,ne),f(le,X),f(X,B),f(l,v),f(l,L),f(L,K),f(L,J),f(J,Le),f(J,Ge),f(J,we),f(e,Me),f(e,E),f(E,A),f(E,q),f(E,he),ye||(Oe=[_e(A,"click",t[2]),_e(he,"click",t[1])],ye=!0)},p(Y,[ae]){ae&1&&a!==(a=Y[0].playerName+"")&&Q(u,a),ae&1&&h!==(h=Y[0].score+"")&&Q(w,h),ae&1&&T!==(T=Y[0].food+"")&&Q(D,T),ae&1&&oe!==(oe=Y[0].bonus+"")&&Q(ce,oe),ae&1&&fe!==(fe=Y[0].highScore+"")&&Q(B,fe),ae&1&&se!==(se=Y[0].level+"")&&Q(Le,se),ae&1&&ve!==(ve=Y[0].stage+"")&&Q(we,ve)},i:M,o:M,d(Y){Y&&U(e),ye=!1,Ee(Oe)}}}function Dt(t,e,n){const o=()=>{console.log("restart game"),pe.welcomeScreen()},l=()=>{de.resetScore(),pe.startGame()};let i;return de.subscribe(r=>{n(0,i=r)}),[i,o,l]}class Mt extends te{constructor(e){super(),ee(this,e,Dt,Bt,j,{})}}const Ut=300,Rt=60,dt="none";function Ae(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function Ht(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function He(t,e,n,o,l){t.dispatchEvent(new CustomEvent(`${e}${l}`,{detail:{event:n,pointersCount:o.length}}))}function xt(t,e,n,o,l,i=dt){e.style.touchAction=i;let r=[];function c(u){r.push(u),He(e,t,u,r,"down"),o==null||o(r,u);const p=u.pointerId;function g(_){p===_.pointerId&&(r=Ht(_,r),r.length||S(),He(e,t,_,r,"up"),l==null||l(r,_))}function S(){G(),h(),w(),b()}const G=Ae(e,"pointermove",_=>{r=r.map(y=>_.pointerId===y.pointerId?_:y),He(e,t,_,r,"move"),n==null||n(r,_)}),h=Ae(e,"lostpointercapture",_=>{g(_)}),w=Ae(e,"pointerup",_=>{g(_)}),b=Ae(e,"pointerleave",_=>{r=[],S(),He(e,t,_,r,"up"),l==null||l(r,_)})}const a=Ae(e,"pointerdown",c);return{destroy:()=>{a()}}}function zt(t,e={timeframe:Ut,minSwipeDistance:Rt,touchAction:dt}){const n="swipe";let o,l,i,r;function c(u,p){l=p.clientX,i=p.clientY,o=Date.now(),u.length===1&&(r=p.target)}function a(u,p){if(p.type==="pointerup"&&u.length===0&&Date.now()-o<e.timeframe){const g=p.clientX-l,S=p.clientY-i,G=Math.abs(g),h=Math.abs(S);let w=null;G>=2*h&&G>e.minSwipeDistance?w=g>0?"right":"left":h>=2*G&&h>e.minSwipeDistance&&(w=S>0?"bottom":"top"),w&&t.dispatchEvent(new CustomEvent(n,{detail:{direction:w,target:r}}))}}return xt(n,t,null,c,a,e.touchAction)}function Je(t){let e;function n(i,r){return i[2]?Kt:i[3]?Pt:Vt}let o=n(t),l=o(t);return{c(){e=I("div"),l.c(),m(e,"left",t[1]+"px"),m(e,"top",t[0]+"px"),m(e,"width",N.BLOCK_SIZE+"px"),m(e,"height",N.BLOCK_SIZE+"px"),s(e,"class","snake-body svelte-kpsm61")},m(i,r){R(i,e,r),l.m(e,null)},p(i,r){o===(o=n(i))&&l?l.p(i,r):(l.d(1),l=o(i),l&&(l.c(),l.m(e,null))),r&2&&m(e,"left",i[1]+"px"),r&1&&m(e,"top",i[0]+"px")},d(i){i&&U(e),l.d()}}}function Vt(t){let e,n,o;return{c(){e=d("svg"),n=d("rect"),s(n,"y","77"),s(n,"fill","#0037FF"),s(n,"width","258"),s(n,"height","102"),s(e,"viewBox","0 0 258 258"),s(e,"class",o=Ie(t[4])+" svelte-kpsm61")},m(l,i){R(l,e,i),f(e,n)},p(l,i){i&16&&o!==(o=Ie(l[4])+" svelte-kpsm61")&&s(e,"class",o)},d(l){l&&U(e)}}}function Pt(t){let e,n,o;return{c(){e=d("svg"),n=d("polygon"),s(n,"fill","#0037FF"),s(n,"points","258,179 0,128 0,128 258,77 "),s(e,"viewBox","0 0 258 258"),s(e,"class",o=Ie(t[4])+" svelte-kpsm61")},m(l,i){R(l,e,i),f(e,n)},p(l,i){i&16&&o!==(o=Ie(l[4])+" svelte-kpsm61")&&s(e,"class",o)},d(l){l&&U(e)}}}function Kt(t){let e,n,o,l,i,r,c;return{c(){e=d("svg"),n=d("g"),o=d("rect"),l=d("path"),i=d("circle"),r=d("circle"),s(o,"opacity","0"),s(o,"fill","#FFFFFF"),s(o,"width","258"),s(o,"height","258"),s(l,"fill","#0037FF"),s(l,"d",`M147.5,29.2C111.6,29.2,80.1,48,62.6,77H0v104h62.6c17.5,28,49,47.3,84.9,47.3c55,0,99.6-44.6,99.6-99.6\r
          S202.5,29.2,147.5,29.2z`),s(i,"fill","#FFF800"),s(i,"stroke","#000000"),s(i,"stroke-miterlimit","10"),s(i,"cx","184.3"),s(i,"cy","84.5"),s(i,"r","21.8"),s(r,"fill","#FFF800"),s(r,"stroke","#000000"),s(r,"stroke-miterlimit","10"),s(r,"cx","184.3"),s(r,"cy","164.5"),s(r,"r","21.8"),s(e,"viewBox","0 0 258 258"),s(e,"class",c=Ie(t[4])+" svelte-kpsm61")},m(a,u){R(a,e,u),f(e,n),f(n,o),f(n,l),f(n,i),f(n,r)},p(a,u){u&16&&c!==(c=Ie(a[4])+" svelte-kpsm61")&&s(e,"class",c)},d(a){a&&U(e)}}}function Wt(t){let e,n=t[0]>=0&&t[0]<N.SCREEN_HEIGHT&&t[1]>=0&&t[1]<N.SCREEN_WIDTH&&Je(t);return{c(){n&&n.c(),e=Pe()},m(o,l){n&&n.m(o,l),R(o,e,l)},p(o,[l]){o[0]>=0&&o[0]<N.SCREEN_HEIGHT&&o[1]>=0&&o[1]<N.SCREEN_WIDTH?n?n.p(o,l):(n=Je(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:M,o:M,d(o){n&&n.d(o),o&&U(e)}}}function Zt(t,e,n){let{top:o=N.BLOCK_SIZE}=e,{left:l=N.BLOCK_SIZE}=e,{isHead:i=!1}=e,{isTail:r=!1}=e,{direction:c="right"}=e;return t.$$set=a=>{"top"in a&&n(0,o=a.top),"left"in a&&n(1,l=a.left),"isHead"in a&&n(2,i=a.isHead),"isTail"in a&&n(3,r=a.isTail),"direction"in a&&n(4,c=a.direction)},[o,l,i,r,c]}class Xt extends te{constructor(e){super(),ee(this,e,Zt,Wt,j,{top:0,left:1,isHead:2,isTail:3,direction:4})}}function Qe(t,e,n){const o=t.slice();return o[2]=e[n],o[4]=n,o}function et(t){let e,n;return e=new Xt({props:{isHead:t[4]==0,isTail:t[4]==t[0].length-1,top:t[2].top,left:t[2].left,direction:t[1]}}),{c(){ue(e.$$.fragment)},m(o,l){re(e,o,l),n=!0},p(o,l){const i={};l&1&&(i.isTail=o[4]==o[0].length-1),l&1&&(i.top=o[2].top),l&1&&(i.left=o[2].left),l&2&&(i.direction=o[1]),e.$set(i)},i(o){n||(x(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){ie(e,o)}}}function qt(t){let e,n,o=t[0],l=[];for(let r=0;r<o.length;r+=1)l[r]=et(Qe(t,o,r));const i=r=>V(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=Pe()},m(r,c){for(let a=0;a<l.length;a+=1)l[a].m(r,c);R(r,e,c),n=!0},p(r,[c]){if(c&3){o=r[0];let a;for(a=0;a<o.length;a+=1){const u=Qe(r,o,a);l[a]?(l[a].p(u,c),x(l[a],1)):(l[a]=et(u),l[a].c(),x(l[a],1),l[a].m(e.parentNode,e))}for(Be(),a=o.length;a<l.length;a+=1)i(a);De()}},i(r){if(!n){for(let c=0;c<o.length;c+=1)x(l[c]);n=!0}},o(r){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)V(l[c]);n=!1},d(r){ct(l,r),r&&U(e)}}}function $t(t,e,n){let{snakeBodies:o=[]}=e,{direction:l="right"}=e;return t.$$set=i=>{"snakeBodies"in i&&n(0,o=i.snakeBodies),"direction"in i&&n(1,l=i.direction)},[o,l]}class Yt extends te{constructor(e){super(),ee(this,e,$t,qt,j,{snakeBodies:0,direction:1})}}var Xe=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(Xe||{});const ke=[{bg:"#affbaf",wall:[{type:0,top:2,left:2},{type:1,top:2,left:3},{type:1,top:2,left:4},{type:0,top:2,left:5},{type:2,top:1,left:3},{type:2,top:3,left:4}]},{bg:"#fda2f2",wall:[{type:0,top:200,left:100},{type:1,top:200,left:125},{type:1,top:200,left:150},{type:0,top:200,left:175},{type:2,top:175,left:125},{type:2,top:225,left:150}]},{bg:"#7f61bb",wall:[]},{bg:"#c34366",wall:[]}],jt=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);function Jt(t){let e,n,o;return{c(){e=I("div"),n=I("h1"),o=W(t[0]),s(n,"class","svelte-1x8upsq"),s(e,"class","message-box svelte-1x8upsq")},m(l,i){R(l,e,i),f(e,n),f(n,o)},p(l,[i]){i&1&&Q(o,l[0])},i:M,o:M,d(l){l&&U(e)}}}function Qt(t,e,n){let{message:o=""}=e;return t.$$set=l=>{"message"in l&&n(0,o=l.message)},[o]}class en extends te{constructor(e){super(),ee(this,e,Qt,Jt,j,{message:0})}}function tn(t){let e,n,o,l,i,r,c,a,u;return{c(){e=d("svg"),n=d("radialGradient"),o=d("stop"),l=d("stop"),i=d("rect"),r=d("linearGradient"),c=d("stop"),a=d("stop"),u=d("rect"),s(o,"offset","0"),m(o,"stop-color","#333333"),s(l,"offset","1"),m(l,"stop-color","#000000"),s(n,"id","rock_svgid"),s(n,"cx","219.5"),s(n,"cy","219.5"),s(n,"r","219"),s(n,"gradientUnits","userSpaceOnUse"),s(i,"x","0.5"),s(i,"y","0.5"),s(i,"fill","url(#rock_svgid)"),s(i,"stroke","#000000"),s(i,"stroke-miterlimit","10"),s(i,"width","438"),s(i,"height","438"),s(c,"offset","0"),m(c,"stop-color","#000000"),m(c,"stop-opacity","0"),s(a,"offset","1"),m(a,"stop-color","#FFFFFF"),m(a,"stop-opacity","0.5"),s(r,"id","rock_svgid2"),s(r,"gradientUnits","userSpaceOnUse"),s(r,"x1","219"),s(r,"y1","431"),s(r,"x2","219"),s(r,"y2","9.0005"),s(u,"x","8"),s(u,"y","9"),s(u,"fill","url(#rock_svgid2)"),s(u,"width","422"),s(u,"height","422"),s(e,"viewBox","0 0 439 439")},m(p,g){R(p,e,g),f(e,n),f(n,o),f(n,l),f(e,i),f(e,r),f(r,c),f(r,a),f(e,u)},d(p){p&&U(e)}}}function nn(t){let e,n,o,l,i,r,c,a,u,p,g,S,G,h,w,b,_,y,O,T,D,k;return{c(){e=d("svg"),n=d("g"),o=d("linearGradient"),l=d("stop"),i=d("stop"),r=d("rect"),c=d("linearGradient"),a=d("stop"),u=d("stop"),p=d("rect"),g=d("linearGradient"),S=d("stop"),G=d("stop"),h=d("polygon"),w=d("linearGradient"),b=d("stop"),_=d("stop"),y=d("rect"),O=d("linearGradient"),T=d("stop"),D=d("stop"),k=d("rect"),s(l,"offset","0"),m(l,"stop-color","#998675"),s(i,"offset","1"),m(i,"stop-color","#C7B299"),s(o,"id","concrete_SVGID_1_"),s(o,"gradientUnits","userSpaceOnUse"),s(o,"x1","4"),s(o,"y1","96.5"),s(o,"x2","281"),s(o,"y2","96.5"),s(r,"x","4"),s(r,"y","4"),s(r,"fill","url(#concrete_SVGID_1_)"),s(r,"stroke","#CABD99"),s(r,"stroke-width","8"),s(r,"stroke-miterlimit","10"),s(r,"width","277"),s(r,"height","185"),s(a,"offset","0"),m(a,"stop-color","#998675"),s(u,"offset","1"),m(u,"stop-color","#C7B299"),s(c,"id","concrete_SVGID_2_"),s(c,"gradientUnits","userSpaceOnUse"),s(c,"x1","420"),s(c,"y1","189"),s(c,"x2","420"),s(c,"y2","4"),s(p,"x","281"),s(p,"y","4"),s(p,"fill","url(#concrete_SVGID_2_)"),s(p,"stroke","#CABD99"),s(p,"stroke-width","8"),s(p,"stroke-miterlimit","10"),s(p,"width","278"),s(p,"height","185"),s(S,"offset","0"),m(S,"stop-color","#998675"),s(G,"offset","1"),m(G,"stop-color","#C7B299"),s(g,"id","concrete_SVGID_3_"),s(g,"gradientUnits","userSpaceOnUse"),s(g,"x1","281.5"),s(g,"y1","374"),s(g,"x2","281.5"),s(g,"y2","189.0005"),s(h,"fill","url(#concrete_SVGID_3_)"),s(h,"stroke","#CABD99"),s(h,"stroke-width","8"),s(h,"stroke-miterlimit","10"),s(h,"points",`281,189 4,189 4,374 281,374 \r
    559,374 559,189 	`),s(b,"offset","0"),m(b,"stop-color","#998675"),s(_,"offset","1"),m(_,"stop-color","#C7B299"),s(w,"id","concrete_SVGID_4_"),s(w,"gradientUnits","userSpaceOnUse"),s(w,"x1","4"),s(w,"y1","466.5"),s(w,"x2","281"),s(w,"y2","466.5"),s(y,"x","4"),s(y,"y","374"),s(y,"fill","url(#concrete_SVGID_4_)"),s(y,"stroke","#CABD99"),s(y,"stroke-width","8"),s(y,"stroke-miterlimit","10"),s(y,"width","277"),s(y,"height","185"),s(T,"offset","0"),m(T,"stop-color","#998675"),s(D,"offset","1"),m(D,"stop-color","#C7B299"),s(O,"id","concrete_SVGID_5_"),s(O,"gradientUnits","userSpaceOnUse"),s(O,"x1","281"),s(O,"y1","466.5"),s(O,"x2","559"),s(O,"y2","466.5"),s(k,"x","281"),s(k,"y","374"),s(k,"fill","url(#concrete_SVGID_5_)"),s(k,"stroke","#CABD99"),s(k,"stroke-width","8"),s(k,"stroke-miterlimit","10"),s(k,"width","278"),s(k,"height","185"),s(e,"viewBox","0 0 563 563")},m(F,C){R(F,e,C),f(e,n),f(n,o),f(o,l),f(o,i),f(n,r),f(n,c),f(c,a),f(c,u),f(n,p),f(n,g),f(g,S),f(g,G),f(n,h),f(n,w),f(w,b),f(w,_),f(n,y),f(n,O),f(O,T),f(O,D),f(n,k)},d(F){F&&U(e)}}}function sn(t){let e,n,o,l,i,r,c,a,u,p,g,S,G,h,w,b,_,y,O,T,D,k;return{c(){e=d("svg"),n=d("g"),o=d("linearGradient"),l=d("stop"),i=d("stop"),r=d("rect"),c=d("linearGradient"),a=d("stop"),u=d("stop"),p=d("rect"),g=d("linearGradient"),S=d("stop"),G=d("stop"),h=d("polygon"),w=d("linearGradient"),b=d("stop"),_=d("stop"),y=d("rect"),O=d("linearGradient"),T=d("stop"),D=d("stop"),k=d("rect"),s(l,"offset","0"),m(l,"stop-color","#9E2000"),s(i,"offset","1"),m(i,"stop-color","#F15A24"),s(o,"id","brick_SVGID_1_"),s(o,"gradientUnits","userSpaceOnUse"),s(o,"x1","4"),s(o,"y1","96.5"),s(o,"x2","281"),s(o,"y2","96.5"),s(r,"x","4"),s(r,"y","4"),s(r,"fill","url(#brick_SVGID_1_)"),s(r,"stroke","#000000"),s(r,"stroke-width","8"),s(r,"stroke-miterlimit","10"),s(r,"width","277"),s(r,"height","185"),s(a,"offset","0"),m(a,"stop-color","#9E2000"),s(u,"offset","1"),m(u,"stop-color","#F15A24"),s(c,"id","SVGID_2_"),s(c,"gradientUnits","userSpaceOnUse"),s(c,"x1","420"),s(c,"y1","189"),s(c,"x2","420"),s(c,"y2","4"),s(p,"x","281"),s(p,"y","4"),s(p,"fill","url(#SVGID_2_)"),s(p,"stroke","#000000"),s(p,"stroke-width","8"),s(p,"stroke-miterlimit","10"),s(p,"width","278"),s(p,"height","185"),s(S,"offset","0"),m(S,"stop-color","#9E2000"),s(G,"offset","1"),m(G,"stop-color","#F15A24"),s(g,"id","SVGID_3_"),s(g,"gradientUnits","userSpaceOnUse"),s(g,"x1","281.5"),s(g,"y1","374"),s(g,"x2","281.5"),s(g,"y2","189.0005"),s(h,"fill","url(#SVGID_3_)"),s(h,"stroke","#000000"),s(h,"stroke-width","8"),s(h,"stroke-miterlimit","10"),s(h,"points",`281,189 4,189 4,374 281,374 \r
            559,374 559,189 	`),s(b,"offset","0"),m(b,"stop-color","#9E2000"),s(_,"offset","1"),m(_,"stop-color","#F15A24"),s(w,"id","SVGID_4_"),s(w,"gradientUnits","userSpaceOnUse"),s(w,"x1","4"),s(w,"y1","466.5"),s(w,"x2","281"),s(w,"y2","466.5"),s(y,"x","4"),s(y,"y","374"),s(y,"fill","url(#SVGID_4_)"),s(y,"stroke","#000000"),s(y,"stroke-width","8"),s(y,"stroke-miterlimit","10"),s(y,"width","277"),s(y,"height","185"),s(T,"offset","0"),m(T,"stop-color","#9E2000"),s(D,"offset","1"),m(D,"stop-color","#F15A24"),s(O,"id","SVGID_5_"),s(O,"gradientUnits","userSpaceOnUse"),s(O,"x1","281"),s(O,"y1","466.5"),s(O,"x2","559"),s(O,"y2","466.5"),s(k,"x","281"),s(k,"y","374"),s(k,"fill","url(#SVGID_5_)"),s(k,"stroke","#000000"),s(k,"stroke-width","8"),s(k,"stroke-miterlimit","10"),s(k,"width","278"),s(k,"height","185"),s(e,"viewBox","0 0 563 563")},m(F,C){R(F,e,C),f(e,n),f(n,o),f(o,l),f(o,i),f(n,r),f(n,c),f(c,a),f(c,u),f(n,p),f(n,g),f(g,S),f(g,G),f(n,h),f(n,w),f(w,b),f(w,_),f(n,y),f(n,O),f(O,T),f(O,D),f(n,k)},d(F){F&&U(e)}}}function on(t){let e;function n(i,r){return i[1].type==Xe.DEFAULT?sn:i[1].type==Xe.CONCRETE?nn:tn}let o=n(t),l=o(t);return{c(){e=I("div"),l.c(),s(e,"class","brick svelte-1ezhfpr"),m(e,"top",t[1].top*t[0]+"px"),m(e,"left",t[1].left*t[0]+"px"),m(e,"width",t[0]+"px"),m(e,"height",t[0]+"px")},m(i,r){R(i,e,r),l.m(e,null)},p(i,[r]){o!==(o=n(i))&&(l.d(1),l=o(i),l&&(l.c(),l.m(e,null))),r&3&&m(e,"top",i[1].top*i[0]+"px"),r&3&&m(e,"left",i[1].left*i[0]+"px"),r&1&&m(e,"width",i[0]+"px"),r&1&&m(e,"height",i[0]+"px")},i:M,o:M,d(i){i&&U(e),l.d()}}}function ln(t,e,n){let{size:o=0}=e,{data:l}=e;return t.$$set=i=>{"size"in i&&n(0,o=i.size),"data"in i&&n(1,l=i.data)},[o,l]}class rn extends te{constructor(e){super(),ee(this,e,ln,on,j,{size:0,data:1})}}function tt(t,e,n){const o=t.slice();return o[3]=e[n],o}function nt(t){let e,n;return e=new rn({props:{data:t[3],size:t[0]}}),{c(){ue(e.$$.fragment)},m(o,l){re(e,o,l),n=!0},p(o,l){const i={};l&2&&(i.data=o[3]),l&1&&(i.size=o[0]),e.$set(i)},i(o){n||(x(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){ie(e,o)}}}function cn(t){let e,n,o=t[1],l=[];for(let r=0;r<o.length;r+=1)l[r]=nt(tt(t,o,r));const i=r=>V(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=Pe()},m(r,c){for(let a=0;a<l.length;a+=1)l[a].m(r,c);R(r,e,c),n=!0},p(r,[c]){if(c&3){o=r[1];let a;for(a=0;a<o.length;a+=1){const u=tt(r,o,a);l[a]?(l[a].p(u,c),x(l[a],1)):(l[a]=nt(u),l[a].c(),x(l[a],1),l[a].m(e.parentNode,e))}for(Be(),a=o.length;a<l.length;a+=1)i(a);De()}},i(r){if(!n){for(let c=0;c<o.length;c+=1)x(l[c]);n=!0}},o(r){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)V(l[c]);n=!1},d(r){ct(l,r),r&&U(e)}}}function fn(t,e,n){let o,{size:l=0}=e,i;return de.subscribe(r=>{n(2,i=r)}),t.$$set=r=>{"size"in r&&n(0,l=r.size)},t.$$.update=()=>{t.$$.dirty&4&&n(1,o=ke[i.level-1].wall)},[l,o,i]}class an extends te{constructor(e){super(),ee(this,e,fn,cn,j,{size:0})}}function st(t,e,n){const o=t.slice();return o[45]=e[n],o}function ot(t,e){let n,o,l;return o=new Tt({props:{id:e[45].id,left:e[45].left,top:e[45].top,size:e[7]}}),o.$on("bonusFinished",e[15]),{key:t,first:null,c(){n=Pe(),ue(o.$$.fragment),this.first=n},m(i,r){R(i,n,r),re(o,i,r),l=!0},p(i,r){e=i;const c={};r[0]&4096&&(c.id=e[45].id),r[0]&4096&&(c.left=e[45].left),r[0]&4096&&(c.top=e[45].top),r[0]&128&&(c.size=e[7]),o.$set(c)},i(i){l||(x(o.$$.fragment,i),l=!0)},o(i){V(o.$$.fragment,i),l=!1},d(i){i&&U(n),ie(o,i)}}}function lt(t){let e,n;return e=new en({props:{message:t[6]}}),{c(){ue(e.$$.fragment)},m(o,l){re(e,o,l),n=!0},p(o,l){const i={};l[0]&64&&(i.message=o[6]),e.$set(i)},i(o){n||(x(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){ie(e,o)}}}function un(t){let e,n,o,l,i,r,c,a,u=[],p=new Map,g,S,G,h,w,b=t[3].level+"",_,y,O=t[3].score+"",T,D,k,F=t[3].bonus+"",C,Z,oe,ce,P,le,ne;o=new an({props:{size:t[7]}}),i=new Yt({props:{direction:t[10],snakeBodies:t[11]}}),c=new Ft({props:{left:t[8],top:t[9],size:t[7]}});let X=t[12];const fe=v=>v[45].id;for(let v=0;v<X.length;v+=1){let L=st(t,X,v),K=fe(L);p.set(K,u[v]=ot(K,L))}let B=t[5]==!0&&lt(t);return{c(){e=I("div"),n=I("main"),ue(o.$$.fragment),l=z(),ue(i.$$.fragment),r=z(),ue(c.$$.fragment),a=z();for(let v=0;v<u.length;v+=1)u[v].c();g=z(),B&&B.c(),G=z(),h=I("div"),w=I("div"),_=W(b),y=W(" : "),T=W(O),D=z(),k=I("div"),C=W(F),Z=z(),oe=I("div"),ce=W(t[4]),m(n,"width",t[2]+"px"),m(n,"height",t[2]+"px"),m(n,"background",ke[t[3].level].bg),s(n,"class","svelte-xm6tpe"),s(e,"class","wrap svelte-xm6tpe"),Ve(()=>t[16].call(e)),s(h,"class","score svelte-xm6tpe")},m(v,L){R(v,e,L),f(e,n),re(o,n,null),f(n,l),re(i,n,null),f(n,r),re(c,n,null),f(n,a);for(let K=0;K<u.length;K+=1)u[K].m(n,null);f(n,g),B&&B.m(n,null),S=gt(e,t[16].bind(e)),R(v,G,L),R(v,h,L),f(h,w),f(w,_),f(w,y),f(w,T),f(h,D),f(h,k),f(k,C),f(h,Z),f(h,oe),f(oe,ce),P=!0,le||(ne=[_e(window,"keydown",t[14]),_t(zt.call(null,n,{timeframe:300,minSwipeDistance:60,touchAction:"none"})),_e(n,"swipe",t[13])],le=!0)},p(v,L){const K={};L[0]&128&&(K.size=v[7]),o.$set(K);const J={};L[0]&1024&&(J.direction=v[10]),L[0]&2048&&(J.snakeBodies=v[11]),i.$set(J);const se={};L[0]&256&&(se.left=v[8]),L[0]&512&&(se.top=v[9]),L[0]&128&&(se.size=v[7]),c.$set(se),L[0]&36992&&(X=v[12],Be(),u=It(u,L,fe,1,v,X,p,n,kt,ot,g,st),De()),v[5]==!0?B?(B.p(v,L),L[0]&32&&x(B,1)):(B=lt(v),B.c(),x(B,1),B.m(n,null)):B&&(Be(),V(B,1,1,()=>{B=null}),De()),(!P||L[0]&4)&&m(n,"width",v[2]+"px"),(!P||L[0]&4)&&m(n,"height",v[2]+"px"),(!P||L[0]&8)&&m(n,"background",ke[v[3].level].bg),(!P||L[0]&8)&&b!==(b=v[3].level+"")&&Q(_,b),(!P||L[0]&8)&&O!==(O=v[3].score+"")&&Q(T,O),(!P||L[0]&8)&&F!==(F=v[3].bonus+"")&&Q(C,F),(!P||L[0]&16)&&Q(ce,v[4])},i(v){if(!P){x(o.$$.fragment,v),x(i.$$.fragment,v),x(c.$$.fragment,v);for(let L=0;L<X.length;L+=1)x(u[L]);x(B),P=!0}},o(v){V(o.$$.fragment,v),V(i.$$.fragment,v),V(c.$$.fragment,v);for(let L=0;L<u.length;L+=1)V(u[L]);V(B),P=!1},d(v){v&&U(e),ie(o),ie(i),ie(c);for(let L=0;L<u.length;L+=1)u[L].d();B&&B.d(),S(),v&&U(G),v&&U(h),le=!1,Ee(ne)}}}function dn(t,e,n){let o,l=!1,i=!1,r=Ne.NEXT_LEVEL,c=!1,a,u,p=0,g=0;ft(()=>{console.log(`--onMount = ${N.BLOCK_SIZE} ${p}`)}),vt(()=>{console.log(`--afterUpdate = ${N.BLOCK_SIZE} ${p}`)});let S;pe.subscribe(E=>{}),de.subscribe(E=>{n(3,S=E)});const G=()=>{F(Ne.GAME_OVER),clearInterval(O),setTimeout(()=>{C(),v(),pe.gameOver()},me.MESSAGE_TIME)};let h=0,w=0,b=H.RIGHT,_=[],y=[],O;const T=N.SCREEN_WIDTH,D=N.SCREEN_HEIGHT;function k(E){n(4,o=E.detail.direction),E.detail.target}const F=E=>{n(6,r=E),n(5,i=!0)},C=()=>{n(5,i=!1),n(6,r=Ne.GAME_OVER)},Z=()=>{F(Ne.NEXT_LEVEL),clearInterval(O),setTimeout(()=>{C(),de.nextLevel(),de.resetScore(),ne(),v()},me.MESSAGE_TIME)},oe=E=>{y.forEach(A=>{X(E,A)&&(we(A.id),de.getBonus())})},ce=()=>{_.length/me.MAX_POINTS>1&&_.length%me.MAX_POINTS==0&&(S.level<ke.length-1?Z():(clearInterval(O),pe.allLevelsCleared()))},P=()=>{let{left:E,top:A}=_[0];return b===H.UP?A-=N.BLOCK_SIZE:b===H.DOWN?A+=N.BLOCK_SIZE:b===H.LEFT?E-=N.BLOCK_SIZE:b===H.RIGHT&&(E+=N.BLOCK_SIZE),{left:E,top:A}},le=E=>{X(E,{left:h,top:w})&&(n(11,_=[..._,_[_.length-1]]),de.eatFood(),B(),S.food%5==0&&ve())},ne=()=>{let E=ke.length-S.level;E=E*me.DELAY,O=setInterval(()=>{c=!0,K()&&(c=!1,G()),L();const A=P();oe(A),_.pop(),n(11,_=[A,..._]),le(A),ce(),c=!1},E)},X=(E,A)=>!(E.top<A.top||E.top>A.top||E.left<A.left||E.left>A.left),fe=()=>{let E=0,A=0,q={top:E,left:A};const he=Math.floor(D/N.BLOCK_SIZE),ye=Math.floor(T/N.BLOCK_SIZE);console.log(ye,he),E=Math.floor(Math.random()*he)*N.BLOCK_SIZE,A=Math.floor(Math.random()*ye)*N.BLOCK_SIZE,q={top:E,left:A},console.log("162",q);const Oe=[];return _.forEach(Y=>{Oe.push(Y)}),console.log(Oe),q},B=()=>{const{top:E,left:A}=fe();n(8,h=A),n(9,w=E)},v=()=>{B(),n(10,b=H.RIGHT),n(11,_=[{left:N.BLOCK_SIZE*2,top:0},{left:N.BLOCK_SIZE,top:0},{left:0,top:0}])},L=()=>{const{top:E,left:A}=_[0];A>=T&&b==H.RIGHT&&n(11,_[0].left=-2*N.BLOCK_SIZE,_),A<0&&b==H.LEFT&&n(11,_[0].left=T+N.BLOCK_SIZE,_),E<0&&b==H.UP&&n(11,_[0].top=D+N.BLOCK_SIZE,_),E>=D&&b==H.DOWN&&n(11,_[0].top=-2*N.BLOCK_SIZE,_)},K=()=>_.slice(1).filter(q=>X(q,_[0])).length>0,J=()=>{clearInterval(O)},se=E=>E===be.UP&&b!=H.DOWN?H.UP:E===be.RIGHT&&b!=H.LEFT?H.RIGHT:E===be.LEFT&&b!=H.RIGHT?H.LEFT:E===be.DOWN&&b!=H.UP?H.DOWN:H.UNKNOWN,Le=E=>{if(c)return;const A=E.code;if(A===be.SPACEBAR&&(l=!l,l?J():ne()),l)return;const q=se(A);q!=H.UNKNOWN&&n(10,b=q)},Ge=E=>{we(E.detail)},ve=()=>{const E=jt();let A={top:0,left:0,id:E};A.top=Math.floor(Math.random()*(p/g)),A.left=Math.floor(Math.random()*(p/g)),y.push(A),n(12,y)},we=E=>{const A=y.findIndex(q=>q.id==E);A!=-1&&(y.splice(A,1),n(12,y))};ne(),v();function Me(){a=this.clientWidth,u=this.clientHeight,n(0,a),n(1,u)}return t.$$.update=()=>{t.$$.dirty[0]&7&&(n(2,p=Math.min(a,u)),console.log(`--reactive = ${N.BLOCK_SIZE} ${p}`),isNaN(p)||n(7,g=p/20)),t.$$.dirty[0]&8&&ke[S.level-1].wall},[a,u,p,S,o,i,r,g,h,w,b,_,y,k,Le,Ge,Me]}class We extends te{constructor(e){super(),ee(this,e,dn,un,j,{},null,[-1,-1])}}function pn(t){let e,n,o,l,i,r,c;return{c(){e=I("div"),n=I("div"),n.textContent="Snake",o=z(),l=I("div"),i=I("button"),i.textContent="Start",s(n,"class","title svelte-yxm8be"),s(l,"class","btn svelte-yxm8be"),s(e,"class","start-screen svelte-yxm8be")},m(a,u){R(a,e,u),f(e,n),f(e,o),f(e,l),f(l,i),r||(c=_e(i,"click",t[0]),r=!0)},p:M,i:M,o:M,d(a){a&&U(e),r=!1,c()}}}function _n(t){return[()=>{console.log("start game"),pe.startGame()}]}class hn extends te{constructor(e){super(),ee(this,e,_n,pn,j,{})}}function mn(t){let e,n,o,l,i,r,c,a;return{c(){e=I("div"),n=I("div"),n.textContent="Congratulations !",o=z(),l=I("div"),l.textContent="You have cleared all the levels.",i=z(),r=I("button"),r.textContent="Menu",s(n,"class","title svelte-gyhhqq"),s(e,"class","final svelte-gyhhqq")},m(u,p){R(u,e,p),f(e,n),f(e,o),f(e,l),f(e,i),f(e,r),c||(a=_e(r,"click",t[0]),c=!0)},p:M,i:M,o:M,d(u){u&&U(e),c=!1,a()}}}function gn(t){return[()=>{console.log("restart game"),pe.welcomeScreen()}]}class En extends te{constructor(e){super(),ee(this,e,gn,mn,j,{})}}var $=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))($||{});const vn=()=>{const t=[{status:$.NOT_STARTED,component:hn},{status:$.RUNNING,component:We},{status:$.PAUSED,component:We},{status:$.RESUME,component:We},{status:$.GAME_OVER,component:Mt},{status:$.ALL_LEVELS_CLEARED,component:En}];let{update:e,subscribe:n}=ut(t.find(u=>u.status==$.NOT_STARTED));return{subscribe:n,startGame:()=>{e(u=>(u=t.find(p=>p.status==$.RUNNING),u))},pauseGame:()=>{e(u=>(u=t.find(p=>p.status==$.PAUSED),u))},resumeGame:()=>{e(u=>(u=t.find(p=>p.status==$.RUNNING),u))},gameOver:()=>{e(u=>(u=t.find(p=>p.status==$.GAME_OVER),u))},welcomeScreen:()=>{e(u=>(u=t.find(p=>p.status==$.NOT_STARTED),u))},allLevelsCleared:()=>{e(u=>(u=t.find(p=>p.status==$.ALL_LEVELS_CLEARED),u))}}},pe=vn();function wn(t){let e,n,o;var l=t[0].component;function i(r){return{}}return l&&(n=new l(i())),{c(){e=I("div"),n&&ue(n.$$.fragment),s(e,"class","container svelte-14qi9mb")},m(r,c){R(r,e,c),n&&re(n,e,null),o=!0},p(r,[c]){if(l!==(l=r[0].component)){if(n){Be();const a=n;V(a.$$.fragment,1,0,()=>{ie(a,1)}),De()}l?(n=new l(i()),ue(n.$$.fragment),x(n.$$.fragment,1),re(n,e,null)):n=null}},i(r){o||(n&&x(n.$$.fragment,r),o=!0)},o(r){n&&V(n.$$.fragment,r),o=!1},d(r){r&&U(e),n&&ie(n)}}}function yn(t,e,n){let o;return pe.subscribe(l=>{n(0,o=l)}),[o]}class Sn extends te{constructor(e){super(),ee(this,e,yn,wn,j,{})}}new Sn({target:document.getElementById("app")});
