(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function T(){}function pt(t){return t()}function Je(){return Object.create(null)}function ye(t){t.forEach(pt)}function _t(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function wt(t){return Object.keys(t).length===0}function ke(t){return t==null?"":t}function St(t){return t&&_t(t.destroy)?t.destroy:T}function f(t,e){t.appendChild(e)}function x(t,e,n){t.insertBefore(e,n||null)}function B(t){t.parentNode.removeChild(t)}function ht(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function j(t){return document.createTextNode(t)}function X(){return j(" ")}function Te(){return j("")}function he(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function l(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function kt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Nt(t){return Array.from(t.childNodes)}function se(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e,n,o){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}let Ce;function Ft(){if(Ce===void 0){Ce=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ce=!0}}return Ce}function It(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const o=k("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const s=Ft();let r;return s?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=he(window,"message",i=>{i.source===o.contentWindow&&e()})):(o.src="about:blank",o.onload=()=>{r=he(o.contentWindow,"resize",e)}),f(t,o),()=>{(s||r&&o.contentWindow)&&r(),B(o)}}function Ot(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,o,e),s}let Le;function De(t){Le=t}function gt(){if(!Le)throw new Error("Function called outside component initialization");return Le}function Xe(t){gt().$$.on_mount.push(t)}function At(){const t=gt();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=Ot(e,n,{cancelable:o});return s.slice().forEach(i=>{i.call(t,r)}),!r.defaultPrevented}return!0}}const Ae=[],$e=[],Me=[],Qe=[],Gt=Promise.resolve();let We=!1;function Dt(){We||(We=!0,Gt.then(mt))}function Pe(t){Me.push(t)}const Ve=new Set;let Ue=0;function mt(){const t=Le;do{for(;Ue<Ae.length;){const e=Ae[Ue];Ue++,De(e),Lt(e.$$)}for(De(null),Ae.length=0,Ue=0;$e.length;)$e.pop()();for(let e=0;e<Me.length;e+=1){const n=Me[e];Ve.has(n)||(Ve.add(n),n())}Me.length=0}while(Ae.length);for(;Qe.length;)Qe.pop()();We=!1,Ve.clear(),De(t)}function Lt(t){if(t.fragment!==null){t.update(),ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Pe)}}const ze=new Set;let me;function we(){me={r:0,c:[],p:me}}function Se(){me.r||ye(me.c),me=me.p}function M(t,e){t&&t.i&&(ze.delete(t),t.i(e))}function $(t,e,n,o){if(t&&t.o){if(ze.has(t))return;ze.add(t),me.c.push(()=>{ze.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function et(t,e){$(t,1,1,()=>{e.delete(t.key)})}function tt(t,e,n,o,s,r,i,c,a,u,p,d){let g=t.length,m=r.length,_=g;const S={};for(;_--;)S[t[_].key]=_;const A=[],w=new Map,F=new Map;for(_=m;_--;){const N=d(s,r,_),D=n(N);let L=i.get(D);L?o&&L.p(N,e):(L=u(D,N),L.c()),w.set(D,A[_]=L),D in S&&F.set(D,Math.abs(_-S[D]))}const R=new Set,H=new Set;function W(N){M(N,1),N.m(c,p),i.set(N.key,N),p=N.first,m--}for(;g&&m;){const N=A[m-1],D=t[g-1],L=N.key,C=D.key;N===D?(p=N.first,g--,m--):w.has(C)?!i.has(L)||R.has(L)?W(N):H.has(C)?g--:F.get(L)>F.get(C)?(H.add(L),W(N)):(R.add(C),g--):(a(D,i),g--)}for(;g--;){const N=t[g];w.has(N.key)||a(N,i)}for(;m;)W(A[m-1]);return A}function ue(t){t&&t.c()}function le(t,e,n,o){const{fragment:s,on_mount:r,on_destroy:i,after_update:c}=t.$$;s&&s.m(e,n),o||Pe(()=>{const a=r.map(pt).filter(_t);i?i.push(...a):ye(a),t.$$.on_mount=[]}),c.forEach(Pe)}function re(t,e){const n=t.$$;n.fragment!==null&&(ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Tt(t,e){t.$$.dirty[0]===-1&&(Ae.push(t),Dt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(t,e,n,o,s,r,i,c=[-1]){const a=Le;De(t);const u=t.$$={fragment:null,ctx:null,props:r,update:T,not_equal:s,bound:Je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Je(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};i&&i(u.root);let p=!1;if(u.ctx=n?n(t,e.props||{},(d,g,...m)=>{const _=m.length?m[0]:g;return u.ctx&&s(u.ctx[d],u.ctx[d]=_)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](_),p&&Tt(t,d)),g}):[],u.update(),p=!0,ye(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const d=Nt(e.target);u.fragment&&u.fragment.l(d),d.forEach(B)}else u.fragment&&u.fragment.c();e.intro&&M(t.$$.fragment),le(t,e.target,e.anchor,e.customElement),mt()}De(a)}class ee{$destroy(){re(this,1),this.$destroy=T}$on(e,n){const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(e){this.$$set&&!wt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var O=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(O||{}),P=(t=>(t[t.SNAKE_SPEED=200]="SNAKE_SPEED",t[t.MAXIMUM_POINT_COUNT=25]="MAXIMUM_POINT_COUNT",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t[t.GRID_COUNT=20]="GRID_COUNT",t[t.GRID_PADDING=50]="GRID_PADDING",t[t.GRID_MAX_SIZE=500]="GRID_MAX_SIZE",t))(P||{}),Ee=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(Ee||{}),Ge=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(Ge||{});const ve=[];function je(t,e=T){let n;const o=new Set;function s(c){if(q(t,c)&&(t=c,n)){const a=!ve.length;for(const u of o)u[1](),ve.push(u,t);if(a){for(let u=0;u<ve.length;u+=2)ve[u][0](ve[u+1]);ve.length=0}}}function r(c){s(c(t))}function i(c,a=T){const u=[c,a];return o.add(u),o.size===1&&(n=e(s)||T),c(t),()=>{o.delete(u),o.size===0&&(n(),n=null)}}return{set:s,update:r,subscribe:i}}const Rt=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=je(t);return{subscribe:n,resetScore:()=>{e(c=>(c.food=0,c.bonus=0,c.score=0,c))},eatFood:()=>{e(c=>(c.food=c.food+1,c.score=c.food*5+c.bonus*20,c.score>c.highScore&&(c.highScore=c.score),c))},getBonus:()=>{e(c=>(c.bonus=c.bonus+1,c))},nextLevel:()=>{e(c=>(c.level=c.level+1,c))}}};let de=Rt();function Ct(t){let e,n,o,s,r,i,c,a=t[1].playerName+"",u,p,d,g,m,_=t[1].score+"",S,A,w,F,R,H=t[1].food+"",W,N,D,L,C,Z=t[1].bonus+"",ae,ne,ie,J,ce,G=t[1].highScore+"",b,E,U,v,I,V=t[1].level+"",ge,Ne,Fe=t[1].stage+"",xe,Ye,be,Ie,qe,Re,He,Ze;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",o=X(),s=k("table"),r=k("tr"),i=k("td"),i.textContent="Player",c=k("td"),u=j(a),p=X(),d=k("tr"),g=k("td"),g.textContent="Score",m=k("td"),S=j(_),A=X(),w=k("tr"),F=k("td"),F.textContent="Food",R=k("td"),W=j(H),N=X(),D=k("tr"),L=k("td"),L.textContent="Bonus",C=k("td"),ae=j(Z),ne=X(),ie=k("tr"),J=k("td"),J.textContent="High Score",ce=k("td"),b=j(G),E=X(),U=k("tr"),v=k("td"),v.textContent="Level-Stage",I=k("td"),ge=j(V),Ne=k("span"),Ne.textContent="-",xe=j(Fe),Ye=X(),be=k("div"),Ie=k("button"),Ie.textContent="Replay",qe=X(),Re=k("button"),Re.textContent="Menu",l(n,"class","title svelte-1mhd3rb"),l(i,"class","c1 svelte-1mhd3rb"),l(c,"class","c2 svelte-1mhd3rb"),l(g,"class","c1 svelte-1mhd3rb"),l(m,"class","c2 svelte-1mhd3rb"),l(F,"class","c1 svelte-1mhd3rb"),l(R,"class","c2 svelte-1mhd3rb"),l(L,"class","c1 svelte-1mhd3rb"),l(C,"class","c2 svelte-1mhd3rb"),l(J,"class","c1 svelte-1mhd3rb"),l(ce,"class","c2 svelte-1mhd3rb"),l(v,"class","c1 svelte-1mhd3rb"),l(I,"class","c2 svelte-1mhd3rb"),l(s,"class","svelte-1mhd3rb"),l(be,"class","flex svelte-1mhd3rb"),l(e,"class","game-over-screen svelte-1mhd3rb")},m(te,fe){x(te,e,fe),f(e,n),f(e,o),f(e,s),f(s,r),f(r,i),f(r,c),f(c,u),f(s,p),f(s,d),f(d,g),f(d,m),f(m,S),f(s,A),f(s,w),f(w,F),f(w,R),f(R,W),f(s,N),f(s,D),f(D,L),f(D,C),f(C,ae),f(s,ne),f(s,ie),f(ie,J),f(ie,ce),f(ce,b),f(s,E),f(s,U),f(U,v),f(U,I),f(I,ge),f(I,Ne),f(I,xe),f(e,Ye),f(e,be),f(be,Ie),t[4](Ie),f(be,qe),f(be,Re),He||(Ze=[he(Ie,"click",t[3]),he(Re,"click",t[2])],He=!0)},p(te,[fe]){fe&2&&a!==(a=te[1].playerName+"")&&se(u,a),fe&2&&_!==(_=te[1].score+"")&&se(S,_),fe&2&&H!==(H=te[1].food+"")&&se(W,H),fe&2&&Z!==(Z=te[1].bonus+"")&&se(ae,Z),fe&2&&G!==(G=te[1].highScore+"")&&se(b,G),fe&2&&V!==(V=te[1].level+"")&&se(ge,V),fe&2&&Fe!==(Fe=te[1].stage+"")&&se(xe,Fe)},i:T,o:T,d(te){te&&B(e),t[4](null),He=!1,ye(Ze)}}}function Ut(t,e,n){let o;Xe(()=>{o.focus()});const s=()=>{console.log("restart game"),_e.welcomeScreen()},r=()=>{de.resetScore(),_e.startGame()};let i;de.subscribe(a=>{n(1,i=a)});function c(a){$e[a?"unshift":"push"](()=>{o=a,n(0,o)})}return[o,i,s,r,c]}class Bt extends ee{constructor(e){super(),Q(this,e,Ut,Ct,q,{})}}var yt=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(yt||{}),bt=(t=>(t[t.STAR=0]="STAR",t[t.GEM=1]="GEM",t[t.RUBY=2]="RUBY",t))(bt||{}),K=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(K||{});const Mt=300,zt=60,vt="none";function Oe(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function Pt(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function Be(t,e,n,o,s){t.dispatchEvent(new CustomEvent(`${e}${s}`,{detail:{event:n,pointersCount:o.length}}))}function xt(t,e,n,o,s,r=vt){e.style.touchAction=r;let i=[];function c(u){i.push(u),Be(e,t,u,i,"down"),o==null||o(i,u);const p=u.pointerId;function d(w){p===w.pointerId&&(i=Pt(w,i),i.length||g(),Be(e,t,w,i,"up"),s==null||s(i,w))}function g(){m(),_(),S(),A()}const m=Oe(e,"pointermove",w=>{i=i.map(F=>w.pointerId===F.pointerId?w:F),Be(e,t,w,i,"move"),n==null||n(i,w)}),_=Oe(e,"lostpointercapture",w=>{d(w)}),S=Oe(e,"pointerup",w=>{d(w)}),A=Oe(e,"pointerleave",w=>{i=[],g(),Be(e,t,w,i,"up"),s==null||s(i,w)})}const a=Oe(e,"pointerdown",c);return{destroy:()=>{a()}}}function Ht(t,e={timeframe:Mt,minSwipeDistance:zt,touchAction:vt}){const n="swipe";let o,s,r,i;function c(u,p){s=p.clientX,r=p.clientY,o=Date.now(),u.length===1&&(i=p.target)}function a(u,p){if(p.type==="pointerup"&&u.length===0&&Date.now()-o<e.timeframe){const d=p.clientX-s,g=p.clientY-r,m=Math.abs(d),_=Math.abs(g);let S=null;m>=2*_&&m>e.minSwipeDistance?S=d>0?"right":"left":_>=2*m&&_>e.minSwipeDistance&&(S=g>0?"bottom":"top"),S&&t.dispatchEvent(new CustomEvent(n,{detail:{direction:S,target:i}}))}}return xt(n,t,null,c,a,e.touchAction)}function Vt(t){let e,n,o,s,r,i,c,a,u,p,d,g,m,_,S,A;return{c(){e=k("div"),n=h("svg"),o=h("g"),s=h("g"),r=h("g"),i=h("g"),c=h("ellipse"),a=h("g"),u=h("path"),p=h("path"),d=h("g"),g=h("path"),m=h("g"),_=h("path"),S=h("g"),A=h("ellipse"),l(o,"id","Layer_1"),l(c,"id","shadow"),l(c,"opacity","0.3"),l(c,"cx","438.7"),l(c,"cy","765.8"),l(c,"rx","283"),l(c,"ry","32.9"),l(u,"id","cup-shadow"),l(u,"fill","#E7F4FA"),l(u,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),l(p,"id","cup-light"),l(p,"fill","#FFFFFF"),l(p,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),l(g,"id","mainFood"),l(g,"fill","#DB343C"),l(g,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),l(_,"id","highlight"),l(_,"opacity","0.3"),l(_,"fill","#FFFFFF"),l(_,"stroke","#000000"),l(_,"stroke-width","0.25"),l(_,"stroke-miterlimit","10"),l(_,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),l(A,"id","c2"),l(A,"fill","#FFFFFF"),l(A,"cx","436.8"),l(A,"cy","144.3"),l(A,"rx","140.6"),l(A,"ry","138.4"),l(S,"id","c1"),l(s,"id","Layer_2"),l(n,"viewBox","0 0 855.6 798.6"),l(e,"class","food jello-vertical svelte-h8lqdv"),y(e,"left",t[1].left*t[0]+"px"),y(e,"top",t[1].top*t[0]+"px"),y(e,"width",t[0]-2+"px"),y(e,"height",t[0]-2+"px")},m(w,F){x(w,e,F),f(e,n),f(n,o),f(n,s),f(s,r),f(r,i),f(i,c),f(r,a),f(a,u),f(a,p),f(r,d),f(d,g),f(r,m),f(m,_),f(r,S),f(S,A)},p(w,[F]){F&3&&y(e,"left",w[1].left*w[0]+"px"),F&3&&y(e,"top",w[1].top*w[0]+"px"),F&1&&y(e,"width",w[0]-2+"px"),F&1&&y(e,"height",w[0]-2+"px")},i:T,o:T,d(w){w&&B(e)}}}function Kt(t,e,n){let{size:o=0}=e,{data:s}=e;return t.$$set=r=>{"size"in r&&n(0,o=r.size),"data"in r&&n(1,s=r.data)},[o,s]}class $t extends ee{constructor(e){super(),Q(this,e,Kt,Vt,q,{size:0,data:1})}}const z=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Wt=t=>{const e=z();let n={top:0,left:0,id:e},o=!1;do n.top=Math.floor(Math.random()*P.GRID_COUNT),n.left=Math.floor(Math.random()*P.GRID_COUNT),o=!Et(n,t);while(o==!1);return n},Et=(t,e)=>{if(t==null||e==null)return!1;for(let n=0;n<e.length;n++)if(e[n].top==t.top&&e[n].left==t.left)return!0;return!1},Xt=t=>{switch(t){case"bottom":return O.DOWN;case"top":return O.UP;case"right":return O.RIGHT;case"left":return O.LEFT;default:return O.UNKNOWN}},jt=(t,e)=>t===Ee.UP&&e!=O.DOWN?O.UP:t===Ee.RIGHT&&e!=O.LEFT?O.RIGHT:t===Ee.LEFT&&e!=O.RIGHT?O.LEFT:t===Ee.DOWN&&e!=O.UP?O.DOWN:O.UNKNOWN,Yt=t=>{switch(t){case O.DOWN:return O.UP;case O.UP:return O.DOWN;case O.LEFT:return O.RIGHT;case O.RIGHT:return O.LEFT;case O.UNKNOWN:return O.UNKNOWN}},nt=()=>[{id:z(),left:2,top:0},{id:z(),left:1,top:0},{id:z(),left:0,top:0}],qt=()=>{let t={bonus:[],foods:[],snake:nt(),lastFoodLocation:-1},{update:e,subscribe:n}=je(t);return{subscribe:n,addBonus:p=>{e(d=>(d.bonus.findIndex(m=>m.id==p.id)==-1&&(d.bonus.push(p),d.bonus=d.bonus,d=d),d))},removeBonus:p=>{e(d=>{let g=d.bonus.slice(0),m=g.findIndex(_=>_.id==p);return m!=-1&&(g.splice(m,1),d.bonus=g,d=d),d})},addFood:p=>{e(d=>(d.foods.findIndex(m=>m.id==p.id)==-1&&(d.foods.push(p),d.foods=d.foods,d=d),d))},removeFood:p=>{e(d=>{let g=d.foods.slice(0),m=g.findIndex(_=>_.id==p);return m!=-1&&(d.lastFoodLocation=0,g.splice(m,1),d.foods=g,d=d),d})},moveSnake:p=>{e(d=>{let g=d.snake;return g.pop(),g=[p,...g],d.snake=g,d.lastFoodLocation=d.lastFoodLocation+1,d})},growSnake:()=>{e(p=>{let d=p.snake;return d=[...d,d[d.length-1]],p.snake=d,p})},reset:()=>{e(p=>(p={bonus:[],foods:[],snake:nt(),lastFoodLocation:null},p))}}},oe=qt();function ot(t){let e;function n(r,i){return r[2]?Qt:r[3]?Jt:Zt}let o=n(t),s=o(t);return{c(){e=k("div"),s.c(),y(e,"left",t[1].left*t[0]+"px"),y(e,"top",t[1].top*t[0]+"px"),y(e,"width",t[0]+"px"),y(e,"height",t[0]+"px"),l(e,"class","snake-body svelte-nma0u0")},m(r,i){x(r,e,i),s.m(e,null)},p(r,i){o===(o=n(r))&&s?s.p(r,i):(s.d(1),s=o(r),s&&(s.c(),s.m(e,null))),i&3&&y(e,"left",r[1].left*r[0]+"px"),i&3&&y(e,"top",r[1].top*r[0]+"px"),i&1&&y(e,"width",r[0]+"px"),i&1&&y(e,"height",r[0]+"px")},d(r){r&&B(e),s.d()}}}function Zt(t){let e,n,o;return{c(){e=h("svg"),n=h("rect"),l(n,"y","0"),l(n,"width","50"),l(n,"height","50"),l(e,"viewBox","0 0 50 50"),l(e,"class",o=ke(t[4]+" "+t[5]())+" svelte-nma0u0")},m(s,r){x(s,e,r),f(e,n)},p(s,r){r&16&&o!==(o=ke(s[4]+" "+s[5]())+" svelte-nma0u0")&&l(e,"class",o)},d(s){s&&B(e)}}}function Jt(t){let e,n,o;return{c(){e=h("svg"),n=h("rect"),l(n,"y","0"),l(n,"width","50"),l(n,"height","50"),l(e,"viewBox","0 0 50 50"),l(e,"class",o=ke(t[4]+" "+t[5]())+" svelte-nma0u0")},m(s,r){x(s,e,r),f(e,n)},p(s,r){r&16&&o!==(o=ke(s[4]+" "+s[5]())+" svelte-nma0u0")&&l(e,"class",o)},d(s){s&&B(e)}}}function Qt(t){let e,n,o,s,r,i,c;return{c(){e=h("svg"),n=h("g"),o=h("rect"),s=h("path"),r=h("circle"),i=h("circle"),l(o,"opacity","0"),l(o,"fill","#FFFFFF"),l(o,"width","258"),l(o,"height","258"),l(s,"fill","#0037FF"),l(s,"d",`M147.5,29.2C111.6,29.2,80.1,48,62.6,77H0v104h62.6c17.5,28,49,47.3,84.9,47.3c55,0,99.6-44.6,99.6-99.6\r
          S202.5,29.2,147.5,29.2z`),l(r,"fill","#FFF800"),l(r,"stroke","#000000"),l(r,"stroke-miterlimit","10"),l(r,"cx","184.3"),l(r,"cy","84.5"),l(r,"r","21.8"),l(i,"fill","#FFF800"),l(i,"stroke","#000000"),l(i,"stroke-miterlimit","10"),l(i,"cx","184.3"),l(i,"cy","164.5"),l(i,"r","21.8"),l(e,"viewBox","0 0 258 258"),l(e,"class",c=ke(t[4])+" svelte-nma0u0")},m(a,u){x(a,e,u),f(e,n),f(n,o),f(n,s),f(n,r),f(n,i)},p(a,u){u&16&&c!==(c=ke(a[4])+" svelte-nma0u0")&&l(e,"class",c)},d(a){a&&B(e)}}}function en(t){let e,n=t[1].top>=0&&t[1].top<P.GRID_COUNT&&t[1].left>=0&&t[1].left<P.GRID_COUNT&&ot(t);return{c(){n&&n.c(),e=Te()},m(o,s){n&&n.m(o,s),x(o,e,s)},p(o,[s]){o[1].top>=0&&o[1].top<P.GRID_COUNT&&o[1].left>=0&&o[1].left<P.GRID_COUNT?n?n.p(o,s):(n=ot(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:T,o:T,d(o){n&&n.d(o),o&&B(e)}}}function tn(t,e,n){let{size:o=0}=e,{current:s=null}=e,{index:r=0}=e,{isHead:i=r==0}=e,{isTail:c=!1}=e,{isFoodLocation:a=!1}=e,{direction:u="right"}=e;const p=()=>a?"food":"normal_block";return t.$$set=d=>{"size"in d&&n(0,o=d.size),"current"in d&&n(1,s=d.current),"index"in d&&n(6,r=d.index),"isHead"in d&&n(2,i=d.isHead),"isTail"in d&&n(3,c=d.isTail),"isFoodLocation"in d&&n(7,a=d.isFoodLocation),"direction"in d&&n(4,u=d.direction)},[o,s,i,c,u,p,r,a]}class nn extends ee{constructor(e){super(),Q(this,e,tn,en,q,{size:0,current:1,index:6,isHead:2,isTail:3,isFoodLocation:7,direction:4})}}function st(t,e,n){const o=t.slice();return o[3]=e[n],o[5]=n,o}function lt(t){let e,n;return e=new nn({props:{index:t[5],isTail:t[5]==t[2].snake.length-1,current:t[3],direction:t[0],size:t[1],isFoodLocation:t[2].lastFoodLocation==t[5]}}),{c(){ue(e.$$.fragment)},m(o,s){le(e,o,s),n=!0},p(o,s){const r={};s&4&&(r.isTail=o[5]==o[2].snake.length-1),s&4&&(r.current=o[3]),s&1&&(r.direction=o[0]),s&2&&(r.size=o[1]),s&4&&(r.isFoodLocation=o[2].lastFoodLocation==o[5]),e.$set(r)},i(o){n||(M(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){re(e,o)}}}function on(t){let e,n,o=t[2].snake,s=[];for(let i=0;i<o.length;i+=1)s[i]=lt(st(t,o,i));const r=i=>$(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Te()},m(i,c){for(let a=0;a<s.length;a+=1)s[a].m(i,c);x(i,e,c),n=!0},p(i,[c]){if(c&7){o=i[2].snake;let a;for(a=0;a<o.length;a+=1){const u=st(i,o,a);s[a]?(s[a].p(u,c),M(s[a],1)):(s[a]=lt(u),s[a].c(),M(s[a],1),s[a].m(e.parentNode,e))}for(we(),a=o.length;a<s.length;a+=1)r(a);Se()}},i(i){if(!n){for(let c=0;c<o.length;c+=1)M(s[c]);n=!0}},o(i){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)$(s[c]);n=!1},d(i){ht(s,i),i&&B(e)}}}function sn(t,e,n){let{direction:o="right"}=e,{size:s=0}=e,r;return oe.subscribe(i=>{n(2,r=i)}),t.$$set=i=>{"direction"in i&&n(0,o=i.direction),"size"in i&&n(1,s=i.size)},[o,s,r]}class ln extends ee{constructor(e){super(),Q(this,e,sn,on,q,{direction:0,size:1})}}const pe=[{bg:"#1c1c1c",wall:[{id:z(),type:K.ROCK,top:2,left:1},{id:z(),type:K.ROCK,top:2,left:2},{id:z(),type:K.ROCK,top:2,left:3},{id:z(),type:K.ROCK,top:2,left:4},{id:z(),type:K.ROCK,top:2,left:5},{id:z(),type:K.ROCK,top:2,left:6},{id:z(),type:K.ROCK,top:1,left:3},{id:z(),type:K.ROCK,top:3,left:4}]},{bg:"#fda2f2",wall:[{id:z(),type:K.DEFAULT,top:2,left:1},{id:z(),type:K.DEFAULT,top:2,left:2},{id:z(),type:K.ROCK,top:2,left:3},{id:z(),type:K.ROCK,top:2,left:4},{id:z(),type:K.DEFAULT,top:2,left:5},{id:z(),type:K.DEFAULT,top:2,left:6},{id:z(),type:K.CONCRETE,top:1,left:3},{id:z(),type:K.CONCRETE,top:3,left:4}]},{bg:"#7f61bb",wall:[]},{bg:"#c34366",wall:[]}];function rn(t){let e,n,o,s,r;return{c(){e=k("div"),n=h("svg"),o=h("style"),s=j(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),r=h("polygon"),l(o,"id","style2"),l(r,"fill","#FFA300"),l(r,"stroke","#EB0000"),l(r,"stroke-width","0.25"),l(r,"stroke-miterlimit","10"),l(r,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),l(r,"class","red"),l(n,"viewBox","0 0 443.3 421.6"),l(e,"class","bonus bounce-top svelte-y90akj"),y(e,"width",t[1]+"px"),y(e,"height",t[1]+"px"),y(e,"left",t[0].left*t[1]+"px"),y(e,"top",t[0].top*t[1]+"px")},m(i,c){x(i,e,c),f(e,n),f(n,o),f(o,s),f(n,r)},p(i,[c]){c&2&&y(e,"width",i[1]+"px"),c&2&&y(e,"height",i[1]+"px"),c&3&&y(e,"left",i[0].left*i[1]+"px"),c&3&&y(e,"top",i[0].top*i[1]+"px")},i:T,o:T,d(i){i&&B(e)}}}function cn(t,e,n){const o=At();let{data:s}=e,{size:r=0}=e;return Xe(()=>{setTimeout(()=>{o("bonusFinished",s.id)},P.BONUS_TIME)}),t.$$set=i=>{"data"in i&&n(0,s=i.data),"size"in i&&n(1,r=i.size)},[s,r]}class fn extends ee{constructor(e){super(),Q(this,e,cn,rn,q,{data:0,size:1})}}function un(t){let e,n,o;return{c(){e=k("div"),n=k("h1"),o=j(t[0]),l(n,"class","svelte-1x8upsq"),l(e,"class","message-box svelte-1x8upsq")},m(s,r){x(s,e,r),f(e,n),f(n,o)},p(s,[r]){r&1&&se(o,s[0])},i:T,o:T,d(s){s&&B(e)}}}function an(t,e,n){let{message:o=""}=e;return t.$$set=s=>{"message"in s&&n(0,o=s.message)},[o]}class dn extends ee{constructor(e){super(),Q(this,e,an,un,q,{message:0})}}function pn(t){let e,n,o,s,r,i,c,a,u;return{c(){e=h("svg"),n=h("radialGradient"),o=h("stop"),s=h("stop"),r=h("rect"),i=h("linearGradient"),c=h("stop"),a=h("stop"),u=h("rect"),l(o,"offset","0"),y(o,"stop-color","#333333"),l(s,"offset","1"),y(s,"stop-color","#000000"),l(n,"id","rock_svgid"),l(n,"cx","219.5"),l(n,"cy","219.5"),l(n,"r","219"),l(n,"gradientUnits","userSpaceOnUse"),l(r,"x","0.5"),l(r,"y","0.5"),l(r,"fill","url(#rock_svgid)"),l(r,"stroke","#000000"),l(r,"stroke-miterlimit","10"),l(r,"width","438"),l(r,"height","438"),l(c,"offset","0"),y(c,"stop-color","#000000"),y(c,"stop-opacity","0"),l(a,"offset","1"),y(a,"stop-color","#FFFFFF"),y(a,"stop-opacity","0.5"),l(i,"id","rock_svgid2"),l(i,"gradientUnits","userSpaceOnUse"),l(i,"x1","219"),l(i,"y1","431"),l(i,"x2","219"),l(i,"y2","9.0005"),l(u,"x","8"),l(u,"y","9"),l(u,"fill","url(#rock_svgid2)"),l(u,"width","422"),l(u,"height","422"),l(e,"viewBox","0 0 439 439")},m(p,d){x(p,e,d),f(e,n),f(n,o),f(n,s),f(e,r),f(e,i),f(i,c),f(i,a),f(e,u)},d(p){p&&B(e)}}}function _n(t){let e,n,o,s,r,i,c,a,u,p,d,g,m,_,S,A,w,F,R,H,W,N;return{c(){e=h("svg"),n=h("g"),o=h("linearGradient"),s=h("stop"),r=h("stop"),i=h("rect"),c=h("linearGradient"),a=h("stop"),u=h("stop"),p=h("rect"),d=h("linearGradient"),g=h("stop"),m=h("stop"),_=h("polygon"),S=h("linearGradient"),A=h("stop"),w=h("stop"),F=h("rect"),R=h("linearGradient"),H=h("stop"),W=h("stop"),N=h("rect"),l(s,"offset","0"),y(s,"stop-color","#998675"),l(r,"offset","1"),y(r,"stop-color","#C7B299"),l(o,"id","concrete_SVGID_1_"),l(o,"gradientUnits","userSpaceOnUse"),l(o,"x1","4"),l(o,"y1","96.5"),l(o,"x2","281"),l(o,"y2","96.5"),l(i,"x","4"),l(i,"y","4"),l(i,"fill","url(#concrete_SVGID_1_)"),l(i,"stroke","#CABD99"),l(i,"stroke-width","8"),l(i,"stroke-miterlimit","10"),l(i,"width","277"),l(i,"height","185"),l(a,"offset","0"),y(a,"stop-color","#998675"),l(u,"offset","1"),y(u,"stop-color","#C7B299"),l(c,"id","concrete_SVGID_2_"),l(c,"gradientUnits","userSpaceOnUse"),l(c,"x1","420"),l(c,"y1","189"),l(c,"x2","420"),l(c,"y2","4"),l(p,"x","281"),l(p,"y","4"),l(p,"fill","url(#concrete_SVGID_2_)"),l(p,"stroke","#CABD99"),l(p,"stroke-width","8"),l(p,"stroke-miterlimit","10"),l(p,"width","278"),l(p,"height","185"),l(g,"offset","0"),y(g,"stop-color","#998675"),l(m,"offset","1"),y(m,"stop-color","#C7B299"),l(d,"id","concrete_SVGID_3_"),l(d,"gradientUnits","userSpaceOnUse"),l(d,"x1","281.5"),l(d,"y1","374"),l(d,"x2","281.5"),l(d,"y2","189.0005"),l(_,"fill","url(#concrete_SVGID_3_)"),l(_,"stroke","#CABD99"),l(_,"stroke-width","8"),l(_,"stroke-miterlimit","10"),l(_,"points",`281,189 4,189 4,374 281,374 \r
    559,374 559,189 	`),l(A,"offset","0"),y(A,"stop-color","#998675"),l(w,"offset","1"),y(w,"stop-color","#C7B299"),l(S,"id","concrete_SVGID_4_"),l(S,"gradientUnits","userSpaceOnUse"),l(S,"x1","4"),l(S,"y1","466.5"),l(S,"x2","281"),l(S,"y2","466.5"),l(F,"x","4"),l(F,"y","374"),l(F,"fill","url(#concrete_SVGID_4_)"),l(F,"stroke","#CABD99"),l(F,"stroke-width","8"),l(F,"stroke-miterlimit","10"),l(F,"width","277"),l(F,"height","185"),l(H,"offset","0"),y(H,"stop-color","#998675"),l(W,"offset","1"),y(W,"stop-color","#C7B299"),l(R,"id","concrete_SVGID_5_"),l(R,"gradientUnits","userSpaceOnUse"),l(R,"x1","281"),l(R,"y1","466.5"),l(R,"x2","559"),l(R,"y2","466.5"),l(N,"x","281"),l(N,"y","374"),l(N,"fill","url(#concrete_SVGID_5_)"),l(N,"stroke","#CABD99"),l(N,"stroke-width","8"),l(N,"stroke-miterlimit","10"),l(N,"width","278"),l(N,"height","185"),l(e,"viewBox","0 0 563 563")},m(D,L){x(D,e,L),f(e,n),f(n,o),f(o,s),f(o,r),f(n,i),f(n,c),f(c,a),f(c,u),f(n,p),f(n,d),f(d,g),f(d,m),f(n,_),f(n,S),f(S,A),f(S,w),f(n,F),f(n,R),f(R,H),f(R,W),f(n,N)},d(D){D&&B(e)}}}function hn(t){let e,n,o,s,r,i,c,a,u,p,d,g,m,_,S;return{c(){e=h("svg"),n=h("symbol"),o=h("polygon"),s=h("polygon"),r=h("polygon"),i=h("polygon"),c=h("polygon"),a=h("polygon"),u=h("polygon"),p=h("polygon"),d=h("polygon"),g=h("polygon"),m=h("polygon"),_=h("polygon"),S=h("use"),l(o,"points","27,-29 -27,-29 -27,29 27,29 	"),l(s,"fill","#BF6411"),l(s,"points","-15,29 -27,29 -27,16 -15,16 -2,16 -2,29 	"),l(r,"fill","#BF6411"),l(r,"points","12,29 0,29 0,16 12,16 25,16 25,29 	"),l(i,"fill","#BF6411"),l(i,"points","-27,14 -15,14 -15,2 -27,2 	"),l(c,"fill","#BF6411"),l(c,"points","0,14 -13,14 -13,2 0,2 12,2 12,14 	"),l(a,"fill","#BF6411"),l(a,"points","14,14 27,14 27,2 14,2 	"),l(u,"fill","#BF6411"),l(u,"points","-15,0 -27,0 -27,-13 -15,-13 -2,-13 -2,0 	"),l(p,"fill","#BF6411"),l(p,"points","12,0 0,0 0,-13 12,-13 25,-13 25,0 	"),l(d,"fill","#BF6411"),l(d,"points","-27,-15 -15,-15 -15,-27 -27,-27 	"),l(g,"fill","#BF6411"),l(g,"points","0,-15 -13,-15 -13,-27 0,-27 12,-27 12,-15 	"),l(m,"fill","#BF6411"),l(m,"points","14,-15 27,-15 27,-27 14,-27 	"),l(_,"display","none"),l(_,"fill","none"),l(_,"points","-27,29 27,29 27,-29 -27,-29 	"),l(n,"id","brick1"),l(n,"viewBox","-27 -29 54 58"),kt(S,"xlink:href","#brick1"),l(S,"width","54"),l(S,"height","58"),l(S,"x","-27"),l(S,"y","-29"),l(S,"transform","matrix(1 0 0 -1 27 29)"),l(S,"overflow","visible"),l(e,"viewBox","0 0 54 58")},m(A,w){x(A,e,w),f(e,n),f(n,o),f(n,s),f(n,r),f(n,i),f(n,c),f(n,a),f(n,u),f(n,p),f(n,d),f(n,g),f(n,m),f(n,_),f(e,S)},d(A){A&&B(e)}}}function gn(t){let e;function n(r,i){return r[1].type==K.DEFAULT?hn:r[1].type==K.CONCRETE?_n:pn}let o=n(t),s=o(t);return{c(){e=k("div"),s.c(),l(e,"class","brick svelte-1ezhfpr"),y(e,"top",t[1].top*t[0]+"px"),y(e,"left",t[1].left*t[0]+"px"),y(e,"width",t[0]+"px"),y(e,"height",t[0]+"px")},m(r,i){x(r,e,i),s.m(e,null)},p(r,[i]){o!==(o=n(r))&&(s.d(1),s=o(r),s&&(s.c(),s.m(e,null))),i&3&&y(e,"top",r[1].top*r[0]+"px"),i&3&&y(e,"left",r[1].left*r[0]+"px"),i&1&&y(e,"width",r[0]+"px"),i&1&&y(e,"height",r[0]+"px")},i:T,o:T,d(r){r&&B(e),s.d()}}}function mn(t,e,n){let{size:o=0}=e,{data:s}=e;return t.$$set=r=>{"size"in r&&n(0,o=r.size),"data"in r&&n(1,s=r.data)},[o,s]}class yn extends ee{constructor(e){super(),Q(this,e,mn,gn,q,{size:0,data:1})}}function rt(t,e,n){const o=t.slice();return o[3]=e[n],o}function it(t){let e,n;return e=new yn({props:{data:t[3],size:t[0]}}),{c(){ue(e.$$.fragment)},m(o,s){le(e,o,s),n=!0},p(o,s){const r={};s&2&&(r.data=o[3]),s&1&&(r.size=o[0]),e.$set(r)},i(o){n||(M(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){re(e,o)}}}function bn(t){let e,n,o=t[1],s=[];for(let i=0;i<o.length;i+=1)s[i]=it(rt(t,o,i));const r=i=>$(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Te()},m(i,c){for(let a=0;a<s.length;a+=1)s[a].m(i,c);x(i,e,c),n=!0},p(i,[c]){if(c&3){o=i[1];let a;for(a=0;a<o.length;a+=1){const u=rt(i,o,a);s[a]?(s[a].p(u,c),M(s[a],1)):(s[a]=it(u),s[a].c(),M(s[a],1),s[a].m(e.parentNode,e))}for(we(),a=o.length;a<s.length;a+=1)r(a);Se()}},i(i){if(!n){for(let c=0;c<o.length;c+=1)M(s[c]);n=!0}},o(i){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)$(s[c]);n=!1},d(i){ht(s,i),i&&B(e)}}}function vn(t,e,n){let o,{size:s=0}=e,r;return de.subscribe(i=>{n(2,r=i)}),t.$$set=i=>{"size"in i&&n(0,s=i.size)},t.$$.update=()=>{t.$$.dirty&4&&n(1,o=pe[r.level-1].wall)},[s,o,r]}class En extends ee{constructor(e){super(),Q(this,e,vn,bn,q,{size:0})}}function ct(t,e,n){const o=t.slice();return o[35]=e[n],o}function ft(t,e,n){const o=t.slice();return o[38]=e[n],o}function ut(t,e){let n,o,s;return o=new $t({props:{data:e[38],size:e[5]}}),{key:t,first:null,c(){n=Te(),ue(o.$$.fragment),this.first=n},m(r,i){x(r,n,i),le(o,r,i),s=!0},p(r,i){e=r;const c={};i[0]&256&&(c.data=e[38]),i[0]&32&&(c.size=e[5]),o.$set(c)},i(r){s||(M(o.$$.fragment,r),s=!0)},o(r){$(o.$$.fragment,r),s=!1},d(r){r&&B(n),re(o,r)}}}function at(t,e){let n,o,s;return o=new fn({props:{data:e[35],size:e[5]}}),o.$on("bonusFinished",e[11]),{key:t,first:null,c(){n=Te(),ue(o.$$.fragment),this.first=n},m(r,i){x(r,n,i),le(o,r,i),s=!0},p(r,i){e=r;const c={};i[0]&256&&(c.data=e[35]),i[0]&32&&(c.size=e[5]),o.$set(c)},i(r){s||(M(o.$$.fragment,r),s=!0)},o(r){$(o.$$.fragment,r),s=!1},d(r){r&&B(n),re(o,r)}}}function dt(t){let e,n;return e=new dn({props:{message:t[4]}}),{c(){ue(e.$$.fragment)},m(o,s){le(e,o,s),n=!0},p(o,s){const r={};s[0]&16&&(r.message=o[4]),e.$set(r)},i(o){n||(M(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){re(e,o)}}}function wn(t){let e,n,o,s,r,i,c=[],a=new Map,u,p=[],d=new Map,g,m,_,S,A,w=t[7].score+"",F,R,H,W,N=t[7].bonus+"",D,L,C,Z,ae;o=new En({props:{size:t[5]}}),r=new ln({props:{direction:t[6],size:t[5]}});let ne=t[8].foods;const ie=b=>b[38].id;for(let b=0;b<ne.length;b+=1){let E=ft(t,ne,b),U=ie(E);a.set(U,c[b]=ut(U,E))}let J=t[8].bonus;const ce=b=>b[35].id;for(let b=0;b<J.length;b+=1){let E=ct(t,J,b),U=ce(E);d.set(U,p[b]=at(U,E))}let G=t[3]==!0&&dt(t);return{c(){e=k("div"),n=k("main"),ue(o.$$.fragment),s=X(),ue(r.$$.fragment),i=X();for(let b=0;b<c.length;b+=1)c[b].c();u=X();for(let b=0;b<p.length;b+=1)p[b].c();g=X(),G&&G.c(),m=X(),_=k("div"),S=k("div"),A=j("Score : "),F=j(w),R=X(),H=k("div"),W=j("Bonus : "),D=j(N),y(n,"width",t[2]+"px"),y(n,"height",t[2]+"px"),y(n,"background",pe[t[7].level-1].bg),l(n,"class","svelte-g9guyn"),l(_,"class","scorecard svelte-g9guyn"),y(_,"width",t[2]+"px"),l(e,"class","wrap svelte-g9guyn"),Pe(()=>t[12].call(e))},m(b,E){x(b,e,E),f(e,n),le(o,n,null),f(n,s),le(r,n,null),f(n,i);for(let U=0;U<c.length;U+=1)c[U].m(n,null);f(n,u);for(let U=0;U<p.length;U+=1)p[U].m(n,null);f(n,g),G&&G.m(n,null),f(e,m),f(e,_),f(_,S),f(S,A),f(S,F),f(_,R),f(_,H),f(H,W),f(H,D),L=It(e,t[12].bind(e)),C=!0,Z||(ae=[he(window,"keydown",t[10]),St(Ht.call(null,n,{timeframe:150,minSwipeDistance:30,touchAction:"none"})),he(n,"swipe",t[9])],Z=!0)},p(b,E){const U={};E[0]&32&&(U.size=b[5]),o.$set(U);const v={};E[0]&64&&(v.direction=b[6]),E[0]&32&&(v.size=b[5]),r.$set(v),E[0]&288&&(ne=b[8].foods,we(),c=tt(c,E,ie,1,b,ne,a,n,et,ut,u,ft),Se()),E[0]&2336&&(J=b[8].bonus,we(),p=tt(p,E,ce,1,b,J,d,n,et,at,g,ct),Se()),b[3]==!0?G?(G.p(b,E),E[0]&8&&M(G,1)):(G=dt(b),G.c(),M(G,1),G.m(n,null)):G&&(we(),$(G,1,1,()=>{G=null}),Se()),(!C||E[0]&4)&&y(n,"width",b[2]+"px"),(!C||E[0]&4)&&y(n,"height",b[2]+"px"),(!C||E[0]&128)&&y(n,"background",pe[b[7].level-1].bg),(!C||E[0]&128)&&w!==(w=b[7].score+"")&&se(F,w),(!C||E[0]&128)&&N!==(N=b[7].bonus+"")&&se(D,N),(!C||E[0]&4)&&y(_,"width",b[2]+"px")},i(b){if(!C){M(o.$$.fragment,b),M(r.$$.fragment,b);for(let E=0;E<ne.length;E+=1)M(c[E]);for(let E=0;E<J.length;E+=1)M(p[E]);M(G),C=!0}},o(b){$(o.$$.fragment,b),$(r.$$.fragment,b);for(let E=0;E<c.length;E+=1)$(c[E]);for(let E=0;E<p.length;E+=1)$(p[E]);$(G),C=!1},d(b){b&&B(e),re(o),re(r);for(let E=0;E<c.length;E+=1)c[E].d();for(let E=0;E<p.length;E+=1)p[E].d();G&&G.d(),L(),Z=!1,ye(ae)}}}function Sn(t,e,n){let o,s=!1,r=!1,i=Ge.NEXT_LEVEL,c,a,u=0,p=0,d=O.RIGHT,g;Xe(()=>{console.log(`--onMount = ${p} ${u} ${pe[m.level].bg}`)});let m,_;_e.subscribe(v=>{}),de.subscribe(v=>{n(7,m=v)}),oe.subscribe(v=>{n(8,_=v)});const S=()=>{w(Ge.GAME_OVER),clearInterval(g),setTimeout(()=>{F(),Z(),_e.gameOver()},P.MESSAGE_TIME)};function A(v){o=v.detail.direction,v.detail.target,n(6,d=Xt(o))}const w=v=>{n(4,i=v),n(3,r=!0)},F=()=>{n(3,r=!1),n(4,i=Ge.GAME_OVER)},R=()=>{w(Ge.NEXT_LEVEL),clearInterval(g),setTimeout(()=>{F(),de.nextLevel(),de.resetScore(),L(),Z()},P.MESSAGE_TIME)},H=v=>{_.bonus.forEach(I=>{C(v,I)&&(oe.removeBonus(I.id),de.getBonus())})},W=()=>{_.snake.length/P.MAXIMUM_POINT_COUNT>1&&_.snake.length%P.MAXIMUM_POINT_COUNT==0&&(m.level<pe.length-1?R():(clearInterval(g),_e.allLevelsCleared()))},N=()=>{let{left:v,top:I}=_.snake[0];return d===O.UP?I-=1:d===O.DOWN?I+=1:d===O.LEFT?v-=1:d===O.RIGHT&&(v+=1),{id:z(),left:v,top:I}},D=v=>{_.foods.length>0&&C(v,_.foods[0])&&(oe.removeFood(_.foods[0].id),oe.growSnake(),de.eatFood(),b(),m.food%5==0&&E())},L=()=>{let v=pe.length-m.level;v=v*P.SNAKE_SPEED,oe.reset(),b(),g=setInterval(()=>{if(ne()){S();return}ae();const I=N();H(I),oe.moveSnake(I),D(I),W()},P.SNAKE_SPEED)},C=(v,I)=>!(v.top<I.top||v.top>I.top||v.left<I.left||v.left>I.left),Z=()=>{n(6,d=O.RIGHT)},ae=()=>{const{top:v,left:I}=_.snake[0],V=_.snake[0];I>=P.GRID_COUNT&&d==O.RIGHT&&(V.left=-1),I<0&&d==O.LEFT&&(V.left=P.GRID_COUNT),v<0&&d==O.UP&&(V.top=P.GRID_COUNT),v>=P.GRID_COUNT&&d==O.DOWN&&(V.top=-1)},ne=()=>{const v=_.snake.slice(0),I=pe[m.level-1].wall,V=[...v,...I],ge=N();return Et(ge,V)},ie=()=>{clearInterval(g)},J=v=>{const I=v.code;if(I===Ee.SPACEBAR&&(s=!s,s?ie():L()),s)return;const V=jt(I,d);V!=O.UNKNOWN&&V!=Yt(V)&&n(6,d=V)},ce=v=>{oe.removeBonus(v.detail)},G=()=>{const v=_.snake.slice(0),I=pe[m.level-1].wall,V=_.foods.slice(0),ge=_.bonus.slice(0),Ne=[...I,...v,...V,...ge];return Wt(Ne)},b=()=>{if(_.foods.length>0)return;const v=G();let I={top:v.top,left:v.left,id:v.id,type:yt.DEFAULT};oe.addFood(I)},E=()=>{const v=G();let I={top:v.top,left:v.left,id:v.id,type:bt.STAR};oe.addBonus(I)};L(),Z();function U(){c=this.clientWidth,a=this.clientHeight,n(0,c),n(1,a)}return t.$$.update=()=>{t.$$.dirty[0]&7&&(n(2,u=Math.min(c,a)),n(2,u=u-P.GRID_PADDING),n(2,u=Math.min(u,P.GRID_MAX_SIZE)),isNaN(u)||n(5,p=Math.floor(u/P.GRID_COUNT)))},[c,a,u,r,i,p,d,m,_,A,J,ce,U]}class Ke extends ee{constructor(e){super(),Q(this,e,Sn,wn,q,{},null,[-1,-1])}}function kn(t){let e,n,o,s,r,i,c;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",o=X(),s=k("div"),r=k("button"),r.textContent="Start",l(n,"class","title svelte-3xg2s6"),l(s,"class","btn svelte-3xg2s6"),l(e,"class","start-screen svelte-3xg2s6")},m(a,u){x(a,e,u),f(e,n),f(e,o),f(e,s),f(s,r),i||(c=he(r,"click",t[0]),i=!0)},p:T,i:T,o:T,d(a){a&&B(e),i=!1,c()}}}function Nn(t){return[()=>{console.log("start game"),_e.startGame()}]}class Fn extends ee{constructor(e){super(),Q(this,e,Nn,kn,q,{})}}function In(t){let e,n,o,s,r,i,c,a;return{c(){e=k("div"),n=k("div"),n.textContent="Congratulations !",o=X(),s=k("div"),s.textContent="You have cleared all the levels.",r=X(),i=k("button"),i.textContent="Menu",l(n,"class","title svelte-zypdtg"),l(e,"class","final svelte-zypdtg")},m(u,p){x(u,e,p),f(e,n),f(e,o),f(e,s),f(e,r),f(e,i),c||(a=he(i,"click",t[0]),c=!0)},p:T,i:T,o:T,d(u){u&&B(e),c=!1,a()}}}function On(t){return[()=>{console.log("restart game"),_e.welcomeScreen()}]}class An extends ee{constructor(e){super(),Q(this,e,On,In,q,{})}}var Y=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(Y||{});const Gn=()=>{const t=[{status:Y.NOT_STARTED,component:Fn},{status:Y.RUNNING,component:Ke},{status:Y.PAUSED,component:Ke},{status:Y.RESUME,component:Ke},{status:Y.GAME_OVER,component:Bt},{status:Y.ALL_LEVELS_CLEARED,component:An}];let{update:e,subscribe:n}=je(t.find(u=>u.status==Y.RUNNING));return{subscribe:n,startGame:()=>{e(u=>(u=t.find(p=>p.status==Y.RUNNING),u))},pauseGame:()=>{e(u=>(u=t.find(p=>p.status==Y.PAUSED),u))},resumeGame:()=>{e(u=>(u=t.find(p=>p.status==Y.RUNNING),u))},gameOver:()=>{e(u=>(u=t.find(p=>p.status==Y.GAME_OVER),u))},welcomeScreen:()=>{e(u=>(u=t.find(p=>p.status==Y.NOT_STARTED),u))},allLevelsCleared:()=>{e(u=>(u=t.find(p=>p.status==Y.ALL_LEVELS_CLEARED),u))}}},_e=Gn();function Dn(t){let e,n,o;var s=t[0].component;function r(i){return{}}return s&&(n=new s(r())),{c(){e=k("div"),n&&ue(n.$$.fragment),l(e,"class","container svelte-174qdzj")},m(i,c){x(i,e,c),n&&le(n,e,null),o=!0},p(i,[c]){if(s!==(s=i[0].component)){if(n){we();const a=n;$(a.$$.fragment,1,0,()=>{re(a,1)}),Se()}s?(n=new s(r()),ue(n.$$.fragment),M(n.$$.fragment,1),le(n,e,null)):n=null}},i(i){o||(n&&M(n.$$.fragment,i),o=!0)},o(i){n&&$(n.$$.fragment,i),o=!1},d(i){i&&B(e),n&&re(n)}}}function Ln(t,e,n){let o;return _e.subscribe(s=>{n(0,o=s)}),[o]}class Tn extends ee{constructor(e){super(),Q(this,e,Ln,Dn,q,{})}}new Tn({target:document.getElementById("app")});
