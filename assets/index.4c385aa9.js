(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function m(){}function fe(t){return t()}function te(){return Object.create(null)}function P(t){t.forEach(fe)}function ge(t){return typeof t=="function"}function w(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ee(t){return Object.keys(t).length===0}function O(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function Se(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function J(t){return document.createTextNode(t)}function U(){return J(" ")}function ye(){return J("")}function Q(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function h(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ve(t){return Array.from(t.childNodes)}function be(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let X;function A(t){X=t}const K=[],ne=[],D=[],oe=[],Ne=Promise.resolve();let q=!1;function Ie(){q||(q=!0,Ne.then(ce))}function z(t){D.push(t)}const j=new Set;let W=0;function ce(){const t=X;do{for(;W<K.length;){const e=K[W];W++,A(e),Oe(e.$$)}for(A(null),K.length=0,W=0;ne.length;)ne.pop()();for(let e=0;e<D.length;e+=1){const n=D[e];j.has(n)||(j.add(n),n())}D.length=0}while(K.length);for(;oe.length;)oe.pop()();q=!1,j.clear(),A(t)}function Oe(t){if(t.fragment!==null){t.update(),P(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}const F=new Set;let G;function ue(){G={r:0,c:[],p:G}}function ae(){G.r||P(G.c),G=G.p}function T(t,e){t&&t.i&&(F.delete(t),t.i(e))}function L(t,e,n,r){if(t&&t.o){if(F.has(t))return;F.add(t),G.c.push(()=>{F.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Z(t){t&&t.c()}function k(t,e,n,r){const{fragment:o,on_mount:s,on_destroy:i,after_update:f}=t.$$;o&&o.m(e,n),r||z(()=>{const l=s.map(fe).filter(ge);i?i.push(...l):P(l),t.$$.on_mount=[]}),f.forEach(z)}function x(t,e){const n=t.$$;n.fragment!==null&&(P(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(t,e){t.$$.dirty[0]===-1&&(K.push(t),Ie(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(t,e,n,r,o,s,i,f=[-1]){const l=X;A(t);const c=t.$$={fragment:null,ctx:null,props:s,update:m,not_equal:o,bound:te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:te(),dirty:f,skip_bound:!1,root:e.target||l.$$.root};i&&i(c.root);let g=!1;if(c.ctx=n?n(t,e.props||{},(u,d,...N)=>{const I=N.length?N[0]:d;return c.ctx&&o(c.ctx[u],c.ctx[u]=I)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](I),g&&Te(t,u)),d}):[],c.update(),g=!0,P(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const u=ve(e.target);c.fragment&&c.fragment.l(u),u.forEach(y)}else c.fragment&&c.fragment.c();e.intro&&T(t.$$.fragment),k(t,e.target,e.anchor,e.customElement),ce()}A(l)}class R{$destroy(){x(this,1),this.$destroy=m}$on(e,n){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!Ee(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var S=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(S||{}),a=(t=>(t[t.SCREEN_WIDTH=600]="SCREEN_WIDTH",t[t.SCREEN_HEIGHT=400]="SCREEN_HEIGHT",t[t.BLOCK_SIZE=25]="BLOCK_SIZE",t))(a||{});function we(t){let e,n,r,o,s,i;return{c(){e=p("div"),n=p("h1"),n.textContent="Score : 80",r=U(),o=p("button"),o.textContent="Restart",h(e,"class","game-over-screen svelte-189tr06")},m(f,l){v(f,e,l),O(e,n),O(e,r),O(e,o),s||(i=Q(o,"click",t[0]),s=!0)},p:m,i:m,o:m,d(f){f&&y(e),s=!1,i()}}}function Ce(t){return[()=>{console.log("restart game"),M.welcomeScreen()}]}class Ge extends R{constructor(e){super(),H(this,e,Ce,we,w,{})}}function Le(t){let e;return{c(){e=p("div"),h(e,"class","food svelte-14olvay"),_(e,"left",t[1]+"px"),_(e,"top",t[0]+"px"),_(e,"width",a.BLOCK_SIZE-2+"px"),_(e,"height",a.BLOCK_SIZE-2+"px")},m(n,r){v(n,e,r)},p(n,[r]){r&2&&_(e,"left",n[1]+"px"),r&1&&_(e,"top",n[0]+"px")},i:m,o:m,d(n){n&&y(e)}}}function He(t,e,n){let{foodTop:r=0}=e,{foodLeft:o=0}=e;return t.$$set=s=>{"foodTop"in s&&n(0,r=s.foodTop),"foodLeft"in s&&n(1,o=s.foodLeft)},[r,o]}class Re extends R{constructor(e){super(),H(this,e,He,Le,w,{foodTop:0,foodLeft:1})}}function re(t){let e,n,r;return{c(){e=p("div"),n=U(),r=p("div"),h(e,"id","leftEye"),h(e,"class","eyes svelte-bddbcw"),h(r,"id","rightEye"),h(r,"class","eyes svelte-bddbcw")},m(o,s){v(o,e,s),v(o,n,s),v(o,r,s)},d(o){o&&y(e),o&&y(n),o&&y(r)}}}function Be(t){let e,n,r=t[2]&&re();return{c(){e=p("div"),r&&r.c(),_(e,"left",t[1]+"px"),_(e,"top",t[0]+"px"),_(e,"width",a.BLOCK_SIZE+"px"),_(e,"height",a.BLOCK_SIZE+"px"),h(e,"class",n="snake-body "+t[3]+" svelte-bddbcw")},m(o,s){v(o,e,s),r&&r.m(e,null)},p(o,[s]){o[2]?r||(r=re(),r.c(),r.m(e,null)):r&&(r.d(1),r=null),s&2&&_(e,"left",o[1]+"px"),s&1&&_(e,"top",o[0]+"px"),s&8&&n!==(n="snake-body "+o[3]+" svelte-bddbcw")&&h(e,"class",n)},i:m,o:m,d(o){o&&y(e),r&&r.d()}}}function ke(t,e,n){let{top:r=a.BLOCK_SIZE}=e,{left:o=a.BLOCK_SIZE}=e,{isHead:s=!1}=e,{direction:i="right"}=e;return t.$$set=f=>{"top"in f&&n(0,r=f.top),"left"in f&&n(1,o=f.left),"isHead"in f&&n(2,s=f.isHead),"direction"in f&&n(3,i=f.direction)},[r,o,s,i]}class xe extends R{constructor(e){super(),H(this,e,ke,Be,w,{top:0,left:1,isHead:2,direction:3})}}function se(t,e,n){const r=t.slice();return r[2]=e[n],r[4]=n,r}function ie(t){let e,n;return e=new xe({props:{isHead:t[4]==0,top:t[2].top,left:t[2].left,direction:t[1]}}),{c(){Z(e.$$.fragment)},m(r,o){k(e,r,o),n=!0},p(r,o){const s={};o&1&&(s.top=r[2].top),o&1&&(s.left=r[2].left),o&2&&(s.direction=r[1]),e.$set(s)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function $e(t){let e,n,r=t[0],o=[];for(let i=0;i<r.length;i+=1)o[i]=ie(se(t,r,i));const s=i=>L(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=ye()},m(i,f){for(let l=0;l<o.length;l+=1)o[l].m(i,f);v(i,e,f),n=!0},p(i,[f]){if(f&3){r=i[0];let l;for(l=0;l<r.length;l+=1){const c=se(i,r,l);o[l]?(o[l].p(c,f),T(o[l],1)):(o[l]=ie(c),o[l].c(),T(o[l],1),o[l].m(e.parentNode,e))}for(ue(),l=r.length;l<o.length;l+=1)s(l);ae()}},i(i){if(!n){for(let f=0;f<r.length;f+=1)T(o[f]);n=!0}},o(i){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)L(o[f]);n=!1},d(i){Se(o,i),i&&y(e)}}}function Ke(t,e,n){let{snakeBodies:r=[]}=e,{direction:o="right"}=e;return t.$$set=s=>{"snakeBodies"in s&&n(0,r=s.snakeBodies),"direction"in s&&n(1,o=s.direction)},[r,o]}class Ae extends R{constructor(e){super(),H(this,e,Ke,$e,w,{snakeBodies:0,direction:1})}}function Ue(t){let e,n,r,o,s,i,f,l,c,g;return n=new Ae({props:{direction:t[3],snakeBodies:t[0]}}),o=new Re({props:{foodLeft:t[1],foodTop:t[2]}}),{c(){e=p("main"),Z(n.$$.fragment),r=U(),Z(o.$$.fragment),s=U(),i=p("div"),f=J(t[4]),_(e,"width",a.SCREEN_WIDTH+"px"),_(e,"height",a.SCREEN_HEIGHT+"px"),h(e,"class","svelte-ig4lxw"),h(i,"class","score svelte-ig4lxw")},m(u,d){v(u,e,d),k(n,e,null),O(e,r),k(o,e,null),v(u,s,d),v(u,i,d),O(i,f),l=!0,c||(g=Q(window,"keydown",t[5]),c=!0)},p(u,[d]){const N={};d&8&&(N.direction=u[3]),d&1&&(N.snakeBodies=u[0]),n.$set(N);const I={};d&2&&(I.foodLeft=u[1]),d&4&&(I.foodTop=u[2]),o.$set(I),(!l||d&16)&&be(f,u[4])},i(u){l||(T(n.$$.fragment,u),T(o.$$.fragment,u),l=!0)},o(u){L(n.$$.fragment,u),L(o.$$.fragment,u),l=!1},d(u){u&&y(e),x(n),x(o),u&&y(s),u&&y(i),c=!1,g()}}}function le(t,e){return!(t.top<e.top||t.top>e.top||t.left<e.left||t.left>e.left)}function Ze(t,e,n){let r,o,s,i=!1;a.SCREEN_WIDTH/2,a.SCREEN_HEIGHT/2,M.subscribe(E=>{});const f=()=>{console.log("game over"),M.gameOver()};let l=0,c=0,g=S.RIGHT,u=[],d;const N=()=>{d=setInterval(()=>{u.pop();let{left:E,top:C}=u[0];g===S.UP?C-=a.BLOCK_SIZE:g===S.DOWN?C+=a.BLOCK_SIZE:g===S.LEFT?E-=a.BLOCK_SIZE:g===S.RIGHT&&(E+=a.BLOCK_SIZE);const $={left:E,top:C};n(0,u=[$,...u]),le($,{left:l,top:c})&&(I(),n(0,u=[...u,u[u.length-1]])),de()&&(clearInterval(d),Y(),f())},200)};function I(){n(2,c=Math.floor(Math.random()*(s/a.BLOCK_SIZE))*a.BLOCK_SIZE),n(1,l=Math.floor(Math.random()*(o/a.BLOCK_SIZE))*a.BLOCK_SIZE)}function Y(){I(),n(3,g=S.RIGHT),n(0,u=[{left:a.BLOCK_SIZE*2,top:0},{left:a.BLOCK_SIZE,top:0},{left:0,top:0}])}function de(){if(u.slice(1).filter(he=>le(he,u[0])).length>0)return!0;const{top:$,left:ee}=u[0];return $>=s||$<0||ee<0||ee>=o}function _e(){console.log("pauseGame"),clearInterval(d)}function me(E){return E===38?S.UP:E===39?S.RIGHT:E===37?S.LEFT:E===40?S.DOWN:S.UNKNOWN}function pe(E){if(E.keyCode===32&&(i=!i,i?_e():N()),i)return;const C=me(E.keyCode);C!=S.UNKNOWN&&n(3,g=C)}return N(),Y(),t.$$.update=()=>{t.$$.dirty&1&&n(4,r=u.length-3)},o=a.SCREEN_WIDTH,s=a.SCREEN_HEIGHT,[u,l,c,g,r,pe]}class V extends R{constructor(e){super(),H(this,e,Ze,Ue,w,{})}}function Me(t){let e,n,r,o,s,i,f;return{c(){e=p("div"),n=p("div"),n.textContent="Snake",r=U(),o=p("div"),s=p("button"),s.textContent="Start",h(n,"class","title svelte-yxm8be"),h(o,"class","btn svelte-yxm8be"),h(e,"class","start-screen svelte-yxm8be")},m(l,c){v(l,e,c),O(e,n),O(e,r),O(e,o),O(o,s),i||(f=Q(s,"click",t[0]),i=!0)},p:m,i:m,o:m,d(l){l&&y(e),i=!1,f()}}}function Pe(t){return[()=>{console.log("start game"),M.startGame()}]}class We extends R{constructor(e){super(),H(this,e,Pe,Me,w,{})}}var b=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t))(b||{});const B=[];function De(t,e=m){let n;const r=new Set;function o(f){if(w(t,f)&&(t=f,n)){const l=!B.length;for(const c of r)c[1](),B.push(c,t);if(l){for(let c=0;c<B.length;c+=2)B[c][0](B[c+1]);B.length=0}}}function s(f){o(f(t))}function i(f,l=m){const c=[f,l];return r.add(c),r.size===1&&(n=e(o)||m),f(t),()=>{r.delete(c),r.size===0&&(n(),n=null)}}return{set:o,update:s,subscribe:i}}const Fe=()=>{const t=[{status:b.NOT_STARTED,component:We},{status:b.RUNNING,component:V},{status:b.PAUSED,component:V},{status:b.RESUME,component:V},{status:b.GAME_OVER,component:Ge}];let{update:e,subscribe:n}=De(t[0]);return{subscribe:n,startGame:()=>{e(l=>(l=t.find(c=>c.status==b.RUNNING),l))},pauseGame:()=>{e(l=>(l=t.find(c=>c.status==b.PAUSED),l))},resumeGame:()=>{e(l=>(l=t.find(c=>c.status==b.RUNNING),l))},gameOver:()=>{e(l=>(l=t.find(c=>c.status==b.GAME_OVER),l))},welcomeScreen:()=>{e(l=>(l=t.find(c=>c.status==b.NOT_STARTED),l))}}},M=Fe();function je(t){let e,n,r;var o=t[0].component;function s(i){return{}}return o&&(n=new o(s())),{c(){e=p("div"),n&&Z(n.$$.fragment),h(e,"class","container svelte-16au4d0"),_(e,"width",a.SCREEN_WIDTH+"px"),_(e,"height",a.SCREEN_HEIGHT+"px")},m(i,f){v(i,e,f),n&&k(n,e,null),r=!0},p(i,[f]){if(o!==(o=i[0].component)){if(n){ue();const l=n;L(l.$$.fragment,1,0,()=>{x(l,1)}),ae()}o?(n=new o(s()),Z(n.$$.fragment),T(n.$$.fragment,1),k(n,e,null)):n=null}},i(i){r||(n&&T(n.$$.fragment,i),r=!0)},o(i){n&&L(n.$$.fragment,i),r=!1},d(i){i&&y(e),n&&x(n)}}}function Ve(t,e,n){let r;return M.subscribe(o=>{n(0,r=o)}),[r]}class qe extends R{constructor(e){super(),H(this,e,Ve,je,w,{})}}new qe({target:document.getElementById("app")});
