(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function T(){}function qe(t){return t()}function Ue(){return Object.create(null)}function fe(t){t.forEach(qe)}function et(t){return typeof t=="function"}function V(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function tt(t){return Object.keys(t).length===0}function u(t,e){t.appendChild(e)}function x(t,e,n){t.insertBefore(e,n||null)}function G(t){t.parentNode.removeChild(t)}function nt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function F(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function U(t){return document.createTextNode(t)}function H(){return U(" ")}function Xe(){return U("")}function _e(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function st(t){return Array.from(t.childNodes)}function q(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function w(t,e,n,l){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function lt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,l,e),s}let he;function ae(t){he=t}function Ye(){if(!he)throw new Error("Function called outside component initialization");return he}function ot(t){Ye().$$.on_mount.push(t)}function rt(){const t=Ye();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=lt(e,n,{cancelable:l});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}const ue=[],De=[],ye=[],Ze=[],it=Promise.resolve();let Re=!1;function ct(){Re||(Re=!0,it.then(Je))}function Ge(t){ye.push(t)}const Te=new Set;let Le=0;function Je(){const t=he;do{for(;Le<ue.length;){const e=ue[Le];Le++,ae(e),ft(e.$$)}for(ae(null),ue.length=0,Le=0;De.length;)De.pop()();for(let e=0;e<ye.length;e+=1){const n=ye[e];Te.has(n)||(Te.add(n),n())}ye.length=0}while(ue.length);for(;Ze.length;)Ze.pop()();Re=!1,Te.clear(),ae(t)}function ft(t){if(t.fragment!==null){t.update(),fe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ge)}}const Ie=new Set;let Q;function Fe(){Q={r:0,c:[],p:Q}}function He(){Q.r||fe(Q.c),Q=Q.p}function D(t,e){t&&t.i&&(Ie.delete(t),t.i(e))}function z(t,e,n,l){if(t&&t.o){if(Ie.has(t))return;Ie.add(t),Q.c.push(()=>{Ie.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function ut(t,e){z(t,1,1,()=>{e.delete(t.key)})}function at(t,e,n,l,s,r,o,c,f,i,_,b){let v=t.length,L=r.length,E=v;const I={};for(;E--;)I[t[E].key]=E;const C=[],k=new Map,N=new Map;for(E=L;E--;){const m=b(s,r,E),O=n(m);let R=o.get(O);R?l&&R.p(m,e):(R=i(O,m),R.c()),k.set(O,C[E]=R),O in I&&N.set(O,Math.abs(E-I[O]))}const M=new Set,d=new Set;function p(m){D(m,1),m.m(c,_),o.set(m.key,m),_=m.first,L--}for(;v&&L;){const m=C[L-1],O=t[v-1],R=m.key,Z=O.key;m===O?(_=m.first,v--,L--):k.has(Z)?!o.has(R)||M.has(R)?p(m):d.has(Z)?v--:N.get(R)>N.get(Z)?(d.add(R),p(m)):(M.add(Z),v--):(f(O,o),v--)}for(;v--;){const m=t[v];k.has(m.key)||f(m,o)}for(;L;)p(C[L-1]);return C}function ce(t){t&&t.c()}function ee(t,e,n,l){const{fragment:s,on_mount:r,on_destroy:o,after_update:c}=t.$$;s&&s.m(e,n),l||Ge(()=>{const f=r.map(qe).filter(et);o?o.push(...f):fe(f),t.$$.on_mount=[]}),c.forEach(Ge)}function te(t,e){const n=t.$$;n.fragment!==null&&(fe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(t,e){t.$$.dirty[0]===-1&&(ue.push(t),ct(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(t,e,n,l,s,r,o,c=[-1]){const f=he;ae(t);const i=t.$$={fragment:null,ctx:null,props:r,update:T,not_equal:s,bound:Ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Ue(),dirty:c,skip_bound:!1,root:e.target||f.$$.root};o&&o(i.root);let _=!1;if(i.ctx=n?n(t,e.props||{},(b,v,...L)=>{const E=L.length?L[0]:v;return i.ctx&&s(i.ctx[b],i.ctx[b]=E)&&(!i.skip_bound&&i.bound[b]&&i.bound[b](E),_&&dt(t,b)),v}):[],i.update(),_=!0,fe(i.before_update),i.fragment=l?l(i.ctx):!1,e.target){if(e.hydrate){const b=st(e.target);i.fragment&&i.fragment.l(b),b.forEach(G)}else i.fragment&&i.fragment.c();e.intro&&D(t.$$.fragment),ee(t,e.target,e.anchor,e.customElement),Je()}ae(f)}class Y{$destroy(){te(this,1),this.$destroy=T}$on(e,n){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!tt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var B=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(B||{}),S=(t=>(t[t.SCREEN_WIDTH=600]="SCREEN_WIDTH",t[t.SCREEN_HEIGHT=400]="SCREEN_HEIGHT",t[t.BLOCK_SIZE=25]="BLOCK_SIZE",t))(S||{}),de=(t=>(t[t.DELAY=50]="DELAY",t[t.MAX_POINTS=10]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t))(de||{}),re=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(re||{});const oe=[];function Qe(t,e=T){let n;const l=new Set;function s(c){if(V(t,c)&&(t=c,n)){const f=!oe.length;for(const i of l)i[1](),oe.push(i,t);if(f){for(let i=0;i<oe.length;i+=2)oe[i][0](oe[i+1]);oe.length=0}}}function r(c){s(c(t))}function o(c,f=T){const i=[c,f];return l.add(i),l.size===1&&(n=e(s)||T),c(t),()=>{l.delete(i),l.size===0&&(n(),n=null)}}return{set:s,update:r,subscribe:o}}const _t=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=Qe(t);return{subscribe:n,resetScore:()=>{e(o=>(o.food=0,o.bonus=0,o.score=0,o))},eatFood:()=>{e(o=>(o.food=o.food+1,o.score=o.food*5+o.bonus*20,o.score>o.highScore&&(o.highScore=o.score),o))},nextLevel:()=>{e(o=>(o.level=o.level+1,o))}}};let ie=_t();function ht(t){let e,n,l,s,r,o,c,f=t[0].playerName+"",i,_,b,v,L,E=t[0].score+"",I,C,k,N,M,d=t[0].food+"",p,m,O,R,Z,ne=t[0].bonus+"",g,y,A,P,W,pe=t[0].highScore+"",Ce,xe,ge,me,se,Ee=t[0].level+"",Ne,Oe,ve=t[0].stage+"",Be,Me,le,Se,Ke,be,ke,Pe;return{c(){e=h("div"),n=h("div"),n.textContent="Snake",l=H(),s=h("table"),r=h("tr"),o=h("td"),o.textContent="Player",c=h("td"),i=U(f),_=H(),b=h("tr"),v=h("td"),v.textContent="Score",L=h("td"),I=U(E),C=H(),k=h("tr"),N=h("td"),N.textContent="Food",M=h("td"),p=U(d),m=H(),O=h("tr"),R=h("td"),R.textContent="Bonus",Z=h("td"),g=U(ne),y=H(),A=h("tr"),P=h("td"),P.textContent="High Score",W=h("td"),Ce=U(pe),xe=H(),ge=h("tr"),me=h("td"),me.textContent="Level-Stage",se=h("td"),Ne=U(Ee),Oe=h("span"),Oe.textContent="-",Be=U(ve),Me=H(),le=h("div"),Se=h("button"),Se.textContent="Replay",Ke=H(),be=h("button"),be.textContent="Menu",a(n,"class","title svelte-1phc8sd"),a(o,"class","c1 svelte-1phc8sd"),a(c,"class","c2 svelte-1phc8sd"),a(v,"class","c1 svelte-1phc8sd"),a(L,"class","c2 svelte-1phc8sd"),a(N,"class","c1 svelte-1phc8sd"),a(M,"class","c2 svelte-1phc8sd"),a(R,"class","c1 svelte-1phc8sd"),a(Z,"class","c2 svelte-1phc8sd"),a(P,"class","c1 svelte-1phc8sd"),a(W,"class","c2 svelte-1phc8sd"),a(me,"class","c1 svelte-1phc8sd"),a(se,"class","c2 svelte-1phc8sd"),a(s,"class","svelte-1phc8sd"),a(le,"class","flex svelte-1phc8sd"),a(e,"class","game-over-screen svelte-1phc8sd")},m($,j){x($,e,j),u(e,n),u(e,l),u(e,s),u(s,r),u(r,o),u(r,c),u(c,i),u(s,_),u(s,b),u(b,v),u(b,L),u(L,I),u(s,C),u(s,k),u(k,N),u(k,M),u(M,p),u(s,m),u(s,O),u(O,R),u(O,Z),u(Z,g),u(s,y),u(s,A),u(A,P),u(A,W),u(W,Ce),u(s,xe),u(s,ge),u(ge,me),u(ge,se),u(se,Ne),u(se,Oe),u(se,Be),u(e,Me),u(e,le),u(le,Se),u(le,Ke),u(le,be),ke||(Pe=[_e(Se,"click",t[2]),_e(be,"click",t[1])],ke=!0)},p($,[j]){j&1&&f!==(f=$[0].playerName+"")&&q(i,f),j&1&&E!==(E=$[0].score+"")&&q(I,E),j&1&&d!==(d=$[0].food+"")&&q(p,d),j&1&&ne!==(ne=$[0].bonus+"")&&q(g,ne),j&1&&pe!==(pe=$[0].highScore+"")&&q(Ce,pe),j&1&&Ee!==(Ee=$[0].level+"")&&q(Ne,Ee),j&1&&ve!==(ve=$[0].stage+"")&&q(Be,ve)},i:T,o:T,d($){$&&G(e),ke=!1,fe(Pe)}}}function pt(t,e,n){const l=()=>{console.log("restart game"),J.welcomeScreen()},s=()=>{ie.resetScore(),J.startGame()};let r;return ie.subscribe(o=>{n(0,r=o)}),[r,l,s]}class gt extends Y{constructor(e){super(),X(this,e,pt,ht,V,{})}}function mt(t){let e,n,l,s,r,o,c,f,i,_,b,v,L,E,I,C;return{c(){e=h("div"),n=F("svg"),l=F("g"),s=F("g"),r=F("g"),o=F("g"),c=F("ellipse"),f=F("g"),i=F("path"),_=F("path"),b=F("g"),v=F("path"),L=F("g"),E=F("path"),I=F("g"),C=F("ellipse"),a(l,"id","Layer_1"),a(c,"id","shadow"),a(c,"opacity","0.3"),a(c,"cx","438.7"),a(c,"cy","765.8"),a(c,"rx","283"),a(c,"ry","32.9"),a(i,"id","cup-shadow"),a(i,"fill","#E7F4FA"),a(i,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),a(_,"id","cup-light"),a(_,"fill","#FFFFFF"),a(_,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),a(v,"id","mainFood"),a(v,"fill","#DB343C"),a(v,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),a(E,"id","highlight"),a(E,"opacity","0.3"),a(E,"fill","#FFFFFF"),a(E,"stroke","#000000"),a(E,"stroke-width","0.25"),a(E,"stroke-miterlimit","10"),a(E,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),a(C,"id","c2"),a(C,"fill","#FFFFFF"),a(C,"cx","436.8"),a(C,"cy","144.3"),a(C,"rx","140.6"),a(C,"ry","138.4"),a(I,"id","c1"),a(s,"id","Layer_2"),a(n,"viewBox","0 0 855.6 798.6"),a(e,"class","food svelte-1w9msmi"),w(e,"left",t[1]+"px"),w(e,"top",t[0]+"px"),w(e,"width",S.BLOCK_SIZE-2+"px"),w(e,"height",S.BLOCK_SIZE-2+"px")},m(k,N){x(k,e,N),u(e,n),u(n,l),u(n,s),u(s,r),u(r,o),u(o,c),u(r,f),u(f,i),u(f,_),u(r,b),u(b,v),u(r,L),u(L,E),u(r,I),u(I,C)},p(k,[N]){N&2&&w(e,"left",k[1]+"px"),N&1&&w(e,"top",k[0]+"px")},i:T,o:T,d(k){k&&G(e)}}}function Et(t,e,n){let{top:l=0}=e,{left:s=0}=e;return t.$$set=r=>{"top"in r&&n(0,l=r.top),"left"in r&&n(1,s=r.left)},[l,s]}class vt extends Y{constructor(e){super(),X(this,e,Et,mt,V,{top:0,left:1})}}function $e(t){let e,n,l;return{c(){e=h("div"),n=H(),l=h("div"),a(e,"id","leftEye"),a(e,"class","eyes svelte-rzshp"),a(l,"id","rightEye"),a(l,"class","eyes svelte-rzshp")},m(s,r){x(s,e,r),x(s,n,r),x(s,l,r)},d(s){s&&G(e),s&&G(n),s&&G(l)}}}function St(t){let e,n,l=t[2]&&$e();return{c(){e=h("div"),l&&l.c(),w(e,"left",t[1]+"px"),w(e,"top",t[0]+"px"),w(e,"width",S.BLOCK_SIZE+"px"),w(e,"height",S.BLOCK_SIZE+"px"),a(e,"class",n="snake-body "+t[3]+" svelte-rzshp")},m(s,r){x(s,e,r),l&&l.m(e,null)},p(s,[r]){s[2]?l||(l=$e(),l.c(),l.m(e,null)):l&&(l.d(1),l=null),r&2&&w(e,"left",s[1]+"px"),r&1&&w(e,"top",s[0]+"px"),r&8&&n!==(n="snake-body "+s[3]+" svelte-rzshp")&&a(e,"class",n)},i:T,o:T,d(s){s&&G(e),l&&l.d()}}}function bt(t,e,n){let{top:l=S.BLOCK_SIZE}=e,{left:s=S.BLOCK_SIZE}=e,{isHead:r=!1}=e,{direction:o="right"}=e;return t.$$set=c=>{"top"in c&&n(0,l=c.top),"left"in c&&n(1,s=c.left),"isHead"in c&&n(2,r=c.isHead),"direction"in c&&n(3,o=c.direction)},[l,s,r,o]}class Lt extends Y{constructor(e){super(),X(this,e,bt,St,V,{top:0,left:1,isHead:2,direction:3})}}function We(t,e,n){const l=t.slice();return l[2]=e[n],l[4]=n,l}function ze(t){let e,n;return e=new Lt({props:{isHead:t[4]==0,top:t[2].top,left:t[2].left,direction:t[1]}}),{c(){ce(e.$$.fragment)},m(l,s){ee(e,l,s),n=!0},p(l,s){const r={};s&1&&(r.top=l[2].top),s&1&&(r.left=l[2].left),s&2&&(r.direction=l[1]),e.$set(r)},i(l){n||(D(e.$$.fragment,l),n=!0)},o(l){z(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function yt(t){let e,n,l=t[0],s=[];for(let o=0;o<l.length;o+=1)s[o]=ze(We(t,l,o));const r=o=>z(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Xe()},m(o,c){for(let f=0;f<s.length;f+=1)s[f].m(o,c);x(o,e,c),n=!0},p(o,[c]){if(c&3){l=o[0];let f;for(f=0;f<l.length;f+=1){const i=We(o,l,f);s[f]?(s[f].p(i,c),D(s[f],1)):(s[f]=ze(i),s[f].c(),D(s[f],1),s[f].m(e.parentNode,e))}for(Fe(),f=l.length;f<s.length;f+=1)r(f);He()}},i(o){if(!n){for(let c=0;c<l.length;c+=1)D(s[c]);n=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)z(s[c]);n=!1},d(o){nt(s,o),o&&G(e)}}}function It(t,e,n){let{snakeBodies:l=[]}=e,{direction:s="right"}=e;return t.$$set=r=>{"snakeBodies"in r&&n(0,l=r.snakeBodies),"direction"in r&&n(1,s=r.direction)},[l,s]}class wt extends Y{constructor(e){super(),X(this,e,It,yt,V,{snakeBodies:0,direction:1})}}const we=[{bg:"#affbaf"},{bg:"#fda2f2"},{bg:"#7f61bb"},{bg:"#c34366"}];function Ct(t){let e;return{c(){e=h("div"),a(e,"class","bonus svelte-18cernx"),w(e,"width",S.BLOCK_SIZE+"px"),w(e,"height",S.BLOCK_SIZE+"px"),w(e,"left",t[0]+"px"),w(e,"top",t[1]+"px")},m(n,l){x(n,e,l)},p(n,[l]){l&1&&w(e,"left",n[0]+"px"),l&2&&w(e,"top",n[1]+"px")},i:T,o:T,d(n){n&&G(e)}}}function Nt(t,e,n){const l=rt();let{left:s}=e,{top:r}=e,{id:o}=e;return ot(()=>{setTimeout(()=>{l("bonusFinished",o)},de.BONUS_TIME)}),t.$$set=c=>{"left"in c&&n(0,s=c.left),"top"in c&&n(1,r=c.top),"id"in c&&n(2,o=c.id)},[s,r,o]}class Ot extends Y{constructor(e){super(),X(this,e,Nt,Ct,V,{left:0,top:1,id:2})}}const Bt=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);function Ve(t,e,n){const l=t.slice();return l[25]=e[n],l}function je(t,e){let n,l,s;return l=new Ot({props:{id:e[25].id,left:e[25].left,top:e[25].top}}),l.$on("bonusFinished",e[7]),{key:t,first:null,c(){n=Xe(),ce(l.$$.fragment),this.first=n},m(r,o){x(r,n,o),ee(l,r,o),s=!0},p(r,o){e=r;const c={};o&32&&(c.id=e[25].id),o&32&&(c.left=e[25].left),o&32&&(c.top=e[25].top),l.$set(c)},i(r){s||(D(l.$$.fragment,r),s=!0)},o(r){z(l.$$.fragment,r),s=!1},d(r){r&&G(n),te(l,r)}}}function kt(t){let e,n,l,s,r,o=[],c=new Map,f,i,_=t[0].level+"",b,v,L=t[0].score+"",E,I,C,k;n=new wt({props:{direction:t[3],snakeBodies:t[4]}}),s=new vt({props:{left:t[1],top:t[2]}});let N=t[5];const M=d=>d[25].id;for(let d=0;d<N.length;d+=1){let p=Ve(t,N,d),m=M(p);c.set(m,o[d]=je(m,p))}return{c(){e=h("main"),ce(n.$$.fragment),l=H(),ce(s.$$.fragment),r=H();for(let d=0;d<o.length;d+=1)o[d].c();f=H(),i=h("div"),b=U(_),v=U(" : "),E=U(L),w(e,"width",S.SCREEN_WIDTH+"px"),w(e,"height",S.SCREEN_HEIGHT+"px"),w(e,"background",we[t[0].level].bg),a(e,"class","svelte-sjb5bh"),a(i,"class","score svelte-sjb5bh")},m(d,p){x(d,e,p),ee(n,e,null),u(e,l),ee(s,e,null),u(e,r);for(let m=0;m<o.length;m+=1)o[m].m(e,null);x(d,f,p),x(d,i,p),u(i,b),u(i,v),u(i,E),I=!0,C||(k=_e(window,"keydown",t[6]),C=!0)},p(d,[p]){const m={};p&8&&(m.direction=d[3]),p&16&&(m.snakeBodies=d[4]),n.$set(m);const O={};p&2&&(O.left=d[1]),p&4&&(O.top=d[2]),s.$set(O),p&160&&(N=d[5],Fe(),o=at(o,p,M,1,d,N,c,e,ut,je,null,Ve),He()),(!I||p&1)&&w(e,"background",we[d[0].level].bg),(!I||p&1)&&_!==(_=d[0].level+"")&&q(b,_),(!I||p&1)&&L!==(L=d[0].score+"")&&q(E,L)},i(d){if(!I){D(n.$$.fragment,d),D(s.$$.fragment,d);for(let p=0;p<N.length;p+=1)D(o[p]);I=!0}},o(d){z(n.$$.fragment,d),z(s.$$.fragment,d);for(let p=0;p<o.length;p+=1)z(o[p]);I=!1},d(d){d&&G(e),te(n),te(s);for(let p=0;p<o.length;p+=1)o[p].d();d&&G(f),d&&G(i),C=!1,k()}}}function Tt(t,e,n){let l=!1,s;J.subscribe(g=>{}),ie.subscribe(g=>{n(0,s=g)});const r=()=>{J.gameOver()};let o=0,c=0,f=B.RIGHT,i=[],_=[],b;const v=S.SCREEN_WIDTH,L=S.SCREEN_HEIGHT,E=()=>{ie.nextLevel(),ie.resetScore(),clearInterval(b),I(),M()},I=()=>{let g=we.length-s.level;g=g*de.DELAY,b=setInterval(()=>{i.pop();let{left:y,top:A}=i[0];f===B.UP?A-=S.BLOCK_SIZE:f===B.DOWN?A+=S.BLOCK_SIZE:f===B.LEFT?y-=S.BLOCK_SIZE:f===B.RIGHT&&(y+=S.BLOCK_SIZE);const P={left:y,top:A};n(4,i=[P,...i]),C(P,{left:o,top:c})&&(n(4,i=[...i,i[i.length-1]]),ie.eatFood(),N(),s.food%5==0&&Z(),i.length/de.MAX_POINTS>1&&i.length%de.MAX_POINTS==0&&(s.level<we.length-1?E():(clearInterval(b),J.allLevelsCleared()))),d()&&(clearInterval(b),M(),r())},g)},C=(g,y)=>!(g.top<y.top||g.top>y.top||g.left<y.left||g.left>y.left),k=()=>{let g=0,y=0;for(;;){g=Math.floor(Math.random()*(L/S.BLOCK_SIZE))*S.BLOCK_SIZE,y=Math.floor(Math.random()*(v/S.BLOCK_SIZE))*S.BLOCK_SIZE;let A=i.findIndex(W=>{W.top==g}),P=i.findIndex(W=>{W.left==y});if(A==-1&&P==-1)break}return{top:g,left:y}},N=()=>{const{top:g,left:y}=k();n(1,o=y),n(2,c=g)},M=()=>{N(),n(3,f=B.RIGHT),n(4,i=[{left:S.BLOCK_SIZE*2,top:0},{left:S.BLOCK_SIZE,top:0},{left:0,top:0}])},d=()=>{if(i.slice(1).filter(W=>C(W,i[0])).length>0)return!0;const{top:A,left:P}=i[0];return P>=v&&f==B.RIGHT&&n(4,i[0].left=0,i),P<0&&f==B.LEFT&&n(4,i[0].left=v-S.BLOCK_SIZE,i),A<0&&f==B.UP&&n(4,i[0].top=L-S.BLOCK_SIZE,i),A>=L&&f==B.DOWN&&n(4,i[0].top=0,i),!1},p=()=>{clearInterval(b)},m=g=>g===re.UP&&f!=B.DOWN?B.UP:g===re.RIGHT&&f!=B.LEFT?B.RIGHT:g===re.LEFT&&f!=B.RIGHT?B.LEFT:g===re.DOWN&&f!=B.UP?B.DOWN:B.UNKNOWN,O=g=>{const y=g.code;if(y===re.SPACEBAR&&(l=!l,l?p():I()),l)return;const A=m(y);A!=B.UNKNOWN&&n(3,f=A)},R=g=>{console.log(`on bonus finished =${g.detail}`),ne(g.detail)},Z=()=>{const g=Bt();let y={top:0,left:0,id:g};y.top=Math.floor(Math.random()*(L/S.BLOCK_SIZE))*S.BLOCK_SIZE,y.left=Math.floor(Math.random()*(v/S.BLOCK_SIZE))*S.BLOCK_SIZE,_.push(y),n(5,_)},ne=g=>{const y=_.findIndex(A=>A.id==g);y!=-1&&(_.splice(y,1),n(5,_))};return I(),M(),[s,o,c,f,i,_,O,R]}class Ae extends Y{constructor(e){super(),X(this,e,Tt,kt,V,{})}}function At(t){let e,n,l,s,r,o,c;return{c(){e=h("div"),n=h("div"),n.textContent="Snake",l=H(),s=h("div"),r=h("button"),r.textContent="Start",a(n,"class","title svelte-yxm8be"),a(s,"class","btn svelte-yxm8be"),a(e,"class","start-screen svelte-yxm8be")},m(f,i){x(f,e,i),u(e,n),u(e,l),u(e,s),u(s,r),o||(c=_e(r,"click",t[0]),o=!0)},p:T,i:T,o:T,d(f){f&&G(e),o=!1,c()}}}function Rt(t){return[()=>{console.log("start game"),J.startGame()}]}class Gt extends Y{constructor(e){super(),X(this,e,Rt,At,V,{})}}function Ft(t){let e,n,l,s,r,o,c,f;return{c(){e=h("div"),n=h("div"),n.textContent="Congratulations !",l=H(),s=h("div"),s.textContent="You have cleared all the levels.",r=H(),o=h("button"),o.textContent="Menu",a(n,"class","title svelte-gyhhqq"),a(e,"class","final svelte-gyhhqq")},m(i,_){x(i,e,_),u(e,n),u(e,l),u(e,s),u(e,r),u(e,o),c||(f=_e(o,"click",t[0]),c=!0)},p:T,i:T,o:T,d(i){i&&G(e),c=!1,f()}}}function Ht(t){return[()=>{console.log("restart game"),J.welcomeScreen()}]}class xt extends Y{constructor(e){super(),X(this,e,Ht,Ft,V,{})}}var K=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(K||{});const Mt=()=>{const t=[{status:K.NOT_STARTED,component:Gt},{status:K.RUNNING,component:Ae},{status:K.PAUSED,component:Ae},{status:K.RESUME,component:Ae},{status:K.GAME_OVER,component:gt},{status:K.ALL_LEVELS_CLEARED,component:xt}];let{update:e,subscribe:n}=Qe(t.find(i=>i.status==K.RUNNING));return{subscribe:n,startGame:()=>{e(i=>(i=t.find(_=>_.status==K.RUNNING),i))},pauseGame:()=>{e(i=>(i=t.find(_=>_.status==K.PAUSED),i))},resumeGame:()=>{e(i=>(i=t.find(_=>_.status==K.RUNNING),i))},gameOver:()=>{e(i=>(i=t.find(_=>_.status==K.GAME_OVER),i))},welcomeScreen:()=>{e(i=>(i=t.find(_=>_.status==K.NOT_STARTED),i))},allLevelsCleared:()=>{e(i=>(i=t.find(_=>_.status==K.ALL_LEVELS_CLEARED),i))}}},J=Mt();function Kt(t){let e,n,l;var s=t[0].component;function r(o){return{}}return s&&(n=new s(r())),{c(){e=h("div"),n&&ce(n.$$.fragment),a(e,"class","container svelte-16au4d0"),w(e,"width",S.SCREEN_WIDTH+"px"),w(e,"height",S.SCREEN_HEIGHT+"px")},m(o,c){x(o,e,c),n&&ee(n,e,null),l=!0},p(o,[c]){if(s!==(s=o[0].component)){if(n){Fe();const f=n;z(f.$$.fragment,1,0,()=>{te(f,1)}),He()}s?(n=new s(r()),ce(n.$$.fragment),D(n.$$.fragment,1),ee(n,e,null)):n=null}},i(o){l||(n&&D(n.$$.fragment,o),l=!0)},o(o){n&&z(n.$$.fragment,o),l=!1},d(o){o&&G(e),n&&te(n)}}}function Pt(t,e,n){let l;return J.subscribe(s=>{n(0,l=s)}),[l]}class Ut extends Y{constructor(e){super(),X(this,e,Pt,Kt,V,{})}}new Ut({target:document.getElementById("app")});
