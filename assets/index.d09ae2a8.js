(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();function L(){}function at(t){return t()}function qe(){return Object.create(null)}function ye(t){t.forEach(at)}function dt(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function bt(t){return Object.keys(t).length===0}function Fe(t){return t==null?"":t}function yt(t){return t&&dt(t.destroy)?t.destroy:L}function u(t,e){t.appendChild(e)}function P(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode.removeChild(t)}function pt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function K(t){return document.createTextNode(t)}function $(){return K(" ")}function Le(){return K("")}function me(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function r(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function wt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function St(t){return Array.from(t.childNodes)}function ue(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e,n,o){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}let Re;function kt(){if(Re===void 0){Re=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Re=!0}}return Re}function Nt(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const o=k("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const s=kt();let l;return s?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=me(window,"message",i=>{i.source===o.contentWindow&&e()})):(o.src="about:blank",o.onload=()=>{l=me(o.contentWindow,"resize",e)}),u(t,o),()=>{(s||l&&o.contentWindow)&&l(),C(o)}}function Ft(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,o,e),s}let Oe;function Ge(t){Oe=t}function _t(){if(!Oe)throw new Error("Function called outside component initialization");return Oe}function Xe(t){_t().$$.on_mount.push(t)}function Tt(){const t=_t();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const l=Ft(e,n,{cancelable:o});return s.slice().forEach(i=>{i.call(t,l)}),!l.defaultPrevented}return!0}}const Ie=[],Ve=[],Me=[],Ze=[],At=Promise.resolve();let We=!1;function It(){We||(We=!0,At.then(ht))}function Pe(t){Me.push(t)}const He=new Set;let Ce=0;function ht(){const t=Oe;do{for(;Ce<Ie.length;){const e=Ie[Ce];Ce++,Ge(e),Dt(e.$$)}for(Ge(null),Ie.length=0,Ce=0;Ve.length;)Ve.pop()();for(let e=0;e<Me.length;e+=1){const n=Me[e];He.has(n)||(He.add(n),n())}Me.length=0}while(Ie.length);for(;Ze.length;)Ze.pop()();We=!1,He.clear(),Ge(t)}function Dt(t){if(t.fragment!==null){t.update(),ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Pe)}}const ze=new Set;let be;function ke(){be={r:0,c:[],p:be}}function Ne(){be.r||ye(be.c),be=be.p}function B(t,e){t&&t.i&&(ze.delete(t),t.i(e))}function V(t,e,n,o){if(t&&t.o){if(ze.has(t))return;ze.add(t),be.c.push(()=>{ze.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function Je(t,e){V(t,1,1,()=>{e.delete(t.key)})}function Qe(t,e,n,o,s,l,i,f,c,a,p,d){let v=t.length,b=l.length,h=v;const S={};for(;h--;)S[t[h].key]=h;const I=[],w=new Map,F=new Map;for(h=b;h--;){const N=d(s,l,h),G=n(N);let D=i.get(G);D?o&&D.p(N,e):(D=a(G,N),D.c()),w.set(G,I[h]=D),G in S&&F.set(G,Math.abs(h-S[G]))}const U=new Set,x=new Set;function W(N){B(N,1),N.m(f,p),i.set(N.key,N),p=N.first,b--}for(;v&&b;){const N=I[b-1],G=t[v-1],D=N.key,X=G.key;N===G?(p=N.first,v--,b--):w.has(X)?!i.has(D)||U.has(D)?W(N):x.has(X)?v--:F.get(D)>F.get(X)?(x.add(D),W(N)):(U.add(X),v--):(c(G,i),v--)}for(;v--;){const N=t[v];w.has(N.key)||c(N,i)}for(;b;)W(I[b-1]);return I}function de(t){t&&t.c()}function se(t,e,n,o){const{fragment:s,on_mount:l,on_destroy:i,after_update:f}=t.$$;s&&s.m(e,n),o||Pe(()=>{const c=l.map(at).filter(dt);i?i.push(...c):ye(c),t.$$.on_mount=[]}),f.forEach(Pe)}function re(t,e){const n=t.$$;n.fragment!==null&&(ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Gt(t,e){t.$$.dirty[0]===-1&&(Ie.push(t),It(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(t,e,n,o,s,l,i,f=[-1]){const c=Oe;Ge(t);const a=t.$$={fragment:null,ctx:null,props:l,update:L,not_equal:s,bound:qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:qe(),dirty:f,skip_bound:!1,root:e.target||c.$$.root};i&&i(a.root);let p=!1;if(a.ctx=n?n(t,e.props||{},(d,v,...b)=>{const h=b.length?b[0]:v;return a.ctx&&s(a.ctx[d],a.ctx[d]=h)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](h),p&&Gt(t,d)),v}):[],a.update(),p=!0,ye(a.before_update),a.fragment=o?o(a.ctx):!1,e.target){if(e.hydrate){const d=St(e.target);a.fragment&&a.fragment.l(d),d.forEach(C)}else a.fragment&&a.fragment.c();e.intro&&B(t.$$.fragment),se(t,e.target,e.anchor,e.customElement),ht()}Ge(c)}class Q{$destroy(){re(this,1),this.$destroy=L}$on(e,n){const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(e){this.$$set&&!bt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var A=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(A||{}),z=(t=>(t[t.SNAKE_SPEED=100]="SNAKE_SPEED",t[t.MAXIMUM_POINT_COUNT=26]="MAXIMUM_POINT_COUNT",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t[t.GRID_COUNT=20]="GRID_COUNT",t[t.GRID_PADDING=50]="GRID_PADDING",t[t.GRID_MAX_SIZE=500]="GRID_MAX_SIZE",t))(z||{}),Se=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(Se||{}),De=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(De||{});const we=[];function Ke(t,e=L){let n;const o=new Set;function s(f){if(Z(t,f)&&(t=f,n)){const c=!we.length;for(const a of o)a[1](),we.push(a,t);if(c){for(let a=0;a<we.length;a+=2)we[a][0](we[a+1]);we.length=0}}}function l(f){s(f(t))}function i(f,c=L){const a=[f,c];return o.add(a),o.size===1&&(n=e(s)||L),f(t),()=>{o.delete(a),o.size===0&&(n(),n=null)}}return{set:s,update:l,subscribe:i}}const Ot=()=>{let t={playerName:"Abhay",level:0,stage:0,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=Ke(t);return{subscribe:n,resetScore:()=>{e(c=>(c.food=0,c.bonus=0,c.score=0,c))},eatFood:()=>{e(c=>(c.food=c.food+1,c.score=c.food*5+c.bonus*20,c.score>c.highScore&&(c.highScore=c.score),c))},getBonus:()=>{e(c=>(c.bonus=c.bonus+1,c))},nextLevel:()=>{e(c=>(c.level=c.level+1,c))},resetGame:()=>{e(c=>(c.food=0,c.bonus=0,c.score=0,c.level=0,c.stage=0,c))}}};let ae=Ot();function Lt(t){let e,n,o,s,l,i,f,c=t[1].playerName+"",a,p,d,v,b,h=t[1].score+"",S,I,w,F,U,x=t[1].food+"",W,N,G,D,X,Y=t[1].bonus+"",le,Ee,H,ee,ie,q=t[1].highScore+"",ce,te,fe,m,_,E=t[1].level+"",O,pe,ve,Te,je,Ue,xe,Ye;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",o=$(),s=k("table"),l=k("tr"),i=k("td"),i.textContent="Player",f=k("td"),a=K(c),p=$(),d=k("tr"),v=k("td"),v.textContent="Score",b=k("td"),S=K(h),I=$(),w=k("tr"),F=k("td"),F.textContent="Food",U=k("td"),W=K(x),N=$(),G=k("tr"),D=k("td"),D.textContent="Bonus",X=k("td"),le=K(Y),Ee=$(),H=k("tr"),ee=k("td"),ee.textContent="High Score",ie=k("td"),ce=K(q),te=$(),fe=k("tr"),m=k("td"),m.textContent="Level",_=k("td"),O=K(E),pe=$(),ve=k("div"),Te=k("button"),Te.textContent="Replay",je=$(),Ue=k("button"),Ue.textContent="Menu",r(n,"class","title svelte-1mhd3rb"),r(i,"class","c1 svelte-1mhd3rb"),r(f,"class","c2 svelte-1mhd3rb"),r(v,"class","c1 svelte-1mhd3rb"),r(b,"class","c2 svelte-1mhd3rb"),r(F,"class","c1 svelte-1mhd3rb"),r(U,"class","c2 svelte-1mhd3rb"),r(D,"class","c1 svelte-1mhd3rb"),r(X,"class","c2 svelte-1mhd3rb"),r(ee,"class","c1 svelte-1mhd3rb"),r(ie,"class","c2 svelte-1mhd3rb"),r(m,"class","c1 svelte-1mhd3rb"),r(_,"class","c2 svelte-1mhd3rb"),r(s,"class","svelte-1mhd3rb"),r(ve,"class","flex svelte-1mhd3rb"),r(e,"class","game-over-screen svelte-1mhd3rb")},m(ne,_e){P(ne,e,_e),u(e,n),u(e,o),u(e,s),u(s,l),u(l,i),u(l,f),u(f,a),u(s,p),u(s,d),u(d,v),u(d,b),u(b,S),u(s,I),u(s,w),u(w,F),u(w,U),u(U,W),u(s,N),u(s,G),u(G,D),u(G,X),u(X,le),u(s,Ee),u(s,H),u(H,ee),u(H,ie),u(ie,ce),u(s,te),u(s,fe),u(fe,m),u(fe,_),u(_,O),u(e,pe),u(e,ve),u(ve,Te),t[4](Te),u(ve,je),u(ve,Ue),xe||(Ye=[me(Te,"click",t[3]),me(Ue,"click",t[2])],xe=!0)},p(ne,[_e]){_e&2&&c!==(c=ne[1].playerName+"")&&ue(a,c),_e&2&&h!==(h=ne[1].score+"")&&ue(S,h),_e&2&&x!==(x=ne[1].food+"")&&ue(W,x),_e&2&&Y!==(Y=ne[1].bonus+"")&&ue(le,Y),_e&2&&q!==(q=ne[1].highScore+"")&&ue(ce,q),_e&2&&E!==(E=ne[1].level+"")&&ue(O,E)},i:L,o:L,d(ne){ne&&C(e),t[4](null),xe=!1,ye(Ye)}}}function Ut(t,e,n){let o;Xe(()=>{o.focus()});const s=()=>{console.log("restart game"),ge.welcomeScreen()},l=()=>{ae.resetScore(),ge.startGame()};let i;ae.subscribe(c=>{n(1,i=c)});function f(c){Ve[c?"unshift":"push"](()=>{o=c,n(0,o)})}return[o,i,s,l,f]}class Rt extends Q{constructor(e){super(),J(this,e,Ut,Lt,Z,{})}}var gt=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(gt||{}),mt=(t=>(t[t.STAR=0]="STAR",t[t.GEM=1]="GEM",t[t.RUBY=2]="RUBY",t))(mt||{}),M=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(M||{});const Ct=300,Bt=60,Et="none";function Ae(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function Mt(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function Be(t,e,n,o,s){t.dispatchEvent(new CustomEvent(`${e}${s}`,{detail:{event:n,pointersCount:o.length}}))}function zt(t,e,n,o,s,l=Et){e.style.touchAction=l;let i=[];function f(a){i.push(a),Be(e,t,a,i,"down"),o==null||o(i,a);const p=a.pointerId;function d(w){p===w.pointerId&&(i=Mt(w,i),i.length||v(),Be(e,t,w,i,"up"),s==null||s(i,w))}function v(){b(),h(),S(),I()}const b=Ae(e,"pointermove",w=>{i=i.map(F=>w.pointerId===F.pointerId?w:F),Be(e,t,w,i,"move"),n==null||n(i,w)}),h=Ae(e,"lostpointercapture",w=>{d(w)}),S=Ae(e,"pointerup",w=>{d(w)}),I=Ae(e,"pointerleave",w=>{i=[],v(),Be(e,t,w,i,"up"),s==null||s(i,w)})}const c=Ae(e,"pointerdown",f);return{destroy:()=>{c()}}}function Pt(t,e={timeframe:Ct,minSwipeDistance:Bt,touchAction:Et}){const n="swipe";let o,s,l,i;function f(a,p){s=p.clientX,l=p.clientY,o=Date.now(),a.length===1&&(i=p.target)}function c(a,p){if(p.type==="pointerup"&&a.length===0&&Date.now()-o<e.timeframe){const d=p.clientX-s,v=p.clientY-l,b=Math.abs(d),h=Math.abs(v);let S=null;b>=2*h&&b>e.minSwipeDistance?S=d>0?"right":"left":h>=2*b&&h>e.minSwipeDistance&&(S=v>0?"bottom":"top"),S&&t.dispatchEvent(new CustomEvent(n,{detail:{direction:S,target:i}}))}}return zt(n,t,null,f,c,e.touchAction)}function xt(t){let e,n,o,s,l,i,f,c,a,p,d,v,b,h,S,I;return{c(){e=k("div"),n=g("svg"),o=g("g"),s=g("g"),l=g("g"),i=g("g"),f=g("ellipse"),c=g("g"),a=g("path"),p=g("path"),d=g("g"),v=g("path"),b=g("g"),h=g("path"),S=g("g"),I=g("ellipse"),r(o,"id","Layer_1"),r(f,"id","shadow"),r(f,"opacity","0.3"),r(f,"cx","438.7"),r(f,"cy","765.8"),r(f,"rx","283"),r(f,"ry","32.9"),r(a,"id","cup-shadow"),r(a,"fill","#E7F4FA"),r(a,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),r(p,"id","cup-light"),r(p,"fill","#FFFFFF"),r(p,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),r(v,"id","mainFood"),r(v,"fill","#DB343C"),r(v,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),r(h,"id","highlight"),r(h,"opacity","0.3"),r(h,"fill","#FFFFFF"),r(h,"stroke","#000000"),r(h,"stroke-width","0.25"),r(h,"stroke-miterlimit","10"),r(h,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),r(I,"id","c2"),r(I,"fill","#FFFFFF"),r(I,"cx","436.8"),r(I,"cy","144.3"),r(I,"rx","140.6"),r(I,"ry","138.4"),r(S,"id","c1"),r(s,"id","Layer_2"),r(n,"viewBox","0 0 855.6 798.6"),r(e,"class","food jello-vertical svelte-h8lqdv"),y(e,"left",t[1].left*t[0]+"px"),y(e,"top",t[1].top*t[0]+"px"),y(e,"width",t[0]-2+"px"),y(e,"height",t[0]-2+"px")},m(w,F){P(w,e,F),u(e,n),u(n,o),u(n,s),u(s,l),u(l,i),u(i,f),u(l,c),u(c,a),u(c,p),u(l,d),u(d,v),u(l,b),u(b,h),u(l,S),u(S,I)},p(w,[F]){F&3&&y(e,"left",w[1].left*w[0]+"px"),F&3&&y(e,"top",w[1].top*w[0]+"px"),F&1&&y(e,"width",w[0]-2+"px"),F&1&&y(e,"height",w[0]-2+"px")},i:L,o:L,d(w){w&&C(e)}}}function Ht(t,e,n){let{size:o=0}=e,{data:s}=e;return t.$$set=l=>{"size"in l&&n(0,o=l.size),"data"in l&&n(1,s=l.data)},[o,s]}class $t extends Q{constructor(e){super(),J(this,e,Ht,xt,Z,{size:0,data:1})}}const R=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Vt=t=>{const e=R();let n={top:0,left:0,id:e},o=!1;do n.top=Math.floor(Math.random()*z.GRID_COUNT),n.left=Math.floor(Math.random()*z.GRID_COUNT),o=!vt(n,t);while(o==!1);return n},vt=(t,e)=>{if(t==null||e==null)return!1;for(let n=0;n<e.length;n++)if(e[n].top==t.top&&e[n].left==t.left)return!0;return!1},Wt=t=>{switch(t){case"bottom":return A.DOWN;case"top":return A.UP;case"right":return A.RIGHT;case"left":return A.LEFT;default:return A.UNKNOWN}},Xt=(t,e)=>t===Se.UP&&e!=A.DOWN?A.UP:t===Se.RIGHT&&e!=A.LEFT?A.RIGHT:t===Se.LEFT&&e!=A.RIGHT?A.LEFT:t===Se.DOWN&&e!=A.UP?A.DOWN:A.UNKNOWN,Kt=t=>{switch(t){case A.DOWN:return A.UP;case A.UP:return A.DOWN;case A.LEFT:return A.RIGHT;case A.RIGHT:return A.LEFT;case A.UNKNOWN:return A.UNKNOWN}},et=()=>[{id:R(),left:2,top:0},{id:R(),left:1,top:0},{id:R(),left:0,top:0}],jt=()=>{let t={bonus:[],foods:[],snake:et(),lastFoodLocation:-1},{update:e,subscribe:n}=Ke(t);return{subscribe:n,addBonus:p=>{e(d=>(d.bonus.findIndex(b=>b.id==p.id)==-1&&(d.bonus.push(p),d.bonus=d.bonus,d=d),d))},removeBonus:p=>{e(d=>{let v=d.bonus.slice(0),b=v.findIndex(h=>h.id==p);return b!=-1&&(v.splice(b,1),d.bonus=v,d=d),d})},addFood:p=>{e(d=>(d.foods.findIndex(b=>b.id==p.id)==-1&&(d.foods.push(p),d.foods=d.foods,d=d),d))},removeFood:p=>{e(d=>{let v=d.foods.slice(0),b=v.findIndex(h=>h.id==p);return b!=-1&&(v.splice(b,1),d.foods=v,d=d),d})},moveSnake:p=>{e(d=>{let v=d.snake;return v.pop(),v=[p,...v],d.snake=v,d})},growSnake:()=>{e(p=>{let d=p.snake;return d=[...d,d[d.length-1]],p.snake=d,p})},reset:()=>{e(p=>(p={bonus:[],foods:[],snake:et(),lastFoodLocation:null},p))}}},oe=jt();function tt(t){let e;function n(l,i){return l[2]?Zt:l[3]?qt:Yt}let o=n(t),s=o(t);return{c(){e=k("div"),s.c(),y(e,"left",t[1].left*t[0]+"px"),y(e,"top",t[1].top*t[0]+"px"),y(e,"width",t[0]+"px"),y(e,"height",t[0]+"px"),r(e,"class","snake-body svelte-nfkorl")},m(l,i){P(l,e,i),s.m(e,null)},p(l,i){o===(o=n(l))&&s?s.p(l,i):(s.d(1),s=o(l),s&&(s.c(),s.m(e,null))),i&3&&y(e,"left",l[1].left*l[0]+"px"),i&3&&y(e,"top",l[1].top*l[0]+"px"),i&1&&y(e,"width",l[0]+"px"),i&1&&y(e,"height",l[0]+"px")},d(l){l&&C(e),s.d()}}}function Yt(t){let e,n,o;return{c(){e=g("svg"),n=g("rect"),r(n,"y","0"),r(n,"width","50"),r(n,"height","50"),r(e,"viewBox","0 0 50 50"),r(e,"class",o=Fe(t[4])+" svelte-nfkorl")},m(s,l){P(s,e,l),u(e,n)},p(s,l){l&16&&o!==(o=Fe(s[4])+" svelte-nfkorl")&&r(e,"class",o)},d(s){s&&C(e)}}}function qt(t){let e,n,o;return{c(){e=g("svg"),n=g("rect"),r(n,"y","0"),r(n,"width","50"),r(n,"height","50"),r(e,"viewBox","0 0 50 50"),r(e,"class",o=Fe(t[4])+" svelte-nfkorl")},m(s,l){P(s,e,l),u(e,n)},p(s,l){l&16&&o!==(o=Fe(s[4])+" svelte-nfkorl")&&r(e,"class",o)},d(s){s&&C(e)}}}function Zt(t){let e,n,o,s,l,i;return{c(){e=g("svg"),n=g("g"),o=g("rect"),s=g("circle"),l=g("circle"),r(o,"width","258"),r(o,"height","258"),r(s,"fill","#FFF800"),r(s,"stroke","#FFFFFF"),r(s,"stroke-miterlimit","10"),r(s,"cx","184.3"),r(s,"cy","84.5"),r(s,"r","21.8"),r(l,"fill","#FFF800"),r(l,"stroke","#FFFFFF"),r(l,"stroke-miterlimit","10"),r(l,"cx","184.3"),r(l,"cy","164.5"),r(l,"r","21.8"),r(e,"viewBox","0 0 258 258"),r(e,"class",i=Fe(t[4])+" svelte-nfkorl")},m(f,c){P(f,e,c),u(e,n),u(n,o),u(n,s),u(n,l)},p(f,c){c&16&&i!==(i=Fe(f[4])+" svelte-nfkorl")&&r(e,"class",i)},d(f){f&&C(e)}}}function Jt(t){let e,n=t[1].top>=0&&t[1].top<z.GRID_COUNT&&t[1].left>=0&&t[1].left<z.GRID_COUNT&&tt(t);return{c(){n&&n.c(),e=Le()},m(o,s){n&&n.m(o,s),P(o,e,s)},p(o,[s]){o[1].top>=0&&o[1].top<z.GRID_COUNT&&o[1].left>=0&&o[1].left<z.GRID_COUNT?n?n.p(o,s):(n=tt(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:L,o:L,d(o){n&&n.d(o),o&&C(e)}}}function Qt(t,e,n){let{size:o=0}=e,{current:s=null}=e,{index:l=0}=e,{isHead:i=l==0}=e,{isTail:f=!1}=e,{direction:c="right"}=e;return t.$$set=a=>{"size"in a&&n(0,o=a.size),"current"in a&&n(1,s=a.current),"index"in a&&n(5,l=a.index),"isHead"in a&&n(2,i=a.isHead),"isTail"in a&&n(3,f=a.isTail),"direction"in a&&n(4,c=a.direction)},[o,s,i,f,c,l]}class en extends Q{constructor(e){super(),J(this,e,Qt,Jt,Z,{size:0,current:1,index:5,isHead:2,isTail:3,direction:4})}}function nt(t,e,n){const o=t.slice();return o[3]=e[n],o[5]=n,o}function ot(t){let e,n;return e=new en({props:{index:t[5],isTail:t[5]==t[2].snake.length-1,current:t[3],direction:t[0],size:t[1]}}),{c(){de(e.$$.fragment)},m(o,s){se(e,o,s),n=!0},p(o,s){const l={};s&4&&(l.isTail=o[5]==o[2].snake.length-1),s&4&&(l.current=o[3]),s&1&&(l.direction=o[0]),s&2&&(l.size=o[1]),e.$set(l)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){re(e,o)}}}function tn(t){let e,n,o=t[2].snake,s=[];for(let i=0;i<o.length;i+=1)s[i]=ot(nt(t,o,i));const l=i=>V(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Le()},m(i,f){for(let c=0;c<s.length;c+=1)s[c].m(i,f);P(i,e,f),n=!0},p(i,[f]){if(f&7){o=i[2].snake;let c;for(c=0;c<o.length;c+=1){const a=nt(i,o,c);s[c]?(s[c].p(a,f),B(s[c],1)):(s[c]=ot(a),s[c].c(),B(s[c],1),s[c].m(e.parentNode,e))}for(ke(),c=o.length;c<s.length;c+=1)l(c);Ne()}},i(i){if(!n){for(let f=0;f<o.length;f+=1)B(s[f]);n=!0}},o(i){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)V(s[f]);n=!1},d(i){pt(s,i),i&&C(e)}}}function nn(t,e,n){let{direction:o="right"}=e,{size:s=0}=e,l;return oe.subscribe(i=>{n(2,l=i)}),t.$$set=i=>{"direction"in i&&n(0,o=i.direction),"size"in i&&n(1,s=i.size)},[o,s,l]}class on extends Q{constructor(e){super(),J(this,e,nn,tn,Z,{direction:0,size:1})}}const T=Math.floor(z.GRID_COUNT/2),he=[{bg:"#1c1c1c",wall:[{id:R(),type:M.CONCRETE,top:T,left:T},{id:R(),type:M.DEFAULT,top:T-1,left:T},{id:R(),type:M.DEFAULT,top:T+1,left:T},{id:R(),type:M.DEFAULT,top:T,left:T-1},{id:R(),type:M.DEFAULT,top:T,left:T+1},{id:R(),type:M.CONCRETE,top:T-2,left:T},{id:R(),type:M.CONCRETE,top:T+2,left:T},{id:R(),type:M.CONCRETE,top:T,left:T-2},{id:R(),type:M.CONCRETE,top:T,left:T+2}]},{bg:"#2e0b2a",wall:[{id:R(),type:M.CONCRETE,top:T,left:T},{id:R(),type:M.DEFAULT,top:T-3,left:T},{id:R(),type:M.DEFAULT,top:T+3,left:T},{id:R(),type:M.DEFAULT,top:T,left:T-3},{id:R(),type:M.DEFAULT,top:T,left:T+3},{id:R(),type:M.DEFAULT,top:T-5,left:T},{id:R(),type:M.DEFAULT,top:T+5,left:T},{id:R(),type:M.DEFAULT,top:T,left:T-5},{id:R(),type:M.DEFAULT,top:T,left:T+5}]}];function sn(t){let e,n,o,s,l;return{c(){e=k("div"),n=g("svg"),o=g("style"),s=K(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),l=g("polygon"),r(o,"id","style2"),r(l,"fill","#FFA300"),r(l,"stroke","#EB0000"),r(l,"stroke-width","0.25"),r(l,"stroke-miterlimit","10"),r(l,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),r(l,"class","red"),r(n,"viewBox","0 0 443.3 421.6"),r(e,"class","bonus bounce-top svelte-y90akj"),y(e,"width",t[1]+"px"),y(e,"height",t[1]+"px"),y(e,"left",t[0].left*t[1]+"px"),y(e,"top",t[0].top*t[1]+"px")},m(i,f){P(i,e,f),u(e,n),u(n,o),u(o,s),u(n,l)},p(i,[f]){f&2&&y(e,"width",i[1]+"px"),f&2&&y(e,"height",i[1]+"px"),f&3&&y(e,"left",i[0].left*i[1]+"px"),f&3&&y(e,"top",i[0].top*i[1]+"px")},i:L,o:L,d(i){i&&C(e)}}}function rn(t,e,n){const o=Tt();let{data:s}=e,{size:l=0}=e;return Xe(()=>{setTimeout(()=>{o("bonusFinished",s.id)},z.BONUS_TIME)}),t.$$set=i=>{"data"in i&&n(0,s=i.data),"size"in i&&n(1,l=i.size)},[s,l]}class ln extends Q{constructor(e){super(),J(this,e,rn,sn,Z,{data:0,size:1})}}function cn(t){let e,n,o;return{c(){e=k("div"),n=k("h1"),o=K(t[0]),r(n,"class","svelte-1x8upsq"),r(e,"class","message-box svelte-1x8upsq")},m(s,l){P(s,e,l),u(e,n),u(n,o)},p(s,[l]){l&1&&ue(o,s[0])},i:L,o:L,d(s){s&&C(e)}}}function fn(t,e,n){let{message:o=""}=e;return t.$$set=s=>{"message"in s&&n(0,o=s.message)},[o]}class un extends Q{constructor(e){super(),J(this,e,fn,cn,Z,{message:0})}}function an(t){let e,n,o,s,l,i,f,c,a;return{c(){e=g("svg"),n=g("radialGradient"),o=g("stop"),s=g("stop"),l=g("rect"),i=g("linearGradient"),f=g("stop"),c=g("stop"),a=g("rect"),r(o,"offset","0"),y(o,"stop-color","#333333"),r(s,"offset","1"),y(s,"stop-color","#000000"),r(n,"id","rock_svgid"),r(n,"cx","219.5"),r(n,"cy","219.5"),r(n,"r","219"),r(n,"gradientUnits","userSpaceOnUse"),r(l,"x","0.5"),r(l,"y","0.5"),r(l,"fill","url(#rock_svgid)"),r(l,"stroke","#000000"),r(l,"stroke-miterlimit","10"),r(l,"width","438"),r(l,"height","438"),r(f,"offset","0"),y(f,"stop-color","#000000"),y(f,"stop-opacity","0"),r(c,"offset","1"),y(c,"stop-color","#FFFFFF"),y(c,"stop-opacity","0.5"),r(i,"id","rock_svgid2"),r(i,"gradientUnits","userSpaceOnUse"),r(i,"x1","219"),r(i,"y1","431"),r(i,"x2","219"),r(i,"y2","9.0005"),r(a,"x","8"),r(a,"y","9"),r(a,"fill","url(#rock_svgid2)"),r(a,"width","422"),r(a,"height","422"),r(e,"viewBox","0 0 439 439")},m(p,d){P(p,e,d),u(e,n),u(n,o),u(n,s),u(e,l),u(e,i),u(i,f),u(i,c),u(e,a)},d(p){p&&C(e)}}}function dn(t){let e,n,o,s,l,i,f,c,a,p,d,v,b,h,S,I,w,F,U,x,W,N;return{c(){e=g("svg"),n=g("g"),o=g("linearGradient"),s=g("stop"),l=g("stop"),i=g("rect"),f=g("linearGradient"),c=g("stop"),a=g("stop"),p=g("rect"),d=g("linearGradient"),v=g("stop"),b=g("stop"),h=g("polygon"),S=g("linearGradient"),I=g("stop"),w=g("stop"),F=g("rect"),U=g("linearGradient"),x=g("stop"),W=g("stop"),N=g("rect"),r(s,"offset","0"),y(s,"stop-color","#998675"),r(l,"offset","1"),y(l,"stop-color","#C7B299"),r(o,"id","concrete_SVGID_1_"),r(o,"gradientUnits","userSpaceOnUse"),r(o,"x1","4"),r(o,"y1","96.5"),r(o,"x2","281"),r(o,"y2","96.5"),r(i,"x","4"),r(i,"y","4"),r(i,"fill","url(#concrete_SVGID_1_)"),r(i,"stroke","#CABD99"),r(i,"stroke-width","8"),r(i,"stroke-miterlimit","10"),r(i,"width","277"),r(i,"height","185"),r(c,"offset","0"),y(c,"stop-color","#998675"),r(a,"offset","1"),y(a,"stop-color","#C7B299"),r(f,"id","concrete_SVGID_2_"),r(f,"gradientUnits","userSpaceOnUse"),r(f,"x1","420"),r(f,"y1","189"),r(f,"x2","420"),r(f,"y2","4"),r(p,"x","281"),r(p,"y","4"),r(p,"fill","url(#concrete_SVGID_2_)"),r(p,"stroke","#CABD99"),r(p,"stroke-width","8"),r(p,"stroke-miterlimit","10"),r(p,"width","278"),r(p,"height","185"),r(v,"offset","0"),y(v,"stop-color","#998675"),r(b,"offset","1"),y(b,"stop-color","#C7B299"),r(d,"id","concrete_SVGID_3_"),r(d,"gradientUnits","userSpaceOnUse"),r(d,"x1","281.5"),r(d,"y1","374"),r(d,"x2","281.5"),r(d,"y2","189.0005"),r(h,"fill","url(#concrete_SVGID_3_)"),r(h,"stroke","#CABD99"),r(h,"stroke-width","8"),r(h,"stroke-miterlimit","10"),r(h,"points",`281,189 4,189 4,374 281,374 \r
    559,374 559,189 	`),r(I,"offset","0"),y(I,"stop-color","#998675"),r(w,"offset","1"),y(w,"stop-color","#C7B299"),r(S,"id","concrete_SVGID_4_"),r(S,"gradientUnits","userSpaceOnUse"),r(S,"x1","4"),r(S,"y1","466.5"),r(S,"x2","281"),r(S,"y2","466.5"),r(F,"x","4"),r(F,"y","374"),r(F,"fill","url(#concrete_SVGID_4_)"),r(F,"stroke","#CABD99"),r(F,"stroke-width","8"),r(F,"stroke-miterlimit","10"),r(F,"width","277"),r(F,"height","185"),r(x,"offset","0"),y(x,"stop-color","#998675"),r(W,"offset","1"),y(W,"stop-color","#C7B299"),r(U,"id","concrete_SVGID_5_"),r(U,"gradientUnits","userSpaceOnUse"),r(U,"x1","281"),r(U,"y1","466.5"),r(U,"x2","559"),r(U,"y2","466.5"),r(N,"x","281"),r(N,"y","374"),r(N,"fill","url(#concrete_SVGID_5_)"),r(N,"stroke","#CABD99"),r(N,"stroke-width","8"),r(N,"stroke-miterlimit","10"),r(N,"width","278"),r(N,"height","185"),r(e,"viewBox","0 0 563 563")},m(G,D){P(G,e,D),u(e,n),u(n,o),u(o,s),u(o,l),u(n,i),u(n,f),u(f,c),u(f,a),u(n,p),u(n,d),u(d,v),u(d,b),u(n,h),u(n,S),u(S,I),u(S,w),u(n,F),u(n,U),u(U,x),u(U,W),u(n,N)},d(G){G&&C(e)}}}function pn(t){let e,n,o,s,l,i,f,c,a,p,d,v,b,h,S;return{c(){e=g("svg"),n=g("symbol"),o=g("polygon"),s=g("polygon"),l=g("polygon"),i=g("polygon"),f=g("polygon"),c=g("polygon"),a=g("polygon"),p=g("polygon"),d=g("polygon"),v=g("polygon"),b=g("polygon"),h=g("polygon"),S=g("use"),r(o,"points","27,-29 -27,-29 -27,29 27,29 	"),r(s,"fill","#BF6411"),r(s,"points","-15,29 -27,29 -27,16 -15,16 -2,16 -2,29 	"),r(l,"fill","#BF6411"),r(l,"points","12,29 0,29 0,16 12,16 25,16 25,29 	"),r(i,"fill","#BF6411"),r(i,"points","-27,14 -15,14 -15,2 -27,2 	"),r(f,"fill","#BF6411"),r(f,"points","0,14 -13,14 -13,2 0,2 12,2 12,14 	"),r(c,"fill","#BF6411"),r(c,"points","14,14 27,14 27,2 14,2 	"),r(a,"fill","#BF6411"),r(a,"points","-15,0 -27,0 -27,-13 -15,-13 -2,-13 -2,0 	"),r(p,"fill","#BF6411"),r(p,"points","12,0 0,0 0,-13 12,-13 25,-13 25,0 	"),r(d,"fill","#BF6411"),r(d,"points","-27,-15 -15,-15 -15,-27 -27,-27 	"),r(v,"fill","#BF6411"),r(v,"points","0,-15 -13,-15 -13,-27 0,-27 12,-27 12,-15 	"),r(b,"fill","#BF6411"),r(b,"points","14,-15 27,-15 27,-27 14,-27 	"),r(h,"display","none"),r(h,"fill","none"),r(h,"points","-27,29 27,29 27,-29 -27,-29 	"),r(n,"id","brick1"),r(n,"viewBox","-27 -29 54 58"),wt(S,"xlink:href","#brick1"),r(S,"width","54"),r(S,"height","58"),r(S,"x","-27"),r(S,"y","-29"),r(S,"transform","matrix(1 0 0 -1 27 29)"),r(S,"overflow","visible"),r(e,"viewBox","0 0 54 58")},m(I,w){P(I,e,w),u(e,n),u(n,o),u(n,s),u(n,l),u(n,i),u(n,f),u(n,c),u(n,a),u(n,p),u(n,d),u(n,v),u(n,b),u(n,h),u(e,S)},d(I){I&&C(e)}}}function _n(t){let e;function n(l,i){return l[1].type==M.DEFAULT?pn:l[1].type==M.CONCRETE?dn:an}let o=n(t),s=o(t);return{c(){e=k("div"),s.c(),r(e,"class","brick svelte-1ezhfpr"),y(e,"top",t[1].top*t[0]+"px"),y(e,"left",t[1].left*t[0]+"px"),y(e,"width",t[0]+"px"),y(e,"height",t[0]+"px")},m(l,i){P(l,e,i),s.m(e,null)},p(l,[i]){o!==(o=n(l))&&(s.d(1),s=o(l),s&&(s.c(),s.m(e,null))),i&3&&y(e,"top",l[1].top*l[0]+"px"),i&3&&y(e,"left",l[1].left*l[0]+"px"),i&1&&y(e,"width",l[0]+"px"),i&1&&y(e,"height",l[0]+"px")},i:L,o:L,d(l){l&&C(e),s.d()}}}function hn(t,e,n){let{size:o=0}=e,{data:s}=e;return t.$$set=l=>{"size"in l&&n(0,o=l.size),"data"in l&&n(1,s=l.data)},[o,s]}class gn extends Q{constructor(e){super(),J(this,e,hn,_n,Z,{size:0,data:1})}}function st(t,e,n){const o=t.slice();return o[3]=e[n],o}function rt(t){let e,n;return e=new gn({props:{data:t[3],size:t[0]}}),{c(){de(e.$$.fragment)},m(o,s){se(e,o,s),n=!0},p(o,s){const l={};s&2&&(l.data=o[3]),s&1&&(l.size=o[0]),e.$set(l)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){re(e,o)}}}function mn(t){let e,n,o=t[1],s=[];for(let i=0;i<o.length;i+=1)s[i]=rt(st(t,o,i));const l=i=>V(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Le()},m(i,f){for(let c=0;c<s.length;c+=1)s[c].m(i,f);P(i,e,f),n=!0},p(i,[f]){if(f&3){o=i[1];let c;for(c=0;c<o.length;c+=1){const a=st(i,o,c);s[c]?(s[c].p(a,f),B(s[c],1)):(s[c]=rt(a),s[c].c(),B(s[c],1),s[c].m(e.parentNode,e))}for(ke(),c=o.length;c<s.length;c+=1)l(c);Ne()}},i(i){if(!n){for(let f=0;f<o.length;f+=1)B(s[f]);n=!0}},o(i){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)V(s[f]);n=!1},d(i){pt(s,i),i&&C(e)}}}function En(t,e,n){let o,{size:s=0}=e,l;return ae.subscribe(i=>{n(2,l=i)}),t.$$set=i=>{"size"in i&&n(0,s=i.size)},t.$$.update=()=>{t.$$.dirty&4&&n(1,o=he[l.level].wall)},[s,o,l]}class vn extends Q{constructor(e){super(),J(this,e,En,mn,Z,{size:0})}}function lt(t,e,n){const o=t.slice();return o[35]=e[n],o}function it(t,e,n){const o=t.slice();return o[38]=e[n],o}function ct(t,e){let n,o,s;return o=new $t({props:{data:e[38],size:e[5]}}),{key:t,first:null,c(){n=Le(),de(o.$$.fragment),this.first=n},m(l,i){P(l,n,i),se(o,l,i),s=!0},p(l,i){e=l;const f={};i[0]&256&&(f.data=e[38]),i[0]&32&&(f.size=e[5]),o.$set(f)},i(l){s||(B(o.$$.fragment,l),s=!0)},o(l){V(o.$$.fragment,l),s=!1},d(l){l&&C(n),re(o,l)}}}function ft(t,e){let n,o,s;return o=new ln({props:{data:e[35],size:e[5]}}),o.$on("bonusFinished",e[11]),{key:t,first:null,c(){n=Le(),de(o.$$.fragment),this.first=n},m(l,i){P(l,n,i),se(o,l,i),s=!0},p(l,i){e=l;const f={};i[0]&256&&(f.data=e[35]),i[0]&32&&(f.size=e[5]),o.$set(f)},i(l){s||(B(o.$$.fragment,l),s=!0)},o(l){V(o.$$.fragment,l),s=!1},d(l){l&&C(n),re(o,l)}}}function ut(t){let e,n;return e=new un({props:{message:t[4]}}),{c(){de(e.$$.fragment)},m(o,s){se(e,o,s),n=!0},p(o,s){const l={};s[0]&16&&(l.message=o[4]),e.$set(l)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){V(e.$$.fragment,o),n=!1},d(o){re(e,o)}}}function bn(t){let e,n,o,s,l,i,f=[],c=new Map,a,p=[],d=new Map,v,b,h,S,I,w=t[7].score+"",F,U,x,W,N,G,D,X,Y=t[7].bonus+"",le,Ee,H,ee,ie;o=new vn({props:{size:t[5]}}),l=new on({props:{direction:t[6],size:t[5]}});let q=t[8].foods;const ce=_=>_[38].id;for(let _=0;_<q.length;_+=1){let E=it(t,q,_),O=ce(E);c.set(O,f[_]=ct(O,E))}let te=t[8].bonus;const fe=_=>_[35].id;for(let _=0;_<te.length;_+=1){let E=lt(t,te,_),O=fe(E);d.set(O,p[_]=ft(O,E))}let m=t[3]==!0&&ut(t);return{c(){e=k("div"),n=k("main"),de(o.$$.fragment),s=$(),de(l.$$.fragment),i=$();for(let _=0;_<f.length;_+=1)f[_].c();a=$();for(let _=0;_<p.length;_+=1)p[_].c();v=$(),m&&m.c(),b=$(),h=k("div"),S=k("div"),I=K("Score : "),F=K(w),U=$(),x=k("div"),W=K("\u2192"),G=$(),D=k("div"),X=K("Bonus : "),le=K(Y),y(n,"width",t[2]+"px"),y(n,"height",t[2]+"px"),y(n,"background",he[t[7].level].bg),r(n,"class","svelte-cb2or6"),r(x,"class",N="arrow "+t[6]+" svelte-cb2or6"),r(h,"class","scorecard svelte-cb2or6"),y(h,"width",t[2]+"px"),r(e,"class","wrap svelte-cb2or6"),Pe(()=>t[12].call(e))},m(_,E){P(_,e,E),u(e,n),se(o,n,null),u(n,s),se(l,n,null),u(n,i);for(let O=0;O<f.length;O+=1)f[O].m(n,null);u(n,a);for(let O=0;O<p.length;O+=1)p[O].m(n,null);u(n,v),m&&m.m(n,null),u(e,b),u(e,h),u(h,S),u(S,I),u(S,F),u(h,U),u(h,x),u(x,W),u(h,G),u(h,D),u(D,X),u(D,le),Ee=Nt(e,t[12].bind(e)),H=!0,ee||(ie=[me(window,"keydown",t[10]),yt(Pt.call(null,n,{timeframe:150,minSwipeDistance:30,touchAction:"none"})),me(n,"swipe",t[9])],ee=!0)},p(_,E){const O={};E[0]&32&&(O.size=_[5]),o.$set(O);const pe={};E[0]&64&&(pe.direction=_[6]),E[0]&32&&(pe.size=_[5]),l.$set(pe),E[0]&288&&(q=_[8].foods,ke(),f=Qe(f,E,ce,1,_,q,c,n,Je,ct,a,it),Ne()),E[0]&2336&&(te=_[8].bonus,ke(),p=Qe(p,E,fe,1,_,te,d,n,Je,ft,v,lt),Ne()),_[3]==!0?m?(m.p(_,E),E[0]&8&&B(m,1)):(m=ut(_),m.c(),B(m,1),m.m(n,null)):m&&(ke(),V(m,1,1,()=>{m=null}),Ne()),(!H||E[0]&4)&&y(n,"width",_[2]+"px"),(!H||E[0]&4)&&y(n,"height",_[2]+"px"),(!H||E[0]&128)&&y(n,"background",he[_[7].level].bg),(!H||E[0]&128)&&w!==(w=_[7].score+"")&&ue(F,w),(!H||E[0]&64&&N!==(N="arrow "+_[6]+" svelte-cb2or6"))&&r(x,"class",N),(!H||E[0]&128)&&Y!==(Y=_[7].bonus+"")&&ue(le,Y),(!H||E[0]&4)&&y(h,"width",_[2]+"px")},i(_){if(!H){B(o.$$.fragment,_),B(l.$$.fragment,_);for(let E=0;E<q.length;E+=1)B(f[E]);for(let E=0;E<te.length;E+=1)B(p[E]);B(m),H=!0}},o(_){V(o.$$.fragment,_),V(l.$$.fragment,_);for(let E=0;E<f.length;E+=1)V(f[E]);for(let E=0;E<p.length;E+=1)V(p[E]);V(m),H=!1},d(_){_&&C(e),re(o),re(l);for(let E=0;E<f.length;E+=1)f[E].d();for(let E=0;E<p.length;E+=1)p[E].d();m&&m.d(),Ee(),ee=!1,ye(ie)}}}function yn(t,e,n){let o,s=!1,l=!1,i=De.NEXT_LEVEL,f,c,a=0,p=0,d=A.RIGHT,v;Xe(()=>{console.log(`--onMount = ${p} ${a} ${he[b.level].bg}`)});let b,h;ge.subscribe(m=>{}),ae.subscribe(m=>{n(7,b=m)}),oe.subscribe(m=>{n(8,h=m)});const S=()=>{w(De.GAME_OVER),clearInterval(v),setTimeout(()=>{F(),Y(),ge.gameOver()},z.MESSAGE_TIME)};function I(m){o=m.detail.direction,m.detail.target,n(6,d=Wt(o))}const w=m=>{n(4,i=m),n(3,l=!0)},F=()=>{n(3,l=!1),n(4,i=De.GAME_OVER)},U=()=>{w(De.NEXT_LEVEL),clearInterval(v),setTimeout(()=>{F(),ae.nextLevel(),ae.resetScore(),D(),Y()},z.MESSAGE_TIME)},x=m=>{h.bonus.forEach(_=>{X(m,_)&&(oe.removeBonus(_.id),ae.getBonus())})},W=()=>{h.snake.length/z.MAXIMUM_POINT_COUNT>1&&h.snake.length%z.MAXIMUM_POINT_COUNT==0&&(b.level<he.length-1?U():(clearInterval(v),ge.allLevelsCleared(),ae.resetGame()))},N=()=>{let{left:m,top:_}=h.snake[0];return d===A.UP?_-=1:d===A.DOWN?_+=1:d===A.LEFT?m-=1:d===A.RIGHT&&(m+=1),{id:R(),left:m,top:_}},G=m=>{h.foods.length>0&&X(m,h.foods[0])&&(oe.removeFood(h.foods[0].id),oe.growSnake(),ae.eatFood(),ce(),b.food%5==0&&te())},D=()=>{let m=he.length-b.level;m=m*z.SNAKE_SPEED,oe.reset(),ce(),v=setInterval(()=>{if(Ee()){S();return}le();const _=N();x(_),oe.moveSnake(_),G(_),W()},m)},X=(m,_)=>!(m.top<_.top||m.top>_.top||m.left<_.left||m.left>_.left),Y=()=>{n(6,d=A.RIGHT)},le=()=>{const{top:m,left:_}=h.snake[0],E=h.snake[0];_>=z.GRID_COUNT&&d==A.RIGHT&&(E.left=-1),_<0&&d==A.LEFT&&(E.left=z.GRID_COUNT),m<0&&d==A.UP&&(E.top=z.GRID_COUNT),m>=z.GRID_COUNT&&d==A.DOWN&&(E.top=-1)},Ee=()=>{const m=h.snake.slice(0),_=he[b.level].wall,E=[...m,..._],O=N();return vt(O,E)},H=()=>{clearInterval(v)},ee=m=>{const _=m.code;if(_===Se.SPACEBAR&&(s=!s,s?H():D()),s)return;const E=Xt(_,d);E!=A.UNKNOWN&&E!=Kt(E)&&n(6,d=E)},ie=m=>{oe.removeBonus(m.detail)},q=()=>{const m=h.snake.slice(0),_=he[b.level].wall,E=h.foods.slice(0),O=h.bonus.slice(0),pe=[..._,...m,...E,...O];return Vt(pe)},ce=()=>{if(h.foods.length>0)return;const m=q();let _={top:m.top,left:m.left,id:m.id,type:gt.DEFAULT};oe.addFood(_)},te=()=>{const m=q();let _={top:m.top,left:m.left,id:m.id,type:mt.STAR};oe.addBonus(_)};D(),Y();function fe(){f=this.clientWidth,c=this.clientHeight,n(0,f),n(1,c)}return t.$$.update=()=>{t.$$.dirty[0]&7&&(n(2,a=Math.min(f,c)),n(2,a=a-z.GRID_PADDING),n(2,a=Math.min(a,z.GRID_MAX_SIZE)),isNaN(a)||n(5,p=Math.floor(a/z.GRID_COUNT)))},[f,c,a,l,i,p,d,b,h,I,ee,ie,fe]}class $e extends Q{constructor(e){super(),J(this,e,yn,bn,Z,{},null,[-1,-1])}}function wn(t){let e,n,o,s,l,i,f;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",o=$(),s=k("div"),l=k("button"),l.textContent="Start",r(n,"class","title svelte-3xg2s6"),r(s,"class","btn svelte-3xg2s6"),r(e,"class","start-screen svelte-3xg2s6")},m(c,a){P(c,e,a),u(e,n),u(e,o),u(e,s),u(s,l),i||(f=me(l,"click",t[0]),i=!0)},p:L,i:L,o:L,d(c){c&&C(e),i=!1,f()}}}function Sn(t){return[()=>{console.log("start game"),ge.startGame()}]}class kn extends Q{constructor(e){super(),J(this,e,Sn,wn,Z,{})}}function Nn(t){let e,n,o,s,l,i,f,c;return{c(){e=k("div"),n=k("div"),n.textContent="Congratulations !",o=$(),s=k("div"),s.textContent="You have cleared all the levels.",l=$(),i=k("button"),i.textContent="Menu",r(n,"class","title svelte-zypdtg"),r(e,"class","final svelte-zypdtg")},m(a,p){P(a,e,p),u(e,n),u(e,o),u(e,s),u(e,l),u(e,i),f||(c=me(i,"click",t[0]),f=!0)},p:L,i:L,o:L,d(a){a&&C(e),f=!1,c()}}}function Fn(t){return[()=>{console.log("restart game"),ge.welcomeScreen()}]}class Tn extends Q{constructor(e){super(),J(this,e,Fn,Nn,Z,{})}}var j=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(j||{});const An=()=>{const t=[{status:j.NOT_STARTED,component:kn},{status:j.RUNNING,component:$e},{status:j.PAUSED,component:$e},{status:j.RESUME,component:$e},{status:j.GAME_OVER,component:Rt},{status:j.ALL_LEVELS_CLEARED,component:Tn}];let{update:e,subscribe:n}=Ke(t.find(a=>a.status==j.NOT_STARTED));return{subscribe:n,startGame:()=>{e(a=>(a=t.find(p=>p.status==j.RUNNING),a))},pauseGame:()=>{e(a=>(a=t.find(p=>p.status==j.PAUSED),a))},resumeGame:()=>{e(a=>(a=t.find(p=>p.status==j.RUNNING),a))},gameOver:()=>{e(a=>(a=t.find(p=>p.status==j.GAME_OVER),a))},welcomeScreen:()=>{e(a=>(a=t.find(p=>p.status==j.NOT_STARTED),a))},allLevelsCleared:()=>{e(a=>(a=t.find(p=>p.status==j.ALL_LEVELS_CLEARED),a))}}},ge=An();function In(t){let e,n,o;var s=t[0].component;function l(i){return{}}return s&&(n=new s(l())),{c(){e=k("div"),n&&de(n.$$.fragment),r(e,"class","container svelte-174qdzj")},m(i,f){P(i,e,f),n&&se(n,e,null),o=!0},p(i,[f]){if(s!==(s=i[0].component)){if(n){ke();const c=n;V(c.$$.fragment,1,0,()=>{re(c,1)}),Ne()}s?(n=new s(l()),de(n.$$.fragment),B(n.$$.fragment,1),se(n,e,null)):n=null}},i(i){o||(n&&B(n.$$.fragment,i),o=!0)},o(i){n&&V(n.$$.fragment,i),o=!1},d(i){i&&C(e),n&&re(n)}}}function Dn(t,e,n){let o;return ge.subscribe(s=>{n(0,o=s)}),[o]}class Gn extends Q{constructor(e){super(),J(this,e,Dn,In,Z,{})}}new Gn({target:document.getElementById("app")});
