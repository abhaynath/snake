(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function M(){}function et(t){return t()}function Ve(){return Object.create(null)}function me(t){t.forEach(et)}function it(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ct(t){return Object.keys(t).length===0}function c(t,e){t.appendChild(e)}function U(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode.removeChild(t)}function ft(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function H(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function V(t){return document.createTextNode(t)}function K(){return V(" ")}function tt(){return V("")}function ve(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ut(t){return Array.from(t.childNodes)}function J(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function I(t,e,n,l){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function at(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,l,e),s}let Se;function Ee(t){Se=t}function nt(){if(!Se)throw new Error("Function called outside component initialization");return Se}function dt(t){nt().$$.on_mount.push(t)}function _t(){const t=nt();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=at(e,n,{cancelable:l});return s.slice().forEach(r=>{r.call(t,o)}),!o.defaultPrevented}return!0}}const ge=[],We=[],Ce=[],ze=[],ht=Promise.resolve();let xe=!1;function mt(){xe||(xe=!0,ht.then(st))}function Ke(t){Ce.push(t)}const He=new Set;let Oe=0;function st(){const t=Se;do{for(;Oe<ge.length;){const e=ge[Oe];Oe++,Ee(e),gt(e.$$)}for(Ee(null),ge.length=0,Oe=0;We.length;)We.pop()();for(let e=0;e<Ce.length;e+=1){const n=Ce[e];He.has(n)||(He.add(n),n())}Ce.length=0}while(ge.length);for(;ze.length;)ze.pop()();xe=!1,He.clear(),Ee(t)}function gt(t){if(t.fragment!==null){t.update(),me(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ke)}}const ke=new Set;let ue;function Te(){ue={r:0,c:[],p:ue}}function Be(){ue.r||me(ue.c),ue=ue.p}function $(t,e){t&&t.i&&(ke.delete(t),t.i(e))}function W(t,e,n,l){if(t&&t.o){if(ke.has(t))return;ke.add(t),ue.c.push(()=>{ke.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function pt(t,e){W(t,1,1,()=>{e.delete(t.key)})}function Et(t,e,n,l,s,o,r,i,a,f,d,_){let E=t.length,y=o.length,v=E;const C={};for(;v--;)C[t[v].key]=v;const N=[],k=new Map,A=new Map;for(v=y;v--;){const w=_(s,o,v),B=n(w);let O=r.get(B);O?l&&O.p(w,e):(O=f(B,w),O.c()),k.set(B,N[v]=O),B in C&&A.set(B,Math.abs(v-C[B]))}const R=new Set,Z=new Set;function G(w){$(w,1),w.m(i,d),r.set(w.key,w),d=w.first,y--}for(;E&&y;){const w=N[y-1],B=t[E-1],O=w.key,z=B.key;w===B?(d=w.first,E--,y--):k.has(z)?!r.has(O)||R.has(O)?G(w):Z.has(z)?E--:A.get(O)>A.get(z)?(Z.add(O),G(w)):(R.add(z),E--):(a(B,r),E--)}for(;E--;){const w=t[E];k.has(w.key)||a(w,r)}for(;y;)G(N[y-1]);return N}function re(t){t&&t.c()}function ee(t,e,n,l){const{fragment:s,on_mount:o,on_destroy:r,after_update:i}=t.$$;s&&s.m(e,n),l||Ke(()=>{const a=o.map(et).filter(it);r?r.push(...a):me(a),t.$$.on_mount=[]}),i.forEach(Ke)}function te(t,e){const n=t.$$;n.fragment!==null&&(me(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function vt(t,e){t.$$.dirty[0]===-1&&(ge.push(t),mt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ne(t,e,n,l,s,o,r,i=[-1]){const a=Se;Ee(t);const f=t.$$={fragment:null,ctx:null,props:o,update:M,not_equal:s,bound:Ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Ve(),dirty:i,skip_bound:!1,root:e.target||a.$$.root};r&&r(f.root);let d=!1;if(f.ctx=n?n(t,e.props||{},(_,E,...y)=>{const v=y.length?y[0]:E;return f.ctx&&s(f.ctx[_],f.ctx[_]=v)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](v),d&&vt(t,_)),E}):[],f.update(),d=!0,me(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const _=ut(e.target);f.fragment&&f.fragment.l(_),_.forEach(P)}else f.fragment&&f.fragment.c();e.intro&&$(t.$$.fragment),ee(t,e.target,e.anchor,e.customElement),st()}Ee(a)}class se{$destroy(){te(this,1),this.$destroy=M}$on(e,n){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!ct(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var T=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(T||{}),S=(t=>(t[t.SCREEN_WIDTH=600]="SCREEN_WIDTH",t[t.SCREEN_HEIGHT=400]="SCREEN_HEIGHT",t[t.BLOCK_SIZE=25]="BLOCK_SIZE",t))(S||{}),ce=(t=>(t[t.DELAY=50]="DELAY",t[t.MAX_POINTS=10]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t))(ce||{}),he=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(he||{}),pe=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(pe||{});const _e=[];function lt(t,e=M){let n;const l=new Set;function s(i){if(Q(t,i)&&(t=i,n)){const a=!_e.length;for(const f of l)f[1](),_e.push(f,t);if(a){for(let f=0;f<_e.length;f+=2)_e[f][0](_e[f+1]);_e.length=0}}}function o(i){s(i(t))}function r(i,a=M){const f=[i,a];return l.add(f),l.size===1&&(n=e(s)||M),i(t),()=>{l.delete(f),l.size===0&&(n(),n=null)}}return{set:s,update:o,subscribe:r}}const St=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=lt(t);return{subscribe:n,resetScore:()=>{e(i=>(i.food=0,i.bonus=0,i.score=0,i))},eatFood:()=>{e(i=>(i.food=i.food+1,i.score=i.food*5+i.bonus*20,i.score>i.highScore&&(i.highScore=i.score),i))},getBonus:()=>{e(i=>(i.bonus=i.bonus+1,i))},nextLevel:()=>{e(i=>(i.level=i.level+1,i))}}};let fe=St();function bt(t){let e,n,l,s,o,r,i,a,f,d,_,E,y,v,C,N;return{c(){e=m("div"),n=H("svg"),l=H("g"),s=H("g"),o=H("g"),r=H("g"),i=H("ellipse"),a=H("g"),f=H("path"),d=H("path"),_=H("g"),E=H("path"),y=H("g"),v=H("path"),C=H("g"),N=H("ellipse"),u(l,"id","Layer_1"),u(i,"id","shadow"),u(i,"opacity","0.3"),u(i,"cx","438.7"),u(i,"cy","765.8"),u(i,"rx","283"),u(i,"ry","32.9"),u(f,"id","cup-shadow"),u(f,"fill","#E7F4FA"),u(f,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),u(d,"id","cup-light"),u(d,"fill","#FFFFFF"),u(d,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),u(E,"id","mainFood"),u(E,"fill","#DB343C"),u(E,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),u(v,"id","highlight"),u(v,"opacity","0.3"),u(v,"fill","#FFFFFF"),u(v,"stroke","#000000"),u(v,"stroke-width","0.25"),u(v,"stroke-miterlimit","10"),u(v,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),u(N,"id","c2"),u(N,"fill","#FFFFFF"),u(N,"cx","436.8"),u(N,"cy","144.3"),u(N,"rx","140.6"),u(N,"ry","138.4"),u(C,"id","c1"),u(s,"id","Layer_2"),u(n,"viewBox","0 0 855.6 798.6"),u(e,"class","food svelte-1w9msmi"),I(e,"left",t[1]+"px"),I(e,"top",t[0]+"px"),I(e,"width",S.BLOCK_SIZE-2+"px"),I(e,"height",S.BLOCK_SIZE-2+"px")},m(k,A){U(k,e,A),c(e,n),c(n,l),c(n,s),c(s,o),c(o,r),c(r,i),c(o,a),c(a,f),c(a,d),c(o,_),c(_,E),c(o,y),c(y,v),c(o,C),c(C,N)},p(k,[A]){A&2&&I(e,"left",k[1]+"px"),A&1&&I(e,"top",k[0]+"px")},i:M,o:M,d(k){k&&P(e)}}}function yt(t,e,n){let{top:l=0}=e,{left:s=0}=e;return t.$$set=o=>{"top"in o&&n(0,l=o.top),"left"in o&&n(1,s=o.left)},[l,s]}class ot extends se{constructor(e){super(),ne(this,e,yt,bt,Q,{top:0,left:1})}}function wt(t){let e,n,l,s,o;return{c(){e=m("div"),n=H("svg"),l=H("style"),s=V(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),o=H("polygon"),u(l,"id","style2"),u(o,"fill","#FFA300"),u(o,"stroke","#EB0000"),u(o,"stroke-width","0.25"),u(o,"stroke-miterlimit","10"),u(o,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),u(o,"class","red"),u(n,"viewBox","0 0 443.3 421.6"),u(e,"class","bonus svelte-y90akj"),I(e,"width",S.BLOCK_SIZE+"px"),I(e,"height",S.BLOCK_SIZE+"px"),I(e,"left",t[0]+"px"),I(e,"top",t[1]+"px")},m(r,i){U(r,e,i),c(e,n),c(n,l),c(l,s),c(n,o)},p(r,[i]){i&1&&I(e,"left",r[0]+"px"),i&2&&I(e,"top",r[1]+"px")},i:M,o:M,d(r){r&&P(e)}}}function Lt(t,e,n){const l=_t();let{left:s}=e,{top:o}=e,{id:r}=e;return dt(()=>{setTimeout(()=>{l("bonusFinished",r)},ce.BONUS_TIME)}),t.$$set=i=>{"left"in i&&n(0,s=i.left),"top"in i&&n(1,o=i.top),"id"in i&&n(2,r=i.id)},[s,o,r]}class rt extends se{constructor(e){super(),ne(this,e,Lt,wt,Q,{left:0,top:1,id:2})}}function It(t){let e,n,l,s,o,r,i,a=t[0].playerName+"",f,d,_,E,y,v=t[0].score+"",C,N,k,A,R,Z,G=t[0].food+"",w,B,O,z,L,h,p=t[0].bonus+"",D,le,g,b,F,j=t[0].highScore+"",X,Pe,be,ye,ae,we=t[0].level+"",Ge,Me,Le=t[0].stage+"",Re,De,de,Ie,Ue,Ne,Y,Fe,Ze;return R=new ot({props:{left:0,top:50}}),L=new rt({props:{left:0,top:80,id:""}}),{c(){e=m("div"),n=m("div"),n.textContent="Snake",l=K(),s=m("table"),o=m("tr"),r=m("td"),r.textContent="Player",i=m("td"),f=V(a),d=K(),_=m("tr"),E=m("td"),E.textContent="Score",y=m("td"),C=V(v),N=K(),k=m("tr"),A=m("td"),re(R.$$.fragment),Z=m("td"),w=V(G),B=K(),O=m("tr"),z=m("td"),re(L.$$.fragment),h=m("td"),D=V(p),le=K(),g=m("tr"),b=m("td"),b.textContent="High Score",F=m("td"),X=V(j),Pe=K(),be=m("tr"),ye=m("td"),ye.textContent="Level-Stage",ae=m("td"),Ge=V(we),Me=m("span"),Me.textContent="-",Re=V(Le),De=K(),de=m("div"),Ie=m("button"),Ie.textContent="Replay",Ue=K(),Ne=m("button"),Ne.textContent="Menu",u(n,"class","title svelte-mdywih"),u(r,"class","c1 svelte-mdywih"),u(i,"class","c2 svelte-mdywih"),u(E,"class","c1 svelte-mdywih"),u(y,"class","c2 svelte-mdywih"),u(A,"class","svelte-mdywih"),u(Z,"class","c2 svelte-mdywih"),u(z,"class","svelte-mdywih"),u(h,"class","c2 svelte-mdywih"),u(b,"class","c1 svelte-mdywih"),u(F,"class","c2 svelte-mdywih"),u(ye,"class","c1 svelte-mdywih"),u(ae,"class","c2 svelte-mdywih"),u(s,"class","svelte-mdywih"),u(de,"class","flex svelte-mdywih"),u(e,"class","game-over-screen svelte-mdywih")},m(x,oe){U(x,e,oe),c(e,n),c(e,l),c(e,s),c(s,o),c(o,r),c(o,i),c(i,f),c(s,d),c(s,_),c(_,E),c(_,y),c(y,C),c(s,N),c(s,k),c(k,A),ee(R,A,null),c(k,Z),c(Z,w),c(s,B),c(s,O),c(O,z),ee(L,z,null),c(O,h),c(h,D),c(s,le),c(s,g),c(g,b),c(g,F),c(F,X),c(s,Pe),c(s,be),c(be,ye),c(be,ae),c(ae,Ge),c(ae,Me),c(ae,Re),c(e,De),c(e,de),c(de,Ie),c(de,Ue),c(de,Ne),Y=!0,Fe||(Ze=[ve(Ie,"click",t[2]),ve(Ne,"click",t[1])],Fe=!0)},p(x,[oe]){(!Y||oe&1)&&a!==(a=x[0].playerName+"")&&J(f,a),(!Y||oe&1)&&v!==(v=x[0].score+"")&&J(C,v),(!Y||oe&1)&&G!==(G=x[0].food+"")&&J(w,G),(!Y||oe&1)&&p!==(p=x[0].bonus+"")&&J(D,p),(!Y||oe&1)&&j!==(j=x[0].highScore+"")&&J(X,j),(!Y||oe&1)&&we!==(we=x[0].level+"")&&J(Ge,we),(!Y||oe&1)&&Le!==(Le=x[0].stage+"")&&J(Re,Le)},i(x){Y||($(R.$$.fragment,x),$(L.$$.fragment,x),Y=!0)},o(x){W(R.$$.fragment,x),W(L.$$.fragment,x),Y=!1},d(x){x&&P(e),te(R),te(L),Fe=!1,me(Ze)}}}function Nt(t,e,n){const l=()=>{console.log("restart game"),ie.welcomeScreen()},s=()=>{fe.resetScore(),ie.startGame()};let o;return fe.subscribe(r=>{n(0,o=r)}),[o,l,s]}class Ot extends se{constructor(e){super(),ne(this,e,Nt,It,Q,{})}}function qe(t){let e,n,l;return{c(){e=m("div"),n=K(),l=m("div"),u(e,"id","leftEye"),u(e,"class","eyes svelte-rzshp"),u(l,"id","rightEye"),u(l,"class","eyes svelte-rzshp")},m(s,o){U(s,e,o),U(s,n,o),U(s,l,o)},d(s){s&&P(e),s&&P(n),s&&P(l)}}}function Ct(t){let e,n,l=t[2]&&qe();return{c(){e=m("div"),l&&l.c(),I(e,"left",t[1]+"px"),I(e,"top",t[0]+"px"),I(e,"width",S.BLOCK_SIZE+"px"),I(e,"height",S.BLOCK_SIZE+"px"),u(e,"class",n="snake-body "+t[3]+" svelte-rzshp")},m(s,o){U(s,e,o),l&&l.m(e,null)},p(s,[o]){s[2]?l||(l=qe(),l.c(),l.m(e,null)):l&&(l.d(1),l=null),o&2&&I(e,"left",s[1]+"px"),o&1&&I(e,"top",s[0]+"px"),o&8&&n!==(n="snake-body "+s[3]+" svelte-rzshp")&&u(e,"class",n)},i:M,o:M,d(s){s&&P(e),l&&l.d()}}}function kt(t,e,n){let{top:l=S.BLOCK_SIZE}=e,{left:s=S.BLOCK_SIZE}=e,{isHead:o=!1}=e,{direction:r="right"}=e;return t.$$set=i=>{"top"in i&&n(0,l=i.top),"left"in i&&n(1,s=i.left),"isHead"in i&&n(2,o=i.isHead),"direction"in i&&n(3,r=i.direction)},[l,s,o,r]}class Tt extends se{constructor(e){super(),ne(this,e,kt,Ct,Q,{top:0,left:1,isHead:2,direction:3})}}function je(t,e,n){const l=t.slice();return l[2]=e[n],l[4]=n,l}function Xe(t){let e,n;return e=new Tt({props:{isHead:t[4]==0,top:t[2].top,left:t[2].left,direction:t[1]}}),{c(){re(e.$$.fragment)},m(l,s){ee(e,l,s),n=!0},p(l,s){const o={};s&1&&(o.top=l[2].top),s&1&&(o.left=l[2].left),s&2&&(o.direction=l[1]),e.$set(o)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){W(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function Bt(t){let e,n,l=t[0],s=[];for(let r=0;r<l.length;r+=1)s[r]=Xe(je(t,l,r));const o=r=>W(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=tt()},m(r,i){for(let a=0;a<s.length;a+=1)s[a].m(r,i);U(r,e,i),n=!0},p(r,[i]){if(i&3){l=r[0];let a;for(a=0;a<l.length;a+=1){const f=je(r,l,a);s[a]?(s[a].p(f,i),$(s[a],1)):(s[a]=Xe(f),s[a].c(),$(s[a],1),s[a].m(e.parentNode,e))}for(Te(),a=l.length;a<s.length;a+=1)o(a);Be()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)$(s[i]);n=!0}},o(r){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)W(s[i]);n=!1},d(r){ft(s,r),r&&P(e)}}}function At(t,e,n){let{snakeBodies:l=[]}=e,{direction:s="right"}=e;return t.$$set=o=>{"snakeBodies"in o&&n(0,l=o.snakeBodies),"direction"in o&&n(1,s=o.direction)},[l,s]}class Gt extends se{constructor(e){super(),ne(this,e,At,Bt,Q,{snakeBodies:0,direction:1})}}const Ae=[{bg:"#affbaf"},{bg:"#fda2f2"},{bg:"#7f61bb"},{bg:"#c34366"}],Mt=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);function Rt(t){let e,n,l;return{c(){e=m("div"),n=m("h1"),l=V(t[0]),u(n,"class","svelte-1x8upsq"),u(e,"class","message-box svelte-1x8upsq")},m(s,o){U(s,e,o),c(e,n),c(n,l)},p(s,[o]){o&1&&J(l,s[0])},i:M,o:M,d(s){s&&P(e)}}}function Ft(t,e,n){let{message:l=""}=e;return t.$$set=s=>{"message"in s&&n(0,l=s.message)},[l]}class Ht extends se{constructor(e){super(),ne(this,e,Ft,Rt,Q,{message:0})}}function Ye(t,e,n){const l=t.slice();return l[29]=e[n],l}function Je(t,e){let n,l,s;return l=new rt({props:{id:e[29].id,left:e[29].left,top:e[29].top}}),l.$on("bonusFinished",e[9]),{key:t,first:null,c(){n=tt(),re(l.$$.fragment),this.first=n},m(o,r){U(o,n,r),ee(l,o,r),s=!0},p(o,r){e=o;const i={};r[0]&128&&(i.id=e[29].id),r[0]&128&&(i.left=e[29].left),r[0]&128&&(i.top=e[29].top),l.$set(i)},i(o){s||($(l.$$.fragment,o),s=!0)},o(o){W(l.$$.fragment,o),s=!1},d(o){o&&P(n),te(l,o)}}}function Qe(t){let e,n;return e=new Ht({props:{message:t[1]}}),{c(){re(e.$$.fragment)},m(l,s){ee(e,l,s),n=!0},p(l,s){const o={};s[0]&2&&(o.message=l[1]),e.$set(o)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){W(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function $t(t){let e,n,l,s,o,r=[],i=new Map,a,f,d,_,E=t[2].level+"",y,v,C=t[2].score+"",N,k,A,R=t[2].bonus+"",Z,G,w,B;n=new Gt({props:{direction:t[5],snakeBodies:t[6]}}),s=new ot({props:{left:t[3],top:t[4]}});let O=t[7];const z=h=>h[29].id;for(let h=0;h<O.length;h+=1){let p=Ye(t,O,h),D=z(p);i.set(D,r[h]=Je(D,p))}let L=t[0]==!0&&Qe(t);return{c(){e=m("main"),re(n.$$.fragment),l=K(),re(s.$$.fragment),o=K();for(let h=0;h<r.length;h+=1)r[h].c();a=K(),L&&L.c(),f=K(),d=m("div"),_=m("div"),y=V(E),v=V(" : "),N=V(C),k=K(),A=m("div"),Z=V(R),I(e,"width",S.SCREEN_WIDTH+"px"),I(e,"height",S.SCREEN_HEIGHT+"px"),I(e,"background",Ae[t[2].level].bg),u(e,"class","svelte-sjb5bh"),u(d,"class","score svelte-sjb5bh")},m(h,p){U(h,e,p),ee(n,e,null),c(e,l),ee(s,e,null),c(e,o);for(let D=0;D<r.length;D+=1)r[D].m(e,null);c(e,a),L&&L.m(e,null),U(h,f,p),U(h,d,p),c(d,_),c(_,y),c(_,v),c(_,N),c(d,k),c(d,A),c(A,Z),G=!0,w||(B=ve(window,"keydown",t[8]),w=!0)},p(h,p){const D={};p[0]&32&&(D.direction=h[5]),p[0]&64&&(D.snakeBodies=h[6]),n.$set(D);const le={};p[0]&8&&(le.left=h[3]),p[0]&16&&(le.top=h[4]),s.$set(le),p[0]&640&&(O=h[7],Te(),r=Et(r,p,z,1,h,O,i,e,pt,Je,a,Ye),Be()),h[0]==!0?L?(L.p(h,p),p[0]&1&&$(L,1)):(L=Qe(h),L.c(),$(L,1),L.m(e,null)):L&&(Te(),W(L,1,1,()=>{L=null}),Be()),(!G||p[0]&4)&&I(e,"background",Ae[h[2].level].bg),(!G||p[0]&4)&&E!==(E=h[2].level+"")&&J(y,E),(!G||p[0]&4)&&C!==(C=h[2].score+"")&&J(N,C),(!G||p[0]&4)&&R!==(R=h[2].bonus+"")&&J(Z,R)},i(h){if(!G){$(n.$$.fragment,h),$(s.$$.fragment,h);for(let p=0;p<O.length;p+=1)$(r[p]);$(L),G=!0}},o(h){W(n.$$.fragment,h),W(s.$$.fragment,h);for(let p=0;p<r.length;p+=1)W(r[p]);W(L),G=!1},d(h){h&&P(e),te(n),te(s);for(let p=0;p<r.length;p+=1)r[p].d();L&&L.d(),h&&P(f),h&&P(d),w=!1,B()}}}function xt(t,e,n){let l=!1,s=!1,o=pe.NEXT_LEVEL,r;ie.subscribe(g=>{}),fe.subscribe(g=>{n(2,r=g)});const i=()=>{N(pe.GAME_OVER),clearInterval(y),setTimeout(()=>{k(),B(),ie.gameOver()},ce.MESSAGE_TIME)};let a=0,f=0,d=T.RIGHT,_=[],E=[],y;const v=S.SCREEN_WIDTH,C=S.SCREEN_HEIGHT,N=g=>{n(1,o=g),n(0,s=!0)},k=()=>{n(0,s=!1),n(1,o=pe.GAME_OVER)},A=()=>{N(pe.NEXT_LEVEL),clearInterval(y),setTimeout(()=>{k(),fe.nextLevel(),fe.resetScore(),R(),B()},ce.MESSAGE_TIME)},R=()=>{let g=Ae.length-r.level;g=g*ce.DELAY,y=setInterval(()=>{_.pop();let{left:b,top:F}=_[0];d===T.UP?F-=S.BLOCK_SIZE:d===T.DOWN?F+=S.BLOCK_SIZE:d===T.LEFT?b-=S.BLOCK_SIZE:d===T.RIGHT&&(b+=S.BLOCK_SIZE);const j={left:b,top:F};n(6,_=[j,..._]),E.forEach(X=>{Z(j,X)&&(le(X.id),fe.getBonus())}),Z(j,{left:a,top:f})&&(n(6,_=[..._,_[_.length-1]]),fe.eatFood(),w(),r.food%5==0&&D(),_.length/ce.MAX_POINTS>1&&_.length%ce.MAX_POINTS==0&&(r.level<Ae.length-1?A():(clearInterval(y),ie.allLevelsCleared()))),O()&&i()},g)},Z=(g,b)=>!(g.top<b.top||g.top>b.top||g.left<b.left||g.left>b.left),G=()=>{let g=0,b=0;for(;;){g=Math.floor(Math.random()*(C/S.BLOCK_SIZE))*S.BLOCK_SIZE,b=Math.floor(Math.random()*(v/S.BLOCK_SIZE))*S.BLOCK_SIZE;let F=_.findIndex(X=>{X.top==g}),j=_.findIndex(X=>{X.left==b});if(F==-1&&j==-1)break}return{top:g,left:b}},w=()=>{const{top:g,left:b}=G();n(3,a=b),n(4,f=g)},B=()=>{w(),n(5,d=T.RIGHT),n(6,_=[{left:S.BLOCK_SIZE*2,top:0},{left:S.BLOCK_SIZE,top:0},{left:0,top:0}])},O=()=>{if(_.slice(1).filter(X=>Z(X,_[0])).length>0)return!0;const{top:F,left:j}=_[0];return j>=v&&d==T.RIGHT&&n(6,_[0].left=0,_),j<0&&d==T.LEFT&&n(6,_[0].left=v-S.BLOCK_SIZE,_),F<0&&d==T.UP&&n(6,_[0].top=C-S.BLOCK_SIZE,_),F>=C&&d==T.DOWN&&n(6,_[0].top=0,_),!1},z=()=>{clearInterval(y)},L=g=>g===he.UP&&d!=T.DOWN?T.UP:g===he.RIGHT&&d!=T.LEFT?T.RIGHT:g===he.LEFT&&d!=T.RIGHT?T.LEFT:g===he.DOWN&&d!=T.UP?T.DOWN:T.UNKNOWN,h=g=>{const b=g.code;if(b===he.SPACEBAR&&(l=!l,l?z():R()),l)return;const F=L(b);F!=T.UNKNOWN&&n(5,d=F)},p=g=>{console.log(`on bonus finished =${g.detail}`),le(g.detail)},D=()=>{const g=Mt();let b={top:0,left:0,id:g};b.top=Math.floor(Math.random()*(C/S.BLOCK_SIZE))*S.BLOCK_SIZE,b.left=Math.floor(Math.random()*(v/S.BLOCK_SIZE))*S.BLOCK_SIZE,E.push(b),n(7,E)},le=g=>{const b=E.findIndex(F=>F.id==g);b!=-1&&(E.splice(b,1),n(7,E))};return R(),B(),[s,o,r,a,f,d,_,E,h,p]}class $e extends se{constructor(e){super(),ne(this,e,xt,$t,Q,{},null,[-1,-1])}}function Kt(t){let e,n,l,s,o,r,i;return{c(){e=m("div"),n=m("div"),n.textContent="Snake",l=K(),s=m("div"),o=m("button"),o.textContent="Start",u(n,"class","title svelte-yxm8be"),u(s,"class","btn svelte-yxm8be"),u(e,"class","start-screen svelte-yxm8be")},m(a,f){U(a,e,f),c(e,n),c(e,l),c(e,s),c(s,o),r||(i=ve(o,"click",t[0]),r=!0)},p:M,i:M,o:M,d(a){a&&P(e),r=!1,i()}}}function Pt(t){return[()=>{console.log("start game"),ie.startGame()}]}class Dt extends se{constructor(e){super(),ne(this,e,Pt,Kt,Q,{})}}function Ut(t){let e,n,l,s,o,r,i,a;return{c(){e=m("div"),n=m("div"),n.textContent="Congratulations !",l=K(),s=m("div"),s.textContent="You have cleared all the levels.",o=K(),r=m("button"),r.textContent="Menu",u(n,"class","title svelte-gyhhqq"),u(e,"class","final svelte-gyhhqq")},m(f,d){U(f,e,d),c(e,n),c(e,l),c(e,s),c(e,o),c(e,r),i||(a=ve(r,"click",t[0]),i=!0)},p:M,i:M,o:M,d(f){f&&P(e),i=!1,a()}}}function Zt(t){return[()=>{console.log("restart game"),ie.welcomeScreen()}]}class Vt extends se{constructor(e){super(),ne(this,e,Zt,Ut,Q,{})}}var q=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(q||{});const Wt=()=>{const t=[{status:q.NOT_STARTED,component:Dt},{status:q.RUNNING,component:$e},{status:q.PAUSED,component:$e},{status:q.RESUME,component:$e},{status:q.GAME_OVER,component:Ot},{status:q.ALL_LEVELS_CLEARED,component:Vt}];let{update:e,subscribe:n}=lt(t.find(f=>f.status==q.GAME_OVER));return{subscribe:n,startGame:()=>{e(f=>(f=t.find(d=>d.status==q.RUNNING),f))},pauseGame:()=>{e(f=>(f=t.find(d=>d.status==q.PAUSED),f))},resumeGame:()=>{e(f=>(f=t.find(d=>d.status==q.RUNNING),f))},gameOver:()=>{e(f=>(f=t.find(d=>d.status==q.GAME_OVER),f))},welcomeScreen:()=>{e(f=>(f=t.find(d=>d.status==q.NOT_STARTED),f))},allLevelsCleared:()=>{e(f=>(f=t.find(d=>d.status==q.ALL_LEVELS_CLEARED),f))}}},ie=Wt();function zt(t){let e,n,l;var s=t[0].component;function o(r){return{}}return s&&(n=new s(o())),{c(){e=m("div"),n&&re(n.$$.fragment),u(e,"class","container svelte-16au4d0"),I(e,"width",S.SCREEN_WIDTH+"px"),I(e,"height",S.SCREEN_HEIGHT+"px")},m(r,i){U(r,e,i),n&&ee(n,e,null),l=!0},p(r,[i]){if(s!==(s=r[0].component)){if(n){Te();const a=n;W(a.$$.fragment,1,0,()=>{te(a,1)}),Be()}s?(n=new s(o()),re(n.$$.fragment),$(n.$$.fragment,1),ee(n,e,null)):n=null}},i(r){l||(n&&$(n.$$.fragment,r),l=!0)},o(r){n&&W(n.$$.fragment,r),l=!1},d(r){r&&P(e),n&&te(n)}}}function qt(t,e,n){let l;return ie.subscribe(s=>{n(0,l=s)}),[l]}class jt extends se{constructor(e){super(),ne(this,e,qt,zt,Q,{})}}new jt({target:document.getElementById("app")});
