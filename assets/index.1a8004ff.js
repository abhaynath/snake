(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function B(){}function dt(t){return t()}function Je(){return Object.create(null)}function be(t){t.forEach(dt)}function pt(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function bt(t){return Object.keys(t).length===0}function Fe(t){return t==null?"":t}function wt(t){return t&&pt(t.destroy)?t.destroy:B}function f(t,e){t.appendChild(e)}function P(t,e,n){t.insertBefore(e,n||null)}function z(t){t.parentNode.removeChild(t)}function ht(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t){return document.createTextNode(t)}function $(){return q(" ")}function xe(){return q("")}function ve(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function r(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Et(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function St(t){return Array.from(t.childNodes)}function re(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function w(t,e,n,o){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}let Re;function kt(){if(Re===void 0){Re=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Re=!0}}return Re}function At(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const o=k("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const s=kt();let i;return s?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=ve(window,"message",l=>{l.source===o.contentWindow&&e()})):(o.src="about:blank",o.onload=()=>{i=ve(o.contentWindow,"resize",e)}),f(t,o),()=>{(s||i&&o.contentWindow)&&i(),z(o)}}function Ft(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,o,e),s}let Te;function Ie(t){Te=t}function gt(){if(!Te)throw new Error("Function called outside component initialization");return Te}function Ye(t){gt().$$.on_mount.push(t)}function Nt(){const t=gt();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=Ft(e,n,{cancelable:o});return s.slice().forEach(l=>{l.call(t,i)}),!i.defaultPrevented}return!0}}const Ce=[],We=[],ze=[],Qe=[],Lt=Promise.resolve();let Xe=!1;function Ot(){Xe||(Xe=!0,Lt.then(_t))}function Pe(t){ze.push(t)}const Ve=new Set;let De=0;function _t(){const t=Te;do{for(;De<Ce.length;){const e=Ce[De];De++,Ie(e),Ct(e.$$)}for(Ie(null),Ce.length=0,De=0;We.length;)We.pop()();for(let e=0;e<ze.length;e+=1){const n=ze[e];Ve.has(n)||(Ve.add(n),n())}ze.length=0}while(Ce.length);for(;Qe.length;)Qe.pop()();Xe=!1,Ve.clear(),Ie(t)}function Ct(t){if(t.fragment!==null){t.update(),be(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Pe)}}const Ue=new Set;let ye;function ke(){ye={r:0,c:[],p:ye}}function Ae(){ye.r||be(ye.c),ye=ye.p}function M(t,e){t&&t.i&&(Ue.delete(t),t.i(e))}function W(t,e,n,o){if(t&&t.o){if(Ue.has(t))return;Ue.add(t),ye.c.push(()=>{Ue.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function et(t,e){W(t,1,1,()=>{e.delete(t.key)})}function tt(t,e,n,o,s,i,l,c,a,u,d,p){let _=t.length,h=i.length,m=_;const v={};for(;m--;)v[t[m].key]=m;const F=[],S=new Map,A=new Map;for(m=h;m--;){const N=p(s,i,m),I=n(N);let D=l.get(I);D?o&&D.p(N,e):(D=u(I,N),D.c()),S.set(I,F[m]=D),I in v&&A.set(I,Math.abs(m-v[I]))}const T=new Set,H=new Set;function C(N){M(N,1),N.m(c,d),l.set(N.key,N),d=N.first,h--}for(;_&&h;){const N=F[h-1],I=t[_-1],D=N.key,X=I.key;N===I?(d=N.first,_--,h--):S.has(X)?!l.has(D)||T.has(D)?C(N):H.has(X)?_--:A.get(D)>A.get(X)?(H.add(D),C(N)):(T.add(X),_--):(a(I,l),_--)}for(;_--;){const N=t[_];S.has(N.key)||a(N,l)}for(;h;)C(F[h-1]);return F}function de(t){t&&t.c()}function le(t,e,n,o){const{fragment:s,on_mount:i,on_destroy:l,after_update:c}=t.$$;s&&s.m(e,n),o||Pe(()=>{const a=i.map(dt).filter(pt);l?l.push(...a):be(a),t.$$.on_mount=[]}),c.forEach(Pe)}function ie(t,e){const n=t.$$;n.fragment!==null&&(be(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Gt(t,e){t.$$.dirty[0]===-1&&(Ce.push(t),Ot(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,o,s,i,l,c=[-1]){const a=Te;Ie(t);const u=t.$$={fragment:null,ctx:null,props:i,update:B,not_equal:s,bound:Je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Je(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};l&&l(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(p,_,...h)=>{const m=h.length?h[0]:_;return u.ctx&&s(u.ctx[p],u.ctx[p]=m)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](m),d&&Gt(t,p)),_}):[],u.update(),d=!0,be(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const p=St(e.target);u.fragment&&u.fragment.l(p),p.forEach(z)}else u.fragment&&u.fragment.c();e.intro&&M(t.$$.fragment),le(t,e.target,e.anchor,e.customElement),_t()}Ie(a)}class te{$destroy(){ie(this,1),this.$destroy=B}$on(e,n){const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(e){this.$$set&&!bt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var L=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(L||{}),Y=(t=>(t[t.DELAY=100]="DELAY",t[t.MAX_POINTS=6]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t[t.MAX_BLOCKS=20]="MAX_BLOCKS",t))(Y||{}),Se=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(Se||{}),Ge=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(Ge||{});const Ee=[];function qe(t,e=B){let n;const o=new Set;function s(c){if(Z(t,c)&&(t=c,n)){const a=!Ee.length;for(const u of o)u[1](),Ee.push(u,t);if(a){for(let u=0;u<Ee.length;u+=2)Ee[u][0](Ee[u+1]);Ee.length=0}}}function i(c){s(c(t))}function l(c,a=B){const u=[c,a];return o.add(u),o.size===1&&(n=e(s)||B),c(t),()=>{o.delete(u),o.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:l}}const It=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=qe(t);return{subscribe:n,resetScore:()=>{e(c=>(c.food=0,c.bonus=0,c.score=0,c))},eatFood:()=>{e(c=>(c.food=c.food+1,c.score=c.food*5+c.bonus*20,c.score>c.highScore&&(c.highScore=c.score),c))},getBonus:()=>{e(c=>(c.bonus=c.bonus+1,c))},nextLevel:()=>{e(c=>(c.level=c.level+1,c))}}};let ge=It();function Tt(t){let e,n,o,s,i,l,c,a=t[1].playerName+"",u,d,p,_,h,m=t[1].score+"",v,F,S,A,T,H=t[1].food+"",C,N,I,D,X,ne=t[1].bonus+"",K,pe,ce,J,fe,Q=t[1].highScore+"",he,R,y,b,G,se=t[1].level+"",Ne,E,O=t[1].stage+"",V,He,we,Le,je,Be,Ke,Ze;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",o=$(),s=k("table"),i=k("tr"),l=k("td"),l.textContent="Player",c=k("td"),u=q(a),d=$(),p=k("tr"),_=k("td"),_.textContent="Score",h=k("td"),v=q(m),F=$(),S=k("tr"),A=k("td"),A.textContent="Food",T=k("td"),C=q(H),N=$(),I=k("tr"),D=k("td"),D.textContent="Bonus",X=k("td"),K=q(ne),pe=$(),ce=k("tr"),J=k("td"),J.textContent="High Score",fe=k("td"),he=q(Q),R=$(),y=k("tr"),b=k("td"),b.textContent="Level-Stage",G=k("td"),Ne=q(se),E=k("span"),E.textContent="-",V=q(O),He=$(),we=k("div"),Le=k("button"),Le.textContent="Replay",je=$(),Be=k("button"),Be.textContent="Menu",r(n,"class","title svelte-1mhd3rb"),r(l,"class","c1 svelte-1mhd3rb"),r(c,"class","c2 svelte-1mhd3rb"),r(_,"class","c1 svelte-1mhd3rb"),r(h,"class","c2 svelte-1mhd3rb"),r(A,"class","c1 svelte-1mhd3rb"),r(T,"class","c2 svelte-1mhd3rb"),r(D,"class","c1 svelte-1mhd3rb"),r(X,"class","c2 svelte-1mhd3rb"),r(J,"class","c1 svelte-1mhd3rb"),r(fe,"class","c2 svelte-1mhd3rb"),r(b,"class","c1 svelte-1mhd3rb"),r(G,"class","c2 svelte-1mhd3rb"),r(s,"class","svelte-1mhd3rb"),r(we,"class","flex svelte-1mhd3rb"),r(e,"class","game-over-screen svelte-1mhd3rb")},m(oe,ue){P(oe,e,ue),f(e,n),f(e,o),f(e,s),f(s,i),f(i,l),f(i,c),f(c,u),f(s,d),f(s,p),f(p,_),f(p,h),f(h,v),f(s,F),f(s,S),f(S,A),f(S,T),f(T,C),f(s,N),f(s,I),f(I,D),f(I,X),f(X,K),f(s,pe),f(s,ce),f(ce,J),f(ce,fe),f(fe,he),f(s,R),f(s,y),f(y,b),f(y,G),f(G,Ne),f(G,E),f(G,V),f(e,He),f(e,we),f(we,Le),t[4](Le),f(we,je),f(we,Be),Ke||(Ze=[ve(Le,"click",t[3]),ve(Be,"click",t[2])],Ke=!0)},p(oe,[ue]){ue&2&&a!==(a=oe[1].playerName+"")&&re(u,a),ue&2&&m!==(m=oe[1].score+"")&&re(v,m),ue&2&&H!==(H=oe[1].food+"")&&re(C,H),ue&2&&ne!==(ne=oe[1].bonus+"")&&re(K,ne),ue&2&&Q!==(Q=oe[1].highScore+"")&&re(he,Q),ue&2&&se!==(se=oe[1].level+"")&&re(Ne,se),ue&2&&O!==(O=oe[1].stage+"")&&re(V,O)},i:B,o:B,d(oe){oe&&z(e),t[4](null),Ke=!1,be(Ze)}}}function Bt(t,e,n){let o;Ye(()=>{o.focus()});const s=()=>{console.log("restart game"),me.welcomeScreen()},i=()=>{ge.resetScore(),me.startGame()};let l;ge.subscribe(a=>{n(1,l=a)});function c(a){We[a?"unshift":"push"](()=>{o=a,n(0,o)})}return[o,l,s,i,c]}class Rt extends te{constructor(e){super(),ee(this,e,Bt,Tt,Z,{})}}var mt=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(mt||{}),vt=(t=>(t[t.STAR=0]="STAR",t[t.GEM=1]="GEM",t[t.RUBY=2]="RUBY",t))(vt||{}),x=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(x||{});const Dt=300,Mt=60,yt="none";function Oe(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function zt(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function Me(t,e,n,o,s){t.dispatchEvent(new CustomEvent(`${e}${s}`,{detail:{event:n,pointersCount:o.length}}))}function Ut(t,e,n,o,s,i=yt){e.style.touchAction=i;let l=[];function c(u){l.push(u),Me(e,t,u,l,"down"),o==null||o(l,u);const d=u.pointerId;function p(S){d===S.pointerId&&(l=zt(S,l),l.length||_(),Me(e,t,S,l,"up"),s==null||s(l,S))}function _(){h(),m(),v(),F()}const h=Oe(e,"pointermove",S=>{l=l.map(A=>S.pointerId===A.pointerId?S:A),Me(e,t,S,l,"move"),n==null||n(l,S)}),m=Oe(e,"lostpointercapture",S=>{p(S)}),v=Oe(e,"pointerup",S=>{p(S)}),F=Oe(e,"pointerleave",S=>{l=[],_(),Me(e,t,S,l,"up"),s==null||s(l,S)})}const a=Oe(e,"pointerdown",c);return{destroy:()=>{a()}}}function Pt(t,e={timeframe:Dt,minSwipeDistance:Mt,touchAction:yt}){const n="swipe";let o,s,i,l;function c(u,d){s=d.clientX,i=d.clientY,o=Date.now(),u.length===1&&(l=d.target)}function a(u,d){if(d.type==="pointerup"&&u.length===0&&Date.now()-o<e.timeframe){const p=d.clientX-s,_=d.clientY-i,h=Math.abs(p),m=Math.abs(_);let v=null;h>=2*m&&h>e.minSwipeDistance?v=p>0?"right":"left":m>=2*h&&m>e.minSwipeDistance&&(v=_>0?"bottom":"top"),v&&t.dispatchEvent(new CustomEvent(n,{detail:{direction:v,target:l}}))}}return Ut(n,t,null,c,a,e.touchAction)}function xt(t){let e,n,o,s,i,l,c,a,u,d,p,_,h,m,v,F;return{c(){e=k("div"),n=g("svg"),o=g("g"),s=g("g"),i=g("g"),l=g("g"),c=g("ellipse"),a=g("g"),u=g("path"),d=g("path"),p=g("g"),_=g("path"),h=g("g"),m=g("path"),v=g("g"),F=g("ellipse"),r(o,"id","Layer_1"),r(c,"id","shadow"),r(c,"opacity","0.3"),r(c,"cx","438.7"),r(c,"cy","765.8"),r(c,"rx","283"),r(c,"ry","32.9"),r(u,"id","cup-shadow"),r(u,"fill","#E7F4FA"),r(u,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),r(d,"id","cup-light"),r(d,"fill","#FFFFFF"),r(d,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),r(_,"id","mainFood"),r(_,"fill","#DB343C"),r(_,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),r(m,"id","highlight"),r(m,"opacity","0.3"),r(m,"fill","#FFFFFF"),r(m,"stroke","#000000"),r(m,"stroke-width","0.25"),r(m,"stroke-miterlimit","10"),r(m,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),r(F,"id","c2"),r(F,"fill","#FFFFFF"),r(F,"cx","436.8"),r(F,"cy","144.3"),r(F,"rx","140.6"),r(F,"ry","138.4"),r(v,"id","c1"),r(s,"id","Layer_2"),r(n,"viewBox","0 0 855.6 798.6"),r(e,"class","food jello-vertical svelte-h8lqdv"),w(e,"left",t[1].left*t[0]+"px"),w(e,"top",t[1].top*t[0]+"px"),w(e,"width",t[0]-2+"px"),w(e,"height",t[0]-2+"px")},m(S,A){P(S,e,A),f(e,n),f(n,o),f(n,s),f(s,i),f(i,l),f(l,c),f(i,a),f(a,u),f(a,d),f(i,p),f(p,_),f(i,h),f(h,m),f(i,v),f(v,F)},p(S,[A]){A&3&&w(e,"left",S[1].left*S[0]+"px"),A&3&&w(e,"top",S[1].top*S[0]+"px"),A&1&&w(e,"width",S[0]-2+"px"),A&1&&w(e,"height",S[0]-2+"px")},i:B,o:B,d(S){S&&z(e)}}}function Ht(t,e,n){let{size:o=0}=e,{data:s}=e;return t.$$set=i=>{"size"in i&&n(0,o=i.size),"data"in i&&n(1,s=i.data)},[o,s]}class Kt extends te{constructor(e){super(),ee(this,e,Ht,xt,Z,{size:0,data:1})}}function Vt(t){let e,n,o;return{c(){e=g("svg"),n=g("rect"),r(n,"y","0"),r(n,"fill","#0037FF"),r(n,"width","50"),r(n,"height","50"),r(e,"viewBox","0 0 50 50"),r(e,"class",o=Fe(t[4])+" svelte-zvgok1")},m(s,i){P(s,e,i),f(e,n)},p(s,i){i&16&&o!==(o=Fe(s[4])+" svelte-zvgok1")&&r(e,"class",o)},d(s){s&&z(e)}}}function $t(t){let e,n,o;return{c(){e=g("svg"),n=g("rect"),r(n,"y","0"),r(n,"fill","#0037FF"),r(n,"width","50"),r(n,"height","50"),r(e,"viewBox","0 0 50 50"),r(e,"class",o=Fe(t[4])+" svelte-zvgok1")},m(s,i){P(s,e,i),f(e,n)},p(s,i){i&16&&o!==(o=Fe(s[4])+" svelte-zvgok1")&&r(e,"class",o)},d(s){s&&z(e)}}}function Wt(t){let e,n,o,s,i,l,c;return{c(){e=g("svg"),n=g("g"),o=g("rect"),s=g("path"),i=g("circle"),l=g("circle"),r(o,"opacity","0"),r(o,"fill","#FFFFFF"),r(o,"width","258"),r(o,"height","258"),r(s,"fill","#0037FF"),r(s,"d",`M147.5,29.2C111.6,29.2,80.1,48,62.6,77H0v104h62.6c17.5,28,49,47.3,84.9,47.3c55,0,99.6-44.6,99.6-99.6\r
          S202.5,29.2,147.5,29.2z`),r(i,"fill","#FFF800"),r(i,"stroke","#000000"),r(i,"stroke-miterlimit","10"),r(i,"cx","184.3"),r(i,"cy","84.5"),r(i,"r","21.8"),r(l,"fill","#FFF800"),r(l,"stroke","#000000"),r(l,"stroke-miterlimit","10"),r(l,"cx","184.3"),r(l,"cy","164.5"),r(l,"r","21.8"),r(e,"viewBox","0 0 258 258"),r(e,"class",c=Fe(t[4])+" svelte-zvgok1")},m(a,u){P(a,e,u),f(e,n),f(n,o),f(n,s),f(n,i),f(n,l)},p(a,u){u&16&&c!==(c=Fe(a[4])+" svelte-zvgok1")&&r(e,"class",c)},d(a){a&&z(e)}}}function Xt(t){let e;function n(i,l){return i[2]?Wt:i[3]?$t:Vt}let o=n(t),s=o(t);return{c(){e=k("div"),s.c(),w(e,"left",t[1].left*t[0]+"px"),w(e,"top",t[1].top*t[0]+"px"),w(e,"width",t[0]+"px"),w(e,"height",t[0]+"px"),r(e,"class","snake-body svelte-zvgok1")},m(i,l){P(i,e,l),s.m(e,null)},p(i,[l]){o===(o=n(i))&&s?s.p(i,l):(s.d(1),s=o(i),s&&(s.c(),s.m(e,null))),l&3&&w(e,"left",i[1].left*i[0]+"px"),l&3&&w(e,"top",i[1].top*i[0]+"px"),l&1&&w(e,"width",i[0]+"px"),l&1&&w(e,"height",i[0]+"px")},i:B,o:B,d(i){i&&z(e),s.d()}}}function Yt(t,e,n){let{size:o=0}=e,{current:s=null}=e,{prev:i=null}=e,{isHead:l=!1}=e,{isTail:c=!1}=e,{direction:a="right"}=e;return t.$$set=u=>{"size"in u&&n(0,o=u.size),"current"in u&&n(1,s=u.current),"prev"in u&&n(5,i=u.prev),"isHead"in u&&n(2,l=u.isHead),"isTail"in u&&n(3,c=u.isTail),"direction"in u&&n(4,a=u.direction)},[o,s,l,c,a,i]}class qt extends te{constructor(e){super(),ee(this,e,Yt,Xt,Z,{size:0,current:1,prev:5,isHead:2,isTail:3,direction:4})}}function nt(t,e,n){const o=t.slice();return o[3]=e[n],o[5]=n,o}function st(t){let e,n;return e=new qt({props:{isHead:t[5]==0,isTail:t[5]==t[0].length-1,current:t[3],prev:t[5]>0?t[0][t[5]-1]:null,direction:t[1],size:t[2]}}),{c(){de(e.$$.fragment)},m(o,s){le(e,o,s),n=!0},p(o,s){const i={};s&1&&(i.isTail=o[5]==o[0].length-1),s&1&&(i.current=o[3]),s&1&&(i.prev=o[5]>0?o[0][o[5]-1]:null),s&2&&(i.direction=o[1]),s&4&&(i.size=o[2]),e.$set(i)},i(o){n||(M(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){ie(e,o)}}}function jt(t){let e,n,o=t[0],s=[];for(let l=0;l<o.length;l+=1)s[l]=st(nt(t,o,l));const i=l=>W(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=xe()},m(l,c){for(let a=0;a<s.length;a+=1)s[a].m(l,c);P(l,e,c),n=!0},p(l,[c]){if(c&7){o=l[0];let a;for(a=0;a<o.length;a+=1){const u=nt(l,o,a);s[a]?(s[a].p(u,c),M(s[a],1)):(s[a]=st(u),s[a].c(),M(s[a],1),s[a].m(e.parentNode,e))}for(ke(),a=o.length;a<s.length;a+=1)i(a);Ae()}},i(l){if(!n){for(let c=0;c<o.length;c+=1)M(s[c]);n=!0}},o(l){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)W(s[c]);n=!1},d(l){ht(s,l),l&&z(e)}}}function Zt(t,e,n){let{data:o=[]}=e,{direction:s="right"}=e,{size:i=0}=e;return t.$$set=l=>{"data"in l&&n(0,o=l.data),"direction"in l&&n(1,s=l.direction),"size"in l&&n(2,i=l.size)},[o,s,i]}class Jt extends te{constructor(e){super(),ee(this,e,Zt,jt,Z,{data:0,direction:1,size:2})}}const U=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Qt=t=>{const e=U();let n={top:0,left:0,id:e},o=!1;do n.top=Math.floor(Math.random()*Y.MAX_BLOCKS),n.left=Math.floor(Math.random()*Y.MAX_BLOCKS),o=!en(n,t);while(o==!1);return n},en=(t,e)=>{for(let n=0;n<e.length;n++)if(e[n].top==t.top&&e[n].left==t.left)return!0;return!1},_e=[{bg:"#1c1c1c",wall:[{id:U(),type:x.ROCK,top:2,left:1},{id:U(),type:x.ROCK,top:2,left:2},{id:U(),type:x.ROCK,top:2,left:3},{id:U(),type:x.ROCK,top:2,left:4},{id:U(),type:x.ROCK,top:2,left:5},{id:U(),type:x.ROCK,top:2,left:6},{id:U(),type:x.ROCK,top:1,left:3},{id:U(),type:x.ROCK,top:3,left:4}]},{bg:"#fda2f2",wall:[{id:U(),type:x.DEFAULT,top:2,left:1},{id:U(),type:x.DEFAULT,top:2,left:2},{id:U(),type:x.ROCK,top:2,left:3},{id:U(),type:x.ROCK,top:2,left:4},{id:U(),type:x.DEFAULT,top:2,left:5},{id:U(),type:x.DEFAULT,top:2,left:6},{id:U(),type:x.CONCRETE,top:1,left:3},{id:U(),type:x.CONCRETE,top:3,left:4}]},{bg:"#7f61bb",wall:[]},{bg:"#c34366",wall:[]}];function tn(t){let e,n,o,s,i;return{c(){e=k("div"),n=g("svg"),o=g("style"),s=q(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),i=g("polygon"),r(o,"id","style2"),r(i,"fill","#FFA300"),r(i,"stroke","#EB0000"),r(i,"stroke-width","0.25"),r(i,"stroke-miterlimit","10"),r(i,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),r(i,"class","red"),r(n,"viewBox","0 0 443.3 421.6"),r(e,"class","bonus bounce-top svelte-y90akj"),w(e,"width",t[1]+"px"),w(e,"height",t[1]+"px"),w(e,"left",t[0].left*t[1]+"px"),w(e,"top",t[0].top*t[1]+"px")},m(l,c){P(l,e,c),f(e,n),f(n,o),f(o,s),f(n,i)},p(l,[c]){c&2&&w(e,"width",l[1]+"px"),c&2&&w(e,"height",l[1]+"px"),c&3&&w(e,"left",l[0].left*l[1]+"px"),c&3&&w(e,"top",l[0].top*l[1]+"px")},i:B,o:B,d(l){l&&z(e)}}}function nn(t,e,n){const o=Nt();let{data:s}=e,{size:i=0}=e;return Ye(()=>{setTimeout(()=>{o("bonusFinished",s.id)},Y.BONUS_TIME)}),t.$$set=l=>{"data"in l&&n(0,s=l.data),"size"in l&&n(1,i=l.size)},[s,i]}class sn extends te{constructor(e){super(),ee(this,e,nn,tn,Z,{data:0,size:1})}}function on(t){let e,n,o;return{c(){e=k("div"),n=k("h1"),o=q(t[0]),r(n,"class","svelte-1x8upsq"),r(e,"class","message-box svelte-1x8upsq")},m(s,i){P(s,e,i),f(e,n),f(n,o)},p(s,[i]){i&1&&re(o,s[0])},i:B,o:B,d(s){s&&z(e)}}}function rn(t,e,n){let{message:o=""}=e;return t.$$set=s=>{"message"in s&&n(0,o=s.message)},[o]}class ln extends te{constructor(e){super(),ee(this,e,rn,on,Z,{message:0})}}function cn(t){let e,n,o,s,i,l,c,a,u;return{c(){e=g("svg"),n=g("radialGradient"),o=g("stop"),s=g("stop"),i=g("rect"),l=g("linearGradient"),c=g("stop"),a=g("stop"),u=g("rect"),r(o,"offset","0"),w(o,"stop-color","#333333"),r(s,"offset","1"),w(s,"stop-color","#000000"),r(n,"id","rock_svgid"),r(n,"cx","219.5"),r(n,"cy","219.5"),r(n,"r","219"),r(n,"gradientUnits","userSpaceOnUse"),r(i,"x","0.5"),r(i,"y","0.5"),r(i,"fill","url(#rock_svgid)"),r(i,"stroke","#000000"),r(i,"stroke-miterlimit","10"),r(i,"width","438"),r(i,"height","438"),r(c,"offset","0"),w(c,"stop-color","#000000"),w(c,"stop-opacity","0"),r(a,"offset","1"),w(a,"stop-color","#FFFFFF"),w(a,"stop-opacity","0.5"),r(l,"id","rock_svgid2"),r(l,"gradientUnits","userSpaceOnUse"),r(l,"x1","219"),r(l,"y1","431"),r(l,"x2","219"),r(l,"y2","9.0005"),r(u,"x","8"),r(u,"y","9"),r(u,"fill","url(#rock_svgid2)"),r(u,"width","422"),r(u,"height","422"),r(e,"viewBox","0 0 439 439")},m(d,p){P(d,e,p),f(e,n),f(n,o),f(n,s),f(e,i),f(e,l),f(l,c),f(l,a),f(e,u)},d(d){d&&z(e)}}}function fn(t){let e,n,o,s,i,l,c,a,u,d,p,_,h,m,v,F,S,A,T,H,C,N;return{c(){e=g("svg"),n=g("g"),o=g("linearGradient"),s=g("stop"),i=g("stop"),l=g("rect"),c=g("linearGradient"),a=g("stop"),u=g("stop"),d=g("rect"),p=g("linearGradient"),_=g("stop"),h=g("stop"),m=g("polygon"),v=g("linearGradient"),F=g("stop"),S=g("stop"),A=g("rect"),T=g("linearGradient"),H=g("stop"),C=g("stop"),N=g("rect"),r(s,"offset","0"),w(s,"stop-color","#998675"),r(i,"offset","1"),w(i,"stop-color","#C7B299"),r(o,"id","concrete_SVGID_1_"),r(o,"gradientUnits","userSpaceOnUse"),r(o,"x1","4"),r(o,"y1","96.5"),r(o,"x2","281"),r(o,"y2","96.5"),r(l,"x","4"),r(l,"y","4"),r(l,"fill","url(#concrete_SVGID_1_)"),r(l,"stroke","#CABD99"),r(l,"stroke-width","8"),r(l,"stroke-miterlimit","10"),r(l,"width","277"),r(l,"height","185"),r(a,"offset","0"),w(a,"stop-color","#998675"),r(u,"offset","1"),w(u,"stop-color","#C7B299"),r(c,"id","concrete_SVGID_2_"),r(c,"gradientUnits","userSpaceOnUse"),r(c,"x1","420"),r(c,"y1","189"),r(c,"x2","420"),r(c,"y2","4"),r(d,"x","281"),r(d,"y","4"),r(d,"fill","url(#concrete_SVGID_2_)"),r(d,"stroke","#CABD99"),r(d,"stroke-width","8"),r(d,"stroke-miterlimit","10"),r(d,"width","278"),r(d,"height","185"),r(_,"offset","0"),w(_,"stop-color","#998675"),r(h,"offset","1"),w(h,"stop-color","#C7B299"),r(p,"id","concrete_SVGID_3_"),r(p,"gradientUnits","userSpaceOnUse"),r(p,"x1","281.5"),r(p,"y1","374"),r(p,"x2","281.5"),r(p,"y2","189.0005"),r(m,"fill","url(#concrete_SVGID_3_)"),r(m,"stroke","#CABD99"),r(m,"stroke-width","8"),r(m,"stroke-miterlimit","10"),r(m,"points",`281,189 4,189 4,374 281,374 \r
    559,374 559,189 	`),r(F,"offset","0"),w(F,"stop-color","#998675"),r(S,"offset","1"),w(S,"stop-color","#C7B299"),r(v,"id","concrete_SVGID_4_"),r(v,"gradientUnits","userSpaceOnUse"),r(v,"x1","4"),r(v,"y1","466.5"),r(v,"x2","281"),r(v,"y2","466.5"),r(A,"x","4"),r(A,"y","374"),r(A,"fill","url(#concrete_SVGID_4_)"),r(A,"stroke","#CABD99"),r(A,"stroke-width","8"),r(A,"stroke-miterlimit","10"),r(A,"width","277"),r(A,"height","185"),r(H,"offset","0"),w(H,"stop-color","#998675"),r(C,"offset","1"),w(C,"stop-color","#C7B299"),r(T,"id","concrete_SVGID_5_"),r(T,"gradientUnits","userSpaceOnUse"),r(T,"x1","281"),r(T,"y1","466.5"),r(T,"x2","559"),r(T,"y2","466.5"),r(N,"x","281"),r(N,"y","374"),r(N,"fill","url(#concrete_SVGID_5_)"),r(N,"stroke","#CABD99"),r(N,"stroke-width","8"),r(N,"stroke-miterlimit","10"),r(N,"width","278"),r(N,"height","185"),r(e,"viewBox","0 0 563 563")},m(I,D){P(I,e,D),f(e,n),f(n,o),f(o,s),f(o,i),f(n,l),f(n,c),f(c,a),f(c,u),f(n,d),f(n,p),f(p,_),f(p,h),f(n,m),f(n,v),f(v,F),f(v,S),f(n,A),f(n,T),f(T,H),f(T,C),f(n,N)},d(I){I&&z(e)}}}function un(t){let e,n,o,s,i,l,c,a,u,d,p,_,h,m,v;return{c(){e=g("svg"),n=g("symbol"),o=g("polygon"),s=g("polygon"),i=g("polygon"),l=g("polygon"),c=g("polygon"),a=g("polygon"),u=g("polygon"),d=g("polygon"),p=g("polygon"),_=g("polygon"),h=g("polygon"),m=g("polygon"),v=g("use"),r(o,"points","27,-29 -27,-29 -27,29 27,29 	"),r(s,"fill","#BF6411"),r(s,"points","-15,29 -27,29 -27,16 -15,16 -2,16 -2,29 	"),r(i,"fill","#BF6411"),r(i,"points","12,29 0,29 0,16 12,16 25,16 25,29 	"),r(l,"fill","#BF6411"),r(l,"points","-27,14 -15,14 -15,2 -27,2 	"),r(c,"fill","#BF6411"),r(c,"points","0,14 -13,14 -13,2 0,2 12,2 12,14 	"),r(a,"fill","#BF6411"),r(a,"points","14,14 27,14 27,2 14,2 	"),r(u,"fill","#BF6411"),r(u,"points","-15,0 -27,0 -27,-13 -15,-13 -2,-13 -2,0 	"),r(d,"fill","#BF6411"),r(d,"points","12,0 0,0 0,-13 12,-13 25,-13 25,0 	"),r(p,"fill","#BF6411"),r(p,"points","-27,-15 -15,-15 -15,-27 -27,-27 	"),r(_,"fill","#BF6411"),r(_,"points","0,-15 -13,-15 -13,-27 0,-27 12,-27 12,-15 	"),r(h,"fill","#BF6411"),r(h,"points","14,-15 27,-15 27,-27 14,-27 	"),r(m,"display","none"),r(m,"fill","none"),r(m,"points","-27,29 27,29 27,-29 -27,-29 	"),r(n,"id","brick1"),r(n,"viewBox","-27 -29 54 58"),Et(v,"xlink:href","#brick1"),r(v,"width","54"),r(v,"height","58"),r(v,"x","-27"),r(v,"y","-29"),r(v,"transform","matrix(1 0 0 -1 27 29)"),r(v,"overflow","visible"),r(e,"viewBox","0 0 54 58")},m(F,S){P(F,e,S),f(e,n),f(n,o),f(n,s),f(n,i),f(n,l),f(n,c),f(n,a),f(n,u),f(n,d),f(n,p),f(n,_),f(n,h),f(n,m),f(e,v)},d(F){F&&z(e)}}}function an(t){let e;function n(i,l){return i[1].type==x.DEFAULT?un:i[1].type==x.CONCRETE?fn:cn}let o=n(t),s=o(t);return{c(){e=k("div"),s.c(),r(e,"class","brick svelte-1ezhfpr"),w(e,"top",t[1].top*t[0]+"px"),w(e,"left",t[1].left*t[0]+"px"),w(e,"width",t[0]+"px"),w(e,"height",t[0]+"px")},m(i,l){P(i,e,l),s.m(e,null)},p(i,[l]){o!==(o=n(i))&&(s.d(1),s=o(i),s&&(s.c(),s.m(e,null))),l&3&&w(e,"top",i[1].top*i[0]+"px"),l&3&&w(e,"left",i[1].left*i[0]+"px"),l&1&&w(e,"width",i[0]+"px"),l&1&&w(e,"height",i[0]+"px")},i:B,o:B,d(i){i&&z(e),s.d()}}}function dn(t,e,n){let{size:o=0}=e,{data:s}=e;return t.$$set=i=>{"size"in i&&n(0,o=i.size),"data"in i&&n(1,s=i.data)},[o,s]}class pn extends te{constructor(e){super(),ee(this,e,dn,an,Z,{size:0,data:1})}}function ot(t,e,n){const o=t.slice();return o[3]=e[n],o}function rt(t){let e,n;return e=new pn({props:{data:t[3],size:t[0]}}),{c(){de(e.$$.fragment)},m(o,s){le(e,o,s),n=!0},p(o,s){const i={};s&2&&(i.data=o[3]),s&1&&(i.size=o[0]),e.$set(i)},i(o){n||(M(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){ie(e,o)}}}function hn(t){let e,n,o=t[1],s=[];for(let l=0;l<o.length;l+=1)s[l]=rt(ot(t,o,l));const i=l=>W(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=xe()},m(l,c){for(let a=0;a<s.length;a+=1)s[a].m(l,c);P(l,e,c),n=!0},p(l,[c]){if(c&3){o=l[1];let a;for(a=0;a<o.length;a+=1){const u=ot(l,o,a);s[a]?(s[a].p(u,c),M(s[a],1)):(s[a]=rt(u),s[a].c(),M(s[a],1),s[a].m(e.parentNode,e))}for(ke(),a=o.length;a<s.length;a+=1)i(a);Ae()}},i(l){if(!n){for(let c=0;c<o.length;c+=1)M(s[c]);n=!0}},o(l){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)W(s[c]);n=!1},d(l){ht(s,l),l&&z(e)}}}function gn(t,e,n){let o,{size:s=0}=e,i;return ge.subscribe(l=>{n(2,i=l)}),t.$$set=l=>{"size"in l&&n(0,s=l.size)},t.$$.update=()=>{t.$$.dirty&4&&n(1,o=_e[i.level-1].wall)},[s,o,i]}class _n extends te{constructor(e){super(),ee(this,e,gn,hn,Z,{size:0})}}const lt=()=>[{id:U(),left:2,top:0},{id:U(),left:1,top:0},{id:U(),left:0,top:0}],mn=()=>{let t={bonus:[],foods:[],snake:lt()},{update:e,subscribe:n}=qe(t);return{subscribe:n,addBonus:d=>{e(p=>(p.bonus.findIndex(h=>h.id==d.id)==-1&&(p.bonus.push(d),p.bonus=p.bonus,p=p),p))},removeBonus:d=>{e(p=>{let _=p.bonus.slice(0),h=_.findIndex(m=>m.id==d);return h!=-1&&(_.splice(h,1),p.bonus=_,p=p),p})},addFood:d=>{e(p=>(p.foods.findIndex(h=>h.id==d.id)==-1&&(p.foods.push(d),p.foods=p.foods,p=p),p))},removeFood:d=>{e(p=>{let _=p.foods.slice(0),h=_.findIndex(m=>m.id==d);return h!=-1&&(_.splice(h,1),p.foods=_,p=p),p})},moveSnake:d=>{e(p=>{let _=p.snake;return _.pop(),_=[d,..._],p.snake=_,p})},growSnake:()=>{e(d=>{let p=d.snake;return p=[...p,p[p.length-1]],d.snake=p,d})},reset:()=>{e(d=>(d={bonus:[],foods:[],snake:lt()},d))}}},ae=mn();function it(t,e,n){const o=t.slice();return o[40]=e[n],o}function ct(t,e,n){const o=t.slice();return o[43]=e[n],o}function ft(t,e){let n,o,s;return o=new Kt({props:{data:e[43],size:e[6]}}),{key:t,first:null,c(){n=xe(),de(o.$$.fragment),this.first=n},m(i,l){P(i,n,l),le(o,i,l),s=!0},p(i,l){e=i;const c={};l[0]&128&&(c.data=e[43]),l[0]&64&&(c.size=e[6]),o.$set(c)},i(i){s||(M(o.$$.fragment,i),s=!0)},o(i){W(o.$$.fragment,i),s=!1},d(i){i&&z(n),ie(o,i)}}}function ut(t,e){let n,o,s;return o=new sn({props:{data:e[40],size:e[6]}}),o.$on("bonusFinished",e[11]),{key:t,first:null,c(){n=xe(),de(o.$$.fragment),this.first=n},m(i,l){P(i,n,l),le(o,i,l),s=!0},p(i,l){e=i;const c={};l[0]&128&&(c.data=e[40]),l[0]&64&&(c.size=e[6]),o.$set(c)},i(i){s||(M(o.$$.fragment,i),s=!0)},o(i){W(o.$$.fragment,i),s=!1},d(i){i&&z(n),ie(o,i)}}}function at(t){let e,n;return e=new ln({props:{message:t[5]}}),{c(){de(e.$$.fragment)},m(o,s){le(e,o,s),n=!0},p(o,s){const i={};s[0]&32&&(i.message=o[5]),e.$set(i)},i(o){n||(M(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){ie(e,o)}}}function vn(t){let e,n,o,s,i=t[3].score+"",l,c,a,u,d=t[3].bonus+"",p,_,h,m,v,F,S,A=[],T=new Map,H,C=[],N=new Map,I,D,X,ne,K,pe,ce;m=new _n({props:{size:t[6]}}),F=new Jt({props:{direction:t[8],data:t[7].snake,size:t[6]}});let J=t[7].foods;const fe=y=>y[43].id;for(let y=0;y<J.length;y+=1){let b=ct(t,J,y),G=fe(b);T.set(G,A[y]=ft(G,b))}let Q=t[7].bonus;const he=y=>y[40].id;for(let y=0;y<Q.length;y+=1){let b=it(t,Q,y),G=he(b);N.set(G,C[y]=ut(G,b))}let R=t[4]==!0&&at(t);return{c(){e=k("div"),n=k("div"),o=k("div"),s=q("Score : "),l=q(i),c=$(),a=k("div"),u=q("Bonus : "),p=q(d),_=$(),h=k("main"),de(m.$$.fragment),v=$(),de(F.$$.fragment),S=$();for(let y=0;y<A.length;y+=1)A[y].c();H=$();for(let y=0;y<C.length;y+=1)C[y].c();I=$(),R&&R.c(),D=$(),X=k("div"),X.innerHTML="<span>Pause</span>",r(n,"class","scorecard svelte-g9guyn"),w(n,"width",t[2]+"px"),w(h,"width",t[2]+"px"),w(h,"height",t[2]+"px"),w(h,"background",_e[t[3].level-1].bg),r(h,"class","svelte-g9guyn"),r(e,"class","wrap svelte-g9guyn"),Pe(()=>t[12].call(e))},m(y,b){P(y,e,b),f(e,n),f(n,o),f(o,s),f(o,l),f(n,c),f(n,a),f(a,u),f(a,p),f(e,_),f(e,h),le(m,h,null),f(h,v),le(F,h,null),f(h,S);for(let G=0;G<A.length;G+=1)A[G].m(h,null);f(h,H);for(let G=0;G<C.length;G+=1)C[G].m(h,null);f(h,I),R&&R.m(h,null),f(e,D),f(e,X),ne=At(e,t[12].bind(e)),K=!0,pe||(ce=[ve(window,"keydown",t[10]),wt(Pt.call(null,h,{timeframe:300,minSwipeDistance:60,touchAction:"none"})),ve(h,"swipe",t[9])],pe=!0)},p(y,b){(!K||b[0]&8)&&i!==(i=y[3].score+"")&&re(l,i),(!K||b[0]&8)&&d!==(d=y[3].bonus+"")&&re(p,d),(!K||b[0]&4)&&w(n,"width",y[2]+"px");const G={};b[0]&64&&(G.size=y[6]),m.$set(G);const se={};b[0]&256&&(se.direction=y[8]),b[0]&128&&(se.data=y[7].snake),b[0]&64&&(se.size=y[6]),F.$set(se),b[0]&192&&(J=y[7].foods,ke(),A=tt(A,b,fe,1,y,J,T,h,et,ft,H,ct),Ae()),b[0]&2240&&(Q=y[7].bonus,ke(),C=tt(C,b,he,1,y,Q,N,h,et,ut,I,it),Ae()),y[4]==!0?R?(R.p(y,b),b[0]&16&&M(R,1)):(R=at(y),R.c(),M(R,1),R.m(h,null)):R&&(ke(),W(R,1,1,()=>{R=null}),Ae()),(!K||b[0]&4)&&w(h,"width",y[2]+"px"),(!K||b[0]&4)&&w(h,"height",y[2]+"px"),(!K||b[0]&8)&&w(h,"background",_e[y[3].level-1].bg)},i(y){if(!K){M(m.$$.fragment,y),M(F.$$.fragment,y);for(let b=0;b<J.length;b+=1)M(A[b]);for(let b=0;b<Q.length;b+=1)M(C[b]);M(R),K=!0}},o(y){W(m.$$.fragment,y),W(F.$$.fragment,y);for(let b=0;b<A.length;b+=1)W(A[b]);for(let b=0;b<C.length;b+=1)W(C[b]);W(R),K=!1},d(y){y&&z(e),ie(m),ie(F);for(let b=0;b<A.length;b+=1)A[b].d();for(let b=0;b<C.length;b+=1)C[b].d();R&&R.d(),ne(),pe=!1,be(ce)}}}function yn(t,e,n){let o,s=!1,i=!1,l=Ge.NEXT_LEVEL,c=!1,a,u,d=0,p=0;Ye(()=>{console.log(`--onMount = ${p} ${d} ${_e[_.level].bg}`)});let _,h;me.subscribe(E=>{}),ge.subscribe(E=>{n(3,_=E)}),ae.subscribe(E=>{n(7,h=E)});const m=()=>{A(Ge.GAME_OVER),clearInterval(F),setTimeout(()=>{T(),K(),me.gameOver()},Y.MESSAGE_TIME)};let v=L.RIGHT,F;function S(E){o=E.detail.direction,E.detail.target,n(8,v=Q())}const A=E=>{n(5,l=E),n(4,i=!0)},T=()=>{n(4,i=!1),n(5,l=Ge.GAME_OVER)},H=()=>{A(Ge.NEXT_LEVEL),clearInterval(F),setTimeout(()=>{T(),ge.nextLevel(),ge.resetScore(),X(),K()},Y.MESSAGE_TIME)},C=E=>{h.bonus.forEach(O=>{ne(E,O)&&(ae.removeBonus(O.id),ge.getBonus())})},N=()=>{h.snake.length/Y.MAX_POINTS>1&&h.snake.length%Y.MAX_POINTS==0&&(_.level<_e.length-1?H():(clearInterval(F),me.allLevelsCleared()))},I=()=>{let{left:E,top:O}=h.snake[0];return v===L.UP?O-=1:v===L.DOWN?O+=1:v===L.LEFT?E-=1:v===L.RIGHT&&(E+=1),{id:U(),left:E,top:O}},D=E=>{h.foods.length>0&&ne(E,h.foods[0])&&(ae.growSnake(),ge.eatFood(),ae.removeFood(h.foods[0].id),G(),_.food%5==0&&se())},X=()=>{let E=_e.length-_.level;E=E*Y.DELAY,ae.reset(),G(),F=setInterval(()=>{c=!0,ce()&&(c=!1,m()),pe();const O=I();C(O),ae.moveSnake(O),D(O),N(),c=!1},Y.DELAY)},ne=(E,O)=>!(E.top<O.top||E.top>O.top||E.left<O.left||E.left>O.left),K=()=>{n(8,v=L.RIGHT)},pe=()=>{const{top:E,left:O}=h.snake[0],V=h.snake[0];O>=Y.MAX_BLOCKS&&v==L.RIGHT&&(V.left=-2),O<0&&v==L.LEFT&&(V.left=Y.MAX_BLOCKS+1),E<0&&v==L.UP&&(V.top=Y.MAX_BLOCKS+1),E>=Y.MAX_BLOCKS&&v==L.DOWN&&(V.top=-2)},ce=()=>h.snake.slice(1).filter(V=>ne(V,h.snake[0])).length>0,J=()=>{clearInterval(F)},fe=E=>E===Se.UP&&v!=L.DOWN?L.UP:E===Se.RIGHT&&v!=L.LEFT?L.RIGHT:E===Se.LEFT&&v!=L.RIGHT?L.LEFT:E===Se.DOWN&&v!=L.UP?L.DOWN:L.UNKNOWN,Q=()=>{switch(o){case"bottom":return L.DOWN;case"top":return L.UP;case"right":return L.RIGHT;case"left":return L.LEFT;default:return L.UNKNOWN}},he=E=>{switch(E){case L.DOWN:return L.UP;case L.UP:return L.DOWN;case L.LEFT:return L.RIGHT;case L.RIGHT:return L.LEFT;case L.UNKNOWN:return L.UNKNOWN}},R=E=>{if(c)return;const O=E.code;if(O===Se.SPACEBAR&&(s=!s,s?J():X()),s)return;const V=fe(O);V!=L.UNKNOWN&&V!=he(V)&&n(8,v=V)},y=E=>{ae.removeBonus(E.detail)},b=()=>{const E=h.snake.slice(0),V=[..._e[_.level-1].wall,...E];return Qt(V)},G=()=>{if(h.foods.length>0)return;const E=b();let O={top:E.top,left:E.left,id:E.id,type:mt.DEFAULT};ae.addFood(O)},se=()=>{const E=b();let O={top:E.top,left:E.left,id:E.id,type:vt.STAR};ae.addBonus(O)};X(),K();function Ne(){a=this.clientWidth,u=this.clientHeight,n(0,a),n(1,u)}return t.$$.update=()=>{t.$$.dirty[0]&7&&(n(2,d=Math.min(a,u)),n(2,d=d-50),n(2,d=Math.min(d,500)),isNaN(d)||n(6,p=Math.floor(d/Y.MAX_BLOCKS))),t.$$.dirty[0]&8&&_e[_.level-1].wall},[a,u,d,_,i,l,p,h,v,S,R,y,Ne]}class $e extends te{constructor(e){super(),ee(this,e,yn,vn,Z,{},null,[-1,-1])}}function bn(t){let e,n,o,s,i,l,c;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",o=$(),s=k("div"),i=k("button"),i.textContent="Start",r(n,"class","title svelte-3xg2s6"),r(s,"class","btn svelte-3xg2s6"),r(e,"class","start-screen svelte-3xg2s6")},m(a,u){P(a,e,u),f(e,n),f(e,o),f(e,s),f(s,i),l||(c=ve(i,"click",t[0]),l=!0)},p:B,i:B,o:B,d(a){a&&z(e),l=!1,c()}}}function wn(t){return[()=>{console.log("start game"),me.startGame()}]}class En extends te{constructor(e){super(),ee(this,e,wn,bn,Z,{})}}function Sn(t){let e,n,o,s,i,l,c,a;return{c(){e=k("div"),n=k("div"),n.textContent="Congratulations !",o=$(),s=k("div"),s.textContent="You have cleared all the levels.",i=$(),l=k("button"),l.textContent="Menu",r(n,"class","title svelte-gyhhqq"),r(e,"class","final svelte-gyhhqq")},m(u,d){P(u,e,d),f(e,n),f(e,o),f(e,s),f(e,i),f(e,l),c||(a=ve(l,"click",t[0]),c=!0)},p:B,i:B,o:B,d(u){u&&z(e),c=!1,a()}}}function kn(t){return[()=>{console.log("restart game"),me.welcomeScreen()}]}class An extends te{constructor(e){super(),ee(this,e,kn,Sn,Z,{})}}var j=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(j||{});const Fn=()=>{const t=[{status:j.NOT_STARTED,component:En},{status:j.RUNNING,component:$e},{status:j.PAUSED,component:$e},{status:j.RESUME,component:$e},{status:j.GAME_OVER,component:Rt},{status:j.ALL_LEVELS_CLEARED,component:An}];let{update:e,subscribe:n}=qe(t.find(u=>u.status==j.RUNNING));return{subscribe:n,startGame:()=>{e(u=>(u=t.find(d=>d.status==j.RUNNING),u))},pauseGame:()=>{e(u=>(u=t.find(d=>d.status==j.PAUSED),u))},resumeGame:()=>{e(u=>(u=t.find(d=>d.status==j.RUNNING),u))},gameOver:()=>{e(u=>(u=t.find(d=>d.status==j.GAME_OVER),u))},welcomeScreen:()=>{e(u=>(u=t.find(d=>d.status==j.NOT_STARTED),u))},allLevelsCleared:()=>{e(u=>(u=t.find(d=>d.status==j.ALL_LEVELS_CLEARED),u))}}},me=Fn();function Nn(t){let e,n,o;var s=t[0].component;function i(l){return{}}return s&&(n=new s(i())),{c(){e=k("div"),n&&de(n.$$.fragment),r(e,"class","container svelte-174qdzj")},m(l,c){P(l,e,c),n&&le(n,e,null),o=!0},p(l,[c]){if(s!==(s=l[0].component)){if(n){ke();const a=n;W(a.$$.fragment,1,0,()=>{ie(a,1)}),Ae()}s?(n=new s(i()),de(n.$$.fragment),M(n.$$.fragment,1),le(n,e,null)):n=null}},i(l){o||(n&&M(n.$$.fragment,l),o=!0)},o(l){n&&W(n.$$.fragment,l),o=!1},d(l){l&&z(e),n&&ie(n)}}}function Ln(t,e,n){let o;return me.subscribe(s=>{n(0,o=s)}),[o]}class On extends te{constructor(e){super(),ee(this,e,Ln,Nn,Z,{})}}new On({target:document.getElementById("app")});
