(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function H(){}function Je(t){return t()}function Ze(){return Object.create(null)}function ue(t){t.forEach(Je)}function ot(t){return typeof t=="function"}function X(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function rt(t){return Object.keys(t).length===0}function u(t,e){t.appendChild(e)}function K(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function it(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function x(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function W(t){return document.createTextNode(t)}function M(){return W(" ")}function Qe(){return W("")}function he(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function a(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ct(t){return Array.from(t.childNodes)}function q(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function L(t,e,n,l){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function ft(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,l,e),s}let me;function de(t){me=t}function et(){if(!me)throw new Error("Function called outside component initialization");return me}function ut(t){et().$$.on_mount.push(t)}function at(){const t=et();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=ft(e,n,{cancelable:l});return s.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}const ae=[],We=[],Ce=[],ze=[],dt=Promise.resolve();let He=!1;function _t(){He||(He=!0,dt.then(tt))}function Me(t){Ce.push(t)}const Ge=new Set;let Ie=0;function tt(){const t=me;do{for(;Ie<ae.length;){const e=ae[Ie];Ie++,de(e),ht(e.$$)}for(de(null),ae.length=0,Ie=0;We.length;)We.pop()();for(let e=0;e<Ce.length;e+=1){const n=Ce[e];Ge.has(n)||(Ge.add(n),n())}Ce.length=0}while(ae.length);for(;ze.length;)ze.pop()();He=!1,Ge.clear(),de(t)}function ht(t){if(t.fragment!==null){t.update(),ue(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Me)}}const Ne=new Set;let oe;function $e(){oe={r:0,c:[],p:oe}}function xe(){oe.r||ue(oe.c),oe=oe.p}function U(t,e){t&&t.i&&(Ne.delete(t),t.i(e))}function z(t,e,n,l){if(t&&t.o){if(Ne.has(t))return;Ne.add(t),oe.c.push(()=>{Ne.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function mt(t,e){z(t,1,1,()=>{e.delete(t.key)})}function pt(t,e,n,l,s,i,o,r,f,c,h,b){let v=t.length,y=i.length,E=v;const k={};for(;E--;)k[t[E].key]=E;const I=[],C=new Map,N=new Map;for(E=y;E--;){const w=b(s,i,E),O=n(w);let T=o.get(O);T?l&&T.p(w,e):(T=c(O,w),T.c()),C.set(O,I[E]=T),O in k&&N.set(O,Math.abs(E-k[O]))}const R=new Set,A=new Set;function P(w){U(w,1),w.m(r,h),o.set(w.key,w),h=w.first,y--}for(;v&&y;){const w=I[y-1],O=t[v-1],T=w.key,_=O.key;w===O?(h=w.first,v--,y--):C.has(_)?!o.has(T)||R.has(T)?P(w):A.has(_)?v--:N.get(T)>N.get(_)?(A.add(T),P(w)):(R.add(_),v--):(f(O,o),v--)}for(;v--;){const w=t[v];C.has(w.key)||f(w,o)}for(;y;)P(I[y-1]);return I}function se(t){t&&t.c()}function J(t,e,n,l){const{fragment:s,on_mount:i,on_destroy:o,after_update:r}=t.$$;s&&s.m(e,n),l||Me(()=>{const f=i.map(Je).filter(ot);o?o.push(...f):ue(f),t.$$.on_mount=[]}),r.forEach(Me)}function Q(t,e){const n=t.$$;n.fragment!==null&&(ue(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gt(t,e){t.$$.dirty[0]===-1&&(ae.push(t),_t(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,l,s,i,o,r=[-1]){const f=me;de(t);const c=t.$$={fragment:null,ctx:null,props:i,update:H,not_equal:s,bound:Ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Ze(),dirty:r,skip_bound:!1,root:e.target||f.$$.root};o&&o(c.root);let h=!1;if(c.ctx=n?n(t,e.props||{},(b,v,...y)=>{const E=y.length?y[0]:v;return c.ctx&&s(c.ctx[b],c.ctx[b]=E)&&(!c.skip_bound&&c.bound[b]&&c.bound[b](E),h&&gt(t,b)),v}):[],c.update(),h=!0,ue(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const b=ct(e.target);c.fragment&&c.fragment.l(b),b.forEach($)}else c.fragment&&c.fragment.c();e.intro&&U(t.$$.fragment),J(t,e.target,e.anchor,e.customElement),tt()}de(f)}class te{$destroy(){Q(this,1),this.$destroy=H}$on(e,n){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!rt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var B=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(B||{}),S=(t=>(t[t.SCREEN_WIDTH=600]="SCREEN_WIDTH",t[t.SCREEN_HEIGHT=400]="SCREEN_HEIGHT",t[t.BLOCK_SIZE=25]="BLOCK_SIZE",t))(S||{}),_e=(t=>(t[t.DELAY=50]="DELAY",t[t.MAX_POINTS=10]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t))(_e||{}),fe=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(fe||{});const ce=[];function nt(t,e=H){let n;const l=new Set;function s(r){if(X(t,r)&&(t=r,n)){const f=!ce.length;for(const c of l)c[1](),ce.push(c,t);if(f){for(let c=0;c<ce.length;c+=2)ce[c][0](ce[c+1]);ce.length=0}}}function i(r){s(r(t))}function o(r,f=H){const c=[r,f];return l.add(c),l.size===1&&(n=e(s)||H),r(t),()=>{l.delete(c),l.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}const Et=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=nt(t);return{subscribe:n,resetScore:()=>{e(r=>(r.food=0,r.bonus=0,r.score=0,r))},eatFood:()=>{e(r=>(r.food=r.food+1,r.score=r.food*5+r.bonus*20,r.score>r.highScore&&(r.highScore=r.score),r))},getBonus:()=>{e(r=>(r.bonus=r.bonus+1,r))},nextLevel:()=>{e(r=>(r.level=r.level+1,r))}}};let le=Et();function vt(t){let e,n,l,s,i,o,r,f,c,h,b,v,y,E,k,I;return{c(){e=m("div"),n=x("svg"),l=x("g"),s=x("g"),i=x("g"),o=x("g"),r=x("ellipse"),f=x("g"),c=x("path"),h=x("path"),b=x("g"),v=x("path"),y=x("g"),E=x("path"),k=x("g"),I=x("ellipse"),a(l,"id","Layer_1"),a(r,"id","shadow"),a(r,"opacity","0.3"),a(r,"cx","438.7"),a(r,"cy","765.8"),a(r,"rx","283"),a(r,"ry","32.9"),a(c,"id","cup-shadow"),a(c,"fill","#E7F4FA"),a(c,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),a(h,"id","cup-light"),a(h,"fill","#FFFFFF"),a(h,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),a(v,"id","mainFood"),a(v,"fill","#DB343C"),a(v,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),a(E,"id","highlight"),a(E,"opacity","0.3"),a(E,"fill","#FFFFFF"),a(E,"stroke","#000000"),a(E,"stroke-width","0.25"),a(E,"stroke-miterlimit","10"),a(E,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),a(I,"id","c2"),a(I,"fill","#FFFFFF"),a(I,"cx","436.8"),a(I,"cy","144.3"),a(I,"rx","140.6"),a(I,"ry","138.4"),a(k,"id","c1"),a(s,"id","Layer_2"),a(n,"viewBox","0 0 855.6 798.6"),a(e,"class","food svelte-1w9msmi"),L(e,"left",t[1]+"px"),L(e,"top",t[0]+"px"),L(e,"width",S.BLOCK_SIZE-2+"px"),L(e,"height",S.BLOCK_SIZE-2+"px")},m(C,N){K(C,e,N),u(e,n),u(n,l),u(n,s),u(s,i),u(i,o),u(o,r),u(i,f),u(f,c),u(f,h),u(i,b),u(b,v),u(i,y),u(y,E),u(i,k),u(k,I)},p(C,[N]){N&2&&L(e,"left",C[1]+"px"),N&1&&L(e,"top",C[0]+"px")},i:H,o:H,d(C){C&&$(e)}}}function St(t,e,n){let{top:l=0}=e,{left:s=0}=e;return t.$$set=i=>{"top"in i&&n(0,l=i.top),"left"in i&&n(1,s=i.left)},[l,s]}class st extends te{constructor(e){super(),ee(this,e,St,vt,X,{top:0,left:1})}}function bt(t){let e;return{c(){e=m("div"),a(e,"class","bonus svelte-18cernx"),L(e,"width",S.BLOCK_SIZE+"px"),L(e,"height",S.BLOCK_SIZE+"px"),L(e,"left",t[0]+"px"),L(e,"top",t[1]+"px")},m(n,l){K(n,e,l)},p(n,[l]){l&1&&L(e,"left",n[0]+"px"),l&2&&L(e,"top",n[1]+"px")},i:H,o:H,d(n){n&&$(e)}}}function yt(t,e,n){const l=at();let{left:s}=e,{top:i}=e,{id:o}=e;return ut(()=>{setTimeout(()=>{l("bonusFinished",o)},_e.BONUS_TIME)}),t.$$set=r=>{"left"in r&&n(0,s=r.left),"top"in r&&n(1,i=r.top),"id"in r&&n(2,o=r.id)},[s,i,o]}class lt extends te{constructor(e){super(),ee(this,e,yt,bt,X,{left:0,top:1,id:2})}}function wt(t){let e,n,l,s,i,o,r,f=t[0].playerName+"",c,h,b,v,y,E=t[0].score+"",k,I,C,N,R,A,P=t[0].food+"",w,O,T,_,p,d,g=t[0].bonus+"",G,V,Z,pe,ge,Ee=t[0].highScore+"",Be,Ke,ve,Se,re,be=t[0].level+"",ke,Te,ye=t[0].stage+"",Ae,Pe,ie,we,De,Le,j,Re,Ue;return R=new st({props:{left:0,top:50}}),p=new lt({props:{left:0,top:80,id:""}}),{c(){e=m("div"),n=m("div"),n.textContent="Snake",l=M(),s=m("table"),i=m("tr"),o=m("td"),o.textContent="Player",r=m("td"),c=W(f),h=M(),b=m("tr"),v=m("td"),v.textContent="Score",y=m("td"),k=W(E),I=M(),C=m("tr"),N=m("td"),se(R.$$.fragment),A=m("td"),w=W(P),O=M(),T=m("tr"),_=m("td"),se(p.$$.fragment),d=m("td"),G=W(g),V=M(),Z=m("tr"),pe=m("td"),pe.textContent="High Score",ge=m("td"),Be=W(Ee),Ke=M(),ve=m("tr"),Se=m("td"),Se.textContent="Level-Stage",re=m("td"),ke=W(be),Te=m("span"),Te.textContent="-",Ae=W(ye),Pe=M(),ie=m("div"),we=m("button"),we.textContent="Replay",De=M(),Le=m("button"),Le.textContent="Menu",a(n,"class","title svelte-mdywih"),a(o,"class","c1 svelte-mdywih"),a(r,"class","c2 svelte-mdywih"),a(v,"class","c1 svelte-mdywih"),a(y,"class","c2 svelte-mdywih"),a(N,"class","svelte-mdywih"),a(A,"class","c2 svelte-mdywih"),a(_,"class","svelte-mdywih"),a(d,"class","c2 svelte-mdywih"),a(pe,"class","c1 svelte-mdywih"),a(ge,"class","c2 svelte-mdywih"),a(Se,"class","c1 svelte-mdywih"),a(re,"class","c2 svelte-mdywih"),a(s,"class","svelte-mdywih"),a(ie,"class","flex svelte-mdywih"),a(e,"class","game-over-screen svelte-mdywih")},m(F,Y){K(F,e,Y),u(e,n),u(e,l),u(e,s),u(s,i),u(i,o),u(i,r),u(r,c),u(s,h),u(s,b),u(b,v),u(b,y),u(y,k),u(s,I),u(s,C),u(C,N),J(R,N,null),u(C,A),u(A,w),u(s,O),u(s,T),u(T,_),J(p,_,null),u(T,d),u(d,G),u(s,V),u(s,Z),u(Z,pe),u(Z,ge),u(ge,Be),u(s,Ke),u(s,ve),u(ve,Se),u(ve,re),u(re,ke),u(re,Te),u(re,Ae),u(e,Pe),u(e,ie),u(ie,we),u(ie,De),u(ie,Le),j=!0,Re||(Ue=[he(we,"click",t[2]),he(Le,"click",t[1])],Re=!0)},p(F,[Y]){(!j||Y&1)&&f!==(f=F[0].playerName+"")&&q(c,f),(!j||Y&1)&&E!==(E=F[0].score+"")&&q(k,E),(!j||Y&1)&&P!==(P=F[0].food+"")&&q(w,P),(!j||Y&1)&&g!==(g=F[0].bonus+"")&&q(G,g),(!j||Y&1)&&Ee!==(Ee=F[0].highScore+"")&&q(Be,Ee),(!j||Y&1)&&be!==(be=F[0].level+"")&&q(ke,be),(!j||Y&1)&&ye!==(ye=F[0].stage+"")&&q(Ae,ye)},i(F){j||(U(R.$$.fragment,F),U(p.$$.fragment,F),j=!0)},o(F){z(R.$$.fragment,F),z(p.$$.fragment,F),j=!1},d(F){F&&$(e),Q(R),Q(p),Re=!1,ue(Ue)}}}function Lt(t,e,n){const l=()=>{console.log("restart game"),ne.welcomeScreen()},s=()=>{le.resetScore(),ne.startGame()};let i;return le.subscribe(o=>{n(0,i=o)}),[i,l,s]}class It extends te{constructor(e){super(),ee(this,e,Lt,wt,X,{})}}function Ve(t){let e,n,l;return{c(){e=m("div"),n=M(),l=m("div"),a(e,"id","leftEye"),a(e,"class","eyes svelte-rzshp"),a(l,"id","rightEye"),a(l,"class","eyes svelte-rzshp")},m(s,i){K(s,e,i),K(s,n,i),K(s,l,i)},d(s){s&&$(e),s&&$(n),s&&$(l)}}}function Ct(t){let e,n,l=t[2]&&Ve();return{c(){e=m("div"),l&&l.c(),L(e,"left",t[1]+"px"),L(e,"top",t[0]+"px"),L(e,"width",S.BLOCK_SIZE+"px"),L(e,"height",S.BLOCK_SIZE+"px"),a(e,"class",n="snake-body "+t[3]+" svelte-rzshp")},m(s,i){K(s,e,i),l&&l.m(e,null)},p(s,[i]){s[2]?l||(l=Ve(),l.c(),l.m(e,null)):l&&(l.d(1),l=null),i&2&&L(e,"left",s[1]+"px"),i&1&&L(e,"top",s[0]+"px"),i&8&&n!==(n="snake-body "+s[3]+" svelte-rzshp")&&a(e,"class",n)},i:H,o:H,d(s){s&&$(e),l&&l.d()}}}function Nt(t,e,n){let{top:l=S.BLOCK_SIZE}=e,{left:s=S.BLOCK_SIZE}=e,{isHead:i=!1}=e,{direction:o="right"}=e;return t.$$set=r=>{"top"in r&&n(0,l=r.top),"left"in r&&n(1,s=r.left),"isHead"in r&&n(2,i=r.isHead),"direction"in r&&n(3,o=r.direction)},[l,s,i,o]}class Ot extends te{constructor(e){super(),ee(this,e,Nt,Ct,X,{top:0,left:1,isHead:2,direction:3})}}function je(t,e,n){const l=t.slice();return l[2]=e[n],l[4]=n,l}function qe(t){let e,n;return e=new Ot({props:{isHead:t[4]==0,top:t[2].top,left:t[2].left,direction:t[1]}}),{c(){se(e.$$.fragment)},m(l,s){J(e,l,s),n=!0},p(l,s){const i={};s&1&&(i.top=l[2].top),s&1&&(i.left=l[2].left),s&2&&(i.direction=l[1]),e.$set(i)},i(l){n||(U(e.$$.fragment,l),n=!0)},o(l){z(e.$$.fragment,l),n=!1},d(l){Q(e,l)}}}function Bt(t){let e,n,l=t[0],s=[];for(let o=0;o<l.length;o+=1)s[o]=qe(je(t,l,o));const i=o=>z(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Qe()},m(o,r){for(let f=0;f<s.length;f+=1)s[f].m(o,r);K(o,e,r),n=!0},p(o,[r]){if(r&3){l=o[0];let f;for(f=0;f<l.length;f+=1){const c=je(o,l,f);s[f]?(s[f].p(c,r),U(s[f],1)):(s[f]=qe(c),s[f].c(),U(s[f],1),s[f].m(e.parentNode,e))}for($e(),f=l.length;f<s.length;f+=1)i(f);xe()}},i(o){if(!n){for(let r=0;r<l.length;r+=1)U(s[r]);n=!0}},o(o){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)z(s[r]);n=!1},d(o){it(s,o),o&&$(e)}}}function kt(t,e,n){let{snakeBodies:l=[]}=e,{direction:s="right"}=e;return t.$$set=i=>{"snakeBodies"in i&&n(0,l=i.snakeBodies),"direction"in i&&n(1,s=i.direction)},[l,s]}class Tt extends te{constructor(e){super(),ee(this,e,kt,Bt,X,{snakeBodies:0,direction:1})}}const Oe=[{bg:"#affbaf"},{bg:"#fda2f2"},{bg:"#7f61bb"},{bg:"#c34366"}],At=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);function Xe(t,e,n){const l=t.slice();return l[25]=e[n],l}function Ye(t,e){let n,l,s;return l=new lt({props:{id:e[25].id,left:e[25].left,top:e[25].top}}),l.$on("bonusFinished",e[7]),{key:t,first:null,c(){n=Qe(),se(l.$$.fragment),this.first=n},m(i,o){K(i,n,o),J(l,i,o),s=!0},p(i,o){e=i;const r={};o&32&&(r.id=e[25].id),o&32&&(r.left=e[25].left),o&32&&(r.top=e[25].top),l.$set(r)},i(i){s||(U(l.$$.fragment,i),s=!0)},o(i){z(l.$$.fragment,i),s=!1},d(i){i&&$(n),Q(l,i)}}}function Rt(t){let e,n,l,s,i,o=[],r=new Map,f,c,h,b=t[0].level+"",v,y,E=t[0].score+"",k,I,C,N=t[0].bonus+"",R,A,P,w;n=new Tt({props:{direction:t[3],snakeBodies:t[4]}}),s=new st({props:{left:t[1],top:t[2]}});let O=t[5];const T=_=>_[25].id;for(let _=0;_<O.length;_+=1){let p=Xe(t,O,_),d=T(p);r.set(d,o[_]=Ye(d,p))}return{c(){e=m("main"),se(n.$$.fragment),l=M(),se(s.$$.fragment),i=M();for(let _=0;_<o.length;_+=1)o[_].c();f=M(),c=m("div"),h=m("div"),v=W(b),y=W(" : "),k=W(E),I=M(),C=m("div"),R=W(N),L(e,"width",S.SCREEN_WIDTH+"px"),L(e,"height",S.SCREEN_HEIGHT+"px"),L(e,"background",Oe[t[0].level].bg),a(e,"class","svelte-sjb5bh"),a(c,"class","score svelte-sjb5bh")},m(_,p){K(_,e,p),J(n,e,null),u(e,l),J(s,e,null),u(e,i);for(let d=0;d<o.length;d+=1)o[d].m(e,null);K(_,f,p),K(_,c,p),u(c,h),u(h,v),u(h,y),u(h,k),u(c,I),u(c,C),u(C,R),A=!0,P||(w=he(window,"keydown",t[6]),P=!0)},p(_,[p]){const d={};p&8&&(d.direction=_[3]),p&16&&(d.snakeBodies=_[4]),n.$set(d);const g={};p&2&&(g.left=_[1]),p&4&&(g.top=_[2]),s.$set(g),p&160&&(O=_[5],$e(),o=pt(o,p,T,1,_,O,r,e,mt,Ye,null,Xe),xe()),(!A||p&1)&&L(e,"background",Oe[_[0].level].bg),(!A||p&1)&&b!==(b=_[0].level+"")&&q(v,b),(!A||p&1)&&E!==(E=_[0].score+"")&&q(k,E),(!A||p&1)&&N!==(N=_[0].bonus+"")&&q(R,N)},i(_){if(!A){U(n.$$.fragment,_),U(s.$$.fragment,_);for(let p=0;p<O.length;p+=1)U(o[p]);A=!0}},o(_){z(n.$$.fragment,_),z(s.$$.fragment,_);for(let p=0;p<o.length;p+=1)z(o[p]);A=!1},d(_){_&&$(e),Q(n),Q(s);for(let p=0;p<o.length;p+=1)o[p].d();_&&$(f),_&&$(c),P=!1,w()}}}function Gt(t,e,n){let l=!1,s;ne.subscribe(d=>{}),le.subscribe(d=>{n(0,s=d)});const i=()=>{ne.gameOver()};let o=0,r=0,f=B.RIGHT,c=[],h=[],b;const v=S.SCREEN_WIDTH,y=S.SCREEN_HEIGHT,E=()=>{le.nextLevel(),le.resetScore(),clearInterval(b),k(),R()},k=()=>{let d=Oe.length-s.level;d=d*_e.DELAY,b=setInterval(()=>{c.pop();let{left:g,top:G}=c[0];f===B.UP?G-=S.BLOCK_SIZE:f===B.DOWN?G+=S.BLOCK_SIZE:f===B.LEFT?g-=S.BLOCK_SIZE:f===B.RIGHT&&(g+=S.BLOCK_SIZE);const V={left:g,top:G};n(4,c=[V,...c]),h.forEach(Z=>{I(V,Z)&&(p(Z.id),le.getBonus())}),I(V,{left:o,top:r})&&(n(4,c=[...c,c[c.length-1]]),le.eatFood(),N(),s.food%5==0&&_(),c.length/_e.MAX_POINTS>1&&c.length%_e.MAX_POINTS==0&&(s.level<Oe.length-1?E():(clearInterval(b),ne.allLevelsCleared()))),A()&&(clearInterval(b),R(),i())},d)},I=(d,g)=>!(d.top<g.top||d.top>g.top||d.left<g.left||d.left>g.left),C=()=>{let d=0,g=0;for(;;){d=Math.floor(Math.random()*(y/S.BLOCK_SIZE))*S.BLOCK_SIZE,g=Math.floor(Math.random()*(v/S.BLOCK_SIZE))*S.BLOCK_SIZE;let G=c.findIndex(Z=>{Z.top==d}),V=c.findIndex(Z=>{Z.left==g});if(G==-1&&V==-1)break}return{top:d,left:g}},N=()=>{const{top:d,left:g}=C();n(1,o=g),n(2,r=d)},R=()=>{N(),n(3,f=B.RIGHT),n(4,c=[{left:S.BLOCK_SIZE*2,top:0},{left:S.BLOCK_SIZE,top:0},{left:0,top:0}])},A=()=>{if(c.slice(1).filter(Z=>I(Z,c[0])).length>0)return!0;const{top:G,left:V}=c[0];return V>=v&&f==B.RIGHT&&n(4,c[0].left=0,c),V<0&&f==B.LEFT&&n(4,c[0].left=v-S.BLOCK_SIZE,c),G<0&&f==B.UP&&n(4,c[0].top=y-S.BLOCK_SIZE,c),G>=y&&f==B.DOWN&&n(4,c[0].top=0,c),!1},P=()=>{clearInterval(b)},w=d=>d===fe.UP&&f!=B.DOWN?B.UP:d===fe.RIGHT&&f!=B.LEFT?B.RIGHT:d===fe.LEFT&&f!=B.RIGHT?B.LEFT:d===fe.DOWN&&f!=B.UP?B.DOWN:B.UNKNOWN,O=d=>{const g=d.code;if(g===fe.SPACEBAR&&(l=!l,l?P():k()),l)return;const G=w(g);G!=B.UNKNOWN&&n(3,f=G)},T=d=>{console.log(`on bonus finished =${d.detail}`),p(d.detail)},_=()=>{const d=At();let g={top:0,left:0,id:d};g.top=Math.floor(Math.random()*(y/S.BLOCK_SIZE))*S.BLOCK_SIZE,g.left=Math.floor(Math.random()*(v/S.BLOCK_SIZE))*S.BLOCK_SIZE,h.push(g),n(5,h)},p=d=>{const g=h.findIndex(G=>G.id==d);g!=-1&&(h.splice(g,1),n(5,h))};return k(),R(),[s,o,r,f,c,h,O,T]}class Fe extends te{constructor(e){super(),ee(this,e,Gt,Rt,X,{})}}function Ft(t){let e,n,l,s,i,o,r;return{c(){e=m("div"),n=m("div"),n.textContent="Snake",l=M(),s=m("div"),i=m("button"),i.textContent="Start",a(n,"class","title svelte-yxm8be"),a(s,"class","btn svelte-yxm8be"),a(e,"class","start-screen svelte-yxm8be")},m(f,c){K(f,e,c),u(e,n),u(e,l),u(e,s),u(s,i),o||(r=he(i,"click",t[0]),o=!0)},p:H,i:H,o:H,d(f){f&&$(e),o=!1,r()}}}function Ht(t){return[()=>{console.log("start game"),ne.startGame()}]}class Mt extends te{constructor(e){super(),ee(this,e,Ht,Ft,X,{})}}function $t(t){let e,n,l,s,i,o,r,f;return{c(){e=m("div"),n=m("div"),n.textContent="Congratulations !",l=M(),s=m("div"),s.textContent="You have cleared all the levels.",i=M(),o=m("button"),o.textContent="Menu",a(n,"class","title svelte-gyhhqq"),a(e,"class","final svelte-gyhhqq")},m(c,h){K(c,e,h),u(e,n),u(e,l),u(e,s),u(e,i),u(e,o),r||(f=he(o,"click",t[0]),r=!0)},p:H,i:H,o:H,d(c){c&&$(e),r=!1,f()}}}function xt(t){return[()=>{console.log("restart game"),ne.welcomeScreen()}]}class Kt extends te{constructor(e){super(),ee(this,e,xt,$t,X,{})}}var D=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(D||{});const Pt=()=>{const t=[{status:D.NOT_STARTED,component:Mt},{status:D.RUNNING,component:Fe},{status:D.PAUSED,component:Fe},{status:D.RESUME,component:Fe},{status:D.GAME_OVER,component:It},{status:D.ALL_LEVELS_CLEARED,component:Kt}];let{update:e,subscribe:n}=nt(t.find(c=>c.status==D.GAME_OVER));return{subscribe:n,startGame:()=>{e(c=>(c=t.find(h=>h.status==D.RUNNING),c))},pauseGame:()=>{e(c=>(c=t.find(h=>h.status==D.PAUSED),c))},resumeGame:()=>{e(c=>(c=t.find(h=>h.status==D.RUNNING),c))},gameOver:()=>{e(c=>(c=t.find(h=>h.status==D.GAME_OVER),c))},welcomeScreen:()=>{e(c=>(c=t.find(h=>h.status==D.NOT_STARTED),c))},allLevelsCleared:()=>{e(c=>(c=t.find(h=>h.status==D.ALL_LEVELS_CLEARED),c))}}},ne=Pt();function Dt(t){let e,n,l;var s=t[0].component;function i(o){return{}}return s&&(n=new s(i())),{c(){e=m("div"),n&&se(n.$$.fragment),a(e,"class","container svelte-16au4d0"),L(e,"width",S.SCREEN_WIDTH+"px"),L(e,"height",S.SCREEN_HEIGHT+"px")},m(o,r){K(o,e,r),n&&J(n,e,null),l=!0},p(o,[r]){if(s!==(s=o[0].component)){if(n){$e();const f=n;z(f.$$.fragment,1,0,()=>{Q(f,1)}),xe()}s?(n=new s(i()),se(n.$$.fragment),U(n.$$.fragment,1),J(n,e,null)):n=null}},i(o){l||(n&&U(n.$$.fragment,o),l=!0)},o(o){n&&z(n.$$.fragment,o),l=!1},d(o){o&&$(e),n&&Q(n)}}}function Ut(t,e,n){let l;return ne.subscribe(s=>{n(0,l=s)}),[l]}class Zt extends te{constructor(e){super(),ee(this,e,Ut,Dt,X,{})}}new Zt({target:document.getElementById("app")});
