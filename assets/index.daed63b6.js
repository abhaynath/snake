(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function B(){}function ut(t){return t()}function je(){return Object.create(null)}function pe(t){t.forEach(ut)}function dt(t){return typeof t=="function"}function Y(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function wt(t){return Object.keys(t).length===0}function Se(t){return t==null?"":t}function Et(t){return t&&dt(t.destroy)?t.destroy:B}function a(t,e){t.appendChild(e)}function x(t,e,n){t.insertBefore(e,n||null)}function M(t){t.parentNode.removeChild(t)}function pt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t){return document.createTextNode(t)}function K(){return Q(" ")}function xe(){return Q("")}function fe(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function l(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function bt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function St(t){return Array.from(t.childNodes)}function re(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}let Be;function kt(){if(Be===void 0){Be=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Be=!0}}return Be}function At(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const s=k("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const o=kt();let r;return o?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=fe(window,"message",i=>{i.source===s.contentWindow&&e()})):(s.src="about:blank",s.onload=()=>{r=fe(s.contentWindow,"resize",e)}),a(t,s),()=>{(o||r&&s.contentWindow)&&r(),M(s)}}function Ft(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,s,e),o}let Ce;function Te(t){Ce=t}function ht(){if(!Ce)throw new Error("Function called outside component initialization");return Ce}function gt(t){ht().$$.on_mount.push(t)}function Lt(){const t=ht();return(e,n,{cancelable:s=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=Ft(e,n,{cancelable:s});return o.slice().forEach(i=>{i.call(t,r)}),!r.defaultPrevented}return!0}}const Ne=[],Ze=[],Re=[],Je=[],Nt=Promise.resolve();let Ke=!1;function Ot(){Ke||(Ke=!0,Nt.then(_t))}function Ue(t){Re.push(t)}const $e=new Set;let De=0;function _t(){const t=Ce;do{for(;De<Ne.length;){const e=Ne[De];De++,Te(e),Tt(e.$$)}for(Te(null),Ne.length=0,De=0;Ze.length;)Ze.pop()();for(let e=0;e<Re.length;e+=1){const n=Re[e];$e.has(n)||($e.add(n),n())}Re.length=0}while(Ne.length);for(;Je.length;)Je.pop()();Ke=!1,$e.clear(),Te(t)}function Tt(t){if(t.fragment!==null){t.update(),pe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ue)}}const ze=new Set;let ue;function Ee(){ue={r:0,c:[],p:ue}}function be(){ue.r||pe(ue.c),ue=ue.p}function D(t,e){t&&t.i&&(ze.delete(t),t.i(e))}function $(t,e,n,s){if(t&&t.o){if(ze.has(t))return;ze.add(t),ue.c.push(()=>{ze.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function Qe(t,e){$(t,1,1,()=>{e.delete(t.key)})}function et(t,e,n,s,o,r,i,c,u,f,p,d){let h=t.length,E=r.length,_=h;const b={};for(;_--;)b[t[_].key]=_;const L=[],S=new Map,A=new Map;for(_=E;_--;){const F=d(o,r,_),C=n(F);let I=i.get(C);I?s&&I.p(F,e):(I=f(C,F),I.c()),S.set(C,L[_]=I),C in b&&A.set(C,Math.abs(_-b[C]))}const G=new Set,V=new Set;function U(F){D(F,1),F.m(c,p),i.set(F.key,F),p=F.first,E--}for(;h&&E;){const F=L[E-1],C=t[h-1],I=F.key,N=C.key;F===C?(p=F.first,h--,E--):S.has(N)?!i.has(I)||G.has(I)?U(F):V.has(N)?h--:A.get(I)>A.get(N)?(V.add(I),U(F)):(G.add(N),h--):(u(C,i),h--)}for(;h--;){const F=t[h];S.has(F.key)||u(F,i)}for(;E;)U(L[E-1]);return L}function se(t){t&&t.c()}function ee(t,e,n,s){const{fragment:o,on_mount:r,on_destroy:i,after_update:c}=t.$$;o&&o.m(e,n),s||Ue(()=>{const u=r.map(ut).filter(dt);i?i.push(...u):pe(u),t.$$.on_mount=[]}),c.forEach(Ue)}function te(t,e){const n=t.$$;n.fragment!==null&&(pe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ct(t,e){t.$$.dirty[0]===-1&&(Ne.push(t),Ot(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(t,e,n,s,o,r,i,c=[-1]){const u=Ce;Te(t);const f=t.$$={fragment:null,ctx:null,props:r,update:B,not_equal:o,bound:je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:je(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};i&&i(f.root);let p=!1;if(f.ctx=n?n(t,e.props||{},(d,h,...E)=>{const _=E.length?E[0]:h;return f.ctx&&o(f.ctx[d],f.ctx[d]=_)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](_),p&&Ct(t,d)),h}):[],f.update(),p=!0,pe(f.before_update),f.fragment=s?s(f.ctx):!1,e.target){if(e.hydrate){const d=St(e.target);f.fragment&&f.fragment.l(d),d.forEach(M)}else f.fragment&&f.fragment.c();e.intro&&D(t.$$.fragment),ee(t,e.target,e.anchor,e.customElement),_t()}Te(u)}class j{$destroy(){te(this,1),this.$destroy=B}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(e){this.$$set&&!wt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var T=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(T||{}),W=(t=>(t[t.DELAY=100]="DELAY",t[t.MAX_POINTS=50]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t[t.MAX_BLOCKS=20]="MAX_BLOCKS",t))(W||{}),we=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(we||{}),Oe=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(Oe||{});const ve=[];function We(t,e=B){let n;const s=new Set;function o(c){if(Y(t,c)&&(t=c,n)){const u=!ve.length;for(const f of s)f[1](),ve.push(f,t);if(u){for(let f=0;f<ve.length;f+=2)ve[f][0](ve[f+1]);ve.length=0}}}function r(c){o(c(t))}function i(c,u=B){const f=[c,u];return s.add(f),s.size===1&&(n=e(o)||B),c(t),()=>{s.delete(f),s.size===0&&(n(),n=null)}}return{set:o,update:r,subscribe:i}}const Gt=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=We(t);return{subscribe:n,resetScore:()=>{e(c=>(c.food=0,c.bonus=0,c.score=0,c))},eatFood:()=>{e(c=>(c.food=c.food+1,c.score=c.food*5+c.bonus*20,c.score>c.highScore&&(c.highScore=c.score),c))},getBonus:()=>{e(c=>(c.bonus=c.bonus+1,c))},nextLevel:()=>{e(c=>(c.level=c.level+1,c))}}};let ie=Gt();function It(t){let e,n,s,o,r,i,c,u=t[0].playerName+"",f,p,d,h,E,_=t[0].score+"",b,L,S,A,G,V=t[0].food+"",U,F,C,I,N,m=t[0].bonus+"",w,R,Z,he,ge,_e=t[0].highScore+"",ke,Ae,ae,me,le,y=t[0].level+"",O,H,Fe=t[0].stage+"",Pe,Xe,ye,Ge,Ye,Ie,He,qe;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",s=K(),o=k("table"),r=k("tr"),i=k("td"),i.textContent="Player",c=k("td"),f=Q(u),p=K(),d=k("tr"),h=k("td"),h.textContent="Score",E=k("td"),b=Q(_),L=K(),S=k("tr"),A=k("td"),A.textContent="Food",G=k("td"),U=Q(V),F=K(),C=k("tr"),I=k("td"),I.textContent="Bonus",N=k("td"),w=Q(m),R=K(),Z=k("tr"),he=k("td"),he.textContent="High Score",ge=k("td"),ke=Q(_e),Ae=K(),ae=k("tr"),me=k("td"),me.textContent="Level-Stage",le=k("td"),O=Q(y),H=k("span"),H.textContent="-",Pe=Q(Fe),Xe=K(),ye=k("div"),Ge=k("button"),Ge.textContent="Replay",Ye=K(),Ie=k("button"),Ie.textContent="Menu",l(n,"class","title svelte-mdywih"),l(i,"class","c1 svelte-mdywih"),l(c,"class","c2 svelte-mdywih"),l(h,"class","c1 svelte-mdywih"),l(E,"class","c2 svelte-mdywih"),l(A,"class","c1 svelte-mdywih"),l(G,"class","c2 svelte-mdywih"),l(I,"class","c1 svelte-mdywih"),l(N,"class","c2 svelte-mdywih"),l(he,"class","c1 svelte-mdywih"),l(ge,"class","c2 svelte-mdywih"),l(me,"class","c1 svelte-mdywih"),l(le,"class","c2 svelte-mdywih"),l(o,"class","svelte-mdywih"),l(ye,"class","flex svelte-mdywih"),l(e,"class","game-over-screen svelte-mdywih")},m(J,ne){x(J,e,ne),a(e,n),a(e,s),a(e,o),a(o,r),a(r,i),a(r,c),a(c,f),a(o,p),a(o,d),a(d,h),a(d,E),a(E,b),a(o,L),a(o,S),a(S,A),a(S,G),a(G,U),a(o,F),a(o,C),a(C,I),a(C,N),a(N,w),a(o,R),a(o,Z),a(Z,he),a(Z,ge),a(ge,ke),a(o,Ae),a(o,ae),a(ae,me),a(ae,le),a(le,O),a(le,H),a(le,Pe),a(e,Xe),a(e,ye),a(ye,Ge),a(ye,Ye),a(ye,Ie),He||(qe=[fe(Ge,"click",t[2]),fe(Ie,"click",t[1])],He=!0)},p(J,[ne]){ne&1&&u!==(u=J[0].playerName+"")&&re(f,u),ne&1&&_!==(_=J[0].score+"")&&re(b,_),ne&1&&V!==(V=J[0].food+"")&&re(U,V),ne&1&&m!==(m=J[0].bonus+"")&&re(w,m),ne&1&&_e!==(_e=J[0].highScore+"")&&re(ke,_e),ne&1&&y!==(y=J[0].level+"")&&re(O,y),ne&1&&Fe!==(Fe=J[0].stage+"")&&re(Pe,Fe)},i:B,o:B,d(J){J&&M(e),He=!1,pe(qe)}}}function Bt(t,e,n){const s=()=>{console.log("restart game"),ce.welcomeScreen()},o=()=>{ie.resetScore(),ce.startGame()};let r;return ie.subscribe(i=>{n(0,r=i)}),[r,s,o]}class Dt extends j{constructor(e){super(),q(this,e,Bt,It,Y,{})}}var mt=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(mt||{}),yt=(t=>(t[t.STAR=0]="STAR",t[t.GEM=1]="GEM",t[t.RUBY=2]="RUBY",t))(yt||{}),P=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(P||{});const Mt=300,Rt=60,vt="none";function Le(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function zt(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function Me(t,e,n,s,o){t.dispatchEvent(new CustomEvent(`${e}${o}`,{detail:{event:n,pointersCount:s.length}}))}function Ut(t,e,n,s,o,r=vt){e.style.touchAction=r;let i=[];function c(f){i.push(f),Me(e,t,f,i,"down"),s==null||s(i,f);const p=f.pointerId;function d(S){p===S.pointerId&&(i=zt(S,i),i.length||h(),Me(e,t,S,i,"up"),o==null||o(i,S))}function h(){E(),_(),b(),L()}const E=Le(e,"pointermove",S=>{i=i.map(A=>S.pointerId===A.pointerId?S:A),Me(e,t,S,i,"move"),n==null||n(i,S)}),_=Le(e,"lostpointercapture",S=>{d(S)}),b=Le(e,"pointerup",S=>{d(S)}),L=Le(e,"pointerleave",S=>{i=[],h(),Me(e,t,S,i,"up"),o==null||o(i,S)})}const u=Le(e,"pointerdown",c);return{destroy:()=>{u()}}}function xt(t,e={timeframe:Mt,minSwipeDistance:Rt,touchAction:vt}){const n="swipe";let s,o,r,i;function c(f,p){o=p.clientX,r=p.clientY,s=Date.now(),f.length===1&&(i=p.target)}function u(f,p){if(p.type==="pointerup"&&f.length===0&&Date.now()-s<e.timeframe){const d=p.clientX-o,h=p.clientY-r,E=Math.abs(d),_=Math.abs(h);let b=null;E>=2*_&&E>e.minSwipeDistance?b=d>0?"right":"left":_>=2*E&&_>e.minSwipeDistance&&(b=h>0?"bottom":"top"),b&&t.dispatchEvent(new CustomEvent(n,{detail:{direction:b,target:i}}))}}return Ut(n,t,null,c,u,e.touchAction)}function Pt(t){let e,n,s,o,r,i,c,u,f,p,d,h,E,_,b,L;return{c(){e=k("div"),n=g("svg"),s=g("g"),o=g("g"),r=g("g"),i=g("g"),c=g("ellipse"),u=g("g"),f=g("path"),p=g("path"),d=g("g"),h=g("path"),E=g("g"),_=g("path"),b=g("g"),L=g("ellipse"),l(s,"id","Layer_1"),l(c,"id","shadow"),l(c,"opacity","0.3"),l(c,"cx","438.7"),l(c,"cy","765.8"),l(c,"rx","283"),l(c,"ry","32.9"),l(f,"id","cup-shadow"),l(f,"fill","#E7F4FA"),l(f,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),l(p,"id","cup-light"),l(p,"fill","#FFFFFF"),l(p,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),l(h,"id","mainFood"),l(h,"fill","#DB343C"),l(h,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),l(_,"id","highlight"),l(_,"opacity","0.3"),l(_,"fill","#FFFFFF"),l(_,"stroke","#000000"),l(_,"stroke-width","0.25"),l(_,"stroke-miterlimit","10"),l(_,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),l(L,"id","c2"),l(L,"fill","#FFFFFF"),l(L,"cx","436.8"),l(L,"cy","144.3"),l(L,"rx","140.6"),l(L,"ry","138.4"),l(b,"id","c1"),l(o,"id","Layer_2"),l(n,"viewBox","0 0 855.6 798.6"),l(e,"class","food bounce-top svelte-h8lqdv"),v(e,"left",t[1].left*t[0]+"px"),v(e,"top",t[1].top*t[0]+"px"),v(e,"width",t[0]-2+"px"),v(e,"height",t[0]-2+"px")},m(S,A){x(S,e,A),a(e,n),a(n,s),a(n,o),a(o,r),a(r,i),a(i,c),a(r,u),a(u,f),a(u,p),a(r,d),a(d,h),a(r,E),a(E,_),a(r,b),a(b,L)},p(S,[A]){A&3&&v(e,"left",S[1].left*S[0]+"px"),A&3&&v(e,"top",S[1].top*S[0]+"px"),A&1&&v(e,"width",S[0]-2+"px"),A&1&&v(e,"height",S[0]-2+"px")},i:B,o:B,d(S){S&&M(e)}}}function Ht(t,e,n){let{size:s=0}=e,{data:o}=e;return t.$$set=r=>{"size"in r&&n(0,s=r.size),"data"in r&&n(1,o=r.data)},[s,o]}class $t extends j{constructor(e){super(),q(this,e,Ht,Pt,Y,{size:0,data:1})}}function Vt(t){let e,n,s;return{c(){e=g("svg"),n=g("rect"),l(n,"y","0"),l(n,"fill","#0037FF"),l(n,"width","50"),l(n,"height","50"),l(e,"viewBox","0 0 50 50"),l(e,"class",s=Se(t[4])+" svelte-zvgok1")},m(o,r){x(o,e,r),a(e,n)},p(o,r){r&16&&s!==(s=Se(o[4])+" svelte-zvgok1")&&l(e,"class",s)},d(o){o&&M(e)}}}function Kt(t){let e,n,s;return{c(){e=g("svg"),n=g("rect"),l(n,"y","0"),l(n,"fill","#0037FF"),l(n,"width","50"),l(n,"height","50"),l(e,"viewBox","0 0 50 50"),l(e,"class",s=Se(t[4])+" svelte-zvgok1")},m(o,r){x(o,e,r),a(e,n)},p(o,r){r&16&&s!==(s=Se(o[4])+" svelte-zvgok1")&&l(e,"class",s)},d(o){o&&M(e)}}}function Wt(t){let e,n,s,o,r,i,c;return{c(){e=g("svg"),n=g("g"),s=g("rect"),o=g("path"),r=g("circle"),i=g("circle"),l(s,"opacity","0"),l(s,"fill","#FFFFFF"),l(s,"width","258"),l(s,"height","258"),l(o,"fill","#0037FF"),l(o,"d",`M147.5,29.2C111.6,29.2,80.1,48,62.6,77H0v104h62.6c17.5,28,49,47.3,84.9,47.3c55,0,99.6-44.6,99.6-99.6\r
          S202.5,29.2,147.5,29.2z`),l(r,"fill","#FFF800"),l(r,"stroke","#000000"),l(r,"stroke-miterlimit","10"),l(r,"cx","184.3"),l(r,"cy","84.5"),l(r,"r","21.8"),l(i,"fill","#FFF800"),l(i,"stroke","#000000"),l(i,"stroke-miterlimit","10"),l(i,"cx","184.3"),l(i,"cy","164.5"),l(i,"r","21.8"),l(e,"viewBox","0 0 258 258"),l(e,"class",c=Se(t[4])+" svelte-zvgok1")},m(u,f){x(u,e,f),a(e,n),a(n,s),a(n,o),a(n,r),a(n,i)},p(u,f){f&16&&c!==(c=Se(u[4])+" svelte-zvgok1")&&l(e,"class",c)},d(u){u&&M(e)}}}function Xt(t){let e;function n(r,i){return r[2]?Wt:r[3]?Kt:Vt}let s=n(t),o=s(t);return{c(){e=k("div"),o.c(),v(e,"left",t[1].left*t[0]+"px"),v(e,"top",t[1].top*t[0]+"px"),v(e,"width",t[0]+"px"),v(e,"height",t[0]+"px"),l(e,"class","snake-body svelte-zvgok1")},m(r,i){x(r,e,i),o.m(e,null)},p(r,[i]){s===(s=n(r))&&o?o.p(r,i):(o.d(1),o=s(r),o&&(o.c(),o.m(e,null))),i&3&&v(e,"left",r[1].left*r[0]+"px"),i&3&&v(e,"top",r[1].top*r[0]+"px"),i&1&&v(e,"width",r[0]+"px"),i&1&&v(e,"height",r[0]+"px")},i:B,o:B,d(r){r&&M(e),o.d()}}}function Yt(t,e,n){let{size:s=0}=e,{current:o=null}=e,{prev:r=null}=e,{isHead:i=!1}=e,{isTail:c=!1}=e,{direction:u="right"}=e;return t.$$set=f=>{"size"in f&&n(0,s=f.size),"current"in f&&n(1,o=f.current),"prev"in f&&n(5,r=f.prev),"isHead"in f&&n(2,i=f.isHead),"isTail"in f&&n(3,c=f.isTail),"direction"in f&&n(4,u=f.direction)},[s,o,i,c,u,r]}class qt extends j{constructor(e){super(),q(this,e,Yt,Xt,Y,{size:0,current:1,prev:5,isHead:2,isTail:3,direction:4})}}function tt(t,e,n){const s=t.slice();return s[3]=e[n],s[5]=n,s}function nt(t){let e,n;return e=new qt({props:{isHead:t[5]==0,isTail:t[5]==t[0].length-1,current:t[3],prev:t[5]>0?t[0][t[5]-1]:null,direction:t[1],size:t[2]}}),{c(){se(e.$$.fragment)},m(s,o){ee(e,s,o),n=!0},p(s,o){const r={};o&1&&(r.isTail=s[5]==s[0].length-1),o&1&&(r.current=s[3]),o&1&&(r.prev=s[5]>0?s[0][s[5]-1]:null),o&2&&(r.direction=s[1]),o&4&&(r.size=s[2]),e.$set(r)},i(s){n||(D(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){te(e,s)}}}function jt(t){let e,n,s=t[0],o=[];for(let i=0;i<s.length;i+=1)o[i]=nt(tt(t,s,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=xe()},m(i,c){for(let u=0;u<o.length;u+=1)o[u].m(i,c);x(i,e,c),n=!0},p(i,[c]){if(c&7){s=i[0];let u;for(u=0;u<s.length;u+=1){const f=tt(i,s,u);o[u]?(o[u].p(f,c),D(o[u],1)):(o[u]=nt(f),o[u].c(),D(o[u],1),o[u].m(e.parentNode,e))}for(Ee(),u=s.length;u<o.length;u+=1)r(u);be()}},i(i){if(!n){for(let c=0;c<s.length;c+=1)D(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){pt(o,i),i&&M(e)}}}function Zt(t,e,n){let{data:s=[]}=e,{direction:o="right"}=e,{size:r=0}=e;return t.$$set=i=>{"data"in i&&n(0,s=i.data),"direction"in i&&n(1,o=i.direction),"size"in i&&n(2,r=i.size)},[s,o,r]}class Jt extends j{constructor(e){super(),q(this,e,Zt,jt,Y,{data:0,direction:1,size:2})}}const z=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Qt=t=>{const e=z();let n={top:0,left:0,id:e},s=!1;do n.top=Math.floor(Math.random()*W.MAX_BLOCKS),n.left=Math.floor(Math.random()*W.MAX_BLOCKS),s=!en(n,t);while(s==!1);return n},en=(t,e)=>{for(let n=0;n<e.length;n++)if(e[n].top==t.top&&e[n].left==t.left)return!0;return!1},de=[{bg:"#affbaf",wall:[{id:z(),type:P.DEFAULT,top:2,left:1},{id:z(),type:P.DEFAULT,top:2,left:2},{id:z(),type:P.ROCK,top:2,left:3},{id:z(),type:P.ROCK,top:2,left:4},{id:z(),type:P.DEFAULT,top:2,left:5},{id:z(),type:P.DEFAULT,top:2,left:6},{id:z(),type:P.CONCRETE,top:1,left:3},{id:z(),type:P.CONCRETE,top:3,left:4}]},{bg:"#fda2f2",wall:[{id:z(),type:P.DEFAULT,top:2,left:1},{id:z(),type:P.DEFAULT,top:2,left:2},{id:z(),type:P.ROCK,top:2,left:3},{id:z(),type:P.ROCK,top:2,left:4},{id:z(),type:P.DEFAULT,top:2,left:5},{id:z(),type:P.DEFAULT,top:2,left:6},{id:z(),type:P.CONCRETE,top:1,left:3},{id:z(),type:P.CONCRETE,top:3,left:4}]},{bg:"#7f61bb",wall:[]},{bg:"#c34366",wall:[]}];function tn(t){let e,n,s,o,r;return{c(){e=k("div"),n=g("svg"),s=g("style"),o=Q(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),r=g("polygon"),l(s,"id","style2"),l(r,"fill","#FFA300"),l(r,"stroke","#EB0000"),l(r,"stroke-width","0.25"),l(r,"stroke-miterlimit","10"),l(r,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),l(r,"class","red"),l(n,"viewBox","0 0 443.3 421.6"),l(e,"class","bonus bounce-top svelte-y90akj"),v(e,"width",t[1]+"px"),v(e,"height",t[1]+"px"),v(e,"left",t[0].left*t[1]+"px"),v(e,"top",t[0].top*t[1]+"px")},m(i,c){x(i,e,c),a(e,n),a(n,s),a(s,o),a(n,r)},p(i,[c]){c&2&&v(e,"width",i[1]+"px"),c&2&&v(e,"height",i[1]+"px"),c&3&&v(e,"left",i[0].left*i[1]+"px"),c&3&&v(e,"top",i[0].top*i[1]+"px")},i:B,o:B,d(i){i&&M(e)}}}function nn(t,e,n){const s=Lt();let{data:o}=e,{size:r=0}=e;return gt(()=>{setTimeout(()=>{s("bonusFinished",o.id)},W.BONUS_TIME)}),t.$$set=i=>{"data"in i&&n(0,o=i.data),"size"in i&&n(1,r=i.size)},[o,r]}class on extends j{constructor(e){super(),q(this,e,nn,tn,Y,{data:0,size:1})}}function sn(t){let e,n,s;return{c(){e=k("div"),n=k("h1"),s=Q(t[0]),l(n,"class","svelte-1x8upsq"),l(e,"class","message-box svelte-1x8upsq")},m(o,r){x(o,e,r),a(e,n),a(n,s)},p(o,[r]){r&1&&re(s,o[0])},i:B,o:B,d(o){o&&M(e)}}}function ln(t,e,n){let{message:s=""}=e;return t.$$set=o=>{"message"in o&&n(0,s=o.message)},[s]}class rn extends j{constructor(e){super(),q(this,e,ln,sn,Y,{message:0})}}function cn(t){let e,n,s,o,r,i,c,u,f;return{c(){e=g("svg"),n=g("radialGradient"),s=g("stop"),o=g("stop"),r=g("rect"),i=g("linearGradient"),c=g("stop"),u=g("stop"),f=g("rect"),l(s,"offset","0"),v(s,"stop-color","#333333"),l(o,"offset","1"),v(o,"stop-color","#000000"),l(n,"id","rock_svgid"),l(n,"cx","219.5"),l(n,"cy","219.5"),l(n,"r","219"),l(n,"gradientUnits","userSpaceOnUse"),l(r,"x","0.5"),l(r,"y","0.5"),l(r,"fill","url(#rock_svgid)"),l(r,"stroke","#000000"),l(r,"stroke-miterlimit","10"),l(r,"width","438"),l(r,"height","438"),l(c,"offset","0"),v(c,"stop-color","#000000"),v(c,"stop-opacity","0"),l(u,"offset","1"),v(u,"stop-color","#FFFFFF"),v(u,"stop-opacity","0.5"),l(i,"id","rock_svgid2"),l(i,"gradientUnits","userSpaceOnUse"),l(i,"x1","219"),l(i,"y1","431"),l(i,"x2","219"),l(i,"y2","9.0005"),l(f,"x","8"),l(f,"y","9"),l(f,"fill","url(#rock_svgid2)"),l(f,"width","422"),l(f,"height","422"),l(e,"viewBox","0 0 439 439")},m(p,d){x(p,e,d),a(e,n),a(n,s),a(n,o),a(e,r),a(e,i),a(i,c),a(i,u),a(e,f)},d(p){p&&M(e)}}}function fn(t){let e,n,s,o,r,i,c,u,f,p,d,h,E,_,b,L,S,A,G,V,U,F;return{c(){e=g("svg"),n=g("g"),s=g("linearGradient"),o=g("stop"),r=g("stop"),i=g("rect"),c=g("linearGradient"),u=g("stop"),f=g("stop"),p=g("rect"),d=g("linearGradient"),h=g("stop"),E=g("stop"),_=g("polygon"),b=g("linearGradient"),L=g("stop"),S=g("stop"),A=g("rect"),G=g("linearGradient"),V=g("stop"),U=g("stop"),F=g("rect"),l(o,"offset","0"),v(o,"stop-color","#998675"),l(r,"offset","1"),v(r,"stop-color","#C7B299"),l(s,"id","concrete_SVGID_1_"),l(s,"gradientUnits","userSpaceOnUse"),l(s,"x1","4"),l(s,"y1","96.5"),l(s,"x2","281"),l(s,"y2","96.5"),l(i,"x","4"),l(i,"y","4"),l(i,"fill","url(#concrete_SVGID_1_)"),l(i,"stroke","#CABD99"),l(i,"stroke-width","8"),l(i,"stroke-miterlimit","10"),l(i,"width","277"),l(i,"height","185"),l(u,"offset","0"),v(u,"stop-color","#998675"),l(f,"offset","1"),v(f,"stop-color","#C7B299"),l(c,"id","concrete_SVGID_2_"),l(c,"gradientUnits","userSpaceOnUse"),l(c,"x1","420"),l(c,"y1","189"),l(c,"x2","420"),l(c,"y2","4"),l(p,"x","281"),l(p,"y","4"),l(p,"fill","url(#concrete_SVGID_2_)"),l(p,"stroke","#CABD99"),l(p,"stroke-width","8"),l(p,"stroke-miterlimit","10"),l(p,"width","278"),l(p,"height","185"),l(h,"offset","0"),v(h,"stop-color","#998675"),l(E,"offset","1"),v(E,"stop-color","#C7B299"),l(d,"id","concrete_SVGID_3_"),l(d,"gradientUnits","userSpaceOnUse"),l(d,"x1","281.5"),l(d,"y1","374"),l(d,"x2","281.5"),l(d,"y2","189.0005"),l(_,"fill","url(#concrete_SVGID_3_)"),l(_,"stroke","#CABD99"),l(_,"stroke-width","8"),l(_,"stroke-miterlimit","10"),l(_,"points",`281,189 4,189 4,374 281,374 \r
    559,374 559,189 	`),l(L,"offset","0"),v(L,"stop-color","#998675"),l(S,"offset","1"),v(S,"stop-color","#C7B299"),l(b,"id","concrete_SVGID_4_"),l(b,"gradientUnits","userSpaceOnUse"),l(b,"x1","4"),l(b,"y1","466.5"),l(b,"x2","281"),l(b,"y2","466.5"),l(A,"x","4"),l(A,"y","374"),l(A,"fill","url(#concrete_SVGID_4_)"),l(A,"stroke","#CABD99"),l(A,"stroke-width","8"),l(A,"stroke-miterlimit","10"),l(A,"width","277"),l(A,"height","185"),l(V,"offset","0"),v(V,"stop-color","#998675"),l(U,"offset","1"),v(U,"stop-color","#C7B299"),l(G,"id","concrete_SVGID_5_"),l(G,"gradientUnits","userSpaceOnUse"),l(G,"x1","281"),l(G,"y1","466.5"),l(G,"x2","559"),l(G,"y2","466.5"),l(F,"x","281"),l(F,"y","374"),l(F,"fill","url(#concrete_SVGID_5_)"),l(F,"stroke","#CABD99"),l(F,"stroke-width","8"),l(F,"stroke-miterlimit","10"),l(F,"width","278"),l(F,"height","185"),l(e,"viewBox","0 0 563 563")},m(C,I){x(C,e,I),a(e,n),a(n,s),a(s,o),a(s,r),a(n,i),a(n,c),a(c,u),a(c,f),a(n,p),a(n,d),a(d,h),a(d,E),a(n,_),a(n,b),a(b,L),a(b,S),a(n,A),a(n,G),a(G,V),a(G,U),a(n,F)},d(C){C&&M(e)}}}function an(t){let e,n,s,o,r,i,c,u,f,p,d,h,E,_,b;return{c(){e=g("svg"),n=g("symbol"),s=g("polygon"),o=g("polygon"),r=g("polygon"),i=g("polygon"),c=g("polygon"),u=g("polygon"),f=g("polygon"),p=g("polygon"),d=g("polygon"),h=g("polygon"),E=g("polygon"),_=g("polygon"),b=g("use"),l(s,"points","27,-29 -27,-29 -27,29 27,29 	"),l(o,"fill","#BF6411"),l(o,"points","-15,29 -27,29 -27,16 -15,16 -2,16 -2,29 	"),l(r,"fill","#BF6411"),l(r,"points","12,29 0,29 0,16 12,16 25,16 25,29 	"),l(i,"fill","#BF6411"),l(i,"points","-27,14 -15,14 -15,2 -27,2 	"),l(c,"fill","#BF6411"),l(c,"points","0,14 -13,14 -13,2 0,2 12,2 12,14 	"),l(u,"fill","#BF6411"),l(u,"points","14,14 27,14 27,2 14,2 	"),l(f,"fill","#BF6411"),l(f,"points","-15,0 -27,0 -27,-13 -15,-13 -2,-13 -2,0 	"),l(p,"fill","#BF6411"),l(p,"points","12,0 0,0 0,-13 12,-13 25,-13 25,0 	"),l(d,"fill","#BF6411"),l(d,"points","-27,-15 -15,-15 -15,-27 -27,-27 	"),l(h,"fill","#BF6411"),l(h,"points","0,-15 -13,-15 -13,-27 0,-27 12,-27 12,-15 	"),l(E,"fill","#BF6411"),l(E,"points","14,-15 27,-15 27,-27 14,-27 	"),l(_,"display","none"),l(_,"fill","none"),l(_,"points","-27,29 27,29 27,-29 -27,-29 	"),l(n,"id","brick1"),l(n,"viewBox","-27 -29 54 58"),bt(b,"xlink:href","#brick1"),l(b,"width","54"),l(b,"height","58"),l(b,"x","-27"),l(b,"y","-29"),l(b,"transform","matrix(1 0 0 -1 27 29)"),l(b,"overflow","visible"),l(e,"viewBox","0 0 54 58")},m(L,S){x(L,e,S),a(e,n),a(n,s),a(n,o),a(n,r),a(n,i),a(n,c),a(n,u),a(n,f),a(n,p),a(n,d),a(n,h),a(n,E),a(n,_),a(e,b)},d(L){L&&M(e)}}}function un(t){let e;function n(r,i){return r[1].type==P.DEFAULT?an:r[1].type==P.CONCRETE?fn:cn}let s=n(t),o=s(t);return{c(){e=k("div"),o.c(),l(e,"class","brick svelte-1ezhfpr"),v(e,"top",t[1].top*t[0]+"px"),v(e,"left",t[1].left*t[0]+"px"),v(e,"width",t[0]+"px"),v(e,"height",t[0]+"px")},m(r,i){x(r,e,i),o.m(e,null)},p(r,[i]){s!==(s=n(r))&&(o.d(1),o=s(r),o&&(o.c(),o.m(e,null))),i&3&&v(e,"top",r[1].top*r[0]+"px"),i&3&&v(e,"left",r[1].left*r[0]+"px"),i&1&&v(e,"width",r[0]+"px"),i&1&&v(e,"height",r[0]+"px")},i:B,o:B,d(r){r&&M(e),o.d()}}}function dn(t,e,n){let{size:s=0}=e,{data:o}=e;return t.$$set=r=>{"size"in r&&n(0,s=r.size),"data"in r&&n(1,o=r.data)},[s,o]}class pn extends j{constructor(e){super(),q(this,e,dn,un,Y,{size:0,data:1})}}function ot(t,e,n){const s=t.slice();return s[3]=e[n],s}function st(t){let e,n;return e=new pn({props:{data:t[3],size:t[0]}}),{c(){se(e.$$.fragment)},m(s,o){ee(e,s,o),n=!0},p(s,o){const r={};o&2&&(r.data=s[3]),o&1&&(r.size=s[0]),e.$set(r)},i(s){n||(D(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){te(e,s)}}}function hn(t){let e,n,s=t[1],o=[];for(let i=0;i<s.length;i+=1)o[i]=st(ot(t,s,i));const r=i=>$(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=xe()},m(i,c){for(let u=0;u<o.length;u+=1)o[u].m(i,c);x(i,e,c),n=!0},p(i,[c]){if(c&3){s=i[1];let u;for(u=0;u<s.length;u+=1){const f=ot(i,s,u);o[u]?(o[u].p(f,c),D(o[u],1)):(o[u]=st(f),o[u].c(),D(o[u],1),o[u].m(e.parentNode,e))}for(Ee(),u=s.length;u<o.length;u+=1)r(u);be()}},i(i){if(!n){for(let c=0;c<s.length;c+=1)D(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(i){pt(o,i),i&&M(e)}}}function gn(t,e,n){let s,{size:o=0}=e,r;return ie.subscribe(i=>{n(2,r=i)}),t.$$set=i=>{"size"in i&&n(0,o=i.size)},t.$$.update=()=>{t.$$.dirty&4&&n(1,s=de[r.level-1].wall)},[o,s,r]}class _n extends j{constructor(e){super(),q(this,e,gn,hn,Y,{size:0})}}const lt=()=>[{id:z(),left:2,top:0},{id:z(),left:1,top:0},{id:z(),left:0,top:0}],mn=()=>{let t={bonus:[],foods:[],snake:lt()},{update:e,subscribe:n}=We(t);return{subscribe:n,addBonus:p=>{e(d=>(d.bonus.findIndex(E=>E.id==p.id)==-1&&(d.bonus.push(p),d.bonus=d.bonus,d=d),d))},removeBonus:p=>{e(d=>{let h=d.bonus.slice(0),E=h.findIndex(_=>_.id==p);return E!=-1&&(h.splice(E,1),d.bonus=h,d=d),d})},addFood:p=>{e(d=>(d.foods.findIndex(E=>E.id==p.id)==-1&&(d.foods.push(p),d.foods=d.foods,d=d),d))},removeFood:p=>{e(d=>{let h=d.foods.slice(0),E=h.findIndex(_=>_.id==p);return E!=-1&&(h.splice(E,1),d.foods=h,d=d),d})},moveSnake:p=>{e(d=>{let h=d.snake;return h.pop(),h=[p,...h],d.snake=h,d})},growSnake:()=>{e(p=>{let d=p.snake;return d=[...d,d[d.length-1]],p.snake=d,p})},reset:()=>{e(p=>(p={bonus:[],foods:[],snake:lt()},p))}}},oe=mn();function rt(t,e,n){const s=t.slice();return s[39]=e[n],s}function it(t,e,n){const s=t.slice();return s[42]=e[n],s}function ct(t,e){let n,s,o;return s=new $t({props:{data:e[42],size:e[6]}}),{key:t,first:null,c(){n=xe(),se(s.$$.fragment),this.first=n},m(r,i){x(r,n,i),ee(s,r,i),o=!0},p(r,i){e=r;const c={};i[0]&128&&(c.data=e[42]),i[0]&64&&(c.size=e[6]),s.$set(c)},i(r){o||(D(s.$$.fragment,r),o=!0)},o(r){$(s.$$.fragment,r),o=!1},d(r){r&&M(n),te(s,r)}}}function ft(t,e){let n,s,o;return s=new on({props:{data:e[39],size:e[6]}}),s.$on("bonusFinished",e[11]),{key:t,first:null,c(){n=xe(),se(s.$$.fragment),this.first=n},m(r,i){x(r,n,i),ee(s,r,i),o=!0},p(r,i){e=r;const c={};i[0]&128&&(c.data=e[39]),i[0]&64&&(c.size=e[6]),s.$set(c)},i(r){o||(D(s.$$.fragment,r),o=!0)},o(r){$(s.$$.fragment,r),o=!1},d(r){r&&M(n),te(s,r)}}}function at(t){let e,n;return e=new rn({props:{message:t[5]}}),{c(){se(e.$$.fragment)},m(s,o){ee(e,s,o),n=!0},p(s,o){const r={};o[0]&32&&(r.message=s[5]),e.$set(r)},i(s){n||(D(e.$$.fragment,s),n=!0)},o(s){$(e.$$.fragment,s),n=!1},d(s){te(e,s)}}}function yn(t){let e,n,s,o,r,i,c,u,f=[],p=new Map,d,h=[],E=new Map,_,b,L,S,A,G,V;r=new _n({props:{size:t[6]}}),c=new Jt({props:{direction:t[8],data:t[7].snake,size:t[6]}});let U=t[7].foods;const F=m=>m[42].id;for(let m=0;m<U.length;m+=1){let w=it(t,U,m),R=F(w);p.set(R,f[m]=ct(R,w))}let C=t[7].bonus;const I=m=>m[39].id;for(let m=0;m<C.length;m+=1){let w=rt(t,C,m),R=I(w);E.set(R,h[m]=ft(R,w))}let N=t[4]==!0&&at(t);return{c(){e=k("div"),n=k("div"),n.textContent="Score",s=K(),o=k("main"),se(r.$$.fragment),i=K(),se(c.$$.fragment),u=K();for(let m=0;m<f.length;m+=1)f[m].c();d=K();for(let m=0;m<h.length;m+=1)h[m].c();_=K(),N&&N.c(),b=K(),L=k("div"),L.innerHTML="<span>Pause</span>",v(o,"width",t[2]+"px"),v(o,"height",t[2]+"px"),v(o,"background",de[t[3].level].bg),l(o,"class","svelte-1vcapp3"),l(e,"class","wrap svelte-1vcapp3"),Ue(()=>t[12].call(e))},m(m,w){x(m,e,w),a(e,n),a(e,s),a(e,o),ee(r,o,null),a(o,i),ee(c,o,null),a(o,u);for(let R=0;R<f.length;R+=1)f[R].m(o,null);a(o,d);for(let R=0;R<h.length;R+=1)h[R].m(o,null);a(o,_),N&&N.m(o,null),a(e,b),a(e,L),S=At(e,t[12].bind(e)),A=!0,G||(V=[fe(window,"keydown",t[10]),Et(xt.call(null,o,{timeframe:300,minSwipeDistance:60,touchAction:"none"})),fe(o,"swipe",t[9])],G=!0)},p(m,w){const R={};w[0]&64&&(R.size=m[6]),r.$set(R);const Z={};w[0]&256&&(Z.direction=m[8]),w[0]&128&&(Z.data=m[7].snake),w[0]&64&&(Z.size=m[6]),c.$set(Z),w[0]&192&&(U=m[7].foods,Ee(),f=et(f,w,F,1,m,U,p,o,Qe,ct,d,it),be()),w[0]&2240&&(C=m[7].bonus,Ee(),h=et(h,w,I,1,m,C,E,o,Qe,ft,_,rt),be()),m[4]==!0?N?(N.p(m,w),w[0]&16&&D(N,1)):(N=at(m),N.c(),D(N,1),N.m(o,null)):N&&(Ee(),$(N,1,1,()=>{N=null}),be()),(!A||w[0]&4)&&v(o,"width",m[2]+"px"),(!A||w[0]&4)&&v(o,"height",m[2]+"px"),(!A||w[0]&8)&&v(o,"background",de[m[3].level].bg)},i(m){if(!A){D(r.$$.fragment,m),D(c.$$.fragment,m);for(let w=0;w<U.length;w+=1)D(f[w]);for(let w=0;w<C.length;w+=1)D(h[w]);D(N),A=!0}},o(m){$(r.$$.fragment,m),$(c.$$.fragment,m);for(let w=0;w<f.length;w+=1)$(f[w]);for(let w=0;w<h.length;w+=1)$(h[w]);$(N),A=!1},d(m){m&&M(e),te(r),te(c);for(let w=0;w<f.length;w+=1)f[w].d();for(let w=0;w<h.length;w+=1)h[w].d();N&&N.d(),S(),G=!1,pe(V)}}}function vn(t,e,n){let s=!1,o=!1,r=Oe.NEXT_LEVEL,i=!1,c,u,f=0,p=0;gt(()=>{console.log(`--onMount = ${p} ${f}`)});let d,h;ce.subscribe(y=>{}),ie.subscribe(y=>{n(3,d=y)}),oe.subscribe(y=>{n(7,h=y)});const E=()=>{S(Oe.GAME_OVER),clearInterval(b),setTimeout(()=>{A(),m(),ce.gameOver()},W.MESSAGE_TIME)};let _=T.RIGHT,b;function L(y){y.detail.direction,y.detail.target}const S=y=>{n(5,r=y),n(4,o=!0)},A=()=>{n(4,o=!1),n(5,r=Oe.GAME_OVER)},G=()=>{S(Oe.NEXT_LEVEL),clearInterval(b),setTimeout(()=>{A(),ie.nextLevel(),ie.resetScore(),I(),m()},W.MESSAGE_TIME)},V=y=>{h.bonus.forEach(O=>{N(y,O)&&(oe.removeBonus(O.id),ie.getBonus())})},U=()=>{h.snake.length/W.MAX_POINTS>1&&h.snake.length%W.MAX_POINTS==0&&(d.level<de.length-1?G():(clearInterval(b),ce.allLevelsCleared()))},F=()=>{let{left:y,top:O}=h.snake[0];return _===T.UP?O-=1:_===T.DOWN?O+=1:_===T.LEFT?y-=1:_===T.RIGHT&&(y+=1),{id:z(),left:y,top:O}},C=y=>{h.foods.length>0&&N(y,h.foods[0])&&(oe.growSnake(),ie.eatFood(),oe.removeFood(h.foods[0].id),ae(),d.food%5==0&&me())},I=()=>{let y=de.length-d.level;y=y*W.DELAY,oe.reset(),ae(),b=setInterval(()=>{i=!0,R()&&(i=!1,E()),w();const O=F();V(O),oe.moveSnake(O),C(O),U(),i=!1},W.DELAY)},N=(y,O)=>!(y.top<O.top||y.top>O.top||y.left<O.left||y.left>O.left),m=()=>{n(8,_=T.RIGHT)},w=()=>{const{top:y,left:O}=h.snake[0],H=h.snake[0];O>=W.MAX_BLOCKS&&_==T.RIGHT&&(H.left=-2),O<0&&_==T.LEFT&&(H.left=W.MAX_BLOCKS+1),y<0&&_==T.UP&&(H.top=W.MAX_BLOCKS+1),y>=W.MAX_BLOCKS&&_==T.DOWN&&(H.top=-2)},R=()=>h.snake.slice(1).filter(H=>N(H,h.snake[0])).length>0,Z=()=>{clearInterval(b)},he=y=>y===we.UP&&_!=T.DOWN?T.UP:y===we.RIGHT&&_!=T.LEFT?T.RIGHT:y===we.LEFT&&_!=T.RIGHT?T.LEFT:y===we.DOWN&&_!=T.UP?T.DOWN:T.UNKNOWN,ge=y=>{switch(y){case T.DOWN:return T.UP;case T.UP:return T.DOWN;case T.LEFT:return T.RIGHT;case T.RIGHT:return T.LEFT;case T.UNKNOWN:return T.UNKNOWN}},_e=y=>{if(i)return;const O=y.code;if(O===we.SPACEBAR&&(s=!s,s?Z():I()),s)return;const H=he(O);H!=T.UNKNOWN&&H!=ge(H)&&n(8,_=H)},ke=y=>{oe.removeBonus(y.detail)},Ae=()=>{const y=h.snake.slice(0),H=[...de[d.level-1].wall,...y];return Qt(H)},ae=()=>{if(h.foods.length>0)return;const y=Ae();let O={top:y.top,left:y.left,id:y.id,type:mt.DEFAULT};oe.addFood(O)},me=()=>{const y=Ae();let O={top:y.top,left:y.left,id:y.id,type:yt.STAR};oe.addBonus(O)};I(),m();function le(){c=this.clientWidth,u=this.clientHeight,n(0,c),n(1,u)}return t.$$.update=()=>{t.$$.dirty[0]&7&&(n(2,f=Math.min(c,u)),n(2,f=f-50),n(2,f=Math.min(f,500)),isNaN(f)||n(6,p=Math.floor(f/W.MAX_BLOCKS))),t.$$.dirty[0]&8&&de[d.level-1].wall},[c,u,f,d,o,r,p,h,_,L,_e,ke,le]}class Ve extends j{constructor(e){super(),q(this,e,vn,yn,Y,{},null,[-1,-1])}}function wn(t){let e,n,s,o,r,i,c;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",s=K(),o=k("div"),r=k("button"),r.textContent="Start",l(n,"class","title svelte-yxm8be"),l(o,"class","btn svelte-yxm8be"),l(e,"class","start-screen svelte-yxm8be")},m(u,f){x(u,e,f),a(e,n),a(e,s),a(e,o),a(o,r),i||(c=fe(r,"click",t[0]),i=!0)},p:B,i:B,o:B,d(u){u&&M(e),i=!1,c()}}}function En(t){return[()=>{console.log("start game"),ce.startGame()}]}class bn extends j{constructor(e){super(),q(this,e,En,wn,Y,{})}}function Sn(t){let e,n,s,o,r,i,c,u;return{c(){e=k("div"),n=k("div"),n.textContent="Congratulations !",s=K(),o=k("div"),o.textContent="You have cleared all the levels.",r=K(),i=k("button"),i.textContent="Menu",l(n,"class","title svelte-gyhhqq"),l(e,"class","final svelte-gyhhqq")},m(f,p){x(f,e,p),a(e,n),a(e,s),a(e,o),a(e,r),a(e,i),c||(u=fe(i,"click",t[0]),c=!0)},p:B,i:B,o:B,d(f){f&&M(e),c=!1,u()}}}function kn(t){return[()=>{console.log("restart game"),ce.welcomeScreen()}]}class An extends j{constructor(e){super(),q(this,e,kn,Sn,Y,{})}}var X=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(X||{});const Fn=()=>{const t=[{status:X.NOT_STARTED,component:bn},{status:X.RUNNING,component:Ve},{status:X.PAUSED,component:Ve},{status:X.RESUME,component:Ve},{status:X.GAME_OVER,component:Dt},{status:X.ALL_LEVELS_CLEARED,component:An}];let{update:e,subscribe:n}=We(t.find(f=>f.status==X.RUNNING));return{subscribe:n,startGame:()=>{e(f=>(f=t.find(p=>p.status==X.RUNNING),f))},pauseGame:()=>{e(f=>(f=t.find(p=>p.status==X.PAUSED),f))},resumeGame:()=>{e(f=>(f=t.find(p=>p.status==X.RUNNING),f))},gameOver:()=>{e(f=>(f=t.find(p=>p.status==X.GAME_OVER),f))},welcomeScreen:()=>{e(f=>(f=t.find(p=>p.status==X.NOT_STARTED),f))},allLevelsCleared:()=>{e(f=>(f=t.find(p=>p.status==X.ALL_LEVELS_CLEARED),f))}}},ce=Fn();function Ln(t){let e,n,s;var o=t[0].component;function r(i){return{}}return o&&(n=new o(r())),{c(){e=k("div"),n&&se(n.$$.fragment),l(e,"class","container svelte-174qdzj")},m(i,c){x(i,e,c),n&&ee(n,e,null),s=!0},p(i,[c]){if(o!==(o=i[0].component)){if(n){Ee();const u=n;$(u.$$.fragment,1,0,()=>{te(u,1)}),be()}o?(n=new o(r()),se(n.$$.fragment),D(n.$$.fragment,1),ee(n,e,null)):n=null}},i(i){s||(n&&D(n.$$.fragment,i),s=!0)},o(i){n&&$(n.$$.fragment,i),s=!1},d(i){i&&M(e),n&&te(n)}}}function Nn(t,e,n){let s;return ce.subscribe(o=>{n(0,s=o)}),[s]}class On extends j{constructor(e){super(),q(this,e,Nn,Ln,Y,{})}}new On({target:document.getElementById("app")});
