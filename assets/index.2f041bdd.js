(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function M(){}function et(t){return t()}function We(){return Object.create(null)}function me(t){t.forEach(et)}function it(t){return typeof t=="function"}function Q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ct(t){return Object.keys(t).length===0}function f(t,e){t.appendChild(e)}function U(t,e,n){t.insertBefore(e,n||null)}function K(t){t.parentNode.removeChild(t)}function ft(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function Z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t){return document.createTextNode(t)}function x(){return q(" ")}function tt(){return q("")}function ve(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function u(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ut(t){return Array.from(t.childNodes)}function J(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function I(t,e,n,l){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function at(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,l,e),s}let Se;function Ee(t){Se=t}function nt(){if(!Se)throw new Error("Function called outside component initialization");return Se}function dt(t){nt().$$.on_mount.push(t)}function _t(){const t=nt();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const o=at(e,n,{cancelable:l});return s.slice().forEach(r=>{r.call(t,o)}),!o.defaultPrevented}return!0}}const ge=[],Ve=[],Ce=[],ze=[],ht=Promise.resolve();let xe=!1;function mt(){xe||(xe=!0,ht.then(st))}function Ke(t){Ce.push(t)}const He=new Set;let Oe=0;function st(){const t=Se;do{for(;Oe<ge.length;){const e=ge[Oe];Oe++,Ee(e),gt(e.$$)}for(Ee(null),ge.length=0,Oe=0;Ve.length;)Ve.pop()();for(let e=0;e<Ce.length;e+=1){const n=Ce[e];He.has(n)||(He.add(n),n())}Ce.length=0}while(ge.length);for(;ze.length;)ze.pop()();xe=!1,He.clear(),Ee(t)}function gt(t){if(t.fragment!==null){t.update(),me(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ke)}}const Te=new Set;let ue;function Be(){ue={r:0,c:[],p:ue}}function ke(){ue.r||me(ue.c),ue=ue.p}function H(t,e){t&&t.i&&(Te.delete(t),t.i(e))}function W(t,e,n,l){if(t&&t.o){if(Te.has(t))return;Te.add(t),ue.c.push(()=>{Te.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function pt(t,e){W(t,1,1,()=>{e.delete(t.key)})}function Et(t,e,n,l,s,o,r,i,a,c,d,_){let E=t.length,w=o.length,v=E;const C={};for(;v--;)C[t[v].key]=v;const N=[],T=new Map,A=new Map;for(v=w;v--;){const y=_(s,o,v),k=n(y);let O=r.get(k);O?l&&O.p(y,e):(O=c(k,y),O.c()),T.set(k,N[v]=O),k in C&&A.set(k,Math.abs(v-C[k]))}const R=new Set,D=new Set;function G(y){H(y,1),y.m(i,d),r.set(y.key,y),d=y.first,w--}for(;E&&w;){const y=N[w-1],k=t[E-1],O=y.key,V=k.key;y===k?(d=y.first,E--,w--):T.has(V)?!r.has(O)||R.has(O)?G(y):D.has(V)?E--:A.get(O)>A.get(V)?(D.add(O),G(y)):(R.add(V),E--):(a(k,r),E--)}for(;E--;){const y=t[E];T.has(y.key)||a(y,r)}for(;w;)G(N[w-1]);return N}function re(t){t&&t.c()}function ee(t,e,n,l){const{fragment:s,on_mount:o,on_destroy:r,after_update:i}=t.$$;s&&s.m(e,n),l||Ke(()=>{const a=o.map(et).filter(it);r?r.push(...a):me(a),t.$$.on_mount=[]}),i.forEach(Ke)}function te(t,e){const n=t.$$;n.fragment!==null&&(me(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function vt(t,e){t.$$.dirty[0]===-1&&(ge.push(t),mt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ne(t,e,n,l,s,o,r,i=[-1]){const a=Se;Ee(t);const c=t.$$={fragment:null,ctx:null,props:o,update:M,not_equal:s,bound:We(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:We(),dirty:i,skip_bound:!1,root:e.target||a.$$.root};r&&r(c.root);let d=!1;if(c.ctx=n?n(t,e.props||{},(_,E,...w)=>{const v=w.length?w[0]:E;return c.ctx&&s(c.ctx[_],c.ctx[_]=v)&&(!c.skip_bound&&c.bound[_]&&c.bound[_](v),d&&vt(t,_)),E}):[],c.update(),d=!0,me(c.before_update),c.fragment=l?l(c.ctx):!1,e.target){if(e.hydrate){const _=ut(e.target);c.fragment&&c.fragment.l(_),_.forEach(K)}else c.fragment&&c.fragment.c();e.intro&&H(t.$$.fragment),ee(t,e.target,e.anchor,e.customElement),st()}Ee(a)}class se{$destroy(){te(this,1),this.$destroy=M}$on(e,n){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!ct(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var B=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(B||{}),S=(t=>(t[t.SCREEN_WIDTH=600]="SCREEN_WIDTH",t[t.SCREEN_HEIGHT=400]="SCREEN_HEIGHT",t[t.BLOCK_SIZE=25]="BLOCK_SIZE",t))(S||{}),ce=(t=>(t[t.DELAY=50]="DELAY",t[t.MAX_POINTS=10]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t))(ce||{}),he=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(he||{}),pe=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(pe||{});const _e=[];function lt(t,e=M){let n;const l=new Set;function s(i){if(Q(t,i)&&(t=i,n)){const a=!_e.length;for(const c of l)c[1](),_e.push(c,t);if(a){for(let c=0;c<_e.length;c+=2)_e[c][0](_e[c+1]);_e.length=0}}}function o(i){s(i(t))}function r(i,a=M){const c=[i,a];return l.add(c),l.size===1&&(n=e(s)||M),i(t),()=>{l.delete(c),l.size===0&&(n(),n=null)}}return{set:s,update:o,subscribe:r}}const St=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=lt(t);return{subscribe:n,resetScore:()=>{e(i=>(i.food=0,i.bonus=0,i.score=0,i))},eatFood:()=>{e(i=>(i.food=i.food+1,i.score=i.food*5+i.bonus*20,i.score>i.highScore&&(i.highScore=i.score),i))},getBonus:()=>{e(i=>(i.bonus=i.bonus+1,i))},nextLevel:()=>{e(i=>(i.level=i.level+1,i))}}};let fe=St();function bt(t){let e,n,l,s,o,r,i,a,c,d,_,E,w,v,C,N;return{c(){e=m("div"),n=Z("svg"),l=Z("g"),s=Z("g"),o=Z("g"),r=Z("g"),i=Z("ellipse"),a=Z("g"),c=Z("path"),d=Z("path"),_=Z("g"),E=Z("path"),w=Z("g"),v=Z("path"),C=Z("g"),N=Z("ellipse"),u(l,"id","Layer_1"),u(i,"id","shadow"),u(i,"opacity","0.3"),u(i,"cx","438.7"),u(i,"cy","765.8"),u(i,"rx","283"),u(i,"ry","32.9"),u(c,"id","cup-shadow"),u(c,"fill","#E7F4FA"),u(c,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),u(d,"id","cup-light"),u(d,"fill","#FFFFFF"),u(d,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),u(E,"id","mainFood"),u(E,"fill","#DB343C"),u(E,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),u(v,"id","highlight"),u(v,"opacity","0.3"),u(v,"fill","#FFFFFF"),u(v,"stroke","#000000"),u(v,"stroke-width","0.25"),u(v,"stroke-miterlimit","10"),u(v,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),u(N,"id","c2"),u(N,"fill","#FFFFFF"),u(N,"cx","436.8"),u(N,"cy","144.3"),u(N,"rx","140.6"),u(N,"ry","138.4"),u(C,"id","c1"),u(s,"id","Layer_2"),u(n,"viewBox","0 0 855.6 798.6"),u(e,"class","food svelte-1w9msmi"),I(e,"left",t[1]+"px"),I(e,"top",t[0]+"px"),I(e,"width",S.BLOCK_SIZE-2+"px"),I(e,"height",S.BLOCK_SIZE-2+"px")},m(T,A){U(T,e,A),f(e,n),f(n,l),f(n,s),f(s,o),f(o,r),f(r,i),f(o,a),f(a,c),f(a,d),f(o,_),f(_,E),f(o,w),f(w,v),f(o,C),f(C,N)},p(T,[A]){A&2&&I(e,"left",T[1]+"px"),A&1&&I(e,"top",T[0]+"px")},i:M,o:M,d(T){T&&K(e)}}}function wt(t,e,n){let{top:l=0}=e,{left:s=0}=e;return t.$$set=o=>{"top"in o&&n(0,l=o.top),"left"in o&&n(1,s=o.left)},[l,s]}class ot extends se{constructor(e){super(),ne(this,e,wt,bt,Q,{top:0,left:1})}}function yt(t){let e;return{c(){e=m("div"),u(e,"class","bonus svelte-18cernx"),I(e,"width",S.BLOCK_SIZE+"px"),I(e,"height",S.BLOCK_SIZE+"px"),I(e,"left",t[0]+"px"),I(e,"top",t[1]+"px")},m(n,l){U(n,e,l)},p(n,[l]){l&1&&I(e,"left",n[0]+"px"),l&2&&I(e,"top",n[1]+"px")},i:M,o:M,d(n){n&&K(e)}}}function Lt(t,e,n){const l=_t();let{left:s}=e,{top:o}=e,{id:r}=e;return dt(()=>{setTimeout(()=>{l("bonusFinished",r)},ce.BONUS_TIME)}),t.$$set=i=>{"left"in i&&n(0,s=i.left),"top"in i&&n(1,o=i.top),"id"in i&&n(2,r=i.id)},[s,o,r]}class rt extends se{constructor(e){super(),ne(this,e,Lt,yt,Q,{left:0,top:1,id:2})}}function It(t){let e,n,l,s,o,r,i,a=t[0].playerName+"",c,d,_,E,w,v=t[0].score+"",C,N,T,A,R,D,G=t[0].food+"",y,k,O,V,L,h,p=t[0].bonus+"",P,le,g,b,F,j=t[0].highScore+"",X,Pe,be,we,ae,ye=t[0].level+"",Ge,Me,Le=t[0].stage+"",Re,Ue,de,Ie,De,Ne,Y,Fe,Ze;return R=new ot({props:{left:0,top:50}}),L=new rt({props:{left:0,top:80,id:""}}),{c(){e=m("div"),n=m("div"),n.textContent="Snake",l=x(),s=m("table"),o=m("tr"),r=m("td"),r.textContent="Player",i=m("td"),c=q(a),d=x(),_=m("tr"),E=m("td"),E.textContent="Score",w=m("td"),C=q(v),N=x(),T=m("tr"),A=m("td"),re(R.$$.fragment),D=m("td"),y=q(G),k=x(),O=m("tr"),V=m("td"),re(L.$$.fragment),h=m("td"),P=q(p),le=x(),g=m("tr"),b=m("td"),b.textContent="High Score",F=m("td"),X=q(j),Pe=x(),be=m("tr"),we=m("td"),we.textContent="Level-Stage",ae=m("td"),Ge=q(ye),Me=m("span"),Me.textContent="-",Re=q(Le),Ue=x(),de=m("div"),Ie=m("button"),Ie.textContent="Replay",De=x(),Ne=m("button"),Ne.textContent="Menu",u(n,"class","title svelte-mdywih"),u(r,"class","c1 svelte-mdywih"),u(i,"class","c2 svelte-mdywih"),u(E,"class","c1 svelte-mdywih"),u(w,"class","c2 svelte-mdywih"),u(A,"class","svelte-mdywih"),u(D,"class","c2 svelte-mdywih"),u(V,"class","svelte-mdywih"),u(h,"class","c2 svelte-mdywih"),u(b,"class","c1 svelte-mdywih"),u(F,"class","c2 svelte-mdywih"),u(we,"class","c1 svelte-mdywih"),u(ae,"class","c2 svelte-mdywih"),u(s,"class","svelte-mdywih"),u(de,"class","flex svelte-mdywih"),u(e,"class","game-over-screen svelte-mdywih")},m($,oe){U($,e,oe),f(e,n),f(e,l),f(e,s),f(s,o),f(o,r),f(o,i),f(i,c),f(s,d),f(s,_),f(_,E),f(_,w),f(w,C),f(s,N),f(s,T),f(T,A),ee(R,A,null),f(T,D),f(D,y),f(s,k),f(s,O),f(O,V),ee(L,V,null),f(O,h),f(h,P),f(s,le),f(s,g),f(g,b),f(g,F),f(F,X),f(s,Pe),f(s,be),f(be,we),f(be,ae),f(ae,Ge),f(ae,Me),f(ae,Re),f(e,Ue),f(e,de),f(de,Ie),f(de,De),f(de,Ne),Y=!0,Fe||(Ze=[ve(Ie,"click",t[2]),ve(Ne,"click",t[1])],Fe=!0)},p($,[oe]){(!Y||oe&1)&&a!==(a=$[0].playerName+"")&&J(c,a),(!Y||oe&1)&&v!==(v=$[0].score+"")&&J(C,v),(!Y||oe&1)&&G!==(G=$[0].food+"")&&J(y,G),(!Y||oe&1)&&p!==(p=$[0].bonus+"")&&J(P,p),(!Y||oe&1)&&j!==(j=$[0].highScore+"")&&J(X,j),(!Y||oe&1)&&ye!==(ye=$[0].level+"")&&J(Ge,ye),(!Y||oe&1)&&Le!==(Le=$[0].stage+"")&&J(Re,Le)},i($){Y||(H(R.$$.fragment,$),H(L.$$.fragment,$),Y=!0)},o($){W(R.$$.fragment,$),W(L.$$.fragment,$),Y=!1},d($){$&&K(e),te(R),te(L),Fe=!1,me(Ze)}}}function Nt(t,e,n){const l=()=>{console.log("restart game"),ie.welcomeScreen()},s=()=>{fe.resetScore(),ie.startGame()};let o;return fe.subscribe(r=>{n(0,o=r)}),[o,l,s]}class Ot extends se{constructor(e){super(),ne(this,e,Nt,It,Q,{})}}function qe(t){let e,n,l;return{c(){e=m("div"),n=x(),l=m("div"),u(e,"id","leftEye"),u(e,"class","eyes svelte-rzshp"),u(l,"id","rightEye"),u(l,"class","eyes svelte-rzshp")},m(s,o){U(s,e,o),U(s,n,o),U(s,l,o)},d(s){s&&K(e),s&&K(n),s&&K(l)}}}function Ct(t){let e,n,l=t[2]&&qe();return{c(){e=m("div"),l&&l.c(),I(e,"left",t[1]+"px"),I(e,"top",t[0]+"px"),I(e,"width",S.BLOCK_SIZE+"px"),I(e,"height",S.BLOCK_SIZE+"px"),u(e,"class",n="snake-body "+t[3]+" svelte-rzshp")},m(s,o){U(s,e,o),l&&l.m(e,null)},p(s,[o]){s[2]?l||(l=qe(),l.c(),l.m(e,null)):l&&(l.d(1),l=null),o&2&&I(e,"left",s[1]+"px"),o&1&&I(e,"top",s[0]+"px"),o&8&&n!==(n="snake-body "+s[3]+" svelte-rzshp")&&u(e,"class",n)},i:M,o:M,d(s){s&&K(e),l&&l.d()}}}function Tt(t,e,n){let{top:l=S.BLOCK_SIZE}=e,{left:s=S.BLOCK_SIZE}=e,{isHead:o=!1}=e,{direction:r="right"}=e;return t.$$set=i=>{"top"in i&&n(0,l=i.top),"left"in i&&n(1,s=i.left),"isHead"in i&&n(2,o=i.isHead),"direction"in i&&n(3,r=i.direction)},[l,s,o,r]}class Bt extends se{constructor(e){super(),ne(this,e,Tt,Ct,Q,{top:0,left:1,isHead:2,direction:3})}}function je(t,e,n){const l=t.slice();return l[2]=e[n],l[4]=n,l}function Xe(t){let e,n;return e=new Bt({props:{isHead:t[4]==0,top:t[2].top,left:t[2].left,direction:t[1]}}),{c(){re(e.$$.fragment)},m(l,s){ee(e,l,s),n=!0},p(l,s){const o={};s&1&&(o.top=l[2].top),s&1&&(o.left=l[2].left),s&2&&(o.direction=l[1]),e.$set(o)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){W(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function kt(t){let e,n,l=t[0],s=[];for(let r=0;r<l.length;r+=1)s[r]=Xe(je(t,l,r));const o=r=>W(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=tt()},m(r,i){for(let a=0;a<s.length;a+=1)s[a].m(r,i);U(r,e,i),n=!0},p(r,[i]){if(i&3){l=r[0];let a;for(a=0;a<l.length;a+=1){const c=je(r,l,a);s[a]?(s[a].p(c,i),H(s[a],1)):(s[a]=Xe(c),s[a].c(),H(s[a],1),s[a].m(e.parentNode,e))}for(Be(),a=l.length;a<s.length;a+=1)o(a);ke()}},i(r){if(!n){for(let i=0;i<l.length;i+=1)H(s[i]);n=!0}},o(r){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)W(s[i]);n=!1},d(r){ft(s,r),r&&K(e)}}}function At(t,e,n){let{snakeBodies:l=[]}=e,{direction:s="right"}=e;return t.$$set=o=>{"snakeBodies"in o&&n(0,l=o.snakeBodies),"direction"in o&&n(1,s=o.direction)},[l,s]}class Gt extends se{constructor(e){super(),ne(this,e,At,kt,Q,{snakeBodies:0,direction:1})}}const Ae=[{bg:"#affbaf"},{bg:"#fda2f2"},{bg:"#7f61bb"},{bg:"#c34366"}],Mt=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);function Rt(t){let e,n,l;return{c(){e=m("div"),n=m("h1"),l=q(t[0]),u(n,"class","svelte-1x8upsq"),u(e,"class","message-box svelte-1x8upsq")},m(s,o){U(s,e,o),f(e,n),f(n,l)},p(s,[o]){o&1&&J(l,s[0])},i:M,o:M,d(s){s&&K(e)}}}function Ft(t,e,n){let{message:l=""}=e;return t.$$set=s=>{"message"in s&&n(0,l=s.message)},[l]}class Ht extends se{constructor(e){super(),ne(this,e,Ft,Rt,Q,{message:0})}}function Ye(t,e,n){const l=t.slice();return l[29]=e[n],l}function Je(t,e){let n,l,s;return l=new rt({props:{id:e[29].id,left:e[29].left,top:e[29].top}}),l.$on("bonusFinished",e[9]),{key:t,first:null,c(){n=tt(),re(l.$$.fragment),this.first=n},m(o,r){U(o,n,r),ee(l,o,r),s=!0},p(o,r){e=o;const i={};r[0]&128&&(i.id=e[29].id),r[0]&128&&(i.left=e[29].left),r[0]&128&&(i.top=e[29].top),l.$set(i)},i(o){s||(H(l.$$.fragment,o),s=!0)},o(o){W(l.$$.fragment,o),s=!1},d(o){o&&K(n),te(l,o)}}}function Qe(t){let e,n;return e=new Ht({props:{message:t[1]}}),{c(){re(e.$$.fragment)},m(l,s){ee(e,l,s),n=!0},p(l,s){const o={};s[0]&2&&(o.message=l[1]),e.$set(o)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){W(e.$$.fragment,l),n=!1},d(l){te(e,l)}}}function $t(t){let e,n,l,s,o,r=[],i=new Map,a,c,d,_,E=t[2].level+"",w,v,C=t[2].score+"",N,T,A,R=t[2].bonus+"",D,G,y,k;n=new Gt({props:{direction:t[5],snakeBodies:t[6]}}),s=new ot({props:{left:t[3],top:t[4]}});let O=t[7];const V=h=>h[29].id;for(let h=0;h<O.length;h+=1){let p=Ye(t,O,h),P=V(p);i.set(P,r[h]=Je(P,p))}let L=t[0]==!0&&Qe(t);return{c(){e=m("main"),re(n.$$.fragment),l=x(),re(s.$$.fragment),o=x();for(let h=0;h<r.length;h+=1)r[h].c();a=x(),L&&L.c(),c=x(),d=m("div"),_=m("div"),w=q(E),v=q(" : "),N=q(C),T=x(),A=m("div"),D=q(R),I(e,"width",S.SCREEN_WIDTH+"px"),I(e,"height",S.SCREEN_HEIGHT+"px"),I(e,"background",Ae[t[2].level].bg),u(e,"class","svelte-sjb5bh"),u(d,"class","score svelte-sjb5bh")},m(h,p){U(h,e,p),ee(n,e,null),f(e,l),ee(s,e,null),f(e,o);for(let P=0;P<r.length;P+=1)r[P].m(e,null);f(e,a),L&&L.m(e,null),U(h,c,p),U(h,d,p),f(d,_),f(_,w),f(_,v),f(_,N),f(d,T),f(d,A),f(A,D),G=!0,y||(k=ve(window,"keydown",t[8]),y=!0)},p(h,p){const P={};p[0]&32&&(P.direction=h[5]),p[0]&64&&(P.snakeBodies=h[6]),n.$set(P);const le={};p[0]&8&&(le.left=h[3]),p[0]&16&&(le.top=h[4]),s.$set(le),p[0]&640&&(O=h[7],Be(),r=Et(r,p,V,1,h,O,i,e,pt,Je,a,Ye),ke()),h[0]==!0?L?(L.p(h,p),p[0]&1&&H(L,1)):(L=Qe(h),L.c(),H(L,1),L.m(e,null)):L&&(Be(),W(L,1,1,()=>{L=null}),ke()),(!G||p[0]&4)&&I(e,"background",Ae[h[2].level].bg),(!G||p[0]&4)&&E!==(E=h[2].level+"")&&J(w,E),(!G||p[0]&4)&&C!==(C=h[2].score+"")&&J(N,C),(!G||p[0]&4)&&R!==(R=h[2].bonus+"")&&J(D,R)},i(h){if(!G){H(n.$$.fragment,h),H(s.$$.fragment,h);for(let p=0;p<O.length;p+=1)H(r[p]);H(L),G=!0}},o(h){W(n.$$.fragment,h),W(s.$$.fragment,h);for(let p=0;p<r.length;p+=1)W(r[p]);W(L),G=!1},d(h){h&&K(e),te(n),te(s);for(let p=0;p<r.length;p+=1)r[p].d();L&&L.d(),h&&K(c),h&&K(d),y=!1,k()}}}function xt(t,e,n){let l=!1,s=!1,o=pe.NEXT_LEVEL,r;ie.subscribe(g=>{}),fe.subscribe(g=>{n(2,r=g)});const i=()=>{N(pe.GAME_OVER),clearInterval(w),setTimeout(()=>{T(),k(),ie.gameOver()},ce.MESSAGE_TIME)};let a=0,c=0,d=B.RIGHT,_=[],E=[],w;const v=S.SCREEN_WIDTH,C=S.SCREEN_HEIGHT,N=g=>{n(1,o=g),n(0,s=!0)},T=()=>{n(0,s=!1),n(1,o=pe.GAME_OVER)},A=()=>{N(pe.NEXT_LEVEL),clearInterval(w),setTimeout(()=>{T(),fe.nextLevel(),fe.resetScore(),R(),k()},ce.MESSAGE_TIME)},R=()=>{let g=Ae.length-r.level;g=g*ce.DELAY,w=setInterval(()=>{_.pop();let{left:b,top:F}=_[0];d===B.UP?F-=S.BLOCK_SIZE:d===B.DOWN?F+=S.BLOCK_SIZE:d===B.LEFT?b-=S.BLOCK_SIZE:d===B.RIGHT&&(b+=S.BLOCK_SIZE);const j={left:b,top:F};n(6,_=[j,..._]),E.forEach(X=>{D(j,X)&&(le(X.id),fe.getBonus())}),D(j,{left:a,top:c})&&(n(6,_=[..._,_[_.length-1]]),fe.eatFood(),y(),r.food%5==0&&P(),_.length/ce.MAX_POINTS>1&&_.length%ce.MAX_POINTS==0&&(r.level<Ae.length-1?A():(clearInterval(w),ie.allLevelsCleared()))),O()&&i()},g)},D=(g,b)=>!(g.top<b.top||g.top>b.top||g.left<b.left||g.left>b.left),G=()=>{let g=0,b=0;for(;;){g=Math.floor(Math.random()*(C/S.BLOCK_SIZE))*S.BLOCK_SIZE,b=Math.floor(Math.random()*(v/S.BLOCK_SIZE))*S.BLOCK_SIZE;let F=_.findIndex(X=>{X.top==g}),j=_.findIndex(X=>{X.left==b});if(F==-1&&j==-1)break}return{top:g,left:b}},y=()=>{const{top:g,left:b}=G();n(3,a=b),n(4,c=g)},k=()=>{y(),n(5,d=B.RIGHT),n(6,_=[{left:S.BLOCK_SIZE*2,top:0},{left:S.BLOCK_SIZE,top:0},{left:0,top:0}])},O=()=>{if(_.slice(1).filter(X=>D(X,_[0])).length>0)return!0;const{top:F,left:j}=_[0];return j>=v&&d==B.RIGHT&&n(6,_[0].left=0,_),j<0&&d==B.LEFT&&n(6,_[0].left=v-S.BLOCK_SIZE,_),F<0&&d==B.UP&&n(6,_[0].top=C-S.BLOCK_SIZE,_),F>=C&&d==B.DOWN&&n(6,_[0].top=0,_),!1},V=()=>{clearInterval(w)},L=g=>g===he.UP&&d!=B.DOWN?B.UP:g===he.RIGHT&&d!=B.LEFT?B.RIGHT:g===he.LEFT&&d!=B.RIGHT?B.LEFT:g===he.DOWN&&d!=B.UP?B.DOWN:B.UNKNOWN,h=g=>{const b=g.code;if(b===he.SPACEBAR&&(l=!l,l?V():R()),l)return;const F=L(b);F!=B.UNKNOWN&&n(5,d=F)},p=g=>{console.log(`on bonus finished =${g.detail}`),le(g.detail)},P=()=>{const g=Mt();let b={top:0,left:0,id:g};b.top=Math.floor(Math.random()*(C/S.BLOCK_SIZE))*S.BLOCK_SIZE,b.left=Math.floor(Math.random()*(v/S.BLOCK_SIZE))*S.BLOCK_SIZE,E.push(b),n(7,E)},le=g=>{const b=E.findIndex(F=>F.id==g);b!=-1&&(E.splice(b,1),n(7,E))};return R(),k(),[s,o,r,a,c,d,_,E,h,p]}class $e extends se{constructor(e){super(),ne(this,e,xt,$t,Q,{},null,[-1,-1])}}function Kt(t){let e,n,l,s,o,r,i;return{c(){e=m("div"),n=m("div"),n.textContent="Snake",l=x(),s=m("div"),o=m("button"),o.textContent="Start",u(n,"class","title svelte-yxm8be"),u(s,"class","btn svelte-yxm8be"),u(e,"class","start-screen svelte-yxm8be")},m(a,c){U(a,e,c),f(e,n),f(e,l),f(e,s),f(s,o),r||(i=ve(o,"click",t[0]),r=!0)},p:M,i:M,o:M,d(a){a&&K(e),r=!1,i()}}}function Pt(t){return[()=>{console.log("start game"),ie.startGame()}]}class Ut extends se{constructor(e){super(),ne(this,e,Pt,Kt,Q,{})}}function Dt(t){let e,n,l,s,o,r,i,a;return{c(){e=m("div"),n=m("div"),n.textContent="Congratulations !",l=x(),s=m("div"),s.textContent="You have cleared all the levels.",o=x(),r=m("button"),r.textContent="Menu",u(n,"class","title svelte-gyhhqq"),u(e,"class","final svelte-gyhhqq")},m(c,d){U(c,e,d),f(e,n),f(e,l),f(e,s),f(e,o),f(e,r),i||(a=ve(r,"click",t[0]),i=!0)},p:M,i:M,o:M,d(c){c&&K(e),i=!1,a()}}}function Zt(t){return[()=>{console.log("restart game"),ie.welcomeScreen()}]}class Wt extends se{constructor(e){super(),ne(this,e,Zt,Dt,Q,{})}}var z=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(z||{});const Vt=()=>{const t=[{status:z.NOT_STARTED,component:Ut},{status:z.RUNNING,component:$e},{status:z.PAUSED,component:$e},{status:z.RESUME,component:$e},{status:z.GAME_OVER,component:Ot},{status:z.ALL_LEVELS_CLEARED,component:Wt}];let{update:e,subscribe:n}=lt(t.find(c=>c.status==z.RUNNING));return{subscribe:n,startGame:()=>{e(c=>(c=t.find(d=>d.status==z.RUNNING),c))},pauseGame:()=>{e(c=>(c=t.find(d=>d.status==z.PAUSED),c))},resumeGame:()=>{e(c=>(c=t.find(d=>d.status==z.RUNNING),c))},gameOver:()=>{e(c=>(c=t.find(d=>d.status==z.GAME_OVER),c))},welcomeScreen:()=>{e(c=>(c=t.find(d=>d.status==z.NOT_STARTED),c))},allLevelsCleared:()=>{e(c=>(c=t.find(d=>d.status==z.ALL_LEVELS_CLEARED),c))}}},ie=Vt();function zt(t){let e,n,l;var s=t[0].component;function o(r){return{}}return s&&(n=new s(o())),{c(){e=m("div"),n&&re(n.$$.fragment),u(e,"class","container svelte-16au4d0"),I(e,"width",S.SCREEN_WIDTH+"px"),I(e,"height",S.SCREEN_HEIGHT+"px")},m(r,i){U(r,e,i),n&&ee(n,e,null),l=!0},p(r,[i]){if(s!==(s=r[0].component)){if(n){Be();const a=n;W(a.$$.fragment,1,0,()=>{te(a,1)}),ke()}s?(n=new s(o()),re(n.$$.fragment),H(n.$$.fragment,1),ee(n,e,null)):n=null}},i(r){l||(n&&H(n.$$.fragment,r),l=!0)},o(r){n&&W(n.$$.fragment,r),l=!1},d(r){r&&K(e),n&&te(n)}}}function qt(t,e,n){let l;return ie.subscribe(s=>{n(0,l=s)}),[l]}class jt extends se{constructor(e){super(),ne(this,e,qt,zt,Q,{})}}new jt({target:document.getElementById("app")});
