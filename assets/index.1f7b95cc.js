(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function y(){}function Pe(e){return e()}function xe(){return Object.create(null)}function X(e){e.forEach(Pe)}function Ve(e){return typeof e=="function"}function A(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function je(e){return Object.keys(e).length===0}function u(e,t){e.appendChild(t)}function G(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode.removeChild(e)}function qe(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function a(e){return document.createElement(e)}function B(e){return document.createTextNode(e)}function T(){return B(" ")}function Je(){return B("")}function ge(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Qe(e){return Array.from(e.childNodes)}function K(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function v(e,t,n,o){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}let Le;function te(e){Le=e}const ee=[],Ke=[],he=[],Ae=[],Xe=Promise.resolve();let Te=!1;function Ye(){Te||(Te=!0,Xe.then(Fe))}function Ge(e){he.push(e)}const Ce=new Set;let pe=0;function Fe(){const e=Le;do{for(;pe<ee.length;){const t=ee[pe];pe++,te(t),et(t.$$)}for(te(null),ee.length=0,pe=0;Ke.length;)Ke.pop()();for(let t=0;t<he.length;t+=1){const n=he[t];Ce.has(n)||(Ce.add(n),n())}he.length=0}while(ee.length);for(;Ae.length;)Ae.pop()();Te=!1,Ce.clear(),te(e)}function et(e){if(e.fragment!==null){e.update(),X(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ge)}}const me=new Set;let $;function We(){$={r:0,c:[],p:$}}function De(){$.r||X($.c),$=$.p}function x(e,t){e&&e.i&&(me.delete(e),e.i(t))}function Z(e,t,n,o){if(e&&e.o){if(me.has(e))return;me.add(e),$.c.push(()=>{me.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function ne(e){e&&e.c()}function q(e,t,n,o){const{fragment:s,on_mount:r,on_destroy:f,after_update:i}=e.$$;s&&s.m(t,n),o||Ge(()=>{const l=r.map(Pe).filter(Ve);f?f.push(...l):X(l),e.$$.on_mount=[]}),i.forEach(Ge)}function J(e,t){const n=e.$$;n.fragment!==null&&(X(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function tt(e,t){e.$$.dirty[0]===-1&&(ee.push(e),Ye(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function U(e,t,n,o,s,r,f,i=[-1]){const l=Le;te(e);const c=e.$$={fragment:null,ctx:null,props:r,update:y,not_equal:s,bound:xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:xe(),dirty:i,skip_bound:!1,root:t.target||l.$$.root};f&&f(c.root);let b=!1;if(c.ctx=n?n(e,t.props||{},(m,d,...g)=>{const N=g.length?g[0]:d;return c.ctx&&s(c.ctx[m],c.ctx[m]=N)&&(!c.skip_bound&&c.bound[m]&&c.bound[m](N),b&&tt(e,m)),d}):[],c.update(),b=!0,X(c.before_update),c.fragment=o?o(c.ctx):!1,t.target){if(t.hydrate){const m=Qe(t.target);c.fragment&&c.fragment.l(m),m.forEach(C)}else c.fragment&&c.fragment.c();t.intro&&x(e.$$.fragment),q(e,t.target,t.anchor,t.customElement),Fe()}te(l)}class M{$destroy(){J(this,1),this.$destroy=y}$on(t,n){const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(t){this.$$set&&!je(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var E=(e=>(e.UP="up",e.RIGHT="right",e.LEFT="left",e.DOWN="down",e.UNKNOWN="",e))(E||{}),p=(e=>(e[e.SCREEN_WIDTH=600]="SCREEN_WIDTH",e[e.SCREEN_HEIGHT=400]="SCREEN_HEIGHT",e[e.BLOCK_SIZE=25]="BLOCK_SIZE",e))(p||{});const j=[];function ze(e,t=y){let n;const o=new Set;function s(i){if(A(e,i)&&(e=i,n)){const l=!j.length;for(const c of o)c[1](),j.push(c,e);if(l){for(let c=0;c<j.length;c+=2)j[c][0](j[c+1]);j.length=0}}}function r(i){s(i(e))}function f(i,l=y){const c=[i,l];return o.add(c),o.size===1&&(n=t(s)||y),i(e),()=>{o.delete(c),o.size===0&&(n(),n=null)}}return{set:s,update:r,subscribe:f}}const nt=()=>{let e={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:t,subscribe:n}=ze(e);return{subscribe:n,resetScore:()=>{t(r=>(r.food=0,r.bonus=0,r.score=0,r))},eatFood:()=>{t(r=>(r.food=r.food+1,r.score=r.food*5+r.bonus*20,r.score>r.highScore&&(r.highScore=r.score),r))}}};let Ee=nt();function st(e){let t,n,o,s,r,f,i,l=e[0].playerName+"",c,b,m,d,g,N=e[0].score+"",w,Y,P,F,W,D=e[0].food+"",h,S,I,H,R,se=e[0].bonus+"",Se,we,oe,re,le,ce=e[0].highScore+"",ve,He,fe,ie,z,ue=e[0].level+"",ye,be,ae=e[0].stage+"",Ne,Re,V,de,Be,_e,Ie,ke;return{c(){t=a("div"),n=a("div"),n.textContent="Snake",o=T(),s=a("table"),r=a("tr"),f=a("td"),f.textContent="Player",i=a("td"),c=B(l),b=T(),m=a("tr"),d=a("td"),d.textContent="Score",g=a("td"),w=B(N),Y=T(),P=a("tr"),F=a("td"),F.textContent="Food",W=a("td"),h=B(D),S=T(),I=a("tr"),H=a("td"),H.textContent="Bonus",R=a("td"),Se=B(se),we=T(),oe=a("tr"),re=a("td"),re.textContent="High Score",le=a("td"),ve=B(ce),He=T(),fe=a("tr"),ie=a("td"),ie.textContent="Level-Stage",z=a("td"),ye=B(ue),be=a("span"),be.textContent="-",Ne=B(ae),Re=T(),V=a("div"),de=a("button"),de.textContent="Replay",Be=T(),_e=a("button"),_e.textContent="Menu",_(n,"class","title svelte-1phc8sd"),_(f,"class","c1 svelte-1phc8sd"),_(i,"class","c2 svelte-1phc8sd"),_(d,"class","c1 svelte-1phc8sd"),_(g,"class","c2 svelte-1phc8sd"),_(F,"class","c1 svelte-1phc8sd"),_(W,"class","c2 svelte-1phc8sd"),_(H,"class","c1 svelte-1phc8sd"),_(R,"class","c2 svelte-1phc8sd"),_(re,"class","c1 svelte-1phc8sd"),_(le,"class","c2 svelte-1phc8sd"),_(ie,"class","c1 svelte-1phc8sd"),_(z,"class","c2 svelte-1phc8sd"),_(s,"class","svelte-1phc8sd"),_(V,"class","flex svelte-1phc8sd"),_(t,"class","game-over-screen svelte-1phc8sd")},m(L,k){G(L,t,k),u(t,n),u(t,o),u(t,s),u(s,r),u(r,f),u(r,i),u(i,c),u(s,b),u(s,m),u(m,d),u(m,g),u(g,w),u(s,Y),u(s,P),u(P,F),u(P,W),u(W,h),u(s,S),u(s,I),u(I,H),u(I,R),u(R,Se),u(s,we),u(s,oe),u(oe,re),u(oe,le),u(le,ve),u(s,He),u(s,fe),u(fe,ie),u(fe,z),u(z,ye),u(z,be),u(z,Ne),u(t,Re),u(t,V),u(V,de),u(V,Be),u(V,_e),Ie||(ke=[ge(de,"click",e[2]),ge(_e,"click",e[1])],Ie=!0)},p(L,[k]){k&1&&l!==(l=L[0].playerName+"")&&K(c,l),k&1&&N!==(N=L[0].score+"")&&K(w,N),k&1&&D!==(D=L[0].food+"")&&K(h,D),k&1&&se!==(se=L[0].bonus+"")&&K(Se,se),k&1&&ce!==(ce=L[0].highScore+"")&&K(ve,ce),k&1&&ue!==(ue=L[0].level+"")&&K(ye,ue),k&1&&ae!==(ae=L[0].stage+"")&&K(Ne,ae)},i:y,o:y,d(L){L&&C(t),Ie=!1,X(ke)}}}function ot(e,t,n){const o=()=>{console.log("restart game"),Q.welcomeScreen()},s=()=>{Ee.resetScore(),Q.startGame()};let r;return Ee.subscribe(f=>{n(0,r=f)}),[r,o,s]}class rt extends M{constructor(t){super(),U(this,t,ot,st,A,{})}}function lt(e){let t;return{c(){t=a("div"),_(t,"class","food svelte-14olvay"),v(t,"left",e[1]+"px"),v(t,"top",e[0]+"px"),v(t,"width",p.BLOCK_SIZE-2+"px"),v(t,"height",p.BLOCK_SIZE-2+"px")},m(n,o){G(n,t,o)},p(n,[o]){o&2&&v(t,"left",n[1]+"px"),o&1&&v(t,"top",n[0]+"px")},i:y,o:y,d(n){n&&C(t)}}}function ct(e,t,n){let{foodTop:o=0}=t,{foodLeft:s=0}=t;return e.$$set=r=>{"foodTop"in r&&n(0,o=r.foodTop),"foodLeft"in r&&n(1,s=r.foodLeft)},[o,s]}class ft extends M{constructor(t){super(),U(this,t,ct,lt,A,{foodTop:0,foodLeft:1})}}function $e(e){let t,n,o;return{c(){t=a("div"),n=T(),o=a("div"),_(t,"id","leftEye"),_(t,"class","eyes svelte-rzshp"),_(o,"id","rightEye"),_(o,"class","eyes svelte-rzshp")},m(s,r){G(s,t,r),G(s,n,r),G(s,o,r)},d(s){s&&C(t),s&&C(n),s&&C(o)}}}function it(e){let t,n,o=e[2]&&$e();return{c(){t=a("div"),o&&o.c(),v(t,"left",e[1]+"px"),v(t,"top",e[0]+"px"),v(t,"width",p.BLOCK_SIZE+"px"),v(t,"height",p.BLOCK_SIZE+"px"),_(t,"class",n="snake-body "+e[3]+" svelte-rzshp")},m(s,r){G(s,t,r),o&&o.m(t,null)},p(s,[r]){s[2]?o||(o=$e(),o.c(),o.m(t,null)):o&&(o.d(1),o=null),r&2&&v(t,"left",s[1]+"px"),r&1&&v(t,"top",s[0]+"px"),r&8&&n!==(n="snake-body "+s[3]+" svelte-rzshp")&&_(t,"class",n)},i:y,o:y,d(s){s&&C(t),o&&o.d()}}}function ut(e,t,n){let{top:o=p.BLOCK_SIZE}=t,{left:s=p.BLOCK_SIZE}=t,{isHead:r=!1}=t,{direction:f="right"}=t;return e.$$set=i=>{"top"in i&&n(0,o=i.top),"left"in i&&n(1,s=i.left),"isHead"in i&&n(2,r=i.isHead),"direction"in i&&n(3,f=i.direction)},[o,s,r,f]}class at extends M{constructor(t){super(),U(this,t,ut,it,A,{top:0,left:1,isHead:2,direction:3})}}function Ze(e,t,n){const o=e.slice();return o[2]=t[n],o[4]=n,o}function Ue(e){let t,n;return t=new at({props:{isHead:e[4]==0,top:e[2].top,left:e[2].left,direction:e[1]}}),{c(){ne(t.$$.fragment)},m(o,s){q(t,o,s),n=!0},p(o,s){const r={};s&1&&(r.top=o[2].top),s&1&&(r.left=o[2].left),s&2&&(r.direction=o[1]),t.$set(r)},i(o){n||(x(t.$$.fragment,o),n=!0)},o(o){Z(t.$$.fragment,o),n=!1},d(o){J(t,o)}}}function dt(e){let t,n,o=e[0],s=[];for(let f=0;f<o.length;f+=1)s[f]=Ue(Ze(e,o,f));const r=f=>Z(s[f],1,1,()=>{s[f]=null});return{c(){for(let f=0;f<s.length;f+=1)s[f].c();t=Je()},m(f,i){for(let l=0;l<s.length;l+=1)s[l].m(f,i);G(f,t,i),n=!0},p(f,[i]){if(i&3){o=f[0];let l;for(l=0;l<o.length;l+=1){const c=Ze(f,o,l);s[l]?(s[l].p(c,i),x(s[l],1)):(s[l]=Ue(c),s[l].c(),x(s[l],1),s[l].m(t.parentNode,t))}for(We(),l=o.length;l<s.length;l+=1)r(l);De()}},i(f){if(!n){for(let i=0;i<o.length;i+=1)x(s[i]);n=!0}},o(f){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)Z(s[i]);n=!1},d(f){qe(s,f),f&&C(t)}}}function _t(e,t,n){let{snakeBodies:o=[]}=t,{direction:s="right"}=t;return e.$$set=r=>{"snakeBodies"in r&&n(0,o=r.snakeBodies),"direction"in r&&n(1,s=r.direction)},[o,s]}class pt extends M{constructor(t){super(),U(this,t,_t,dt,A,{snakeBodies:0,direction:1})}}function ht(e){let t,n,o,s,r,f,i=e[0].score+"",l,c,b,m;return n=new pt({props:{direction:e[3],snakeBodies:e[4]}}),s=new ft({props:{foodLeft:e[1],foodTop:e[2]}}),{c(){t=a("main"),ne(n.$$.fragment),o=T(),ne(s.$$.fragment),r=T(),f=a("div"),l=B(i),v(t,"width",p.SCREEN_WIDTH+"px"),v(t,"height",p.SCREEN_HEIGHT+"px"),_(t,"class","svelte-lscsys"),_(f,"class","score svelte-lscsys")},m(d,g){G(d,t,g),q(n,t,null),u(t,o),q(s,t,null),G(d,r,g),G(d,f,g),u(f,l),c=!0,b||(m=ge(window,"keydown",e[5]),b=!0)},p(d,[g]){const N={};g&8&&(N.direction=d[3]),g&16&&(N.snakeBodies=d[4]),n.$set(N);const w={};g&2&&(w.foodLeft=d[1]),g&4&&(w.foodTop=d[2]),s.$set(w),(!c||g&1)&&i!==(i=d[0].score+"")&&K(l,i)},i(d){c||(x(n.$$.fragment,d),x(s.$$.fragment,d),c=!0)},o(d){Z(n.$$.fragment,d),Z(s.$$.fragment,d),c=!1},d(d){d&&C(t),J(n),J(s),d&&C(r),d&&C(f),b=!1,m()}}}function Me(e,t){return!(e.top<t.top||e.top>t.top||e.left<t.left||e.left>t.left)}function mt(e,t,n){let o=!1;p.SCREEN_WIDTH/2,p.SCREEN_HEIGHT/2;let s;Q.subscribe(h=>{}),Ee.subscribe(h=>{n(0,s=h)});const r=()=>{console.log("game over"),Q.gameOver()};let f=0,i=0,l=E.RIGHT,c=[],b;const m=p.SCREEN_WIDTH,d=p.SCREEN_HEIGHT,g=()=>{b=setInterval(()=>{c.pop();let{left:h,top:S}=c[0];l===E.UP?S-=p.BLOCK_SIZE:l===E.DOWN?S+=p.BLOCK_SIZE:l===E.LEFT?h-=p.BLOCK_SIZE:l===E.RIGHT&&(h+=p.BLOCK_SIZE);const I={left:h,top:S};n(4,c=[I,...c]),Me(I,{left:f,top:i})&&(w(),Ee.eatFood(),n(4,c=[...c,c[c.length-1]])),P()&&(clearInterval(b),Y(),r())},200)},N=()=>{let h=0,S=0;for(;;){h=Math.floor(Math.random()*(d/p.BLOCK_SIZE))*p.BLOCK_SIZE,S=Math.floor(Math.random()*(m/p.BLOCK_SIZE))*p.BLOCK_SIZE;let I=c.findIndex(R=>{R.top==h}),H=c.findIndex(R=>{R.left==S});if(console.log(I,H),I==-1&&H==-1)break}return{top:h,left:S}};function w(){const{top:h,left:S}=N();n(1,f=S),n(2,i=h)}function Y(){w(),n(3,l=E.RIGHT),n(4,c=[{left:p.BLOCK_SIZE*2,top:0},{left:p.BLOCK_SIZE,top:0},{left:0,top:0}])}function P(){if(c.slice(1).filter(R=>Me(R,c[0])).length>0)return!0;const{top:I,left:H}=c[0];return H>=m&&l==E.RIGHT&&n(4,c[0].left=0,c),H<0&&l==E.LEFT&&n(4,c[0].left=m-p.BLOCK_SIZE,c),I<0&&l==E.UP&&n(4,c[0].top=d-p.BLOCK_SIZE,c),I>=d&&l==E.DOWN&&n(4,c[0].top=0,c),!1}function F(){console.log("pauseGame"),clearInterval(b)}function W(h){return h===38?E.UP:h===39?E.RIGHT:h===37?E.LEFT:h===40?E.DOWN:E.UNKNOWN}function D(h){if(h.keyCode===32&&(o=!o,o?F():g()),o)return;const S=W(h.keyCode);S!=E.UNKNOWN&&n(3,l=S)}return g(),Y(),[s,f,i,l,c,D]}class Oe extends M{constructor(t){super(),U(this,t,mt,ht,A,{})}}function gt(e){let t,n,o,s,r,f,i;return{c(){t=a("div"),n=a("div"),n.textContent="Snake",o=T(),s=a("div"),r=a("button"),r.textContent="Start",_(n,"class","title svelte-yxm8be"),_(s,"class","btn svelte-yxm8be"),_(t,"class","start-screen svelte-yxm8be")},m(l,c){G(l,t,c),u(t,n),u(t,o),u(t,s),u(s,r),f||(i=ge(r,"click",e[0]),f=!0)},p:y,i:y,o:y,d(l){l&&C(t),f=!1,i()}}}function Et(e){return[()=>{console.log("start game"),Q.startGame()}]}class St extends M{constructor(t){super(),U(this,t,Et,gt,A,{})}}var O=(e=>(e.NOT_STARTED="NOT_STARTED",e.RUNNING="RUNNING",e.PAUSED="PAUSED",e.RESUME="RESUME",e.GAME_OVER="GAME OVER",e))(O||{});const vt=()=>{const e=[{status:O.NOT_STARTED,component:St},{status:O.RUNNING,component:Oe},{status:O.PAUSED,component:Oe},{status:O.RESUME,component:Oe},{status:O.GAME_OVER,component:rt}];let{update:t,subscribe:n}=ze(e.find(l=>l.status==O.GAME_OVER));return{subscribe:n,startGame:()=>{t(l=>(l=e.find(c=>c.status==O.RUNNING),l))},pauseGame:()=>{t(l=>(l=e.find(c=>c.status==O.PAUSED),l))},resumeGame:()=>{t(l=>(l=e.find(c=>c.status==O.RUNNING),l))},gameOver:()=>{t(l=>(l=e.find(c=>c.status==O.GAME_OVER),l))},welcomeScreen:()=>{t(l=>(l=e.find(c=>c.status==O.NOT_STARTED),l))}}},Q=vt();function yt(e){let t,n,o;var s=e[0].component;function r(f){return{}}return s&&(n=new s(r())),{c(){t=a("div"),n&&ne(n.$$.fragment),_(t,"class","container svelte-16au4d0"),v(t,"width",p.SCREEN_WIDTH+"px"),v(t,"height",p.SCREEN_HEIGHT+"px")},m(f,i){G(f,t,i),n&&q(n,t,null),o=!0},p(f,[i]){if(s!==(s=f[0].component)){if(n){We();const l=n;Z(l.$$.fragment,1,0,()=>{J(l,1)}),De()}s?(n=new s(r()),ne(n.$$.fragment),x(n.$$.fragment,1),q(n,t,null)):n=null}},i(f){o||(n&&x(n.$$.fragment,f),o=!0)},o(f){n&&Z(n.$$.fragment,f),o=!1},d(f){f&&C(t),n&&J(n)}}}function bt(e,t,n){let o;return Q.subscribe(s=>{n(0,o=s)}),[o]}class Nt extends M{constructor(t){super(),U(this,t,bt,yt,A,{})}}new Nt({target:document.getElementById("app")});
