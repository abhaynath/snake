(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function M(){}function ut(t){return t()}function je(){return Object.create(null)}function ce(t){t.forEach(ut)}function dt(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function vt(t){return Object.keys(t).length===0}function be(t){return t==null?"":t}function wt(t){return t&&dt(t.destroy)?t.destroy:M}function a(t,e){t.appendChild(e)}function U(t,e,n){t.insertBefore(e,n||null)}function z(t){t.parentNode.removeChild(t)}function pt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function _(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Z(t){return document.createTextNode(t)}function $(){return Z(" ")}function Re(){return Z("")}function le(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function r(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function bt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function St(t){return Array.from(t.childNodes)}function oe(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}let Ie;function Et(){if(Ie===void 0){Ie=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ie=!0}}return Ie}function kt(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const s=k("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const o=Et();let l;return o?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=le(window,"message",i=>{i.source===s.contentWindow&&e()})):(s.src="about:blank",s.onload=()=>{l=le(s.contentWindow,"resize",e)}),a(t,s),()=>{(o||l&&s.contentWindow)&&l(),z(s)}}function At(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,s,e),o}let Ne;function Le(t){Ne=t}function ht(){if(!Ne)throw new Error("Function called outside component initialization");return Ne}function _t(t){ht().$$.on_mount.push(t)}function Ft(){const t=ht();return(e,n,{cancelable:s=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=At(e,n,{cancelable:s});return o.slice().forEach(i=>{i.call(t,l)}),!l.defaultPrevented}return!0}}const Ae=[],Ze=[],Ce=[],Je=[],Lt=Promise.resolve();let Ve=!1;function Nt(){Ve||(Ve=!0,Lt.then(gt))}function De(t){Ce.push(t)}const He=new Set;let Te=0;function gt(){const t=Ne;do{for(;Te<Ae.length;){const e=Ae[Te];Te++,Le(e),Ot(e.$$)}for(Le(null),Ae.length=0,Te=0;Ze.length;)Ze.pop()();for(let e=0;e<Ce.length;e+=1){const n=Ce[e];He.has(n)||(He.add(n),n())}Ce.length=0}while(Ae.length);for(;Je.length;)Je.pop()();Ve=!1,He.clear(),Le(t)}function Ot(t){if(t.fragment!==null){t.update(),ce(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(De)}}const ze=new Set;let ie;function me(){ie={r:0,c:[],p:ie}}function ye(){ie.r||ce(ie.c),ie=ie.p}function C(t,e){t&&t.i&&(ze.delete(t),t.i(e))}function x(t,e,n,s){if(t&&t.o){if(ze.has(t))return;ze.add(t),ie.c.push(()=>{ze.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function Qe(t,e){x(t,1,1,()=>{e.delete(t.key)})}function et(t,e,n,s,o,l,i,c,u,f,p,d){let h=t.length,b=l.length,g=h;const S={};for(;g--;)S[t[g].key]=g;const N=[],E=new Map,A=new Map;for(g=b;g--;){const F=d(o,l,g),G=n(F);let T=i.get(G);T?s&&T.p(F,e):(T=f(G,F),T.c()),E.set(G,N[g]=T),G in S&&A.set(G,Math.abs(g-S[G]))}const I=new Set,P=new Set;function R(F){C(F,1),F.m(c,p),i.set(F.key,F),p=F.first,b--}for(;h&&b;){const F=N[b-1],G=t[h-1],T=F.key,O=G.key;F===G?(p=F.first,h--,b--):E.has(O)?!i.has(T)||I.has(T)?R(F):P.has(O)?h--:A.get(T)>A.get(O)?(P.add(T),R(F)):(I.add(O),h--):(u(G,i),h--)}for(;h--;){const F=t[h];E.has(F.key)||u(F,i)}for(;b;)R(N[b-1]);return N}function ne(t){t&&t.c()}function J(t,e,n,s){const{fragment:o,on_mount:l,on_destroy:i,after_update:c}=t.$$;o&&o.m(e,n),s||De(()=>{const u=l.map(ut).filter(dt);i?i.push(...u):ce(u),t.$$.on_mount=[]}),c.forEach(De)}function Q(t,e){const n=t.$$;n.fragment!==null&&(ce(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Bt(t,e){t.$$.dirty[0]===-1&&(Ae.push(t),Nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(t,e,n,s,o,l,i,c=[-1]){const u=Ne;Le(t);const f=t.$$={fragment:null,ctx:null,props:l,update:M,not_equal:o,bound:je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:je(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};i&&i(f.root);let p=!1;if(f.ctx=n?n(t,e.props||{},(d,h,...b)=>{const g=b.length?b[0]:h;return f.ctx&&o(f.ctx[d],f.ctx[d]=g)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](g),p&&Bt(t,d)),h}):[],f.update(),p=!0,ce(f.before_update),f.fragment=s?s(f.ctx):!1,e.target){if(e.hydrate){const d=St(e.target);f.fragment&&f.fragment.l(d),d.forEach(z)}else f.fragment&&f.fragment.c();e.intro&&C(t.$$.fragment),J(t,e.target,e.anchor,e.customElement),gt()}Le(u)}class q{$destroy(){Q(this,1),this.$destroy=M}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(e){this.$$set&&!vt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var B=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(B||{}),H=(t=>(t[t.DELAY=100]="DELAY",t[t.MAX_POINTS=50]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t[t.MAX_BLOCKS=20]="MAX_BLOCKS",t))(H||{}),ge=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(ge||{}),Fe=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(Fe||{});const _e=[];function Ke(t,e=M){let n;const s=new Set;function o(c){if(K(t,c)&&(t=c,n)){const u=!_e.length;for(const f of s)f[1](),_e.push(f,t);if(u){for(let f=0;f<_e.length;f+=2)_e[f][0](_e[f+1]);_e.length=0}}}function l(c){o(c(t))}function i(c,u=M){const f=[c,u];return s.add(f),s.size===1&&(n=e(o)||M),c(t),()=>{s.delete(f),s.size===0&&(n(),n=null)}}return{set:o,update:l,subscribe:i}}const Gt=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=Ke(t);return{subscribe:n,resetScore:()=>{e(c=>(c.food=0,c.bonus=0,c.score=0,c))},eatFood:()=>{e(c=>(c.food=c.food+1,c.score=c.food*5+c.bonus*20,c.score>c.highScore&&(c.highScore=c.score),c))},getBonus:()=>{e(c=>(c.bonus=c.bonus+1,c))},nextLevel:()=>{e(c=>(c.level=c.level+1,c))}}};let se=Gt();function It(t){let e,n,s,o,l,i,c,u=t[0].playerName+"",f,p,d,h,b,g=t[0].score+"",S,N,E,A,I,P=t[0].food+"",R,F,G,T,O,m=t[0].bonus+"",v,D,Y,fe,ae,ue=t[0].highScore+"",Se,Ee,de,pe,w,L=t[0].level+"",V,Ue,Oe=t[0].stage+"",xe,We,he,Be,qe,Ge,Pe,Ye;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",s=$(),o=k("table"),l=k("tr"),i=k("td"),i.textContent="Player",c=k("td"),f=Z(u),p=$(),d=k("tr"),h=k("td"),h.textContent="Score",b=k("td"),S=Z(g),N=$(),E=k("tr"),A=k("td"),A.textContent="Food",I=k("td"),R=Z(P),F=$(),G=k("tr"),T=k("td"),T.textContent="Bonus",O=k("td"),v=Z(m),D=$(),Y=k("tr"),fe=k("td"),fe.textContent="High Score",ae=k("td"),Se=Z(ue),Ee=$(),de=k("tr"),pe=k("td"),pe.textContent="Level-Stage",w=k("td"),V=Z(L),Ue=k("span"),Ue.textContent="-",xe=Z(Oe),We=$(),he=k("div"),Be=k("button"),Be.textContent="Replay",qe=$(),Ge=k("button"),Ge.textContent="Menu",r(n,"class","title svelte-mdywih"),r(i,"class","c1 svelte-mdywih"),r(c,"class","c2 svelte-mdywih"),r(h,"class","c1 svelte-mdywih"),r(b,"class","c2 svelte-mdywih"),r(A,"class","c1 svelte-mdywih"),r(I,"class","c2 svelte-mdywih"),r(T,"class","c1 svelte-mdywih"),r(O,"class","c2 svelte-mdywih"),r(fe,"class","c1 svelte-mdywih"),r(ae,"class","c2 svelte-mdywih"),r(pe,"class","c1 svelte-mdywih"),r(w,"class","c2 svelte-mdywih"),r(o,"class","svelte-mdywih"),r(he,"class","flex svelte-mdywih"),r(e,"class","game-over-screen svelte-mdywih")},m(j,ee){U(j,e,ee),a(e,n),a(e,s),a(e,o),a(o,l),a(l,i),a(l,c),a(c,f),a(o,p),a(o,d),a(d,h),a(d,b),a(b,S),a(o,N),a(o,E),a(E,A),a(E,I),a(I,R),a(o,F),a(o,G),a(G,T),a(G,O),a(O,v),a(o,D),a(o,Y),a(Y,fe),a(Y,ae),a(ae,Se),a(o,Ee),a(o,de),a(de,pe),a(de,w),a(w,V),a(w,Ue),a(w,xe),a(e,We),a(e,he),a(he,Be),a(he,qe),a(he,Ge),Pe||(Ye=[le(Be,"click",t[2]),le(Ge,"click",t[1])],Pe=!0)},p(j,[ee]){ee&1&&u!==(u=j[0].playerName+"")&&oe(f,u),ee&1&&g!==(g=j[0].score+"")&&oe(S,g),ee&1&&P!==(P=j[0].food+"")&&oe(R,P),ee&1&&m!==(m=j[0].bonus+"")&&oe(v,m),ee&1&&ue!==(ue=j[0].highScore+"")&&oe(Se,ue),ee&1&&L!==(L=j[0].level+"")&&oe(V,L),ee&1&&Oe!==(Oe=j[0].stage+"")&&oe(xe,Oe)},i:M,o:M,d(j){j&&z(e),Pe=!1,ce(Ye)}}}function Tt(t,e,n){const s=()=>{console.log("restart game"),re.welcomeScreen()},o=()=>{se.resetScore(),re.startGame()};let l;return se.subscribe(i=>{n(0,l=i)}),[l,s,o]}class Mt extends q{constructor(e){super(),W(this,e,Tt,It,K,{})}}const Ct=300,zt=60,mt="none";function ke(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function Dt(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function Me(t,e,n,s,o){t.dispatchEvent(new CustomEvent(`${e}${o}`,{detail:{event:n,pointersCount:s.length}}))}function Rt(t,e,n,s,o,l=mt){e.style.touchAction=l;let i=[];function c(f){i.push(f),Me(e,t,f,i,"down"),s==null||s(i,f);const p=f.pointerId;function d(E){p===E.pointerId&&(i=Dt(E,i),i.length||h(),Me(e,t,E,i,"up"),o==null||o(i,E))}function h(){b(),g(),S(),N()}const b=ke(e,"pointermove",E=>{i=i.map(A=>E.pointerId===A.pointerId?E:A),Me(e,t,E,i,"move"),n==null||n(i,E)}),g=ke(e,"lostpointercapture",E=>{d(E)}),S=ke(e,"pointerup",E=>{d(E)}),N=ke(e,"pointerleave",E=>{i=[],h(),Me(e,t,E,i,"up"),o==null||o(i,E)})}const u=ke(e,"pointerdown",c);return{destroy:()=>{u()}}}function Ut(t,e={timeframe:Ct,minSwipeDistance:zt,touchAction:mt}){const n="swipe";let s,o,l,i;function c(f,p){o=p.clientX,l=p.clientY,s=Date.now(),f.length===1&&(i=p.target)}function u(f,p){if(p.type==="pointerup"&&f.length===0&&Date.now()-s<e.timeframe){const d=p.clientX-o,h=p.clientY-l,b=Math.abs(d),g=Math.abs(h);let S=null;b>=2*g&&b>e.minSwipeDistance?S=d>0?"right":"left":g>=2*b&&g>e.minSwipeDistance&&(S=h>0?"bottom":"top"),S&&t.dispatchEvent(new CustomEvent(n,{detail:{direction:S,target:i}}))}}return Rt(n,t,null,c,u,e.touchAction)}function xt(t){let e,n,s,o,l,i,c,u,f,p,d,h,b,g,S,N;return{c(){e=k("div"),n=_("svg"),s=_("g"),o=_("g"),l=_("g"),i=_("g"),c=_("ellipse"),u=_("g"),f=_("path"),p=_("path"),d=_("g"),h=_("path"),b=_("g"),g=_("path"),S=_("g"),N=_("ellipse"),r(s,"id","Layer_1"),r(c,"id","shadow"),r(c,"opacity","0.3"),r(c,"cx","438.7"),r(c,"cy","765.8"),r(c,"rx","283"),r(c,"ry","32.9"),r(f,"id","cup-shadow"),r(f,"fill","#E7F4FA"),r(f,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),r(p,"id","cup-light"),r(p,"fill","#FFFFFF"),r(p,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),r(h,"id","mainFood"),r(h,"fill","#DB343C"),r(h,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),r(g,"id","highlight"),r(g,"opacity","0.3"),r(g,"fill","#FFFFFF"),r(g,"stroke","#000000"),r(g,"stroke-width","0.25"),r(g,"stroke-miterlimit","10"),r(g,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),r(N,"id","c2"),r(N,"fill","#FFFFFF"),r(N,"cx","436.8"),r(N,"cy","144.3"),r(N,"rx","140.6"),r(N,"ry","138.4"),r(S,"id","c1"),r(o,"id","Layer_2"),r(n,"viewBox","0 0 855.6 798.6"),r(e,"class","food bounce-top svelte-h8lqdv"),y(e,"left",t[1].left*t[0]+"px"),y(e,"top",t[1].top*t[0]+"px"),y(e,"width",t[0]-2+"px"),y(e,"height",t[0]-2+"px")},m(E,A){U(E,e,A),a(e,n),a(n,s),a(n,o),a(o,l),a(l,i),a(i,c),a(l,u),a(u,f),a(u,p),a(l,d),a(d,h),a(l,b),a(b,g),a(l,S),a(S,N)},p(E,[A]){A&3&&y(e,"left",E[1].left*E[0]+"px"),A&3&&y(e,"top",E[1].top*E[0]+"px"),A&1&&y(e,"width",E[0]-2+"px"),A&1&&y(e,"height",E[0]-2+"px")},i:M,o:M,d(E){E&&z(e)}}}function Pt(t,e,n){let{size:s=0}=e,{data:o}=e;return t.$$set=l=>{"size"in l&&n(0,s=l.size),"data"in l&&n(1,o=l.data)},[s,o]}class Ht extends q{constructor(e){super(),W(this,e,Pt,xt,K,{size:0,data:1})}}function $t(t){let e,n,s;return{c(){e=_("svg"),n=_("rect"),r(n,"y","0"),r(n,"fill","#0037FF"),r(n,"width","50"),r(n,"height","50"),r(e,"viewBox","0 0 50 50"),r(e,"class",s=be(t[4])+" svelte-zvgok1")},m(o,l){U(o,e,l),a(e,n)},p(o,l){l&16&&s!==(s=be(o[4])+" svelte-zvgok1")&&r(e,"class",s)},d(o){o&&z(e)}}}function Vt(t){let e,n,s;return{c(){e=_("svg"),n=_("rect"),r(n,"y","0"),r(n,"fill","#0037FF"),r(n,"width","50"),r(n,"height","50"),r(e,"viewBox","0 0 50 50"),r(e,"class",s=be(t[4])+" svelte-zvgok1")},m(o,l){U(o,e,l),a(e,n)},p(o,l){l&16&&s!==(s=be(o[4])+" svelte-zvgok1")&&r(e,"class",s)},d(o){o&&z(e)}}}function Xt(t){let e,n,s,o,l,i,c;return{c(){e=_("svg"),n=_("g"),s=_("rect"),o=_("path"),l=_("circle"),i=_("circle"),r(s,"opacity","0"),r(s,"fill","#FFFFFF"),r(s,"width","258"),r(s,"height","258"),r(o,"fill","#0037FF"),r(o,"d",`M147.5,29.2C111.6,29.2,80.1,48,62.6,77H0v104h62.6c17.5,28,49,47.3,84.9,47.3c55,0,99.6-44.6,99.6-99.6\r
          S202.5,29.2,147.5,29.2z`),r(l,"fill","#FFF800"),r(l,"stroke","#000000"),r(l,"stroke-miterlimit","10"),r(l,"cx","184.3"),r(l,"cy","84.5"),r(l,"r","21.8"),r(i,"fill","#FFF800"),r(i,"stroke","#000000"),r(i,"stroke-miterlimit","10"),r(i,"cx","184.3"),r(i,"cy","164.5"),r(i,"r","21.8"),r(e,"viewBox","0 0 258 258"),r(e,"class",c=be(t[4])+" svelte-zvgok1")},m(u,f){U(u,e,f),a(e,n),a(n,s),a(n,o),a(n,l),a(n,i)},p(u,f){f&16&&c!==(c=be(u[4])+" svelte-zvgok1")&&r(e,"class",c)},d(u){u&&z(e)}}}function Kt(t){let e;function n(l,i){return l[2]?Xt:l[3]?Vt:$t}let s=n(t),o=s(t);return{c(){e=k("div"),o.c(),y(e,"left",t[1].left*t[0]+"px"),y(e,"top",t[1].top*t[0]+"px"),y(e,"width",t[0]+"px"),y(e,"height",t[0]+"px"),r(e,"class","snake-body svelte-zvgok1")},m(l,i){U(l,e,i),o.m(e,null)},p(l,[i]){s===(s=n(l))&&o?o.p(l,i):(o.d(1),o=s(l),o&&(o.c(),o.m(e,null))),i&3&&y(e,"left",l[1].left*l[0]+"px"),i&3&&y(e,"top",l[1].top*l[0]+"px"),i&1&&y(e,"width",l[0]+"px"),i&1&&y(e,"height",l[0]+"px")},i:M,o:M,d(l){l&&z(e),o.d()}}}function Wt(t,e,n){let{size:s=0}=e,{current:o=null}=e,{prev:l=null}=e,{isHead:i=!1}=e,{isTail:c=!1}=e,{direction:u="right"}=e;return t.$$set=f=>{"size"in f&&n(0,s=f.size),"current"in f&&n(1,o=f.current),"prev"in f&&n(5,l=f.prev),"isHead"in f&&n(2,i=f.isHead),"isTail"in f&&n(3,c=f.isTail),"direction"in f&&n(4,u=f.direction)},[s,o,i,c,u,l]}class qt extends q{constructor(e){super(),W(this,e,Wt,Kt,K,{size:0,current:1,prev:5,isHead:2,isTail:3,direction:4})}}function tt(t,e,n){const s=t.slice();return s[3]=e[n],s[5]=n,s}function nt(t){let e,n;return e=new qt({props:{isHead:t[5]==0,isTail:t[5]==t[0].length-1,current:t[3],prev:t[5]>0?t[0][t[5]-1]:null,direction:t[1],size:t[2]}}),{c(){ne(e.$$.fragment)},m(s,o){J(e,s,o),n=!0},p(s,o){const l={};o&1&&(l.isTail=s[5]==s[0].length-1),o&1&&(l.current=s[3]),o&1&&(l.prev=s[5]>0?s[0][s[5]-1]:null),o&2&&(l.direction=s[1]),o&4&&(l.size=s[2]),e.$set(l)},i(s){n||(C(e.$$.fragment,s),n=!0)},o(s){x(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function Yt(t){let e,n,s=t[0],o=[];for(let i=0;i<s.length;i+=1)o[i]=nt(tt(t,s,i));const l=i=>x(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Re()},m(i,c){for(let u=0;u<o.length;u+=1)o[u].m(i,c);U(i,e,c),n=!0},p(i,[c]){if(c&7){s=i[0];let u;for(u=0;u<s.length;u+=1){const f=tt(i,s,u);o[u]?(o[u].p(f,c),C(o[u],1)):(o[u]=nt(f),o[u].c(),C(o[u],1),o[u].m(e.parentNode,e))}for(me(),u=s.length;u<o.length;u+=1)l(u);ye()}},i(i){if(!n){for(let c=0;c<s.length;c+=1)C(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)x(o[c]);n=!1},d(i){pt(o,i),i&&z(e)}}}function jt(t,e,n){let{data:s=[]}=e,{direction:o="right"}=e,{size:l=0}=e;return t.$$set=i=>{"data"in i&&n(0,s=i.data),"direction"in i&&n(1,o=i.direction),"size"in i&&n(2,l=i.size)},[s,o,l]}class Zt extends q{constructor(e){super(),W(this,e,jt,Yt,K,{data:0,direction:1,size:2})}}var Xe=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(Xe||{});const ve=[{bg:"#affbaf",wall:[{type:0,top:2,left:1},{type:0,top:2,left:2},{type:1,top:2,left:3},{type:1,top:2,left:4},{type:0,top:2,left:5},{type:0,top:2,left:6},{type:2,top:1,left:3},{type:2,top:3,left:4}]},{bg:"#fda2f2",wall:[{type:0,top:2,left:2},{type:1,top:2,left:3},{type:1,top:2,left:4},{type:0,top:2,left:5},{type:2,top:1,left:3},{type:2,top:3,left:4}]},{bg:"#7f61bb",wall:[]},{bg:"#c34366",wall:[]}];function Jt(t){let e,n,s,o,l;return{c(){e=k("div"),n=_("svg"),s=_("style"),o=Z(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),l=_("polygon"),r(s,"id","style2"),r(l,"fill","#FFA300"),r(l,"stroke","#EB0000"),r(l,"stroke-width","0.25"),r(l,"stroke-miterlimit","10"),r(l,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),r(l,"class","red"),r(n,"viewBox","0 0 443.3 421.6"),r(e,"class","bonus bounce-top svelte-y90akj"),y(e,"width",t[1]+"px"),y(e,"height",t[1]+"px"),y(e,"left",t[0].left*t[1]+"px"),y(e,"top",t[0].top*t[1]+"px")},m(i,c){U(i,e,c),a(e,n),a(n,s),a(s,o),a(n,l)},p(i,[c]){c&2&&y(e,"width",i[1]+"px"),c&2&&y(e,"height",i[1]+"px"),c&3&&y(e,"left",i[0].left*i[1]+"px"),c&3&&y(e,"top",i[0].top*i[1]+"px")},i:M,o:M,d(i){i&&z(e)}}}function Qt(t,e,n){const s=Ft();let{data:o}=e,{size:l=0}=e;return _t(()=>{setTimeout(()=>{s("bonusFinished",o.id)},H.BONUS_TIME)}),t.$$set=i=>{"data"in i&&n(0,o=i.data),"size"in i&&n(1,l=i.size)},[o,l]}class en extends q{constructor(e){super(),W(this,e,Qt,Jt,K,{data:0,size:1})}}const we=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);function tn(t){let e,n,s;return{c(){e=k("div"),n=k("h1"),s=Z(t[0]),r(n,"class","svelte-1x8upsq"),r(e,"class","message-box svelte-1x8upsq")},m(o,l){U(o,e,l),a(e,n),a(n,s)},p(o,[l]){l&1&&oe(s,o[0])},i:M,o:M,d(o){o&&z(e)}}}function nn(t,e,n){let{message:s=""}=e;return t.$$set=o=>{"message"in o&&n(0,s=o.message)},[s]}class on extends q{constructor(e){super(),W(this,e,nn,tn,K,{message:0})}}function sn(t){let e,n,s,o,l,i,c,u,f;return{c(){e=_("svg"),n=_("radialGradient"),s=_("stop"),o=_("stop"),l=_("rect"),i=_("linearGradient"),c=_("stop"),u=_("stop"),f=_("rect"),r(s,"offset","0"),y(s,"stop-color","#333333"),r(o,"offset","1"),y(o,"stop-color","#000000"),r(n,"id","rock_svgid"),r(n,"cx","219.5"),r(n,"cy","219.5"),r(n,"r","219"),r(n,"gradientUnits","userSpaceOnUse"),r(l,"x","0.5"),r(l,"y","0.5"),r(l,"fill","url(#rock_svgid)"),r(l,"stroke","#000000"),r(l,"stroke-miterlimit","10"),r(l,"width","438"),r(l,"height","438"),r(c,"offset","0"),y(c,"stop-color","#000000"),y(c,"stop-opacity","0"),r(u,"offset","1"),y(u,"stop-color","#FFFFFF"),y(u,"stop-opacity","0.5"),r(i,"id","rock_svgid2"),r(i,"gradientUnits","userSpaceOnUse"),r(i,"x1","219"),r(i,"y1","431"),r(i,"x2","219"),r(i,"y2","9.0005"),r(f,"x","8"),r(f,"y","9"),r(f,"fill","url(#rock_svgid2)"),r(f,"width","422"),r(f,"height","422"),r(e,"viewBox","0 0 439 439")},m(p,d){U(p,e,d),a(e,n),a(n,s),a(n,o),a(e,l),a(e,i),a(i,c),a(i,u),a(e,f)},d(p){p&&z(e)}}}function rn(t){let e,n,s,o,l,i,c,u,f,p,d,h,b,g,S,N,E,A,I,P,R,F;return{c(){e=_("svg"),n=_("g"),s=_("linearGradient"),o=_("stop"),l=_("stop"),i=_("rect"),c=_("linearGradient"),u=_("stop"),f=_("stop"),p=_("rect"),d=_("linearGradient"),h=_("stop"),b=_("stop"),g=_("polygon"),S=_("linearGradient"),N=_("stop"),E=_("stop"),A=_("rect"),I=_("linearGradient"),P=_("stop"),R=_("stop"),F=_("rect"),r(o,"offset","0"),y(o,"stop-color","#998675"),r(l,"offset","1"),y(l,"stop-color","#C7B299"),r(s,"id","concrete_SVGID_1_"),r(s,"gradientUnits","userSpaceOnUse"),r(s,"x1","4"),r(s,"y1","96.5"),r(s,"x2","281"),r(s,"y2","96.5"),r(i,"x","4"),r(i,"y","4"),r(i,"fill","url(#concrete_SVGID_1_)"),r(i,"stroke","#CABD99"),r(i,"stroke-width","8"),r(i,"stroke-miterlimit","10"),r(i,"width","277"),r(i,"height","185"),r(u,"offset","0"),y(u,"stop-color","#998675"),r(f,"offset","1"),y(f,"stop-color","#C7B299"),r(c,"id","concrete_SVGID_2_"),r(c,"gradientUnits","userSpaceOnUse"),r(c,"x1","420"),r(c,"y1","189"),r(c,"x2","420"),r(c,"y2","4"),r(p,"x","281"),r(p,"y","4"),r(p,"fill","url(#concrete_SVGID_2_)"),r(p,"stroke","#CABD99"),r(p,"stroke-width","8"),r(p,"stroke-miterlimit","10"),r(p,"width","278"),r(p,"height","185"),r(h,"offset","0"),y(h,"stop-color","#998675"),r(b,"offset","1"),y(b,"stop-color","#C7B299"),r(d,"id","concrete_SVGID_3_"),r(d,"gradientUnits","userSpaceOnUse"),r(d,"x1","281.5"),r(d,"y1","374"),r(d,"x2","281.5"),r(d,"y2","189.0005"),r(g,"fill","url(#concrete_SVGID_3_)"),r(g,"stroke","#CABD99"),r(g,"stroke-width","8"),r(g,"stroke-miterlimit","10"),r(g,"points",`281,189 4,189 4,374 281,374 \r
    559,374 559,189 	`),r(N,"offset","0"),y(N,"stop-color","#998675"),r(E,"offset","1"),y(E,"stop-color","#C7B299"),r(S,"id","concrete_SVGID_4_"),r(S,"gradientUnits","userSpaceOnUse"),r(S,"x1","4"),r(S,"y1","466.5"),r(S,"x2","281"),r(S,"y2","466.5"),r(A,"x","4"),r(A,"y","374"),r(A,"fill","url(#concrete_SVGID_4_)"),r(A,"stroke","#CABD99"),r(A,"stroke-width","8"),r(A,"stroke-miterlimit","10"),r(A,"width","277"),r(A,"height","185"),r(P,"offset","0"),y(P,"stop-color","#998675"),r(R,"offset","1"),y(R,"stop-color","#C7B299"),r(I,"id","concrete_SVGID_5_"),r(I,"gradientUnits","userSpaceOnUse"),r(I,"x1","281"),r(I,"y1","466.5"),r(I,"x2","559"),r(I,"y2","466.5"),r(F,"x","281"),r(F,"y","374"),r(F,"fill","url(#concrete_SVGID_5_)"),r(F,"stroke","#CABD99"),r(F,"stroke-width","8"),r(F,"stroke-miterlimit","10"),r(F,"width","278"),r(F,"height","185"),r(e,"viewBox","0 0 563 563")},m(G,T){U(G,e,T),a(e,n),a(n,s),a(s,o),a(s,l),a(n,i),a(n,c),a(c,u),a(c,f),a(n,p),a(n,d),a(d,h),a(d,b),a(n,g),a(n,S),a(S,N),a(S,E),a(n,A),a(n,I),a(I,P),a(I,R),a(n,F)},d(G){G&&z(e)}}}function ln(t){let e,n,s,o,l,i,c,u,f,p,d,h,b,g,S;return{c(){e=_("svg"),n=_("symbol"),s=_("polygon"),o=_("polygon"),l=_("polygon"),i=_("polygon"),c=_("polygon"),u=_("polygon"),f=_("polygon"),p=_("polygon"),d=_("polygon"),h=_("polygon"),b=_("polygon"),g=_("polygon"),S=_("use"),r(s,"points","27,-29 -27,-29 -27,29 27,29 	"),r(o,"fill","#BF6411"),r(o,"points","-15,29 -27,29 -27,16 -15,16 -2,16 -2,29 	"),r(l,"fill","#BF6411"),r(l,"points","12,29 0,29 0,16 12,16 25,16 25,29 	"),r(i,"fill","#BF6411"),r(i,"points","-27,14 -15,14 -15,2 -27,2 	"),r(c,"fill","#BF6411"),r(c,"points","0,14 -13,14 -13,2 0,2 12,2 12,14 	"),r(u,"fill","#BF6411"),r(u,"points","14,14 27,14 27,2 14,2 	"),r(f,"fill","#BF6411"),r(f,"points","-15,0 -27,0 -27,-13 -15,-13 -2,-13 -2,0 	"),r(p,"fill","#BF6411"),r(p,"points","12,0 0,0 0,-13 12,-13 25,-13 25,0 	"),r(d,"fill","#BF6411"),r(d,"points","-27,-15 -15,-15 -15,-27 -27,-27 	"),r(h,"fill","#BF6411"),r(h,"points","0,-15 -13,-15 -13,-27 0,-27 12,-27 12,-15 	"),r(b,"fill","#BF6411"),r(b,"points","14,-15 27,-15 27,-27 14,-27 	"),r(g,"display","none"),r(g,"fill","none"),r(g,"points","-27,29 27,29 27,-29 -27,-29 	"),r(n,"id","brick1"),r(n,"viewBox","-27 -29 54 58"),bt(S,"xlink:href","#brick1"),r(S,"width","54"),r(S,"height","58"),r(S,"x","-27"),r(S,"y","-29"),r(S,"transform","matrix(1 0 0 -1 27 29)"),r(S,"overflow","visible"),r(e,"viewBox","0 0 54 58")},m(N,E){U(N,e,E),a(e,n),a(n,s),a(n,o),a(n,l),a(n,i),a(n,c),a(n,u),a(n,f),a(n,p),a(n,d),a(n,h),a(n,b),a(n,g),a(e,S)},d(N){N&&z(e)}}}function cn(t){let e;function n(l,i){return l[1].type==Xe.DEFAULT?ln:l[1].type==Xe.CONCRETE?rn:sn}let s=n(t),o=s(t);return{c(){e=k("div"),o.c(),r(e,"class","brick svelte-1ezhfpr"),y(e,"top",t[1].top*t[0]+"px"),y(e,"left",t[1].left*t[0]+"px"),y(e,"width",t[0]+"px"),y(e,"height",t[0]+"px")},m(l,i){U(l,e,i),o.m(e,null)},p(l,[i]){s!==(s=n(l))&&(o.d(1),o=s(l),o&&(o.c(),o.m(e,null))),i&3&&y(e,"top",l[1].top*l[0]+"px"),i&3&&y(e,"left",l[1].left*l[0]+"px"),i&1&&y(e,"width",l[0]+"px"),i&1&&y(e,"height",l[0]+"px")},i:M,o:M,d(l){l&&z(e),o.d()}}}function fn(t,e,n){let{size:s=0}=e,{data:o}=e;return t.$$set=l=>{"size"in l&&n(0,s=l.size),"data"in l&&n(1,o=l.data)},[s,o]}class an extends q{constructor(e){super(),W(this,e,fn,cn,K,{size:0,data:1})}}function ot(t,e,n){const s=t.slice();return s[3]=e[n],s}function st(t){let e,n;return e=new an({props:{data:t[3],size:t[0]}}),{c(){ne(e.$$.fragment)},m(s,o){J(e,s,o),n=!0},p(s,o){const l={};o&2&&(l.data=s[3]),o&1&&(l.size=s[0]),e.$set(l)},i(s){n||(C(e.$$.fragment,s),n=!0)},o(s){x(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function un(t){let e,n,s=t[1],o=[];for(let i=0;i<s.length;i+=1)o[i]=st(ot(t,s,i));const l=i=>x(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Re()},m(i,c){for(let u=0;u<o.length;u+=1)o[u].m(i,c);U(i,e,c),n=!0},p(i,[c]){if(c&3){s=i[1];let u;for(u=0;u<s.length;u+=1){const f=ot(i,s,u);o[u]?(o[u].p(f,c),C(o[u],1)):(o[u]=st(f),o[u].c(),C(o[u],1),o[u].m(e.parentNode,e))}for(me(),u=s.length;u<o.length;u+=1)l(u);ye()}},i(i){if(!n){for(let c=0;c<s.length;c+=1)C(o[c]);n=!0}},o(i){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)x(o[c]);n=!1},d(i){pt(o,i),i&&z(e)}}}function dn(t,e,n){let s,{size:o=0}=e,l;return se.subscribe(i=>{n(2,l=i)}),t.$$set=i=>{"size"in i&&n(0,o=i.size)},t.$$.update=()=>{t.$$.dirty&4&&n(1,s=ve[l.level-1].wall)},[o,s,l]}class pn extends q{constructor(e){super(),W(this,e,dn,un,K,{size:0})}}var yt=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(yt||{});const rt=()=>[{id:we(),left:2,top:0},{id:we(),left:1,top:0},{id:we(),left:0,top:0}],hn=()=>{let t={bonus:[],foods:[],snake:rt()},{update:e,subscribe:n}=Ke(t);return{subscribe:n,addBonus:p=>{e(d=>(d.bonus.findIndex(b=>b.id==p.id)==-1&&(d.bonus.push(p),d.bonus=d.bonus,d=d),d))},removeBonus:p=>{e(d=>{let h=d.bonus.slice(0),b=h.findIndex(g=>g.id==p);return b!=-1&&(h.splice(b,1),d.bonus=h,d=d),d})},addFood:p=>{e(d=>(d.foods.findIndex(b=>b.id==p.id)==-1&&(d.foods.push(p),d.foods=d.foods,d=d),d))},removeFood:p=>{e(d=>{let h=d.foods.slice(0),b=h.findIndex(g=>g.id==p);return b!=-1&&(h.splice(b,1),d.foods=h,d=d),d})},moveSnake:p=>{e(d=>{let h=d.snake;return h.pop(),h=[p,...h],d.snake=h,d})},growSnake:()=>{e(p=>{let d=p.snake;return d=[...d,d[d.length-1]],p.snake=d,p})},reset:()=>{e(p=>(p={bonus:[],foods:[],snake:rt()},p))}}},te=hn();function lt(t,e,n){const s=t.slice();return s[38]=e[n],s}function it(t,e,n){const s=t.slice();return s[41]=e[n],s}function ct(t,e){let n,s,o;return s=new Ht({props:{data:e[41],size:e[6]}}),{key:t,first:null,c(){n=Re(),ne(s.$$.fragment),this.first=n},m(l,i){U(l,n,i),J(s,l,i),o=!0},p(l,i){e=l;const c={};i[0]&128&&(c.data=e[41]),i[0]&64&&(c.size=e[6]),s.$set(c)},i(l){o||(C(s.$$.fragment,l),o=!0)},o(l){x(s.$$.fragment,l),o=!1},d(l){l&&z(n),Q(s,l)}}}function ft(t,e){let n,s,o;return s=new en({props:{data:e[38],size:e[6]}}),s.$on("bonusFinished",e[11]),{key:t,first:null,c(){n=Re(),ne(s.$$.fragment),this.first=n},m(l,i){U(l,n,i),J(s,l,i),o=!0},p(l,i){e=l;const c={};i[0]&128&&(c.data=e[38]),i[0]&64&&(c.size=e[6]),s.$set(c)},i(l){o||(C(s.$$.fragment,l),o=!0)},o(l){x(s.$$.fragment,l),o=!1},d(l){l&&z(n),Q(s,l)}}}function at(t){let e,n;return e=new on({props:{message:t[5]}}),{c(){ne(e.$$.fragment)},m(s,o){J(e,s,o),n=!0},p(s,o){const l={};o[0]&32&&(l.message=s[5]),e.$set(l)},i(s){n||(C(e.$$.fragment,s),n=!0)},o(s){x(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function _n(t){let e,n,s,o,l,i,c,u,f=[],p=new Map,d,h=[],b=new Map,g,S,N,E,A,I,P;l=new pn({props:{size:t[6]}}),c=new Zt({props:{direction:t[8],data:t[7].snake,size:t[6]}});let R=t[7].foods;const F=m=>m[41].id;for(let m=0;m<R.length;m+=1){let v=it(t,R,m),D=F(v);p.set(D,f[m]=ct(D,v))}let G=t[7].bonus;const T=m=>m[38].id;for(let m=0;m<G.length;m+=1){let v=lt(t,G,m),D=T(v);b.set(D,h[m]=ft(D,v))}let O=t[4]==!0&&at(t);return{c(){e=k("div"),n=k("div"),n.textContent="Score",s=$(),o=k("main"),ne(l.$$.fragment),i=$(),ne(c.$$.fragment),u=$();for(let m=0;m<f.length;m+=1)f[m].c();d=$();for(let m=0;m<h.length;m+=1)h[m].c();g=$(),O&&O.c(),S=$(),N=k("div"),N.innerHTML="<span>Pause</span>",y(o,"width",t[2]+"px"),y(o,"height",t[2]+"px"),y(o,"background",ve[t[3].level].bg),r(o,"class","svelte-1vcapp3"),r(e,"class","wrap svelte-1vcapp3"),De(()=>t[12].call(e))},m(m,v){U(m,e,v),a(e,n),a(e,s),a(e,o),J(l,o,null),a(o,i),J(c,o,null),a(o,u);for(let D=0;D<f.length;D+=1)f[D].m(o,null);a(o,d);for(let D=0;D<h.length;D+=1)h[D].m(o,null);a(o,g),O&&O.m(o,null),a(e,S),a(e,N),E=kt(e,t[12].bind(e)),A=!0,I||(P=[le(window,"keydown",t[10]),wt(Ut.call(null,o,{timeframe:300,minSwipeDistance:60,touchAction:"none"})),le(o,"swipe",t[9])],I=!0)},p(m,v){const D={};v[0]&64&&(D.size=m[6]),l.$set(D);const Y={};v[0]&256&&(Y.direction=m[8]),v[0]&128&&(Y.data=m[7].snake),v[0]&64&&(Y.size=m[6]),c.$set(Y),v[0]&192&&(R=m[7].foods,me(),f=et(f,v,F,1,m,R,p,o,Qe,ct,d,it),ye()),v[0]&2240&&(G=m[7].bonus,me(),h=et(h,v,T,1,m,G,b,o,Qe,ft,g,lt),ye()),m[4]==!0?O?(O.p(m,v),v[0]&16&&C(O,1)):(O=at(m),O.c(),C(O,1),O.m(o,null)):O&&(me(),x(O,1,1,()=>{O=null}),ye()),(!A||v[0]&4)&&y(o,"width",m[2]+"px"),(!A||v[0]&4)&&y(o,"height",m[2]+"px"),(!A||v[0]&8)&&y(o,"background",ve[m[3].level].bg)},i(m){if(!A){C(l.$$.fragment,m),C(c.$$.fragment,m);for(let v=0;v<R.length;v+=1)C(f[v]);for(let v=0;v<G.length;v+=1)C(h[v]);C(O),A=!0}},o(m){x(l.$$.fragment,m),x(c.$$.fragment,m);for(let v=0;v<f.length;v+=1)x(f[v]);for(let v=0;v<h.length;v+=1)x(h[v]);x(O),A=!1},d(m){m&&z(e),Q(l),Q(c);for(let v=0;v<f.length;v+=1)f[v].d();for(let v=0;v<h.length;v+=1)h[v].d();O&&O.d(),E(),I=!1,ce(P)}}}function gn(t,e,n){let s=!1,o=!1,l=Fe.NEXT_LEVEL,i=!1,c,u,f=0,p=0;_t(()=>{console.log(`--onMount = ${p} ${f}`)});let d,h;re.subscribe(w=>{}),se.subscribe(w=>{n(3,d=w)}),te.subscribe(w=>{n(7,h=w)});const b=()=>{E(Fe.GAME_OVER),clearInterval(S),setTimeout(()=>{A(),m(),re.gameOver()},H.MESSAGE_TIME)};let g=B.RIGHT,S;function N(w){w.detail.direction,w.detail.target}const E=w=>{n(5,l=w),n(4,o=!0)},A=()=>{n(4,o=!1),n(5,l=Fe.GAME_OVER)},I=()=>{E(Fe.NEXT_LEVEL),clearInterval(S),setTimeout(()=>{A(),se.nextLevel(),se.resetScore(),T(),m()},H.MESSAGE_TIME)},P=w=>{h.bonus.forEach(L=>{O(w,L)&&(te.removeBonus(L.id),se.getBonus())})},R=()=>{h.snake.length/H.MAX_POINTS>1&&h.snake.length%H.MAX_POINTS==0&&(d.level<ve.length-1?I():(clearInterval(S),re.allLevelsCleared()))},F=()=>{let{left:w,top:L}=h.snake[0];return g===B.UP?L-=1:g===B.DOWN?L+=1:g===B.LEFT?w-=1:g===B.RIGHT&&(w+=1),{id:we(),left:w,top:L}},G=w=>{h.foods.length>0&&O(w,h.foods[0])&&(te.growSnake(),se.eatFood(),te.removeFood(h.foods[0].id),Ee(),d.food%5==0&&de())},T=()=>{let w=ve.length-d.level;w=w*H.DELAY,te.reset(),Ee(),S=setInterval(()=>{i=!0,D()&&(i=!1,b()),v();const L=F();P(L),te.moveSnake(L),G(L),R(),i=!1},H.DELAY)},O=(w,L)=>!(w.top<L.top||w.top>L.top||w.left<L.left||w.left>L.left),m=()=>{n(8,g=B.RIGHT)},v=()=>{const{top:w,left:L}=h.snake[0],V=h.snake[0];L>=H.MAX_BLOCKS&&g==B.RIGHT&&(V.left=-2),L<0&&g==B.LEFT&&(V.left=H.MAX_BLOCKS+1),w<0&&g==B.UP&&(V.top=H.MAX_BLOCKS+1),w>=H.MAX_BLOCKS&&g==B.DOWN&&(V.top=-2)},D=()=>h.snake.slice(1).filter(V=>O(V,h.snake[0])).length>0,Y=()=>{clearInterval(S)},fe=w=>w===ge.UP&&g!=B.DOWN?B.UP:w===ge.RIGHT&&g!=B.LEFT?B.RIGHT:w===ge.LEFT&&g!=B.RIGHT?B.LEFT:w===ge.DOWN&&g!=B.UP?B.DOWN:B.UNKNOWN,ae=w=>{switch(w){case B.DOWN:return B.UP;case B.UP:return B.DOWN;case B.LEFT:return B.RIGHT;case B.RIGHT:return B.LEFT;case B.UNKNOWN:return B.UNKNOWN}},ue=w=>{if(i)return;const L=w.code;if(L===ge.SPACEBAR&&(s=!s,s?Y():T()),s)return;const V=fe(L);V!=B.UNKNOWN&&V!=ae(V)&&n(8,g=V)},Se=w=>{te.removeBonus(w.detail)},Ee=()=>{const w=we();let L={top:0,left:0,id:w,type:yt.DEFAULT};L.top=Math.floor(Math.random()*H.MAX_BLOCKS),L.left=Math.floor(Math.random()*H.MAX_BLOCKS),te.addFood(L)},de=()=>{const w=we();let L={top:0,left:0,id:w};L.top=Math.floor(Math.random()*H.MAX_BLOCKS),L.left=Math.floor(Math.random()*H.MAX_BLOCKS),te.addBonus(L)};T(),m();function pe(){c=this.clientWidth,u=this.clientHeight,n(0,c),n(1,u)}return t.$$.update=()=>{t.$$.dirty[0]&7&&(n(2,f=Math.min(c,u)),n(2,f=f-50),n(2,f=Math.min(f,500)),isNaN(f)||n(6,p=Math.floor(f/H.MAX_BLOCKS))),t.$$.dirty[0]&8&&ve[d.level-1].wall},[c,u,f,d,o,l,p,h,g,N,ue,Se,pe]}class $e extends q{constructor(e){super(),W(this,e,gn,_n,K,{},null,[-1,-1])}}function mn(t){let e,n,s,o,l,i,c;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",s=$(),o=k("div"),l=k("button"),l.textContent="Start",r(n,"class","title svelte-yxm8be"),r(o,"class","btn svelte-yxm8be"),r(e,"class","start-screen svelte-yxm8be")},m(u,f){U(u,e,f),a(e,n),a(e,s),a(e,o),a(o,l),i||(c=le(l,"click",t[0]),i=!0)},p:M,i:M,o:M,d(u){u&&z(e),i=!1,c()}}}function yn(t){return[()=>{console.log("start game"),re.startGame()}]}class vn extends q{constructor(e){super(),W(this,e,yn,mn,K,{})}}function wn(t){let e,n,s,o,l,i,c,u;return{c(){e=k("div"),n=k("div"),n.textContent="Congratulations !",s=$(),o=k("div"),o.textContent="You have cleared all the levels.",l=$(),i=k("button"),i.textContent="Menu",r(n,"class","title svelte-gyhhqq"),r(e,"class","final svelte-gyhhqq")},m(f,p){U(f,e,p),a(e,n),a(e,s),a(e,o),a(e,l),a(e,i),c||(u=le(i,"click",t[0]),c=!0)},p:M,i:M,o:M,d(f){f&&z(e),c=!1,u()}}}function bn(t){return[()=>{console.log("restart game"),re.welcomeScreen()}]}class Sn extends q{constructor(e){super(),W(this,e,bn,wn,K,{})}}var X=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(X||{});const En=()=>{const t=[{status:X.NOT_STARTED,component:vn},{status:X.RUNNING,component:$e},{status:X.PAUSED,component:$e},{status:X.RESUME,component:$e},{status:X.GAME_OVER,component:Mt},{status:X.ALL_LEVELS_CLEARED,component:Sn}];let{update:e,subscribe:n}=Ke(t.find(f=>f.status==X.RUNNING));return{subscribe:n,startGame:()=>{e(f=>(f=t.find(p=>p.status==X.RUNNING),f))},pauseGame:()=>{e(f=>(f=t.find(p=>p.status==X.PAUSED),f))},resumeGame:()=>{e(f=>(f=t.find(p=>p.status==X.RUNNING),f))},gameOver:()=>{e(f=>(f=t.find(p=>p.status==X.GAME_OVER),f))},welcomeScreen:()=>{e(f=>(f=t.find(p=>p.status==X.NOT_STARTED),f))},allLevelsCleared:()=>{e(f=>(f=t.find(p=>p.status==X.ALL_LEVELS_CLEARED),f))}}},re=En();function kn(t){let e,n,s;var o=t[0].component;function l(i){return{}}return o&&(n=new o(l())),{c(){e=k("div"),n&&ne(n.$$.fragment),r(e,"class","container svelte-174qdzj")},m(i,c){U(i,e,c),n&&J(n,e,null),s=!0},p(i,[c]){if(o!==(o=i[0].component)){if(n){me();const u=n;x(u.$$.fragment,1,0,()=>{Q(u,1)}),ye()}o?(n=new o(l()),ne(n.$$.fragment),C(n.$$.fragment,1),J(n,e,null)):n=null}},i(i){s||(n&&C(n.$$.fragment,i),s=!0)},o(i){n&&x(n.$$.fragment,i),s=!1},d(i){i&&z(e),n&&Q(n)}}}function An(t,e,n){let s;return re.subscribe(o=>{n(0,s=o)}),[s]}class Fn extends q{constructor(e){super(),W(this,e,An,kn,K,{})}}new Fn({target:document.getElementById("app")});
