(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function C(){}function dt(t){return t()}function Je(){return Object.create(null)}function ye(t){t.forEach(dt)}function pt(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function bt(t){return Object.keys(t).length===0}function Fe(t){return t==null?"":t}function wt(t){return t&&pt(t.destroy)?t.destroy:C}function f(t,e){t.appendChild(e)}function P(t,e,n){t.insertBefore(e,n||null)}function z(t){t.parentNode.removeChild(t)}function ht(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t){return document.createTextNode(t)}function W(){return q(" ")}function xe(){return q("")}function me(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function l(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Et(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function St(t){return Array.from(t.childNodes)}function oe(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e,n,o){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}let Ce;function kt(){if(Ce===void 0){Ce=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ce=!0}}return Ce}function Nt(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const o=k("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const s=kt();let i;return s?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=me(window,"message",r=>{r.source===o.contentWindow&&e()})):(o.src="about:blank",o.onload=()=>{i=me(o.contentWindow,"resize",e)}),f(t,o),()=>{(s||i&&o.contentWindow)&&i(),z(o)}}function Ft(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,o,e),s}let Re;function Le(t){Re=t}function gt(){if(!Re)throw new Error("Function called outside component initialization");return Re}function Ye(t){gt().$$.on_mount.push(t)}function At(){const t=gt();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=Ft(e,n,{cancelable:o});return s.slice().forEach(r=>{r.call(t,i)}),!i.defaultPrevented}return!0}}const Oe=[],Ke=[],ze=[],Qe=[],It=Promise.resolve();let Xe=!1;function Gt(){Xe||(Xe=!0,It.then(_t))}function Pe(t){ze.push(t)}const $e=new Set;let Ue=0;function _t(){const t=Re;do{for(;Ue<Oe.length;){const e=Oe[Ue];Ue++,Le(e),Ot(e.$$)}for(Le(null),Oe.length=0,Ue=0;Ke.length;)Ke.pop()();for(let e=0;e<ze.length;e+=1){const n=ze[e];$e.has(n)||($e.add(n),n())}ze.length=0}while(Oe.length);for(;Qe.length;)Qe.pop()();Xe=!1,$e.clear(),Le(t)}function Ot(t){if(t.fragment!==null){t.update(),ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Pe)}}const Me=new Set;let ve;function ke(){ve={r:0,c:[],p:ve}}function Ne(){ve.r||ye(ve.c),ve=ve.p}function B(t,e){t&&t.i&&(Me.delete(t),t.i(e))}function K(t,e,n,o){if(t&&t.o){if(Me.has(t))return;Me.add(t),ve.c.push(()=>{Me.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function et(t,e){K(t,1,1,()=>{e.delete(t.key)})}function tt(t,e,n,o,s,i,r,c,a,u,d,p){let _=t.length,h=i.length,m=_;const v={};for(;m--;)v[t[m].key]=m;const F=[],S=new Map,N=new Map;for(m=h;m--;){const A=p(s,i,m),D=n(A);let U=r.get(D);U?o&&U.p(A,e):(U=u(D,A),U.c()),S.set(D,F[m]=U),D in v&&N.set(D,Math.abs(m-v[D]))}const R=new Set,H=new Set;function O(A){B(A,1),A.m(c,d),r.set(A.key,A),d=A.first,h--}for(;_&&h;){const A=F[h-1],D=t[_-1],U=A.key,X=D.key;A===D?(d=A.first,_--,h--):S.has(X)?!r.has(U)||R.has(U)?O(A):H.has(X)?_--:N.get(U)>N.get(X)?(H.add(U),O(A)):(R.add(X),_--):(a(D,r),_--)}for(;_--;){const A=t[_];S.has(A.key)||a(A,r)}for(;h;)O(F[h-1]);return F}function ae(t){t&&t.c()}function le(t,e,n,o){const{fragment:s,on_mount:i,on_destroy:r,after_update:c}=t.$$;s&&s.m(e,n),o||Pe(()=>{const a=i.map(dt).filter(pt);r?r.push(...a):ye(a),t.$$.on_mount=[]}),c.forEach(Pe)}function re(t,e){const n=t.$$;n.fragment!==null&&(ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Dt(t,e){t.$$.dirty[0]===-1&&(Oe.push(t),Gt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,o,s,i,r,c=[-1]){const a=Re;Le(t);const u=t.$$={fragment:null,ctx:null,props:i,update:C,not_equal:s,bound:Je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Je(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(p,_,...h)=>{const m=h.length?h[0]:_;return u.ctx&&s(u.ctx[p],u.ctx[p]=m)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](m),d&&Dt(t,p)),_}):[],u.update(),d=!0,ye(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const p=St(e.target);u.fragment&&u.fragment.l(p),p.forEach(z)}else u.fragment&&u.fragment.c();e.intro&&B(t.$$.fragment),le(t,e.target,e.anchor,e.customElement),_t()}Le(a)}class te{$destroy(){re(this,1),this.$destroy=C}$on(e,n){const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(e){this.$$set&&!bt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var I=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(I||{}),Y=(t=>(t[t.DELAY=100]="DELAY",t[t.MAX_POINTS=6]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t[t.GRID_COUNT=20]="GRID_COUNT",t[t.GRID_PADDING=50]="GRID_PADDING",t[t.GRID_MAX_SIZE=500]="GRID_MAX_SIZE",t))(Y||{}),Se=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(Se||{}),De=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(De||{});const Ee=[];function qe(t,e=C){let n;const o=new Set;function s(c){if(Z(t,c)&&(t=c,n)){const a=!Ee.length;for(const u of o)u[1](),Ee.push(u,t);if(a){for(let u=0;u<Ee.length;u+=2)Ee[u][0](Ee[u+1]);Ee.length=0}}}function i(c){s(c(t))}function r(c,a=C){const u=[c,a];return o.add(u),o.size===1&&(n=e(s)||C),c(t),()=>{o.delete(u),o.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:r}}const Lt=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=qe(t);return{subscribe:n,resetScore:()=>{e(c=>(c.food=0,c.bonus=0,c.score=0,c))},eatFood:()=>{e(c=>(c.food=c.food+1,c.score=c.food*5+c.bonus*20,c.score>c.highScore&&(c.highScore=c.score),c))},getBonus:()=>{e(c=>(c.bonus=c.bonus+1,c))},nextLevel:()=>{e(c=>(c.level=c.level+1,c))}}};let he=Lt();function Rt(t){let e,n,o,s,i,r,c,a=t[1].playerName+"",u,d,p,_,h,m=t[1].score+"",v,F,S,N,R,H=t[1].food+"",O,A,D,U,X,ne=t[1].bonus+"",V,de,ie,J,ce,Q=t[1].highScore+"",pe,T,y,w,L,E=t[1].level+"",G,$,be=t[1].stage+"",Ae,He,we,Ie,je,Te,Ve,Ze;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",o=W(),s=k("table"),i=k("tr"),r=k("td"),r.textContent="Player",c=k("td"),u=q(a),d=W(),p=k("tr"),_=k("td"),_.textContent="Score",h=k("td"),v=q(m),F=W(),S=k("tr"),N=k("td"),N.textContent="Food",R=k("td"),O=q(H),A=W(),D=k("tr"),U=k("td"),U.textContent="Bonus",X=k("td"),V=q(ne),de=W(),ie=k("tr"),J=k("td"),J.textContent="High Score",ce=k("td"),pe=q(Q),T=W(),y=k("tr"),w=k("td"),w.textContent="Level-Stage",L=k("td"),G=q(E),$=k("span"),$.textContent="-",Ae=q(be),He=W(),we=k("div"),Ie=k("button"),Ie.textContent="Replay",je=W(),Te=k("button"),Te.textContent="Menu",l(n,"class","title svelte-1mhd3rb"),l(r,"class","c1 svelte-1mhd3rb"),l(c,"class","c2 svelte-1mhd3rb"),l(_,"class","c1 svelte-1mhd3rb"),l(h,"class","c2 svelte-1mhd3rb"),l(N,"class","c1 svelte-1mhd3rb"),l(R,"class","c2 svelte-1mhd3rb"),l(U,"class","c1 svelte-1mhd3rb"),l(X,"class","c2 svelte-1mhd3rb"),l(J,"class","c1 svelte-1mhd3rb"),l(ce,"class","c2 svelte-1mhd3rb"),l(w,"class","c1 svelte-1mhd3rb"),l(L,"class","c2 svelte-1mhd3rb"),l(s,"class","svelte-1mhd3rb"),l(we,"class","flex svelte-1mhd3rb"),l(e,"class","game-over-screen svelte-1mhd3rb")},m(se,fe){P(se,e,fe),f(e,n),f(e,o),f(e,s),f(s,i),f(i,r),f(i,c),f(c,u),f(s,d),f(s,p),f(p,_),f(p,h),f(h,v),f(s,F),f(s,S),f(S,N),f(S,R),f(R,O),f(s,A),f(s,D),f(D,U),f(D,X),f(X,V),f(s,de),f(s,ie),f(ie,J),f(ie,ce),f(ce,pe),f(s,T),f(s,y),f(y,w),f(y,L),f(L,G),f(L,$),f(L,Ae),f(e,He),f(e,we),f(we,Ie),t[4](Ie),f(we,je),f(we,Te),Ve||(Ze=[me(Ie,"click",t[3]),me(Te,"click",t[2])],Ve=!0)},p(se,[fe]){fe&2&&a!==(a=se[1].playerName+"")&&oe(u,a),fe&2&&m!==(m=se[1].score+"")&&oe(v,m),fe&2&&H!==(H=se[1].food+"")&&oe(O,H),fe&2&&ne!==(ne=se[1].bonus+"")&&oe(V,ne),fe&2&&Q!==(Q=se[1].highScore+"")&&oe(pe,Q),fe&2&&E!==(E=se[1].level+"")&&oe(G,E),fe&2&&be!==(be=se[1].stage+"")&&oe(Ae,be)},i:C,o:C,d(se){se&&z(e),t[4](null),Ve=!1,ye(Ze)}}}function Tt(t,e,n){let o;Ye(()=>{o.focus()});const s=()=>{console.log("restart game"),_e.welcomeScreen()},i=()=>{he.resetScore(),_e.startGame()};let r;he.subscribe(a=>{n(1,r=a)});function c(a){Ke[a?"unshift":"push"](()=>{o=a,n(0,o)})}return[o,r,s,i,c]}class Ct extends te{constructor(e){super(),ee(this,e,Tt,Rt,Z,{})}}var mt=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(mt||{}),vt=(t=>(t[t.STAR=0]="STAR",t[t.GEM=1]="GEM",t[t.RUBY=2]="RUBY",t))(vt||{}),x=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(x||{});const Ut=300,Bt=60,yt="none";function Ge(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function zt(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function Be(t,e,n,o,s){t.dispatchEvent(new CustomEvent(`${e}${s}`,{detail:{event:n,pointersCount:o.length}}))}function Mt(t,e,n,o,s,i=yt){e.style.touchAction=i;let r=[];function c(u){r.push(u),Be(e,t,u,r,"down"),o==null||o(r,u);const d=u.pointerId;function p(S){d===S.pointerId&&(r=zt(S,r),r.length||_(),Be(e,t,S,r,"up"),s==null||s(r,S))}function _(){h(),m(),v(),F()}const h=Ge(e,"pointermove",S=>{r=r.map(N=>S.pointerId===N.pointerId?S:N),Be(e,t,S,r,"move"),n==null||n(r,S)}),m=Ge(e,"lostpointercapture",S=>{p(S)}),v=Ge(e,"pointerup",S=>{p(S)}),F=Ge(e,"pointerleave",S=>{r=[],_(),Be(e,t,S,r,"up"),s==null||s(r,S)})}const a=Ge(e,"pointerdown",c);return{destroy:()=>{a()}}}function Pt(t,e={timeframe:Ut,minSwipeDistance:Bt,touchAction:yt}){const n="swipe";let o,s,i,r;function c(u,d){s=d.clientX,i=d.clientY,o=Date.now(),u.length===1&&(r=d.target)}function a(u,d){if(d.type==="pointerup"&&u.length===0&&Date.now()-o<e.timeframe){const p=d.clientX-s,_=d.clientY-i,h=Math.abs(p),m=Math.abs(_);let v=null;h>=2*m&&h>e.minSwipeDistance?v=p>0?"right":"left":m>=2*h&&m>e.minSwipeDistance&&(v=_>0?"bottom":"top"),v&&t.dispatchEvent(new CustomEvent(n,{detail:{direction:v,target:r}}))}}return Mt(n,t,null,c,a,e.touchAction)}function xt(t){let e,n,o,s,i,r,c,a,u,d,p,_,h,m,v,F;return{c(){e=k("div"),n=g("svg"),o=g("g"),s=g("g"),i=g("g"),r=g("g"),c=g("ellipse"),a=g("g"),u=g("path"),d=g("path"),p=g("g"),_=g("path"),h=g("g"),m=g("path"),v=g("g"),F=g("ellipse"),l(o,"id","Layer_1"),l(c,"id","shadow"),l(c,"opacity","0.3"),l(c,"cx","438.7"),l(c,"cy","765.8"),l(c,"rx","283"),l(c,"ry","32.9"),l(u,"id","cup-shadow"),l(u,"fill","#E7F4FA"),l(u,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),l(d,"id","cup-light"),l(d,"fill","#FFFFFF"),l(d,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),l(_,"id","mainFood"),l(_,"fill","#DB343C"),l(_,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),l(m,"id","highlight"),l(m,"opacity","0.3"),l(m,"fill","#FFFFFF"),l(m,"stroke","#000000"),l(m,"stroke-width","0.25"),l(m,"stroke-miterlimit","10"),l(m,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),l(F,"id","c2"),l(F,"fill","#FFFFFF"),l(F,"cx","436.8"),l(F,"cy","144.3"),l(F,"rx","140.6"),l(F,"ry","138.4"),l(v,"id","c1"),l(s,"id","Layer_2"),l(n,"viewBox","0 0 855.6 798.6"),l(e,"class","food jello-vertical svelte-h8lqdv"),b(e,"left",t[1].left*t[0]+"px"),b(e,"top",t[1].top*t[0]+"px"),b(e,"width",t[0]-2+"px"),b(e,"height",t[0]-2+"px")},m(S,N){P(S,e,N),f(e,n),f(n,o),f(n,s),f(s,i),f(i,r),f(r,c),f(i,a),f(a,u),f(a,d),f(i,p),f(p,_),f(i,h),f(h,m),f(i,v),f(v,F)},p(S,[N]){N&3&&b(e,"left",S[1].left*S[0]+"px"),N&3&&b(e,"top",S[1].top*S[0]+"px"),N&1&&b(e,"width",S[0]-2+"px"),N&1&&b(e,"height",S[0]-2+"px")},i:C,o:C,d(S){S&&z(e)}}}function Ht(t,e,n){let{size:o=0}=e,{data:s}=e;return t.$$set=i=>{"size"in i&&n(0,o=i.size),"data"in i&&n(1,s=i.data)},[o,s]}class Vt extends te{constructor(e){super(),ee(this,e,Ht,xt,Z,{size:0,data:1})}}function $t(t){let e,n,o;return{c(){e=g("svg"),n=g("rect"),l(n,"y","0"),l(n,"fill","#0037FF"),l(n,"width","50"),l(n,"height","50"),l(e,"viewBox","0 0 50 50"),l(e,"class",o=Fe(t[4])+" svelte-zvgok1")},m(s,i){P(s,e,i),f(e,n)},p(s,i){i&16&&o!==(o=Fe(s[4])+" svelte-zvgok1")&&l(e,"class",o)},d(s){s&&z(e)}}}function Wt(t){let e,n,o;return{c(){e=g("svg"),n=g("rect"),l(n,"y","0"),l(n,"fill","#0037FF"),l(n,"width","50"),l(n,"height","50"),l(e,"viewBox","0 0 50 50"),l(e,"class",o=Fe(t[4])+" svelte-zvgok1")},m(s,i){P(s,e,i),f(e,n)},p(s,i){i&16&&o!==(o=Fe(s[4])+" svelte-zvgok1")&&l(e,"class",o)},d(s){s&&z(e)}}}function Kt(t){let e,n,o,s,i,r,c;return{c(){e=g("svg"),n=g("g"),o=g("rect"),s=g("path"),i=g("circle"),r=g("circle"),l(o,"opacity","0"),l(o,"fill","#FFFFFF"),l(o,"width","258"),l(o,"height","258"),l(s,"fill","#0037FF"),l(s,"d",`M147.5,29.2C111.6,29.2,80.1,48,62.6,77H0v104h62.6c17.5,28,49,47.3,84.9,47.3c55,0,99.6-44.6,99.6-99.6\r
          S202.5,29.2,147.5,29.2z`),l(i,"fill","#FFF800"),l(i,"stroke","#000000"),l(i,"stroke-miterlimit","10"),l(i,"cx","184.3"),l(i,"cy","84.5"),l(i,"r","21.8"),l(r,"fill","#FFF800"),l(r,"stroke","#000000"),l(r,"stroke-miterlimit","10"),l(r,"cx","184.3"),l(r,"cy","164.5"),l(r,"r","21.8"),l(e,"viewBox","0 0 258 258"),l(e,"class",c=Fe(t[4])+" svelte-zvgok1")},m(a,u){P(a,e,u),f(e,n),f(n,o),f(n,s),f(n,i),f(n,r)},p(a,u){u&16&&c!==(c=Fe(a[4])+" svelte-zvgok1")&&l(e,"class",c)},d(a){a&&z(e)}}}function Xt(t){let e;function n(i,r){return i[2]?Kt:i[3]?Wt:$t}let o=n(t),s=o(t);return{c(){e=k("div"),s.c(),b(e,"left",t[1].left*t[0]+"px"),b(e,"top",t[1].top*t[0]+"px"),b(e,"width",t[0]+"px"),b(e,"height",t[0]+"px"),l(e,"class","snake-body svelte-zvgok1")},m(i,r){P(i,e,r),s.m(e,null)},p(i,[r]){o===(o=n(i))&&s?s.p(i,r):(s.d(1),s=o(i),s&&(s.c(),s.m(e,null))),r&3&&b(e,"left",i[1].left*i[0]+"px"),r&3&&b(e,"top",i[1].top*i[0]+"px"),r&1&&b(e,"width",i[0]+"px"),r&1&&b(e,"height",i[0]+"px")},i:C,o:C,d(i){i&&z(e),s.d()}}}function Yt(t,e,n){let{size:o=0}=e,{current:s=null}=e,{prev:i=null}=e,{isHead:r=!1}=e,{isTail:c=!1}=e,{direction:a="right"}=e;return t.$$set=u=>{"size"in u&&n(0,o=u.size),"current"in u&&n(1,s=u.current),"prev"in u&&n(5,i=u.prev),"isHead"in u&&n(2,r=u.isHead),"isTail"in u&&n(3,c=u.isTail),"direction"in u&&n(4,a=u.direction)},[o,s,r,c,a,i]}class qt extends te{constructor(e){super(),ee(this,e,Yt,Xt,Z,{size:0,current:1,prev:5,isHead:2,isTail:3,direction:4})}}function nt(t,e,n){const o=t.slice();return o[3]=e[n],o[5]=n,o}function st(t){let e,n;return e=new qt({props:{isHead:t[5]==0,isTail:t[5]==t[0].length-1,current:t[3],prev:t[5]>0?t[0][t[5]-1]:null,direction:t[1],size:t[2]}}),{c(){ae(e.$$.fragment)},m(o,s){le(e,o,s),n=!0},p(o,s){const i={};s&1&&(i.isTail=o[5]==o[0].length-1),s&1&&(i.current=o[3]),s&1&&(i.prev=o[5]>0?o[0][o[5]-1]:null),s&2&&(i.direction=o[1]),s&4&&(i.size=o[2]),e.$set(i)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){K(e.$$.fragment,o),n=!1},d(o){re(e,o)}}}function jt(t){let e,n,o=t[0],s=[];for(let r=0;r<o.length;r+=1)s[r]=st(nt(t,o,r));const i=r=>K(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=xe()},m(r,c){for(let a=0;a<s.length;a+=1)s[a].m(r,c);P(r,e,c),n=!0},p(r,[c]){if(c&7){o=r[0];let a;for(a=0;a<o.length;a+=1){const u=nt(r,o,a);s[a]?(s[a].p(u,c),B(s[a],1)):(s[a]=st(u),s[a].c(),B(s[a],1),s[a].m(e.parentNode,e))}for(ke(),a=o.length;a<s.length;a+=1)i(a);Ne()}},i(r){if(!n){for(let c=0;c<o.length;c+=1)B(s[c]);n=!0}},o(r){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)K(s[c]);n=!1},d(r){ht(s,r),r&&z(e)}}}function Zt(t,e,n){let{data:o=[]}=e,{direction:s="right"}=e,{size:i=0}=e;return t.$$set=r=>{"data"in r&&n(0,o=r.data),"direction"in r&&n(1,s=r.direction),"size"in r&&n(2,i=r.size)},[o,s,i]}class Jt extends te{constructor(e){super(),ee(this,e,Zt,jt,Z,{data:0,direction:1,size:2})}}const M=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Qt=t=>{const e=M();let n={top:0,left:0,id:e},o=!1;do n.top=Math.floor(Math.random()*Y.GRID_COUNT),n.left=Math.floor(Math.random()*Y.GRID_COUNT),o=!en(n,t);while(o==!1);return n},en=(t,e)=>{for(let n=0;n<e.length;n++)if(e[n].top==t.top&&e[n].left==t.left)return!0;return!1},tn=t=>{switch(t){case"bottom":return I.DOWN;case"top":return I.UP;case"right":return I.RIGHT;case"left":return I.LEFT;default:return I.UNKNOWN}},nn=(t,e)=>t===Se.UP&&e!=I.DOWN?I.UP:t===Se.RIGHT&&e!=I.LEFT?I.RIGHT:t===Se.LEFT&&e!=I.RIGHT?I.LEFT:t===Se.DOWN&&e!=I.UP?I.DOWN:I.UNKNOWN,ge=[{bg:"#1c1c1c",wall:[{id:M(),type:x.ROCK,top:2,left:1},{id:M(),type:x.ROCK,top:2,left:2},{id:M(),type:x.ROCK,top:2,left:3},{id:M(),type:x.ROCK,top:2,left:4},{id:M(),type:x.ROCK,top:2,left:5},{id:M(),type:x.ROCK,top:2,left:6},{id:M(),type:x.ROCK,top:1,left:3},{id:M(),type:x.ROCK,top:3,left:4}]},{bg:"#fda2f2",wall:[{id:M(),type:x.DEFAULT,top:2,left:1},{id:M(),type:x.DEFAULT,top:2,left:2},{id:M(),type:x.ROCK,top:2,left:3},{id:M(),type:x.ROCK,top:2,left:4},{id:M(),type:x.DEFAULT,top:2,left:5},{id:M(),type:x.DEFAULT,top:2,left:6},{id:M(),type:x.CONCRETE,top:1,left:3},{id:M(),type:x.CONCRETE,top:3,left:4}]},{bg:"#7f61bb",wall:[]},{bg:"#c34366",wall:[]}];function sn(t){let e,n,o,s,i;return{c(){e=k("div"),n=g("svg"),o=g("style"),s=q(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),i=g("polygon"),l(o,"id","style2"),l(i,"fill","#FFA300"),l(i,"stroke","#EB0000"),l(i,"stroke-width","0.25"),l(i,"stroke-miterlimit","10"),l(i,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),l(i,"class","red"),l(n,"viewBox","0 0 443.3 421.6"),l(e,"class","bonus bounce-top svelte-y90akj"),b(e,"width",t[1]+"px"),b(e,"height",t[1]+"px"),b(e,"left",t[0].left*t[1]+"px"),b(e,"top",t[0].top*t[1]+"px")},m(r,c){P(r,e,c),f(e,n),f(n,o),f(o,s),f(n,i)},p(r,[c]){c&2&&b(e,"width",r[1]+"px"),c&2&&b(e,"height",r[1]+"px"),c&3&&b(e,"left",r[0].left*r[1]+"px"),c&3&&b(e,"top",r[0].top*r[1]+"px")},i:C,o:C,d(r){r&&z(e)}}}function on(t,e,n){const o=At();let{data:s}=e,{size:i=0}=e;return Ye(()=>{setTimeout(()=>{o("bonusFinished",s.id)},Y.BONUS_TIME)}),t.$$set=r=>{"data"in r&&n(0,s=r.data),"size"in r&&n(1,i=r.size)},[s,i]}class ln extends te{constructor(e){super(),ee(this,e,on,sn,Z,{data:0,size:1})}}function rn(t){let e,n,o;return{c(){e=k("div"),n=k("h1"),o=q(t[0]),l(n,"class","svelte-1x8upsq"),l(e,"class","message-box svelte-1x8upsq")},m(s,i){P(s,e,i),f(e,n),f(n,o)},p(s,[i]){i&1&&oe(o,s[0])},i:C,o:C,d(s){s&&z(e)}}}function cn(t,e,n){let{message:o=""}=e;return t.$$set=s=>{"message"in s&&n(0,o=s.message)},[o]}class fn extends te{constructor(e){super(),ee(this,e,cn,rn,Z,{message:0})}}function un(t){let e,n,o,s,i,r,c,a,u;return{c(){e=g("svg"),n=g("radialGradient"),o=g("stop"),s=g("stop"),i=g("rect"),r=g("linearGradient"),c=g("stop"),a=g("stop"),u=g("rect"),l(o,"offset","0"),b(o,"stop-color","#333333"),l(s,"offset","1"),b(s,"stop-color","#000000"),l(n,"id","rock_svgid"),l(n,"cx","219.5"),l(n,"cy","219.5"),l(n,"r","219"),l(n,"gradientUnits","userSpaceOnUse"),l(i,"x","0.5"),l(i,"y","0.5"),l(i,"fill","url(#rock_svgid)"),l(i,"stroke","#000000"),l(i,"stroke-miterlimit","10"),l(i,"width","438"),l(i,"height","438"),l(c,"offset","0"),b(c,"stop-color","#000000"),b(c,"stop-opacity","0"),l(a,"offset","1"),b(a,"stop-color","#FFFFFF"),b(a,"stop-opacity","0.5"),l(r,"id","rock_svgid2"),l(r,"gradientUnits","userSpaceOnUse"),l(r,"x1","219"),l(r,"y1","431"),l(r,"x2","219"),l(r,"y2","9.0005"),l(u,"x","8"),l(u,"y","9"),l(u,"fill","url(#rock_svgid2)"),l(u,"width","422"),l(u,"height","422"),l(e,"viewBox","0 0 439 439")},m(d,p){P(d,e,p),f(e,n),f(n,o),f(n,s),f(e,i),f(e,r),f(r,c),f(r,a),f(e,u)},d(d){d&&z(e)}}}function an(t){let e,n,o,s,i,r,c,a,u,d,p,_,h,m,v,F,S,N,R,H,O,A;return{c(){e=g("svg"),n=g("g"),o=g("linearGradient"),s=g("stop"),i=g("stop"),r=g("rect"),c=g("linearGradient"),a=g("stop"),u=g("stop"),d=g("rect"),p=g("linearGradient"),_=g("stop"),h=g("stop"),m=g("polygon"),v=g("linearGradient"),F=g("stop"),S=g("stop"),N=g("rect"),R=g("linearGradient"),H=g("stop"),O=g("stop"),A=g("rect"),l(s,"offset","0"),b(s,"stop-color","#998675"),l(i,"offset","1"),b(i,"stop-color","#C7B299"),l(o,"id","concrete_SVGID_1_"),l(o,"gradientUnits","userSpaceOnUse"),l(o,"x1","4"),l(o,"y1","96.5"),l(o,"x2","281"),l(o,"y2","96.5"),l(r,"x","4"),l(r,"y","4"),l(r,"fill","url(#concrete_SVGID_1_)"),l(r,"stroke","#CABD99"),l(r,"stroke-width","8"),l(r,"stroke-miterlimit","10"),l(r,"width","277"),l(r,"height","185"),l(a,"offset","0"),b(a,"stop-color","#998675"),l(u,"offset","1"),b(u,"stop-color","#C7B299"),l(c,"id","concrete_SVGID_2_"),l(c,"gradientUnits","userSpaceOnUse"),l(c,"x1","420"),l(c,"y1","189"),l(c,"x2","420"),l(c,"y2","4"),l(d,"x","281"),l(d,"y","4"),l(d,"fill","url(#concrete_SVGID_2_)"),l(d,"stroke","#CABD99"),l(d,"stroke-width","8"),l(d,"stroke-miterlimit","10"),l(d,"width","278"),l(d,"height","185"),l(_,"offset","0"),b(_,"stop-color","#998675"),l(h,"offset","1"),b(h,"stop-color","#C7B299"),l(p,"id","concrete_SVGID_3_"),l(p,"gradientUnits","userSpaceOnUse"),l(p,"x1","281.5"),l(p,"y1","374"),l(p,"x2","281.5"),l(p,"y2","189.0005"),l(m,"fill","url(#concrete_SVGID_3_)"),l(m,"stroke","#CABD99"),l(m,"stroke-width","8"),l(m,"stroke-miterlimit","10"),l(m,"points",`281,189 4,189 4,374 281,374 \r
    559,374 559,189 	`),l(F,"offset","0"),b(F,"stop-color","#998675"),l(S,"offset","1"),b(S,"stop-color","#C7B299"),l(v,"id","concrete_SVGID_4_"),l(v,"gradientUnits","userSpaceOnUse"),l(v,"x1","4"),l(v,"y1","466.5"),l(v,"x2","281"),l(v,"y2","466.5"),l(N,"x","4"),l(N,"y","374"),l(N,"fill","url(#concrete_SVGID_4_)"),l(N,"stroke","#CABD99"),l(N,"stroke-width","8"),l(N,"stroke-miterlimit","10"),l(N,"width","277"),l(N,"height","185"),l(H,"offset","0"),b(H,"stop-color","#998675"),l(O,"offset","1"),b(O,"stop-color","#C7B299"),l(R,"id","concrete_SVGID_5_"),l(R,"gradientUnits","userSpaceOnUse"),l(R,"x1","281"),l(R,"y1","466.5"),l(R,"x2","559"),l(R,"y2","466.5"),l(A,"x","281"),l(A,"y","374"),l(A,"fill","url(#concrete_SVGID_5_)"),l(A,"stroke","#CABD99"),l(A,"stroke-width","8"),l(A,"stroke-miterlimit","10"),l(A,"width","278"),l(A,"height","185"),l(e,"viewBox","0 0 563 563")},m(D,U){P(D,e,U),f(e,n),f(n,o),f(o,s),f(o,i),f(n,r),f(n,c),f(c,a),f(c,u),f(n,d),f(n,p),f(p,_),f(p,h),f(n,m),f(n,v),f(v,F),f(v,S),f(n,N),f(n,R),f(R,H),f(R,O),f(n,A)},d(D){D&&z(e)}}}function dn(t){let e,n,o,s,i,r,c,a,u,d,p,_,h,m,v;return{c(){e=g("svg"),n=g("symbol"),o=g("polygon"),s=g("polygon"),i=g("polygon"),r=g("polygon"),c=g("polygon"),a=g("polygon"),u=g("polygon"),d=g("polygon"),p=g("polygon"),_=g("polygon"),h=g("polygon"),m=g("polygon"),v=g("use"),l(o,"points","27,-29 -27,-29 -27,29 27,29 	"),l(s,"fill","#BF6411"),l(s,"points","-15,29 -27,29 -27,16 -15,16 -2,16 -2,29 	"),l(i,"fill","#BF6411"),l(i,"points","12,29 0,29 0,16 12,16 25,16 25,29 	"),l(r,"fill","#BF6411"),l(r,"points","-27,14 -15,14 -15,2 -27,2 	"),l(c,"fill","#BF6411"),l(c,"points","0,14 -13,14 -13,2 0,2 12,2 12,14 	"),l(a,"fill","#BF6411"),l(a,"points","14,14 27,14 27,2 14,2 	"),l(u,"fill","#BF6411"),l(u,"points","-15,0 -27,0 -27,-13 -15,-13 -2,-13 -2,0 	"),l(d,"fill","#BF6411"),l(d,"points","12,0 0,0 0,-13 12,-13 25,-13 25,0 	"),l(p,"fill","#BF6411"),l(p,"points","-27,-15 -15,-15 -15,-27 -27,-27 	"),l(_,"fill","#BF6411"),l(_,"points","0,-15 -13,-15 -13,-27 0,-27 12,-27 12,-15 	"),l(h,"fill","#BF6411"),l(h,"points","14,-15 27,-15 27,-27 14,-27 	"),l(m,"display","none"),l(m,"fill","none"),l(m,"points","-27,29 27,29 27,-29 -27,-29 	"),l(n,"id","brick1"),l(n,"viewBox","-27 -29 54 58"),Et(v,"xlink:href","#brick1"),l(v,"width","54"),l(v,"height","58"),l(v,"x","-27"),l(v,"y","-29"),l(v,"transform","matrix(1 0 0 -1 27 29)"),l(v,"overflow","visible"),l(e,"viewBox","0 0 54 58")},m(F,S){P(F,e,S),f(e,n),f(n,o),f(n,s),f(n,i),f(n,r),f(n,c),f(n,a),f(n,u),f(n,d),f(n,p),f(n,_),f(n,h),f(n,m),f(e,v)},d(F){F&&z(e)}}}function pn(t){let e;function n(i,r){return i[1].type==x.DEFAULT?dn:i[1].type==x.CONCRETE?an:un}let o=n(t),s=o(t);return{c(){e=k("div"),s.c(),l(e,"class","brick svelte-1ezhfpr"),b(e,"top",t[1].top*t[0]+"px"),b(e,"left",t[1].left*t[0]+"px"),b(e,"width",t[0]+"px"),b(e,"height",t[0]+"px")},m(i,r){P(i,e,r),s.m(e,null)},p(i,[r]){o!==(o=n(i))&&(s.d(1),s=o(i),s&&(s.c(),s.m(e,null))),r&3&&b(e,"top",i[1].top*i[0]+"px"),r&3&&b(e,"left",i[1].left*i[0]+"px"),r&1&&b(e,"width",i[0]+"px"),r&1&&b(e,"height",i[0]+"px")},i:C,o:C,d(i){i&&z(e),s.d()}}}function hn(t,e,n){let{size:o=0}=e,{data:s}=e;return t.$$set=i=>{"size"in i&&n(0,o=i.size),"data"in i&&n(1,s=i.data)},[o,s]}class gn extends te{constructor(e){super(),ee(this,e,hn,pn,Z,{size:0,data:1})}}function ot(t,e,n){const o=t.slice();return o[3]=e[n],o}function lt(t){let e,n;return e=new gn({props:{data:t[3],size:t[0]}}),{c(){ae(e.$$.fragment)},m(o,s){le(e,o,s),n=!0},p(o,s){const i={};s&2&&(i.data=o[3]),s&1&&(i.size=o[0]),e.$set(i)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){K(e.$$.fragment,o),n=!1},d(o){re(e,o)}}}function _n(t){let e,n,o=t[1],s=[];for(let r=0;r<o.length;r+=1)s[r]=lt(ot(t,o,r));const i=r=>K(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=xe()},m(r,c){for(let a=0;a<s.length;a+=1)s[a].m(r,c);P(r,e,c),n=!0},p(r,[c]){if(c&3){o=r[1];let a;for(a=0;a<o.length;a+=1){const u=ot(r,o,a);s[a]?(s[a].p(u,c),B(s[a],1)):(s[a]=lt(u),s[a].c(),B(s[a],1),s[a].m(e.parentNode,e))}for(ke(),a=o.length;a<s.length;a+=1)i(a);Ne()}},i(r){if(!n){for(let c=0;c<o.length;c+=1)B(s[c]);n=!0}},o(r){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)K(s[c]);n=!1},d(r){ht(s,r),r&&z(e)}}}function mn(t,e,n){let o,{size:s=0}=e,i;return he.subscribe(r=>{n(2,i=r)}),t.$$set=r=>{"size"in r&&n(0,s=r.size)},t.$$.update=()=>{t.$$.dirty&4&&n(1,o=ge[i.level-1].wall)},[s,o,i]}class vn extends te{constructor(e){super(),ee(this,e,mn,_n,Z,{size:0})}}const rt=()=>[{id:M(),left:2,top:0},{id:M(),left:1,top:0},{id:M(),left:0,top:0}],yn=()=>{let t={bonus:[],foods:[],snake:rt()},{update:e,subscribe:n}=qe(t);return{subscribe:n,addBonus:d=>{e(p=>(p.bonus.findIndex(h=>h.id==d.id)==-1&&(p.bonus.push(d),p.bonus=p.bonus,p=p),p))},removeBonus:d=>{e(p=>{let _=p.bonus.slice(0),h=_.findIndex(m=>m.id==d);return h!=-1&&(_.splice(h,1),p.bonus=_,p=p),p})},addFood:d=>{e(p=>(p.foods.findIndex(h=>h.id==d.id)==-1&&(p.foods.push(d),p.foods=p.foods,p=p),p))},removeFood:d=>{e(p=>{let _=p.foods.slice(0),h=_.findIndex(m=>m.id==d);return h!=-1&&(_.splice(h,1),p.foods=_,p=p),p})},moveSnake:d=>{e(p=>{let _=p.snake;return _.pop(),_=[d,..._],p.snake=_,p})},growSnake:()=>{e(d=>{let p=d.snake;return p=[...p,p[p.length-1]],d.snake=p,d})},reset:()=>{e(d=>(d={bonus:[],foods:[],snake:rt()},d))}}},ue=yn();function it(t,e,n){const o=t.slice();return o[38]=e[n],o}function ct(t,e,n){const o=t.slice();return o[41]=e[n],o}function ft(t,e){let n,o,s;return o=new Vt({props:{data:e[41],size:e[6]}}),{key:t,first:null,c(){n=xe(),ae(o.$$.fragment),this.first=n},m(i,r){P(i,n,r),le(o,i,r),s=!0},p(i,r){e=i;const c={};r[0]&128&&(c.data=e[41]),r[0]&64&&(c.size=e[6]),o.$set(c)},i(i){s||(B(o.$$.fragment,i),s=!0)},o(i){K(o.$$.fragment,i),s=!1},d(i){i&&z(n),re(o,i)}}}function ut(t,e){let n,o,s;return o=new ln({props:{data:e[38],size:e[6]}}),o.$on("bonusFinished",e[11]),{key:t,first:null,c(){n=xe(),ae(o.$$.fragment),this.first=n},m(i,r){P(i,n,r),le(o,i,r),s=!0},p(i,r){e=i;const c={};r[0]&128&&(c.data=e[38]),r[0]&64&&(c.size=e[6]),o.$set(c)},i(i){s||(B(o.$$.fragment,i),s=!0)},o(i){K(o.$$.fragment,i),s=!1},d(i){i&&z(n),re(o,i)}}}function at(t){let e,n;return e=new fn({props:{message:t[5]}}),{c(){ae(e.$$.fragment)},m(o,s){le(e,o,s),n=!0},p(o,s){const i={};s[0]&32&&(i.message=o[5]),e.$set(i)},i(o){n||(B(e.$$.fragment,o),n=!0)},o(o){K(e.$$.fragment,o),n=!1},d(o){re(e,o)}}}function bn(t){let e,n,o,s,i=t[3].score+"",r,c,a,u,d=t[3].bonus+"",p,_,h,m,v,F,S,N=[],R=new Map,H,O=[],A=new Map,D,U,X,ne,V,de,ie;m=new vn({props:{size:t[6]}}),F=new Jt({props:{direction:t[8],data:t[7].snake,size:t[6]}});let J=t[7].foods;const ce=y=>y[41].id;for(let y=0;y<J.length;y+=1){let w=ct(t,J,y),L=ce(w);R.set(L,N[y]=ft(L,w))}let Q=t[7].bonus;const pe=y=>y[38].id;for(let y=0;y<Q.length;y+=1){let w=it(t,Q,y),L=pe(w);A.set(L,O[y]=ut(L,w))}let T=t[4]==!0&&at(t);return{c(){e=k("div"),n=k("div"),o=k("div"),s=q("Score : "),r=q(i),c=W(),a=k("div"),u=q("Bonus : "),p=q(d),_=W(),h=k("main"),ae(m.$$.fragment),v=W(),ae(F.$$.fragment),S=W();for(let y=0;y<N.length;y+=1)N[y].c();H=W();for(let y=0;y<O.length;y+=1)O[y].c();D=W(),T&&T.c(),U=W(),X=k("div"),X.innerHTML="<span>Pause</span>",l(n,"class","scorecard svelte-g9guyn"),b(n,"width",t[2]+"px"),b(h,"width",t[2]+"px"),b(h,"height",t[2]+"px"),b(h,"background",ge[t[3].level-1].bg),l(h,"class","svelte-g9guyn"),l(e,"class","wrap svelte-g9guyn"),Pe(()=>t[12].call(e))},m(y,w){P(y,e,w),f(e,n),f(n,o),f(o,s),f(o,r),f(n,c),f(n,a),f(a,u),f(a,p),f(e,_),f(e,h),le(m,h,null),f(h,v),le(F,h,null),f(h,S);for(let L=0;L<N.length;L+=1)N[L].m(h,null);f(h,H);for(let L=0;L<O.length;L+=1)O[L].m(h,null);f(h,D),T&&T.m(h,null),f(e,U),f(e,X),ne=Nt(e,t[12].bind(e)),V=!0,de||(ie=[me(window,"keydown",t[10]),wt(Pt.call(null,h,{timeframe:150,minSwipeDistance:30,touchAction:"none"})),me(h,"swipe",t[9])],de=!0)},p(y,w){(!V||w[0]&8)&&i!==(i=y[3].score+"")&&oe(r,i),(!V||w[0]&8)&&d!==(d=y[3].bonus+"")&&oe(p,d),(!V||w[0]&4)&&b(n,"width",y[2]+"px");const L={};w[0]&64&&(L.size=y[6]),m.$set(L);const E={};w[0]&256&&(E.direction=y[8]),w[0]&128&&(E.data=y[7].snake),w[0]&64&&(E.size=y[6]),F.$set(E),w[0]&192&&(J=y[7].foods,ke(),N=tt(N,w,ce,1,y,J,R,h,et,ft,H,ct),Ne()),w[0]&2240&&(Q=y[7].bonus,ke(),O=tt(O,w,pe,1,y,Q,A,h,et,ut,D,it),Ne()),y[4]==!0?T?(T.p(y,w),w[0]&16&&B(T,1)):(T=at(y),T.c(),B(T,1),T.m(h,null)):T&&(ke(),K(T,1,1,()=>{T=null}),Ne()),(!V||w[0]&4)&&b(h,"width",y[2]+"px"),(!V||w[0]&4)&&b(h,"height",y[2]+"px"),(!V||w[0]&8)&&b(h,"background",ge[y[3].level-1].bg)},i(y){if(!V){B(m.$$.fragment,y),B(F.$$.fragment,y);for(let w=0;w<J.length;w+=1)B(N[w]);for(let w=0;w<Q.length;w+=1)B(O[w]);B(T),V=!0}},o(y){K(m.$$.fragment,y),K(F.$$.fragment,y);for(let w=0;w<N.length;w+=1)K(N[w]);for(let w=0;w<O.length;w+=1)K(O[w]);K(T),V=!1},d(y){y&&z(e),re(m),re(F);for(let w=0;w<N.length;w+=1)N[w].d();for(let w=0;w<O.length;w+=1)O[w].d();T&&T.d(),ne(),de=!1,ye(ie)}}}function wn(t,e,n){let o,s=!1,i=!1,r=De.NEXT_LEVEL,c=!1,a,u,d=0,p=0;Ye(()=>{console.log(`--onMount = ${p} ${d} ${ge[_.level].bg}`)});let _,h;_e.subscribe(E=>{}),he.subscribe(E=>{n(3,_=E)}),ue.subscribe(E=>{n(7,h=E)});const m=()=>{N(De.GAME_OVER),clearInterval(F),setTimeout(()=>{R(),V(),_e.gameOver()},Y.MESSAGE_TIME)};let v=I.RIGHT,F;function S(E){o=E.detail.direction,E.detail.target,n(8,v=tn(o))}const N=E=>{n(5,r=E),n(4,i=!0)},R=()=>{n(4,i=!1),n(5,r=De.GAME_OVER)},H=()=>{N(De.NEXT_LEVEL),clearInterval(F),setTimeout(()=>{R(),he.nextLevel(),he.resetScore(),X(),V()},Y.MESSAGE_TIME)},O=E=>{h.bonus.forEach(G=>{ne(E,G)&&(ue.removeBonus(G.id),he.getBonus())})},A=()=>{h.snake.length/Y.MAX_POINTS>1&&h.snake.length%Y.MAX_POINTS==0&&(_.level<ge.length-1?H():(clearInterval(F),_e.allLevelsCleared()))},D=()=>{let{left:E,top:G}=h.snake[0];return v===I.UP?G-=1:v===I.DOWN?G+=1:v===I.LEFT?E-=1:v===I.RIGHT&&(E+=1),{id:M(),left:E,top:G}},U=E=>{h.foods.length>0&&ne(E,h.foods[0])&&(ue.growSnake(),he.eatFood(),ue.removeFood(h.foods[0].id),y(),_.food%5==0&&w())},X=()=>{let E=ge.length-_.level;E=E*Y.DELAY,ue.reset(),y(),F=setInterval(()=>{c=!0,ie()&&(c=!1,m()),de();const G=D();O(G),ue.moveSnake(G),U(G),A(),c=!1},Y.DELAY)},ne=(E,G)=>!(E.top<G.top||E.top>G.top||E.left<G.left||E.left>G.left),V=()=>{n(8,v=I.RIGHT)},de=()=>{const{top:E,left:G}=h.snake[0],$=h.snake[0];G>=Y.GRID_COUNT&&v==I.RIGHT&&($.left=-2),G<0&&v==I.LEFT&&($.left=Y.GRID_COUNT+1),E<0&&v==I.UP&&($.top=Y.GRID_COUNT+1),E>=Y.GRID_COUNT&&v==I.DOWN&&($.top=-2)},ie=()=>h.snake.slice(1).filter($=>ne($,h.snake[0])).length>0,J=()=>{clearInterval(F)},ce=E=>{switch(E){case I.DOWN:return I.UP;case I.UP:return I.DOWN;case I.LEFT:return I.RIGHT;case I.RIGHT:return I.LEFT;case I.UNKNOWN:return I.UNKNOWN}},Q=E=>{if(c)return;const G=E.code;if(G===Se.SPACEBAR&&(s=!s,s?J():X()),s)return;const $=nn(G,v);$!=I.UNKNOWN&&$!=ce($)&&n(8,v=$)},pe=E=>{ue.removeBonus(E.detail)},T=()=>{const E=h.snake.slice(0),G=ge[_.level-1].wall,$=h.foods.slice(0),be=h.bonus.slice(0),Ae=[...G,...E,...$,...be];return Qt(Ae)},y=()=>{if(h.foods.length>0)return;const E=T();let G={top:E.top,left:E.left,id:E.id,type:mt.DEFAULT};ue.addFood(G)},w=()=>{const E=T();let G={top:E.top,left:E.left,id:E.id,type:vt.STAR};ue.addBonus(G)};X(),V();function L(){a=this.clientWidth,u=this.clientHeight,n(0,a),n(1,u)}return t.$$.update=()=>{t.$$.dirty[0]&7&&(n(2,d=Math.min(a,u)),n(2,d=d-Y.GRID_PADDING),n(2,d=Math.min(d,Y.GRID_MAX_SIZE)),isNaN(d)||n(6,p=Math.floor(d/Y.GRID_COUNT))),t.$$.dirty[0]&8&&ge[_.level-1].wall},[a,u,d,_,i,r,p,h,v,S,Q,pe,L]}class We extends te{constructor(e){super(),ee(this,e,wn,bn,Z,{},null,[-1,-1])}}function En(t){let e,n,o,s,i,r,c;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",o=W(),s=k("div"),i=k("button"),i.textContent="Start",l(n,"class","title svelte-3xg2s6"),l(s,"class","btn svelte-3xg2s6"),l(e,"class","start-screen svelte-3xg2s6")},m(a,u){P(a,e,u),f(e,n),f(e,o),f(e,s),f(s,i),r||(c=me(i,"click",t[0]),r=!0)},p:C,i:C,o:C,d(a){a&&z(e),r=!1,c()}}}function Sn(t){return[()=>{console.log("start game"),_e.startGame()}]}class kn extends te{constructor(e){super(),ee(this,e,Sn,En,Z,{})}}function Nn(t){let e,n,o,s,i,r,c,a;return{c(){e=k("div"),n=k("div"),n.textContent="Congratulations !",o=W(),s=k("div"),s.textContent="You have cleared all the levels.",i=W(),r=k("button"),r.textContent="Menu",l(n,"class","title svelte-gyhhqq"),l(e,"class","final svelte-gyhhqq")},m(u,d){P(u,e,d),f(e,n),f(e,o),f(e,s),f(e,i),f(e,r),c||(a=me(r,"click",t[0]),c=!0)},p:C,i:C,o:C,d(u){u&&z(e),c=!1,a()}}}function Fn(t){return[()=>{console.log("restart game"),_e.welcomeScreen()}]}class An extends te{constructor(e){super(),ee(this,e,Fn,Nn,Z,{})}}var j=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(j||{});const In=()=>{const t=[{status:j.NOT_STARTED,component:kn},{status:j.RUNNING,component:We},{status:j.PAUSED,component:We},{status:j.RESUME,component:We},{status:j.GAME_OVER,component:Ct},{status:j.ALL_LEVELS_CLEARED,component:An}];let{update:e,subscribe:n}=qe(t.find(u=>u.status==j.RUNNING));return{subscribe:n,startGame:()=>{e(u=>(u=t.find(d=>d.status==j.RUNNING),u))},pauseGame:()=>{e(u=>(u=t.find(d=>d.status==j.PAUSED),u))},resumeGame:()=>{e(u=>(u=t.find(d=>d.status==j.RUNNING),u))},gameOver:()=>{e(u=>(u=t.find(d=>d.status==j.GAME_OVER),u))},welcomeScreen:()=>{e(u=>(u=t.find(d=>d.status==j.NOT_STARTED),u))},allLevelsCleared:()=>{e(u=>(u=t.find(d=>d.status==j.ALL_LEVELS_CLEARED),u))}}},_e=In();function Gn(t){let e,n,o;var s=t[0].component;function i(r){return{}}return s&&(n=new s(i())),{c(){e=k("div"),n&&ae(n.$$.fragment),l(e,"class","container svelte-174qdzj")},m(r,c){P(r,e,c),n&&le(n,e,null),o=!0},p(r,[c]){if(s!==(s=r[0].component)){if(n){ke();const a=n;K(a.$$.fragment,1,0,()=>{re(a,1)}),Ne()}s?(n=new s(i()),ae(n.$$.fragment),B(n.$$.fragment,1),le(n,e,null)):n=null}},i(r){o||(n&&B(n.$$.fragment,r),o=!0)},o(r){n&&K(n.$$.fragment,r),o=!1},d(r){r&&z(e),n&&re(n)}}}function On(t,e,n){let o;return _e.subscribe(s=>{n(0,o=s)}),[o]}class Dn extends te{constructor(e){super(),ee(this,e,On,Gn,Z,{})}}new Dn({target:document.getElementById("app")});
