(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();function A(){}function st(t){return t()}function Xe(){return Object.create(null)}function de(t){t.forEach(st)}function lt(t){return typeof t=="function"}function q(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ut(t){return Object.keys(t).length===0}function ve(t){return t==null?"":t}function dt(t){return t&&lt(t.destroy)?t.destroy:A}function f(t,e){t.appendChild(e)}function M(t,e,o){t.insertBefore(e,o||null)}function R(t){t.parentNode.removeChild(t)}function rt(t,e){for(let o=0;o<t.length;o+=1)t[o]&&t[o].d(e)}function k(t){return document.createElement(t)}function d(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function V(t){return document.createTextNode(t)}function Z(){return V(" ")}function Me(){return V("")}function ye(t,e,o,l){return t.addEventListener(e,o,l),()=>t.removeEventListener(e,o,l)}function n(t,e,o){o==null?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}function _t(t){return Array.from(t.childNodes)}function Y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e,o,l){o===null?t.style.removeProperty(e):t.style.setProperty(e,o,l?"important":"")}function pt(t,e,{bubbles:o=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,o,l,e),s}let Oe;function ke(t){Oe=t}function it(){if(!Oe)throw new Error("Function called outside component initialization");return Oe}function ht(t){it().$$.on_mount.push(t)}function gt(){const t=it();return(e,o,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=pt(e,o,{cancelable:l});return s.slice().forEach(r=>{r.call(t,i)}),!i.defaultPrevented}return!0}}const Le=[],qe=[],Te=[],ze=[],mt=Promise.resolve();let Ze=!1;function Et(){Ze||(Ze=!0,mt.then(ct))}function Ve(t){Te.push(t)}const Ue=new Set;let Fe=0;function ct(){const t=Oe;do{for(;Fe<Le.length;){const e=Le[Fe];Fe++,ke(e),St(e.$$)}for(ke(null),Le.length=0,Fe=0;qe.length;)qe.pop()();for(let e=0;e<Te.length;e+=1){const o=Te[e];Ue.has(o)||(Ue.add(o),o())}Te.length=0}while(Le.length);for(;ze.length;)ze.pop()();Ze=!1,Ue.clear(),ke(t)}function St(t){if(t.fragment!==null){t.update(),de(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ve)}}const De=new Set;let fe;function xe(){fe={r:0,c:[],p:fe}}function Re(){fe.r||de(fe.c),fe=fe.p}function U(t,e){t&&t.i&&(De.delete(t),t.i(e))}function W(t,e,o,l){if(t&&t.o){if(De.has(t))return;De.add(t),fe.c.push(()=>{De.delete(t),l&&(o&&t.d(1),l())}),t.o(e)}else l&&l()}function vt(t,e){W(t,1,1,()=>{e.delete(t.key)})}function yt(t,e,o,l,s,i,r,c,a,u,_,h){let p=t.length,w=i.length,g=p;const v={};for(;g--;)v[t[g].key]=g;const G=[],y=new Map,b=new Map;for(g=w;g--;){const I=h(s,i,g),N=o(I);let F=r.get(N);F?l&&F.p(I,e):(F=u(N,I),F.c()),y.set(N,G[g]=F),N in v&&b.set(N,Math.abs(g-v[N]))}const B=new Set,x=new Set;function D(I){U(I,1),I.m(c,_),r.set(I.key,I),_=I.first,w--}for(;p&&w;){const I=G[w-1],N=t[p-1],F=I.key,P=N.key;I===N?(_=I.first,p--,w--):y.has(P)?!r.has(F)||B.has(F)?D(I):x.has(P)?p--:b.get(F)>b.get(P)?(x.add(F),D(I)):(B.add(P),p--):(a(N,r),p--)}for(;p--;){const I=t[p];y.has(I.key)||a(I,r)}for(;w;)D(G[w-1]);return G}function ae(t){t&&t.c()}function se(t,e,o,l){const{fragment:s,on_mount:i,on_destroy:r,after_update:c}=t.$$;s&&s.m(e,o),l||Ve(()=>{const a=i.map(st).filter(lt);r?r.push(...a):de(a),t.$$.on_mount=[]}),c.forEach(Ve)}function le(t,e){const o=t.$$;o.fragment!==null&&(de(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function wt(t,e){t.$$.dirty[0]===-1&&(Le.push(t),Et(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function j(t,e,o,l,s,i,r,c=[-1]){const a=Oe;ke(t);const u=t.$$={fragment:null,ctx:null,props:i,update:A,not_equal:s,bound:Xe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Xe(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let _=!1;if(u.ctx=o?o(t,e.props||{},(h,p,...w)=>{const g=w.length?w[0]:p;return u.ctx&&s(u.ctx[h],u.ctx[h]=g)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](g),_&&wt(t,h)),p}):[],u.update(),_=!0,de(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const h=_t(e.target);u.fragment&&u.fragment.l(h),h.forEach(R)}else u.fragment&&u.fragment.c();e.intro&&U(t.$$.fragment),se(t,e.target,e.anchor,e.customElement),ct()}ke(a)}class J{$destroy(){le(this,1),this.$destroy=A}$on(e,o){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(o),()=>{const s=l.indexOf(o);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!ut(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var H=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(H||{}),S=(t=>(t[t.SCREEN_WIDTH=600]="SCREEN_WIDTH",t[t.SCREEN_HEIGHT=400]="SCREEN_HEIGHT",t[t.BLOCK_SIZE=50]="BLOCK_SIZE",t))(S||{}),ce=(t=>(t[t.DELAY=50]="DELAY",t[t.MAX_POINTS=10]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t))(ce||{}),Ee=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(Ee||{}),be=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(be||{});const me=[];function ft(t,e=A){let o;const l=new Set;function s(c){if(q(t,c)&&(t=c,o)){const a=!me.length;for(const u of l)u[1](),me.push(u,t);if(a){for(let u=0;u<me.length;u+=2)me[u][0](me[u+1]);me.length=0}}}function i(c){s(c(t))}function r(c,a=A){const u=[c,a];return l.add(u),l.size===1&&(o=e(s)||A),c(t),()=>{l.delete(u),l.size===0&&(o(),o=null)}}return{set:s,update:i,subscribe:r}}const It=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:o}=ft(t);return{subscribe:o,resetScore:()=>{e(c=>(c.food=0,c.bonus=0,c.score=0,c))},eatFood:()=>{e(c=>(c.food=c.food+1,c.score=c.food*5+c.bonus*20,c.score>c.highScore&&(c.highScore=c.score),c))},getBonus:()=>{e(c=>(c.bonus=c.bonus+1,c))},nextLevel:()=>{e(c=>(c.level=c.level+1,c))}}};let oe=It();function Lt(t){let e,o,l,s,i,r,c,a,u,_,h,p,w,g,v,G;return{c(){e=k("div"),o=d("svg"),l=d("g"),s=d("g"),i=d("g"),r=d("g"),c=d("ellipse"),a=d("g"),u=d("path"),_=d("path"),h=d("g"),p=d("path"),w=d("g"),g=d("path"),v=d("g"),G=d("ellipse"),n(l,"id","Layer_1"),n(c,"id","shadow"),n(c,"opacity","0.3"),n(c,"cx","438.7"),n(c,"cy","765.8"),n(c,"rx","283"),n(c,"ry","32.9"),n(u,"id","cup-shadow"),n(u,"fill","#E7F4FA"),n(u,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),n(_,"id","cup-light"),n(_,"fill","#FFFFFF"),n(_,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),n(p,"id","mainFood"),n(p,"fill","#DB343C"),n(p,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),n(g,"id","highlight"),n(g,"opacity","0.3"),n(g,"fill","#FFFFFF"),n(g,"stroke","#000000"),n(g,"stroke-width","0.25"),n(g,"stroke-miterlimit","10"),n(g,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),n(G,"id","c2"),n(G,"fill","#FFFFFF"),n(G,"cx","436.8"),n(G,"cy","144.3"),n(G,"rx","140.6"),n(G,"ry","138.4"),n(v,"id","c1"),n(s,"id","Layer_2"),n(o,"viewBox","0 0 855.6 798.6"),n(e,"class","food svelte-h8lqdv"),m(e,"left",t[1]+"px"),m(e,"top",t[0]+"px"),m(e,"width",S.BLOCK_SIZE-2+"px"),m(e,"height",S.BLOCK_SIZE-2+"px")},m(y,b){M(y,e,b),f(e,o),f(o,l),f(o,s),f(s,i),f(i,r),f(r,c),f(i,a),f(a,u),f(a,_),f(i,h),f(h,p),f(i,w),f(w,g),f(i,v),f(v,G)},p(y,[b]){b&2&&m(e,"left",y[1]+"px"),b&1&&m(e,"top",y[0]+"px")},i:A,o:A,d(y){y&&R(e)}}}function bt(t,e,o){let{top:l=0}=e,{left:s=0}=e;return t.$$set=i=>{"top"in i&&o(0,l=i.top),"left"in i&&o(1,s=i.left)},[l,s]}class kt extends J{constructor(e){super(),j(this,e,bt,Lt,q,{top:0,left:1})}}function Ot(t){let e,o,l,s,i;return{c(){e=k("div"),o=d("svg"),l=d("style"),s=V(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),i=d("polygon"),n(l,"id","style2"),n(i,"fill","#FFA300"),n(i,"stroke","#EB0000"),n(i,"stroke-width","0.25"),n(i,"stroke-miterlimit","10"),n(i,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),n(i,"class","red"),n(o,"viewBox","0 0 443.3 421.6"),n(e,"class","bonus svelte-y90akj"),m(e,"width",S.BLOCK_SIZE+"px"),m(e,"height",S.BLOCK_SIZE+"px"),m(e,"left",t[0]+"px"),m(e,"top",t[1]+"px")},m(r,c){M(r,e,c),f(e,o),f(o,l),f(l,s),f(o,i)},p(r,[c]){c&1&&m(e,"left",r[0]+"px"),c&2&&m(e,"top",r[1]+"px")},i:A,o:A,d(r){r&&R(e)}}}function Ct(t,e,o){const l=gt();let{left:s}=e,{top:i}=e,{id:r}=e;return ht(()=>{setTimeout(()=>{l("bonusFinished",r)},ce.BONUS_TIME)}),t.$$set=c=>{"left"in c&&o(0,s=c.left),"top"in c&&o(1,i=c.top),"id"in c&&o(2,r=c.id)},[s,i,r]}class Gt extends J{constructor(e){super(),j(this,e,Ct,Ot,q,{left:0,top:1,id:2})}}function Bt(t){let e,o,l,s,i,r,c,a=t[0].playerName+"",u,_,h,p,w,g=t[0].score+"",v,G,y,b,B,x=t[0].food+"",D,I,N,F,P,z=t[0].bonus+"",te,T,L,C,K,ee=t[0].highScore+"",we,Ce,_e,re,E,O=t[0].level+"",$,pe,ie=t[0].stage+"",he,Ge,ge,Be,$e,Ne,He,We;return{c(){e=k("div"),o=k("div"),o.textContent="Snake",l=Z(),s=k("table"),i=k("tr"),r=k("td"),r.textContent="Player",c=k("td"),u=V(a),_=Z(),h=k("tr"),p=k("td"),p.textContent="Score",w=k("td"),v=V(g),G=Z(),y=k("tr"),b=k("td"),b.textContent="Food",B=k("td"),D=V(x),I=Z(),N=k("tr"),F=k("td"),F.textContent="Bonus",P=k("td"),te=V(z),T=Z(),L=k("tr"),C=k("td"),C.textContent="High Score",K=k("td"),we=V(ee),Ce=Z(),_e=k("tr"),re=k("td"),re.textContent="Level-Stage",E=k("td"),$=V(O),pe=k("span"),pe.textContent="-",he=V(ie),Ge=Z(),ge=k("div"),Be=k("button"),Be.textContent="Replay",$e=Z(),Ne=k("button"),Ne.textContent="Menu",n(o,"class","title svelte-mdywih"),n(r,"class","c1 svelte-mdywih"),n(c,"class","c2 svelte-mdywih"),n(p,"class","c1 svelte-mdywih"),n(w,"class","c2 svelte-mdywih"),n(b,"class","c1 svelte-mdywih"),n(B,"class","c2 svelte-mdywih"),n(F,"class","c1 svelte-mdywih"),n(P,"class","c2 svelte-mdywih"),n(C,"class","c1 svelte-mdywih"),n(K,"class","c2 svelte-mdywih"),n(re,"class","c1 svelte-mdywih"),n(E,"class","c2 svelte-mdywih"),n(s,"class","svelte-mdywih"),n(ge,"class","flex svelte-mdywih"),n(e,"class","game-over-screen svelte-mdywih")},m(Q,ne){M(Q,e,ne),f(e,o),f(e,l),f(e,s),f(s,i),f(i,r),f(i,c),f(c,u),f(s,_),f(s,h),f(h,p),f(h,w),f(w,v),f(s,G),f(s,y),f(y,b),f(y,B),f(B,D),f(s,I),f(s,N),f(N,F),f(N,P),f(P,te),f(s,T),f(s,L),f(L,C),f(L,K),f(K,we),f(s,Ce),f(s,_e),f(_e,re),f(_e,E),f(E,$),f(E,pe),f(E,he),f(e,Ge),f(e,ge),f(ge,Be),f(ge,$e),f(ge,Ne),He||(We=[ye(Be,"click",t[2]),ye(Ne,"click",t[1])],He=!0)},p(Q,[ne]){ne&1&&a!==(a=Q[0].playerName+"")&&Y(u,a),ne&1&&g!==(g=Q[0].score+"")&&Y(v,g),ne&1&&x!==(x=Q[0].food+"")&&Y(D,x),ne&1&&z!==(z=Q[0].bonus+"")&&Y(te,z),ne&1&&ee!==(ee=Q[0].highScore+"")&&Y(we,ee),ne&1&&O!==(O=Q[0].level+"")&&Y($,O),ne&1&&ie!==(ie=Q[0].stage+"")&&Y(he,ie)},i:A,o:A,d(Q){Q&&R(e),He=!1,de(We)}}}function Nt(t,e,o){const l=()=>{console.log("restart game"),ue.welcomeScreen()},s=()=>{oe.resetScore(),ue.startGame()};let i;return oe.subscribe(r=>{o(0,i=r)}),[i,l,s]}class Ft extends J{constructor(e){super(),j(this,e,Nt,Bt,q,{})}}function Ye(t){let e;function o(i,r){return i[2]?Dt:i[3]?Tt:At}let l=o(t),s=l(t);return{c(){e=k("div"),s.c(),m(e,"left",t[1]+"px"),m(e,"top",t[0]+"px"),m(e,"width",S.BLOCK_SIZE+"px"),m(e,"height",S.BLOCK_SIZE+"px"),n(e,"class","snake-body svelte-kpsm61")},m(i,r){M(i,e,r),s.m(e,null)},p(i,r){l===(l=o(i))&&s?s.p(i,r):(s.d(1),s=l(i),s&&(s.c(),s.m(e,null))),r&2&&m(e,"left",i[1]+"px"),r&1&&m(e,"top",i[0]+"px")},d(i){i&&R(e),s.d()}}}function At(t){let e,o,l;return{c(){e=d("svg"),o=d("rect"),n(o,"y","77"),n(o,"fill","#0037FF"),n(o,"width","258"),n(o,"height","102"),n(e,"viewBox","0 0 258 258"),n(e,"class",l=ve(t[4])+" svelte-kpsm61")},m(s,i){M(s,e,i),f(e,o)},p(s,i){i&16&&l!==(l=ve(s[4])+" svelte-kpsm61")&&n(e,"class",l)},d(s){s&&R(e)}}}function Tt(t){let e,o,l;return{c(){e=d("svg"),o=d("polygon"),n(o,"fill","#0037FF"),n(o,"points","258,179 0,128 0,128 258,77 "),n(e,"viewBox","0 0 258 258"),n(e,"class",l=ve(t[4])+" svelte-kpsm61")},m(s,i){M(s,e,i),f(e,o)},p(s,i){i&16&&l!==(l=ve(s[4])+" svelte-kpsm61")&&n(e,"class",l)},d(s){s&&R(e)}}}function Dt(t){let e,o,l,s,i,r,c;return{c(){e=d("svg"),o=d("g"),l=d("rect"),s=d("path"),i=d("circle"),r=d("circle"),n(l,"opacity","0"),n(l,"fill","#FFFFFF"),n(l,"width","258"),n(l,"height","258"),n(s,"fill","#0037FF"),n(s,"d",`M147.5,29.2C111.6,29.2,80.1,48,62.6,77H0v104h62.6c17.5,28,49,47.3,84.9,47.3c55,0,99.6-44.6,99.6-99.6\r
          S202.5,29.2,147.5,29.2z`),n(i,"fill","#FFF800"),n(i,"stroke","#000000"),n(i,"stroke-miterlimit","10"),n(i,"cx","184.3"),n(i,"cy","84.5"),n(i,"r","21.8"),n(r,"fill","#FFF800"),n(r,"stroke","#000000"),n(r,"stroke-miterlimit","10"),n(r,"cx","184.3"),n(r,"cy","164.5"),n(r,"r","21.8"),n(e,"viewBox","0 0 258 258"),n(e,"class",c=ve(t[4])+" svelte-kpsm61")},m(a,u){M(a,e,u),f(e,o),f(o,l),f(o,s),f(o,i),f(o,r)},p(a,u){u&16&&c!==(c=ve(a[4])+" svelte-kpsm61")&&n(e,"class",c)},d(a){a&&R(e)}}}function xt(t){let e,o=t[0]>=0&&t[0]<S.SCREEN_HEIGHT&&t[1]>=0&&t[1]<S.SCREEN_WIDTH&&Ye(t);return{c(){o&&o.c(),e=Me()},m(l,s){o&&o.m(l,s),M(l,e,s)},p(l,[s]){l[0]>=0&&l[0]<S.SCREEN_HEIGHT&&l[1]>=0&&l[1]<S.SCREEN_WIDTH?o?o.p(l,s):(o=Ye(l),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:A,o:A,d(l){o&&o.d(l),l&&R(e)}}}function Rt(t,e,o){let{top:l=S.BLOCK_SIZE}=e,{left:s=S.BLOCK_SIZE}=e,{isHead:i=!1}=e,{isTail:r=!1}=e,{direction:c="right"}=e;return t.$$set=a=>{"top"in a&&o(0,l=a.top),"left"in a&&o(1,s=a.left),"isHead"in a&&o(2,i=a.isHead),"isTail"in a&&o(3,r=a.isTail),"direction"in a&&o(4,c=a.direction)},[l,s,i,r,c]}class Mt extends J{constructor(e){super(),j(this,e,Rt,xt,q,{top:0,left:1,isHead:2,isTail:3,direction:4})}}function je(t,e,o){const l=t.slice();return l[2]=e[o],l[4]=o,l}function Je(t){let e,o;return e=new Mt({props:{isHead:t[4]==0,isTail:t[4]==t[0].length-1,top:t[2].top,left:t[2].left,direction:t[1]}}),{c(){ae(e.$$.fragment)},m(l,s){se(e,l,s),o=!0},p(l,s){const i={};s&1&&(i.isTail=l[4]==l[0].length-1),s&1&&(i.top=l[2].top),s&1&&(i.left=l[2].left),s&2&&(i.direction=l[1]),e.$set(i)},i(l){o||(U(e.$$.fragment,l),o=!0)},o(l){W(e.$$.fragment,l),o=!1},d(l){le(e,l)}}}function Ht(t){let e,o,l=t[0],s=[];for(let r=0;r<l.length;r+=1)s[r]=Je(je(t,l,r));const i=r=>W(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=Me()},m(r,c){for(let a=0;a<s.length;a+=1)s[a].m(r,c);M(r,e,c),o=!0},p(r,[c]){if(c&3){l=r[0];let a;for(a=0;a<l.length;a+=1){const u=je(r,l,a);s[a]?(s[a].p(u,c),U(s[a],1)):(s[a]=Je(u),s[a].c(),U(s[a],1),s[a].m(e.parentNode,e))}for(xe(),a=l.length;a<s.length;a+=1)i(a);Re()}},i(r){if(!o){for(let c=0;c<l.length;c+=1)U(s[c]);o=!0}},o(r){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)W(s[c]);o=!1},d(r){rt(s,r),r&&R(e)}}}function Ut(t,e,o){let{snakeBodies:l=[]}=e,{direction:s="right"}=e;return t.$$set=i=>{"snakeBodies"in i&&o(0,l=i.snakeBodies),"direction"in i&&o(1,s=i.direction)},[l,s]}class Kt extends J{constructor(e){super(),j(this,e,Ut,Ht,q,{snakeBodies:0,direction:1})}}var Pe=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(Pe||{});const Se=[{bg:"#affbaf",wall:[{type:0,top:S.BLOCK_SIZE*2,left:S.BLOCK_SIZE*2},{type:1,top:S.BLOCK_SIZE*2,left:S.BLOCK_SIZE*3},{type:1,top:S.BLOCK_SIZE*2,left:S.BLOCK_SIZE*4},{type:0,top:S.BLOCK_SIZE*2,left:S.BLOCK_SIZE*5},{type:2,top:S.BLOCK_SIZE,left:S.BLOCK_SIZE*3},{type:2,top:S.BLOCK_SIZE*3,left:S.BLOCK_SIZE*4}]},{bg:"#fda2f2",wall:[{type:0,top:200,left:100},{type:1,top:200,left:125},{type:1,top:200,left:150},{type:0,top:200,left:175},{type:2,top:175,left:125},{type:2,top:225,left:150}]},{bg:"#7f61bb",wall:[]},{bg:"#c34366",wall:[]}],Zt=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);function Vt(t){let e,o,l;return{c(){e=k("div"),o=k("h1"),l=V(t[0]),n(o,"class","svelte-1x8upsq"),n(e,"class","message-box svelte-1x8upsq")},m(s,i){M(s,e,i),f(e,o),f(o,l)},p(s,[i]){i&1&&Y(l,s[0])},i:A,o:A,d(s){s&&R(e)}}}function Pt(t,e,o){let{message:l=""}=e;return t.$$set=s=>{"message"in s&&o(0,l=s.message)},[l]}class $t extends J{constructor(e){super(),j(this,e,Pt,Vt,q,{message:0})}}function Wt(t){let e,o,l,s,i,r,c,a,u;return{c(){e=d("svg"),o=d("radialGradient"),l=d("stop"),s=d("stop"),i=d("rect"),r=d("linearGradient"),c=d("stop"),a=d("stop"),u=d("rect"),n(l,"offset","0"),m(l,"stop-color","#333333"),n(s,"offset","1"),m(s,"stop-color","#000000"),n(o,"id","rock_svgid"),n(o,"cx","219.5"),n(o,"cy","219.5"),n(o,"r","219"),n(o,"gradientUnits","userSpaceOnUse"),n(i,"x","0.5"),n(i,"y","0.5"),n(i,"fill","url(#rock_svgid)"),n(i,"stroke","#000000"),n(i,"stroke-miterlimit","10"),n(i,"width","438"),n(i,"height","438"),n(c,"offset","0"),m(c,"stop-color","#000000"),m(c,"stop-opacity","0"),n(a,"offset","1"),m(a,"stop-color","#FFFFFF"),m(a,"stop-opacity","0.5"),n(r,"id","rock_svgid2"),n(r,"gradientUnits","userSpaceOnUse"),n(r,"x1","219"),n(r,"y1","431"),n(r,"x2","219"),n(r,"y2","9.0005"),n(u,"x","8"),n(u,"y","9"),n(u,"fill","url(#rock_svgid2)"),n(u,"width","422"),n(u,"height","422"),n(e,"viewBox","0 0 439 439")},m(_,h){M(_,e,h),f(e,o),f(o,l),f(o,s),f(e,i),f(e,r),f(r,c),f(r,a),f(e,u)},d(_){_&&R(e)}}}function Xt(t){let e,o,l,s,i,r,c,a,u,_,h,p,w,g,v,G,y,b,B,x,D,I;return{c(){e=d("svg"),o=d("g"),l=d("linearGradient"),s=d("stop"),i=d("stop"),r=d("rect"),c=d("linearGradient"),a=d("stop"),u=d("stop"),_=d("rect"),h=d("linearGradient"),p=d("stop"),w=d("stop"),g=d("polygon"),v=d("linearGradient"),G=d("stop"),y=d("stop"),b=d("rect"),B=d("linearGradient"),x=d("stop"),D=d("stop"),I=d("rect"),n(s,"offset","0"),m(s,"stop-color","#998675"),n(i,"offset","1"),m(i,"stop-color","#C7B299"),n(l,"id","concrete_SVGID_1_"),n(l,"gradientUnits","userSpaceOnUse"),n(l,"x1","4"),n(l,"y1","96.5"),n(l,"x2","281"),n(l,"y2","96.5"),n(r,"x","4"),n(r,"y","4"),n(r,"fill","url(#concrete_SVGID_1_)"),n(r,"stroke","#CABD99"),n(r,"stroke-width","8"),n(r,"stroke-miterlimit","10"),n(r,"width","277"),n(r,"height","185"),n(a,"offset","0"),m(a,"stop-color","#998675"),n(u,"offset","1"),m(u,"stop-color","#C7B299"),n(c,"id","concrete_SVGID_2_"),n(c,"gradientUnits","userSpaceOnUse"),n(c,"x1","420"),n(c,"y1","189"),n(c,"x2","420"),n(c,"y2","4"),n(_,"x","281"),n(_,"y","4"),n(_,"fill","url(#concrete_SVGID_2_)"),n(_,"stroke","#CABD99"),n(_,"stroke-width","8"),n(_,"stroke-miterlimit","10"),n(_,"width","278"),n(_,"height","185"),n(p,"offset","0"),m(p,"stop-color","#998675"),n(w,"offset","1"),m(w,"stop-color","#C7B299"),n(h,"id","concrete_SVGID_3_"),n(h,"gradientUnits","userSpaceOnUse"),n(h,"x1","281.5"),n(h,"y1","374"),n(h,"x2","281.5"),n(h,"y2","189.0005"),n(g,"fill","url(#concrete_SVGID_3_)"),n(g,"stroke","#CABD99"),n(g,"stroke-width","8"),n(g,"stroke-miterlimit","10"),n(g,"points",`281,189 4,189 4,374 281,374 \r
    559,374 559,189 	`),n(G,"offset","0"),m(G,"stop-color","#998675"),n(y,"offset","1"),m(y,"stop-color","#C7B299"),n(v,"id","concrete_SVGID_4_"),n(v,"gradientUnits","userSpaceOnUse"),n(v,"x1","4"),n(v,"y1","466.5"),n(v,"x2","281"),n(v,"y2","466.5"),n(b,"x","4"),n(b,"y","374"),n(b,"fill","url(#concrete_SVGID_4_)"),n(b,"stroke","#CABD99"),n(b,"stroke-width","8"),n(b,"stroke-miterlimit","10"),n(b,"width","277"),n(b,"height","185"),n(x,"offset","0"),m(x,"stop-color","#998675"),n(D,"offset","1"),m(D,"stop-color","#C7B299"),n(B,"id","concrete_SVGID_5_"),n(B,"gradientUnits","userSpaceOnUse"),n(B,"x1","281"),n(B,"y1","466.5"),n(B,"x2","559"),n(B,"y2","466.5"),n(I,"x","281"),n(I,"y","374"),n(I,"fill","url(#concrete_SVGID_5_)"),n(I,"stroke","#CABD99"),n(I,"stroke-width","8"),n(I,"stroke-miterlimit","10"),n(I,"width","278"),n(I,"height","185"),n(e,"viewBox","0 0 563 563")},m(N,F){M(N,e,F),f(e,o),f(o,l),f(l,s),f(l,i),f(o,r),f(o,c),f(c,a),f(c,u),f(o,_),f(o,h),f(h,p),f(h,w),f(o,g),f(o,v),f(v,G),f(v,y),f(o,b),f(o,B),f(B,x),f(B,D),f(o,I)},d(N){N&&R(e)}}}function qt(t){let e,o,l,s,i,r,c,a,u,_,h,p,w,g,v,G,y,b,B,x,D,I;return{c(){e=d("svg"),o=d("g"),l=d("linearGradient"),s=d("stop"),i=d("stop"),r=d("rect"),c=d("linearGradient"),a=d("stop"),u=d("stop"),_=d("rect"),h=d("linearGradient"),p=d("stop"),w=d("stop"),g=d("polygon"),v=d("linearGradient"),G=d("stop"),y=d("stop"),b=d("rect"),B=d("linearGradient"),x=d("stop"),D=d("stop"),I=d("rect"),n(s,"offset","0"),m(s,"stop-color","#9E2000"),n(i,"offset","1"),m(i,"stop-color","#F15A24"),n(l,"id","brick_SVGID_1_"),n(l,"gradientUnits","userSpaceOnUse"),n(l,"x1","4"),n(l,"y1","96.5"),n(l,"x2","281"),n(l,"y2","96.5"),n(r,"x","4"),n(r,"y","4"),n(r,"fill","url(#brick_SVGID_1_)"),n(r,"stroke","#000000"),n(r,"stroke-width","8"),n(r,"stroke-miterlimit","10"),n(r,"width","277"),n(r,"height","185"),n(a,"offset","0"),m(a,"stop-color","#9E2000"),n(u,"offset","1"),m(u,"stop-color","#F15A24"),n(c,"id","SVGID_2_"),n(c,"gradientUnits","userSpaceOnUse"),n(c,"x1","420"),n(c,"y1","189"),n(c,"x2","420"),n(c,"y2","4"),n(_,"x","281"),n(_,"y","4"),n(_,"fill","url(#SVGID_2_)"),n(_,"stroke","#000000"),n(_,"stroke-width","8"),n(_,"stroke-miterlimit","10"),n(_,"width","278"),n(_,"height","185"),n(p,"offset","0"),m(p,"stop-color","#9E2000"),n(w,"offset","1"),m(w,"stop-color","#F15A24"),n(h,"id","SVGID_3_"),n(h,"gradientUnits","userSpaceOnUse"),n(h,"x1","281.5"),n(h,"y1","374"),n(h,"x2","281.5"),n(h,"y2","189.0005"),n(g,"fill","url(#SVGID_3_)"),n(g,"stroke","#000000"),n(g,"stroke-width","8"),n(g,"stroke-miterlimit","10"),n(g,"points",`281,189 4,189 4,374 281,374 \r
            559,374 559,189 	`),n(G,"offset","0"),m(G,"stop-color","#9E2000"),n(y,"offset","1"),m(y,"stop-color","#F15A24"),n(v,"id","SVGID_4_"),n(v,"gradientUnits","userSpaceOnUse"),n(v,"x1","4"),n(v,"y1","466.5"),n(v,"x2","281"),n(v,"y2","466.5"),n(b,"x","4"),n(b,"y","374"),n(b,"fill","url(#SVGID_4_)"),n(b,"stroke","#000000"),n(b,"stroke-width","8"),n(b,"stroke-miterlimit","10"),n(b,"width","277"),n(b,"height","185"),n(x,"offset","0"),m(x,"stop-color","#9E2000"),n(D,"offset","1"),m(D,"stop-color","#F15A24"),n(B,"id","SVGID_5_"),n(B,"gradientUnits","userSpaceOnUse"),n(B,"x1","281"),n(B,"y1","466.5"),n(B,"x2","559"),n(B,"y2","466.5"),n(I,"x","281"),n(I,"y","374"),n(I,"fill","url(#SVGID_5_)"),n(I,"stroke","#000000"),n(I,"stroke-width","8"),n(I,"stroke-miterlimit","10"),n(I,"width","278"),n(I,"height","185"),n(e,"viewBox","0 0 563 563")},m(N,F){M(N,e,F),f(e,o),f(o,l),f(l,s),f(l,i),f(o,r),f(o,c),f(c,a),f(c,u),f(o,_),f(o,h),f(h,p),f(h,w),f(o,g),f(o,v),f(v,G),f(v,y),f(o,b),f(o,B),f(B,x),f(B,D),f(o,I)},d(N){N&&R(e)}}}function zt(t){let e;function o(i,r){return i[0].type==Pe.DEFAULT?qt:i[0].type==Pe.CONCRETE?Xt:Wt}let l=o(t),s=l(t);return{c(){e=k("div"),s.c(),n(e,"class","brick svelte-1ezhfpr"),m(e,"top",t[0].top+"px"),m(e,"left",t[0].left+"px"),m(e,"width",S.BLOCK_SIZE+"px"),m(e,"height",S.BLOCK_SIZE+"px")},m(i,r){M(i,e,r),s.m(e,null)},p(i,[r]){l!==(l=o(i))&&(s.d(1),s=l(i),s&&(s.c(),s.m(e,null))),r&1&&m(e,"top",i[0].top+"px"),r&1&&m(e,"left",i[0].left+"px")},i:A,o:A,d(i){i&&R(e),s.d()}}}function Yt(t,e,o){let{data:l}=e;return t.$$set=s=>{"data"in s&&o(0,l=s.data)},[l]}class jt extends J{constructor(e){super(),j(this,e,Yt,zt,q,{data:0})}}function Qe(t,e,o){const l=t.slice();return l[2]=e[o],l}function et(t){let e,o;return e=new jt({props:{data:t[2]}}),{c(){ae(e.$$.fragment)},m(l,s){se(e,l,s),o=!0},p(l,s){const i={};s&1&&(i.data=l[2]),e.$set(i)},i(l){o||(U(e.$$.fragment,l),o=!0)},o(l){W(e.$$.fragment,l),o=!1},d(l){le(e,l)}}}function Jt(t){let e,o,l=t[0],s=[];for(let r=0;r<l.length;r+=1)s[r]=et(Qe(t,l,r));const i=r=>W(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=Me()},m(r,c){for(let a=0;a<s.length;a+=1)s[a].m(r,c);M(r,e,c),o=!0},p(r,[c]){if(c&1){l=r[0];let a;for(a=0;a<l.length;a+=1){const u=Qe(r,l,a);s[a]?(s[a].p(u,c),U(s[a],1)):(s[a]=et(u),s[a].c(),U(s[a],1),s[a].m(e.parentNode,e))}for(xe(),a=l.length;a<s.length;a+=1)i(a);Re()}},i(r){if(!o){for(let c=0;c<l.length;c+=1)U(s[c]);o=!0}},o(r){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)W(s[c]);o=!1},d(r){rt(s,r),r&&R(e)}}}function Qt(t,e,o){let l,s;return oe.subscribe(i=>{o(1,s=i)}),t.$$.update=()=>{t.$$.dirty&2&&o(0,l=Se[s.level-1].wall)},[l,s]}class en extends J{constructor(e){super(),j(this,e,Qt,Jt,q,{})}}function tt(t,e,o){const l=t.slice();return l[37]=e[o],l}function nt(t,e){let o,l,s;return l=new Gt({props:{id:e[37].id,left:e[37].left,top:e[37].top}}),l.$on("bonusFinished",e[9]),{key:t,first:null,c(){o=Me(),ae(l.$$.fragment),this.first=o},m(i,r){M(i,o,r),se(l,i,r),s=!0},p(i,r){e=i;const c={};r[0]&128&&(c.id=e[37].id),r[0]&128&&(c.left=e[37].left),r[0]&128&&(c.top=e[37].top),l.$set(c)},i(i){s||(U(l.$$.fragment,i),s=!0)},o(i){W(l.$$.fragment,i),s=!1},d(i){i&&R(o),le(l,i)}}}function ot(t){let e,o;return e=new $t({props:{message:t[2]}}),{c(){ae(e.$$.fragment)},m(l,s){se(e,l,s),o=!0},p(l,s){const i={};s[0]&4&&(i.message=l[2]),e.$set(i)},i(l){o||(U(e.$$.fragment,l),o=!0)},o(l){W(e.$$.fragment,l),o=!1},d(l){le(e,l)}}}function tn(t){let e,o,l,s,i,r,c,a=[],u=new Map,_,h,p,w,g=t[0].level+"",v,G,y=t[0].score+"",b,B,x,D=t[0].bonus+"",I,N,F,P;o=new en({}),s=new Kt({props:{direction:t[5],snakeBodies:t[6]}}),r=new kt({props:{left:t[3],top:t[4]}});let z=t[7];const te=L=>L[37].id;for(let L=0;L<z.length;L+=1){let C=tt(t,z,L),K=te(C);u.set(K,a[L]=nt(K,C))}let T=t[1]==!0&&ot(t);return{c(){e=k("main"),ae(o.$$.fragment),l=Z(),ae(s.$$.fragment),i=Z(),ae(r.$$.fragment),c=Z();for(let L=0;L<a.length;L+=1)a[L].c();_=Z(),T&&T.c(),h=Z(),p=k("div"),w=k("div"),v=V(g),G=V(" : "),b=V(y),B=Z(),x=k("div"),I=V(D),m(e,"width",S.SCREEN_WIDTH+"px"),m(e,"height",S.SCREEN_HEIGHT+"px"),m(e,"background",Se[t[0].level].bg),n(e,"class","svelte-sjb5bh"),n(p,"class","score svelte-sjb5bh")},m(L,C){M(L,e,C),se(o,e,null),f(e,l),se(s,e,null),f(e,i),se(r,e,null),f(e,c);for(let K=0;K<a.length;K+=1)a[K].m(e,null);f(e,_),T&&T.m(e,null),M(L,h,C),M(L,p,C),f(p,w),f(w,v),f(w,G),f(w,b),f(p,B),f(p,x),f(x,I),N=!0,F||(P=ye(window,"keydown",t[8]),F=!0)},p(L,C){const K={};C[0]&32&&(K.direction=L[5]),C[0]&64&&(K.snakeBodies=L[6]),s.$set(K);const ee={};C[0]&8&&(ee.left=L[3]),C[0]&16&&(ee.top=L[4]),r.$set(ee),C[0]&640&&(z=L[7],xe(),a=yt(a,C,te,1,L,z,u,e,vt,nt,_,tt),Re()),L[1]==!0?T?(T.p(L,C),C[0]&2&&U(T,1)):(T=ot(L),T.c(),U(T,1),T.m(e,null)):T&&(xe(),W(T,1,1,()=>{T=null}),Re()),(!N||C[0]&1)&&m(e,"background",Se[L[0].level].bg),(!N||C[0]&1)&&g!==(g=L[0].level+"")&&Y(v,g),(!N||C[0]&1)&&y!==(y=L[0].score+"")&&Y(b,y),(!N||C[0]&1)&&D!==(D=L[0].bonus+"")&&Y(I,D)},i(L){if(!N){U(o.$$.fragment,L),U(s.$$.fragment,L),U(r.$$.fragment,L);for(let C=0;C<z.length;C+=1)U(a[C]);U(T),N=!0}},o(L){W(o.$$.fragment,L),W(s.$$.fragment,L),W(r.$$.fragment,L);for(let C=0;C<a.length;C+=1)W(a[C]);W(T),N=!1},d(L){L&&R(e),le(o),le(s),le(r);for(let C=0;C<a.length;C+=1)a[C].d();T&&T.d(),L&&R(h),L&&R(p),F=!1,P()}}}function nn(t,e,o){let l=!1,s=!1,i=be.NEXT_LEVEL,r=!1,c;ue.subscribe(E=>{}),oe.subscribe(E=>{o(0,c=E)});const a=()=>{y(be.GAME_OVER),clearInterval(g),setTimeout(()=>{b(),T(),ue.gameOver()},ce.MESSAGE_TIME)};let u=0,_=0,h=H.RIGHT,p=[],w=[],g;const v=S.SCREEN_WIDTH,G=S.SCREEN_HEIGHT,y=E=>{o(2,i=E),o(1,s=!0)},b=()=>{o(1,s=!1),o(2,i=be.GAME_OVER)},B=()=>{y(be.NEXT_LEVEL),clearInterval(g),setTimeout(()=>{b(),oe.nextLevel(),oe.resetScore(),F(),T()},ce.MESSAGE_TIME)},x=E=>{w.forEach(O=>{P(E,O)&&(re(O.id),oe.getBonus())})},D=()=>{p.length/ce.MAX_POINTS>1&&p.length%ce.MAX_POINTS==0&&(c.level<Se.length-1?B():(clearInterval(g),ue.allLevelsCleared()))},I=()=>{let{left:E,top:O}=p[0];return h===H.UP?O-=S.BLOCK_SIZE:h===H.DOWN?O+=S.BLOCK_SIZE:h===H.LEFT?E-=S.BLOCK_SIZE:h===H.RIGHT&&(E+=S.BLOCK_SIZE),{left:E,top:O}},N=E=>{P(E,{left:u,top:_})&&(o(6,p=[...p,p[p.length-1]]),oe.eatFood(),te(),c.food%5==0&&_e())},F=()=>{let E=Se.length-c.level;E=E*ce.DELAY,g=setInterval(()=>{r=!0,C()&&(r=!1,a()),L();const O=I();x(O),p.pop(),o(6,p=[O,...p]),N(O),D(),r=!1},E)},P=(E,O)=>!(E.top<O.top||E.top>O.top||E.left<O.left||E.left>O.left),z=()=>{let E=0,O=0,$={top:E,left:O};const pe=Math.floor(G/S.BLOCK_SIZE),ie=Math.floor(v/S.BLOCK_SIZE);console.log(ie,pe),E=Math.floor(Math.random()*pe)*S.BLOCK_SIZE,O=Math.floor(Math.random()*ie)*S.BLOCK_SIZE,$={top:E,left:O},console.log("162",$);const he=[];return p.forEach(Ge=>{he.push(Ge)}),console.log(he),$},te=()=>{const{top:E,left:O}=z();o(3,u=O),o(4,_=E)},T=()=>{te(),o(5,h=H.RIGHT),o(6,p=[{left:S.BLOCK_SIZE*2,top:0},{left:S.BLOCK_SIZE,top:0},{left:0,top:0}])},L=()=>{const{top:E,left:O}=p[0];O+S.BLOCK_SIZE,E+S.BLOCK_SIZE,O>=v&&h==H.RIGHT&&o(6,p[0].left=-2*S.BLOCK_SIZE,p),O<0&&h==H.LEFT&&o(6,p[0].left=v+S.BLOCK_SIZE,p),E<0&&h==H.UP&&o(6,p[0].top=G+S.BLOCK_SIZE,p),E>=G&&h==H.DOWN&&o(6,p[0].top=-2*S.BLOCK_SIZE,p)},C=()=>p.slice(1).filter($=>P($,p[0])).length>0,K=()=>{clearInterval(g)},ee=E=>E===Ee.UP&&h!=H.DOWN?H.UP:E===Ee.RIGHT&&h!=H.LEFT?H.RIGHT:E===Ee.LEFT&&h!=H.RIGHT?H.LEFT:E===Ee.DOWN&&h!=H.UP?H.DOWN:H.UNKNOWN,we=E=>{if(r)return;const O=E.code;if(O===Ee.SPACEBAR&&(l=!l,l?K():F()),l)return;const $=ee(O);$!=H.UNKNOWN&&o(5,h=$)},Ce=E=>{re(E.detail)},_e=()=>{const E=Zt();let O={top:0,left:0,id:E};O.top=Math.floor(Math.random()*(G/S.BLOCK_SIZE))*S.BLOCK_SIZE,O.left=Math.floor(Math.random()*(v/S.BLOCK_SIZE))*S.BLOCK_SIZE,w.push(O),o(7,w)},re=E=>{const O=w.findIndex($=>$.id==E);O!=-1&&(w.splice(O,1),o(7,w))};return F(),T(),t.$$.update=()=>{t.$$.dirty[0]&1&&Se[c.level-1].wall},[c,s,i,u,_,h,p,w,we,Ce]}class Ke extends J{constructor(e){super(),j(this,e,nn,tn,q,{},null,[-1,-1])}}function on(t){let e,o,l,s,i,r,c;return{c(){e=k("div"),o=k("div"),o.textContent="Snake",l=Z(),s=k("div"),i=k("button"),i.textContent="Start",n(o,"class","title svelte-yxm8be"),n(s,"class","btn svelte-yxm8be"),n(e,"class","start-screen svelte-yxm8be")},m(a,u){M(a,e,u),f(e,o),f(e,l),f(e,s),f(s,i),r||(c=ye(i,"click",t[0]),r=!0)},p:A,i:A,o:A,d(a){a&&R(e),r=!1,c()}}}function sn(t){return[()=>{console.log("start game"),ue.startGame()}]}class ln extends J{constructor(e){super(),j(this,e,sn,on,q,{})}}function rn(t){let e,o,l,s,i,r,c,a;return{c(){e=k("div"),o=k("div"),o.textContent="Congratulations !",l=Z(),s=k("div"),s.textContent="You have cleared all the levels.",i=Z(),r=k("button"),r.textContent="Menu",n(o,"class","title svelte-gyhhqq"),n(e,"class","final svelte-gyhhqq")},m(u,_){M(u,e,_),f(e,o),f(e,l),f(e,s),f(e,i),f(e,r),c||(a=ye(r,"click",t[0]),c=!0)},p:A,i:A,o:A,d(u){u&&R(e),c=!1,a()}}}function cn(t){return[()=>{console.log("restart game"),ue.welcomeScreen()}]}class fn extends J{constructor(e){super(),j(this,e,cn,rn,q,{})}}var X=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(X||{});const an=()=>{const t=[{status:X.NOT_STARTED,component:ln},{status:X.RUNNING,component:Ke},{status:X.PAUSED,component:Ke},{status:X.RESUME,component:Ke},{status:X.GAME_OVER,component:Ft},{status:X.ALL_LEVELS_CLEARED,component:fn}];let{update:e,subscribe:o}=ft(t.find(u=>u.status==X.NOT_STARTED));return{subscribe:o,startGame:()=>{e(u=>(u=t.find(_=>_.status==X.RUNNING),u))},pauseGame:()=>{e(u=>(u=t.find(_=>_.status==X.PAUSED),u))},resumeGame:()=>{e(u=>(u=t.find(_=>_.status==X.RUNNING),u))},gameOver:()=>{e(u=>(u=t.find(_=>_.status==X.GAME_OVER),u))},welcomeScreen:()=>{e(u=>(u=t.find(_=>_.status==X.NOT_STARTED),u))},allLevelsCleared:()=>{e(u=>(u=t.find(_=>_.status==X.ALL_LEVELS_CLEARED),u))}}},ue=an();const un=300,dn=60,at="none";function Ie(t,e,o){return t.addEventListener(e,o),()=>t.removeEventListener(e,o)}function _n(t,e){return e.filter(o=>t.pointerId!==o.pointerId)}function Ae(t,e,o,l,s){t.dispatchEvent(new CustomEvent(`${e}${s}`,{detail:{event:o,pointersCount:l.length}}))}function pn(t,e,o,l,s,i=at){e.style.touchAction=i;let r=[];function c(u){r.push(u),Ae(e,t,u,r,"down"),l==null||l(r,u);const _=u.pointerId;function h(y){_===y.pointerId&&(r=_n(y,r),r.length||p(),Ae(e,t,y,r,"up"),s==null||s(r,y))}function p(){w(),g(),v(),G()}const w=Ie(e,"pointermove",y=>{r=r.map(b=>y.pointerId===b.pointerId?y:b),Ae(e,t,y,r,"move"),o==null||o(r,y)}),g=Ie(e,"lostpointercapture",y=>{h(y)}),v=Ie(e,"pointerup",y=>{h(y)}),G=Ie(e,"pointerleave",y=>{r=[],p(),Ae(e,t,y,r,"up"),s==null||s(r,y)})}const a=Ie(e,"pointerdown",c);return{destroy:()=>{a()}}}function hn(t,e={timeframe:un,minSwipeDistance:dn,touchAction:at}){const o="swipe";let l,s,i,r;function c(u,_){s=_.clientX,i=_.clientY,l=Date.now(),u.length===1&&(r=_.target)}function a(u,_){if(_.type==="pointerup"&&u.length===0&&Date.now()-l<e.timeframe){const h=_.clientX-s,p=_.clientY-i,w=Math.abs(h),g=Math.abs(p);let v=null;w>=2*g&&w>e.minSwipeDistance?v=h>0?"right":"left":g>=2*w&&g>e.minSwipeDistance&&(v=p>0?"bottom":"top"),v&&t.dispatchEvent(new CustomEvent(o,{detail:{direction:v,target:r}}))}}return pn(o,t,null,c,a,e.touchAction)}function gn(t){let e,o,l,s,i;return{c(){e=k("div"),o=V("direction: "),l=V(t[0]),n(e,"class","svelte-1lnhq98")},m(r,c){M(r,e,c),f(e,o),f(e,l),s||(i=[dt(hn.call(null,e,{timeframe:300,minSwipeDistance:60,touchAction:"none"})),ye(e,"swipe",t[1])],s=!0)},p(r,[c]){c&1&&Y(l,r[0])},i:A,o:A,d(r){r&&R(e),s=!1,de(i)}}}function mn(t,e,o){let l;function s(i){o(0,l=i.detail.direction),i.detail.target}return[l,s]}class En extends J{constructor(e){super(),j(this,e,mn,gn,q,{})}}new En({target:document.getElementById("app")});
