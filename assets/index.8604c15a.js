(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function w(){}function qe(t){return t()}function De(){return Object.create(null)}function ce(t){t.forEach(qe)}function Qe(t){return typeof t=="function"}function V(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function et(t){return Object.keys(t).length===0}function u(t,e){t.appendChild(e)}function G(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode.removeChild(t)}function tt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function U(t){return document.createTextNode(t)}function R(){return U(" ")}function ze(){return U("")}function de(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function nt(t){return Array.from(t.childNodes)}function q(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function I(t,e,n,o){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function st(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,o,e),s}let _e;function ue(t){_e=t}function Xe(){if(!_e)throw new Error("Function called outside component initialization");return _e}function ot(t){Xe().$$.on_mount.push(t)}function lt(){const t=Xe();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=st(e,n,{cancelable:o});return s.slice().forEach(l=>{l.call(t,i)}),!i.defaultPrevented}return!0}}const fe=[],Ue=[],Le=[],Ze=[],rt=Promise.resolve();let Ae=!1;function it(){Ae||(Ae=!0,rt.then(Ye))}function Re(t){Le.push(t)}const Te=new Set;let be=0;function Ye(){const t=_e;do{for(;be<fe.length;){const e=fe[be];be++,ue(e),ct(e.$$)}for(ue(null),fe.length=0,be=0;Ue.length;)Ue.pop()();for(let e=0;e<Le.length;e+=1){const n=Le[e];Te.has(n)||(Te.add(n),n())}Le.length=0}while(fe.length);for(;Ze.length;)Ze.pop()();Ae=!1,Te.clear(),ue(t)}function ct(t){if(t.fragment!==null){t.update(),ce(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Re)}}const Ie=new Set;let J;function Ge(){J={r:0,c:[],p:J}}function He(){J.r||ce(J.c),J=J.p}function Z(t,e){t&&t.i&&(Ie.delete(t),t.i(e))}function W(t,e,n,o){if(t&&t.o){if(Ie.has(t))return;Ie.add(t),J.c.push(()=>{Ie.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function ft(t,e){W(t,1,1,()=>{e.delete(t.key)})}function ut(t,e,n,o,s,i,l,c,f,r,p,L){let S=t.length,b=i.length,y=S;const O={};for(;y--;)O[t[y].key]=y;const H=[],K=new Map,T=new Map;for(y=b;y--;){const m=L(s,i,y),C=n(m);let k=l.get(C);k?o&&k.p(m,e):(k=r(C,m),k.c()),K.set(C,H[y]=k),C in O&&T.set(C,Math.abs(y-O[C]))}const x=new Set,a=new Set;function _(m){Z(m,1),m.m(c,p),l.set(m.key,m),p=m.first,b--}for(;S&&b;){const m=H[b-1],C=t[S-1],k=m.key,P=C.key;m===C?(p=m.first,S--,b--):K.has(P)?!l.has(k)||x.has(k)?_(m):a.has(P)?S--:T.get(k)>T.get(P)?(a.add(k),_(m)):(x.add(P),S--):(f(C,l),S--)}for(;S--;){const m=t[S];K.has(m.key)||f(m,l)}for(;b;)_(H[b-1]);return H}function ie(t){t&&t.c()}function Q(t,e,n,o){const{fragment:s,on_mount:i,on_destroy:l,after_update:c}=t.$$;s&&s.m(e,n),o||Re(()=>{const f=i.map(qe).filter(Qe);l?l.push(...f):ce(f),t.$$.on_mount=[]}),c.forEach(Re)}function ee(t,e){const n=t.$$;n.fragment!==null&&(ce(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function at(t,e){t.$$.dirty[0]===-1&&(fe.push(t),it(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(t,e,n,o,s,i,l,c=[-1]){const f=_e;ue(t);const r=t.$$={fragment:null,ctx:null,props:i,update:w,not_equal:s,bound:De(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:De(),dirty:c,skip_bound:!1,root:e.target||f.$$.root};l&&l(r.root);let p=!1;if(r.ctx=n?n(t,e.props||{},(L,S,...b)=>{const y=b.length?b[0]:S;return r.ctx&&s(r.ctx[L],r.ctx[L]=y)&&(!r.skip_bound&&r.bound[L]&&r.bound[L](y),p&&at(t,L)),S}):[],r.update(),p=!0,ce(r.before_update),r.fragment=o?o(r.ctx):!1,e.target){if(e.hydrate){const L=nt(e.target);r.fragment&&r.fragment.l(L),L.forEach(A)}else r.fragment&&r.fragment.c();e.intro&&Z(t.$$.fragment),Q(t,e.target,e.anchor,e.customElement),Ye()}ue(f)}class X{$destroy(){ee(this,1),this.$destroy=w}$on(e,n){const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(e){this.$$set&&!et(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var N=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(N||{}),E=(t=>(t[t.SCREEN_WIDTH=600]="SCREEN_WIDTH",t[t.SCREEN_HEIGHT=400]="SCREEN_HEIGHT",t[t.BLOCK_SIZE=25]="BLOCK_SIZE",t))(E||{}),ae=(t=>(t[t.DELAY=50]="DELAY",t[t.MAX_POINTS=10]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t))(ae||{}),le=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(le||{});const oe=[];function Je(t,e=w){let n;const o=new Set;function s(c){if(V(t,c)&&(t=c,n)){const f=!oe.length;for(const r of o)r[1](),oe.push(r,t);if(f){for(let r=0;r<oe.length;r+=2)oe[r][0](oe[r+1]);oe.length=0}}}function i(c){s(c(t))}function l(c,f=w){const r=[c,f];return o.add(r),o.size===1&&(n=e(s)||w),c(t),()=>{o.delete(r),o.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:l}}const dt=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=Je(t);return{subscribe:n,resetScore:()=>{e(l=>(l.food=0,l.bonus=0,l.score=0,l))},eatFood:()=>{e(l=>(l.food=l.food+1,l.score=l.food*5+l.bonus*20,l.score>l.highScore&&(l.highScore=l.score),l))},nextLevel:()=>{e(l=>(l.level=l.level+1,l))}}};let re=dt();function _t(t){let e,n,o,s,i,l,c,f=t[0].playerName+"",r,p,L,S,b,y=t[0].score+"",O,H,K,T,x,a=t[0].food+"",_,m,C,k,P,te=t[0].bonus+"",h,v,B,D,F,he=t[0].highScore+"",Ce,xe,pe,me,ne,ge=t[0].level+"",Ne,Oe,Ee=t[0].stage+"",we,Me,se,ve,Ke,Se,Be,Pe;return{c(){e=d("div"),n=d("div"),n.textContent="Snake",o=R(),s=d("table"),i=d("tr"),l=d("td"),l.textContent="Player",c=d("td"),r=U(f),p=R(),L=d("tr"),S=d("td"),S.textContent="Score",b=d("td"),O=U(y),H=R(),K=d("tr"),T=d("td"),T.textContent="Food",x=d("td"),_=U(a),m=R(),C=d("tr"),k=d("td"),k.textContent="Bonus",P=d("td"),h=U(te),v=R(),B=d("tr"),D=d("td"),D.textContent="High Score",F=d("td"),Ce=U(he),xe=R(),pe=d("tr"),me=d("td"),me.textContent="Level-Stage",ne=d("td"),Ne=U(ge),Oe=d("span"),Oe.textContent="-",we=U(Ee),Me=R(),se=d("div"),ve=d("button"),ve.textContent="Replay",Ke=R(),Se=d("button"),Se.textContent="Menu",g(n,"class","title svelte-1phc8sd"),g(l,"class","c1 svelte-1phc8sd"),g(c,"class","c2 svelte-1phc8sd"),g(S,"class","c1 svelte-1phc8sd"),g(b,"class","c2 svelte-1phc8sd"),g(T,"class","c1 svelte-1phc8sd"),g(x,"class","c2 svelte-1phc8sd"),g(k,"class","c1 svelte-1phc8sd"),g(P,"class","c2 svelte-1phc8sd"),g(D,"class","c1 svelte-1phc8sd"),g(F,"class","c2 svelte-1phc8sd"),g(me,"class","c1 svelte-1phc8sd"),g(ne,"class","c2 svelte-1phc8sd"),g(s,"class","svelte-1phc8sd"),g(se,"class","flex svelte-1phc8sd"),g(e,"class","game-over-screen svelte-1phc8sd")},m($,j){G($,e,j),u(e,n),u(e,o),u(e,s),u(s,i),u(i,l),u(i,c),u(c,r),u(s,p),u(s,L),u(L,S),u(L,b),u(b,O),u(s,H),u(s,K),u(K,T),u(K,x),u(x,_),u(s,m),u(s,C),u(C,k),u(C,P),u(P,h),u(s,v),u(s,B),u(B,D),u(B,F),u(F,Ce),u(s,xe),u(s,pe),u(pe,me),u(pe,ne),u(ne,Ne),u(ne,Oe),u(ne,we),u(e,Me),u(e,se),u(se,ve),u(se,Ke),u(se,Se),Be||(Pe=[de(ve,"click",t[2]),de(Se,"click",t[1])],Be=!0)},p($,[j]){j&1&&f!==(f=$[0].playerName+"")&&q(r,f),j&1&&y!==(y=$[0].score+"")&&q(O,y),j&1&&a!==(a=$[0].food+"")&&q(_,a),j&1&&te!==(te=$[0].bonus+"")&&q(h,te),j&1&&he!==(he=$[0].highScore+"")&&q(Ce,he),j&1&&ge!==(ge=$[0].level+"")&&q(Ne,ge),j&1&&Ee!==(Ee=$[0].stage+"")&&q(we,Ee)},i:w,o:w,d($){$&&A(e),Be=!1,ce(Pe)}}}function ht(t,e,n){const o=()=>{console.log("restart game"),Y.welcomeScreen()},s=()=>{re.resetScore(),Y.startGame()};let i;return re.subscribe(l=>{n(0,i=l)}),[i,o,s]}class pt extends X{constructor(e){super(),z(this,e,ht,_t,V,{})}}function mt(t){let e;return{c(){e=d("div"),g(e,"class","food svelte-14olvay"),I(e,"left",t[1]+"px"),I(e,"top",t[0]+"px"),I(e,"width",E.BLOCK_SIZE-2+"px"),I(e,"height",E.BLOCK_SIZE-2+"px")},m(n,o){G(n,e,o)},p(n,[o]){o&2&&I(e,"left",n[1]+"px"),o&1&&I(e,"top",n[0]+"px")},i:w,o:w,d(n){n&&A(e)}}}function gt(t,e,n){let{top:o=0}=e,{left:s=0}=e;return t.$$set=i=>{"top"in i&&n(0,o=i.top),"left"in i&&n(1,s=i.left)},[o,s]}class Et extends X{constructor(e){super(),z(this,e,gt,mt,V,{top:0,left:1})}}function $e(t){let e,n,o;return{c(){e=d("div"),n=R(),o=d("div"),g(e,"id","leftEye"),g(e,"class","eyes svelte-rzshp"),g(o,"id","rightEye"),g(o,"class","eyes svelte-rzshp")},m(s,i){G(s,e,i),G(s,n,i),G(s,o,i)},d(s){s&&A(e),s&&A(n),s&&A(o)}}}function vt(t){let e,n,o=t[2]&&$e();return{c(){e=d("div"),o&&o.c(),I(e,"left",t[1]+"px"),I(e,"top",t[0]+"px"),I(e,"width",E.BLOCK_SIZE+"px"),I(e,"height",E.BLOCK_SIZE+"px"),g(e,"class",n="snake-body "+t[3]+" svelte-rzshp")},m(s,i){G(s,e,i),o&&o.m(e,null)},p(s,[i]){s[2]?o||(o=$e(),o.c(),o.m(e,null)):o&&(o.d(1),o=null),i&2&&I(e,"left",s[1]+"px"),i&1&&I(e,"top",s[0]+"px"),i&8&&n!==(n="snake-body "+s[3]+" svelte-rzshp")&&g(e,"class",n)},i:w,o:w,d(s){s&&A(e),o&&o.d()}}}function St(t,e,n){let{top:o=E.BLOCK_SIZE}=e,{left:s=E.BLOCK_SIZE}=e,{isHead:i=!1}=e,{direction:l="right"}=e;return t.$$set=c=>{"top"in c&&n(0,o=c.top),"left"in c&&n(1,s=c.left),"isHead"in c&&n(2,i=c.isHead),"direction"in c&&n(3,l=c.direction)},[o,s,i,l]}class bt extends X{constructor(e){super(),z(this,e,St,vt,V,{top:0,left:1,isHead:2,direction:3})}}function Fe(t,e,n){const o=t.slice();return o[2]=e[n],o[4]=n,o}function We(t){let e,n;return e=new bt({props:{isHead:t[4]==0,top:t[2].top,left:t[2].left,direction:t[1]}}),{c(){ie(e.$$.fragment)},m(o,s){Q(e,o,s),n=!0},p(o,s){const i={};s&1&&(i.top=o[2].top),s&1&&(i.left=o[2].left),s&2&&(i.direction=o[1]),e.$set(i)},i(o){n||(Z(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){ee(e,o)}}}function Lt(t){let e,n,o=t[0],s=[];for(let l=0;l<o.length;l+=1)s[l]=We(Fe(t,o,l));const i=l=>W(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=ze()},m(l,c){for(let f=0;f<s.length;f+=1)s[f].m(l,c);G(l,e,c),n=!0},p(l,[c]){if(c&3){o=l[0];let f;for(f=0;f<o.length;f+=1){const r=Fe(l,o,f);s[f]?(s[f].p(r,c),Z(s[f],1)):(s[f]=We(r),s[f].c(),Z(s[f],1),s[f].m(e.parentNode,e))}for(Ge(),f=o.length;f<s.length;f+=1)i(f);He()}},i(l){if(!n){for(let c=0;c<o.length;c+=1)Z(s[c]);n=!0}},o(l){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)W(s[c]);n=!1},d(l){tt(s,l),l&&A(e)}}}function It(t,e,n){let{snakeBodies:o=[]}=e,{direction:s="right"}=e;return t.$$set=i=>{"snakeBodies"in i&&n(0,o=i.snakeBodies),"direction"in i&&n(1,s=i.direction)},[o,s]}class yt extends X{constructor(e){super(),z(this,e,It,Lt,V,{snakeBodies:0,direction:1})}}const ye=[{bg:"#affbaf"},{bg:"#fda2f2"},{bg:"#7f61bb"},{bg:"#c34366"}];function Ct(t){let e;return{c(){e=d("div"),g(e,"class","bonus svelte-18cernx"),I(e,"width",E.BLOCK_SIZE+"px"),I(e,"height",E.BLOCK_SIZE+"px"),I(e,"left",t[0]+"px"),I(e,"top",t[1]+"px")},m(n,o){G(n,e,o)},p(n,[o]){o&1&&I(e,"left",n[0]+"px"),o&2&&I(e,"top",n[1]+"px")},i:w,o:w,d(n){n&&A(e)}}}function Nt(t,e,n){const o=lt();let{left:s}=e,{top:i}=e,{id:l}=e;return ot(()=>{setTimeout(()=>{o("bonusFinished",l)},ae.BONUS_TIME)}),t.$$set=c=>{"left"in c&&n(0,s=c.left),"top"in c&&n(1,i=c.top),"id"in c&&n(2,l=c.id)},[s,i,l]}class Ot extends X{constructor(e){super(),z(this,e,Nt,Ct,V,{left:0,top:1,id:2})}}const wt=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);function Ve(t,e,n){const o=t.slice();return o[25]=e[n],o}function je(t,e){let n,o,s;return o=new Ot({props:{id:e[25].id,left:e[25].left,top:e[25].top}}),o.$on("bonusFinished",e[7]),{key:t,first:null,c(){n=ze(),ie(o.$$.fragment),this.first=n},m(i,l){G(i,n,l),Q(o,i,l),s=!0},p(i,l){e=i;const c={};l&32&&(c.id=e[25].id),l&32&&(c.left=e[25].left),l&32&&(c.top=e[25].top),o.$set(c)},i(i){s||(Z(o.$$.fragment,i),s=!0)},o(i){W(o.$$.fragment,i),s=!1},d(i){i&&A(n),ee(o,i)}}}function Bt(t){let e,n,o,s,i,l=[],c=new Map,f,r,p=t[0].level+"",L,S,b=t[0].score+"",y,O,H,K;n=new yt({props:{direction:t[3],snakeBodies:t[4]}}),s=new Et({props:{left:t[1],top:t[2]}});let T=t[5];const x=a=>a[25].id;for(let a=0;a<T.length;a+=1){let _=Ve(t,T,a),m=x(_);c.set(m,l[a]=je(m,_))}return{c(){e=d("main"),ie(n.$$.fragment),o=R(),ie(s.$$.fragment),i=R();for(let a=0;a<l.length;a+=1)l[a].c();f=R(),r=d("div"),L=U(p),S=U(" : "),y=U(b),I(e,"width",E.SCREEN_WIDTH+"px"),I(e,"height",E.SCREEN_HEIGHT+"px"),I(e,"background",ye[t[0].level].bg),g(e,"class","svelte-sjb5bh"),g(r,"class","score svelte-sjb5bh")},m(a,_){G(a,e,_),Q(n,e,null),u(e,o),Q(s,e,null),u(e,i);for(let m=0;m<l.length;m+=1)l[m].m(e,null);G(a,f,_),G(a,r,_),u(r,L),u(r,S),u(r,y),O=!0,H||(K=de(window,"keydown",t[6]),H=!0)},p(a,[_]){const m={};_&8&&(m.direction=a[3]),_&16&&(m.snakeBodies=a[4]),n.$set(m);const C={};_&2&&(C.left=a[1]),_&4&&(C.top=a[2]),s.$set(C),_&160&&(T=a[5],Ge(),l=ut(l,_,x,1,a,T,c,e,ft,je,null,Ve),He()),(!O||_&1)&&I(e,"background",ye[a[0].level].bg),(!O||_&1)&&p!==(p=a[0].level+"")&&q(L,p),(!O||_&1)&&b!==(b=a[0].score+"")&&q(y,b)},i(a){if(!O){Z(n.$$.fragment,a),Z(s.$$.fragment,a);for(let _=0;_<T.length;_+=1)Z(l[_]);O=!0}},o(a){W(n.$$.fragment,a),W(s.$$.fragment,a);for(let _=0;_<l.length;_+=1)W(l[_]);O=!1},d(a){a&&A(e),ee(n),ee(s);for(let _=0;_<l.length;_+=1)l[_].d();a&&A(f),a&&A(r),H=!1,K()}}}function Tt(t,e,n){let o=!1,s;Y.subscribe(h=>{}),re.subscribe(h=>{n(0,s=h)});const i=()=>{Y.gameOver()};let l=0,c=0,f=N.RIGHT,r=[],p=[],L;const S=E.SCREEN_WIDTH,b=E.SCREEN_HEIGHT,y=()=>{re.nextLevel(),re.resetScore(),clearInterval(L),O(),x()},O=()=>{let h=ye.length-s.level;h=h*ae.DELAY,L=setInterval(()=>{r.pop();let{left:v,top:B}=r[0];f===N.UP?B-=E.BLOCK_SIZE:f===N.DOWN?B+=E.BLOCK_SIZE:f===N.LEFT?v-=E.BLOCK_SIZE:f===N.RIGHT&&(v+=E.BLOCK_SIZE);const D={left:v,top:B};n(4,r=[D,...r]),H(D,{left:l,top:c})&&(n(4,r=[...r,r[r.length-1]]),re.eatFood(),T(),s.food%5==0&&P(),r.length/ae.MAX_POINTS>1&&r.length%ae.MAX_POINTS==0&&(s.level<ye.length-1?y():Y.allLevelsCleared())),a()&&(clearInterval(L),x(),i())},h)},H=(h,v)=>!(h.top<v.top||h.top>v.top||h.left<v.left||h.left>v.left),K=()=>{let h=0,v=0;for(;;){h=Math.floor(Math.random()*(b/E.BLOCK_SIZE))*E.BLOCK_SIZE,v=Math.floor(Math.random()*(S/E.BLOCK_SIZE))*E.BLOCK_SIZE;let B=r.findIndex(F=>{F.top==h}),D=r.findIndex(F=>{F.left==v});if(B==-1&&D==-1)break}return{top:h,left:v}},T=()=>{const{top:h,left:v}=K();n(1,l=v),n(2,c=h)},x=()=>{T(),n(3,f=N.RIGHT),n(4,r=[{left:E.BLOCK_SIZE*2,top:0},{left:E.BLOCK_SIZE,top:0},{left:0,top:0}])},a=()=>{if(r.slice(1).filter(F=>H(F,r[0])).length>0)return!0;const{top:B,left:D}=r[0];return D>=S&&f==N.RIGHT&&n(4,r[0].left=0,r),D<0&&f==N.LEFT&&n(4,r[0].left=S-E.BLOCK_SIZE,r),B<0&&f==N.UP&&n(4,r[0].top=b-E.BLOCK_SIZE,r),B>=b&&f==N.DOWN&&n(4,r[0].top=0,r),!1},_=()=>{clearInterval(L)},m=h=>h===le.UP&&f!=N.DOWN?N.UP:h===le.RIGHT&&f!=N.LEFT?N.RIGHT:h===le.LEFT&&f!=N.RIGHT?N.LEFT:h===le.DOWN&&f!=N.UP?N.DOWN:N.UNKNOWN,C=h=>{const v=h.code;if(v===le.SPACEBAR&&(o=!o,o?_():O()),o)return;const B=m(v);B!=N.UNKNOWN&&n(3,f=B)},k=h=>{console.log(`on bonus finished =${h.detail}`),te(h.detail)},P=()=>{const h=wt();let v={top:0,left:0,id:h};v.top=Math.floor(Math.random()*(b/E.BLOCK_SIZE))*E.BLOCK_SIZE,v.left=Math.floor(Math.random()*(S/E.BLOCK_SIZE))*E.BLOCK_SIZE,p.push(v)},te=h=>{const v=p.findIndex(B=>B.id==h);v!=-1&&(p.splice(v,1),n(5,p))};return O(),x(),P(),[s,l,c,f,r,p,C,k]}class ke extends X{constructor(e){super(),z(this,e,Tt,Bt,V,{})}}function kt(t){let e,n,o,s,i,l,c;return{c(){e=d("div"),n=d("div"),n.textContent="Snake",o=R(),s=d("div"),i=d("button"),i.textContent="Start",g(n,"class","title svelte-yxm8be"),g(s,"class","btn svelte-yxm8be"),g(e,"class","start-screen svelte-yxm8be")},m(f,r){G(f,e,r),u(e,n),u(e,o),u(e,s),u(s,i),l||(c=de(i,"click",t[0]),l=!0)},p:w,i:w,o:w,d(f){f&&A(e),l=!1,c()}}}function At(t){return[()=>{console.log("start game"),Y.startGame()}]}class Rt extends X{constructor(e){super(),z(this,e,At,kt,V,{})}}function Gt(t){let e,n,o,s,i,l,c,f;return{c(){e=d("div"),n=d("div"),n.textContent="Congratulations !",o=R(),s=d("div"),s.textContent="You have cleared all the levels.",i=R(),l=d("button"),l.textContent="Menu",g(n,"class","title svelte-gyhhqq"),g(e,"class","final svelte-gyhhqq")},m(r,p){G(r,e,p),u(e,n),u(e,o),u(e,s),u(e,i),u(e,l),c||(f=de(l,"click",t[0]),c=!0)},p:w,i:w,o:w,d(r){r&&A(e),c=!1,f()}}}function Ht(t){return[()=>{console.log("restart game"),Y.welcomeScreen()}]}class xt extends X{constructor(e){super(),z(this,e,Ht,Gt,V,{})}}var M=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(M||{});const Mt=()=>{const t=[{status:M.NOT_STARTED,component:Rt},{status:M.RUNNING,component:ke},{status:M.PAUSED,component:ke},{status:M.RESUME,component:ke},{status:M.GAME_OVER,component:pt},{status:M.ALL_LEVELS_CLEARED,component:xt}];let{update:e,subscribe:n}=Je(t.find(r=>r.status==M.ALL_LEVELS_CLEARED));return{subscribe:n,startGame:()=>{e(r=>(r=t.find(p=>p.status==M.RUNNING),r))},pauseGame:()=>{e(r=>(r=t.find(p=>p.status==M.PAUSED),r))},resumeGame:()=>{e(r=>(r=t.find(p=>p.status==M.RUNNING),r))},gameOver:()=>{e(r=>(r=t.find(p=>p.status==M.GAME_OVER),r))},welcomeScreen:()=>{e(r=>(r=t.find(p=>p.status==M.NOT_STARTED),r))},allLevelsCleared:()=>{e(r=>(r=t.find(p=>p.status==M.ALL_LEVELS_CLEARED),r))}}},Y=Mt();function Kt(t){let e,n,o;var s=t[0].component;function i(l){return{}}return s&&(n=new s(i())),{c(){e=d("div"),n&&ie(n.$$.fragment),g(e,"class","container svelte-16au4d0"),I(e,"width",E.SCREEN_WIDTH+"px"),I(e,"height",E.SCREEN_HEIGHT+"px")},m(l,c){G(l,e,c),n&&Q(n,e,null),o=!0},p(l,[c]){if(s!==(s=l[0].component)){if(n){Ge();const f=n;W(f.$$.fragment,1,0,()=>{ee(f,1)}),He()}s?(n=new s(i()),ie(n.$$.fragment),Z(n.$$.fragment,1),Q(n,e,null)):n=null}},i(l){o||(n&&Z(n.$$.fragment,l),o=!0)},o(l){n&&W(n.$$.fragment,l),o=!1},d(l){l&&A(e),n&&ee(n)}}}function Pt(t,e,n){let o;return Y.subscribe(s=>{n(0,o=s)}),[o]}class Dt extends X{constructor(e){super(),z(this,e,Pt,Kt,V,{})}}new Dt({target:document.getElementById("app")});
