(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function T(){}function ut(t){return t()}function Ye(){return Object.create(null)}function ue(t){t.forEach(ut)}function at(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function yt(t){return Object.keys(t).length===0}function be(t){return t==null?"":t}function vt(t){return t&&at(t.destroy)?t.destroy:T}function u(t,e){t.appendChild(e)}function U(t,e,n){t.insertBefore(e,n||null)}function z(t){t.parentNode.removeChild(t)}function dt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Z(t){return document.createTextNode(t)}function V(){return Z(" ")}function Re(){return Z("")}function re(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function l(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function wt(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function bt(t){return Array.from(t.childNodes)}function oe(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}let Ie;function Et(){if(Ie===void 0){Ie=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ie=!0}}return Ie}function St(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const s=S("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const o=Et();let r;return o?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=re(window,"message",i=>{i.source===s.contentWindow&&e()})):(s.src="about:blank",s.onload=()=>{r=re(s.contentWindow,"resize",e)}),u(t,s),()=>{(o||r&&s.contentWindow)&&r(),z(s)}}function kt(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,s,e),o}let Le;function Fe(t){Le=t}function pt(){if(!Le)throw new Error("Function called outside component initialization");return Le}function ht(t){pt().$$.on_mount.push(t)}function At(){const t=pt();return(e,n,{cancelable:s=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=kt(e,n,{cancelable:s});return o.slice().forEach(i=>{i.call(t,r)}),!r.defaultPrevented}return!0}}const ke=[],je=[],Ce=[],Ze=[],Ft=Promise.resolve();let Ve=!1;function Lt(){Ve||(Ve=!0,Ft.then(_t))}function De(t){Ce.push(t)}const Pe=new Set;let Te=0;function _t(){const t=Le;do{for(;Te<ke.length;){const e=ke[Te];Te++,Fe(e),Nt(e.$$)}for(Fe(null),ke.length=0,Te=0;je.length;)je.pop()();for(let e=0;e<Ce.length;e+=1){const n=Ce[e];Pe.has(n)||(Pe.add(n),n())}Ce.length=0}while(ke.length);for(;Ze.length;)Ze.pop()();Ve=!1,Pe.clear(),Fe(t)}function Nt(t){if(t.fragment!==null){t.update(),ue(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(De)}}const ze=new Set;let fe;function ye(){fe={r:0,c:[],p:fe}}function ve(){fe.r||ue(fe.c),fe=fe.p}function C(t,e){t&&t.i&&(ze.delete(t),t.i(e))}function x(t,e,n,s){if(t&&t.o){if(ze.has(t))return;ze.add(t),fe.c.push(()=>{ze.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function Je(t,e){x(t,1,1,()=>{e.delete(t.key)})}function Qe(t,e,n,s,o,r,i,f,a,c,d,g){let m=t.length,k=r.length,_=m;const h={};for(;_--;)h[t[_].key]=_;const F=[],E=new Map,A=new Map;for(_=k;_--;){const L=g(o,r,_),G=n(L);let M=i.get(G);M?s&&M.p(L,e):(M=c(G,L),M.c()),E.set(G,F[_]=M),G in h&&A.set(G,Math.abs(_-h[G]))}const I=new Set,P=new Set;function R(L){C(L,1),L.m(f,d),i.set(L.key,L),d=L.first,k--}for(;m&&k;){const L=F[k-1],G=t[m-1],M=L.key,B=G.key;L===G?(d=L.first,m--,k--):E.has(B)?!i.has(M)||I.has(M)?R(L):P.has(B)?m--:A.get(M)>A.get(B)?(P.add(M),R(L)):(I.add(B),m--):(a(G,i),m--)}for(;m--;){const L=t[m];E.has(L.key)||a(L,i)}for(;k;)R(F[k-1]);return F}function te(t){t&&t.c()}function J(t,e,n,s){const{fragment:o,on_mount:r,on_destroy:i,after_update:f}=t.$$;o&&o.m(e,n),s||De(()=>{const a=r.map(ut).filter(at);i?i.push(...a):ue(a),t.$$.on_mount=[]}),f.forEach(De)}function Q(t,e){const n=t.$$;n.fragment!==null&&(ue(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Bt(t,e){t.$$.dirty[0]===-1&&(ke.push(t),Lt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(t,e,n,s,o,r,i,f=[-1]){const a=Le;Fe(t);const c=t.$$={fragment:null,ctx:null,props:r,update:T,not_equal:o,bound:Ye(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Ye(),dirty:f,skip_bound:!1,root:e.target||a.$$.root};i&&i(c.root);let d=!1;if(c.ctx=n?n(t,e.props||{},(g,m,...k)=>{const _=k.length?k[0]:m;return c.ctx&&o(c.ctx[g],c.ctx[g]=_)&&(!c.skip_bound&&c.bound[g]&&c.bound[g](_),d&&Bt(t,g)),m}):[],c.update(),d=!0,ue(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const g=bt(e.target);c.fragment&&c.fragment.l(g),g.forEach(z)}else c.fragment&&c.fragment.c();e.intro&&C(t.$$.fragment),J(t,e.target,e.anchor,e.customElement),_t()}Fe(a)}class ${$destroy(){Q(this,1),this.$destroy=T}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(e){this.$$set&&!yt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var O=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(O||{}),H=(t=>(t[t.DELAY=100]="DELAY",t[t.MAX_POINTS=50]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t[t.MAX_BLOCKS=20]="MAX_BLOCKS",t))(H||{}),me=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(me||{}),Ae=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(Ae||{});const ge=[];function Ke(t,e=T){let n;const s=new Set;function o(f){if(K(t,f)&&(t=f,n)){const a=!ge.length;for(const c of s)c[1](),ge.push(c,t);if(a){for(let c=0;c<ge.length;c+=2)ge[c][0](ge[c+1]);ge.length=0}}}function r(f){o(f(t))}function i(f,a=T){const c=[f,a];return s.add(c),s.size===1&&(n=e(o)||T),f(t),()=>{s.delete(c),s.size===0&&(n(),n=null)}}return{set:o,update:r,subscribe:i}}const Ot=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=Ke(t);return{subscribe:n,resetScore:()=>{e(f=>(f.food=0,f.bonus=0,f.score=0,f))},eatFood:()=>{e(f=>(f.food=f.food+1,f.score=f.food*5+f.bonus*20,f.score>f.highScore&&(f.highScore=f.score),f))},getBonus:()=>{e(f=>(f.bonus=f.bonus+1,f))},nextLevel:()=>{e(f=>(f.level=f.level+1,f))}}};let se=Ot();function Gt(t){let e,n,s,o,r,i,f,a=t[0].playerName+"",c,d,g,m,k,_=t[0].score+"",h,F,E,A,I,P=t[0].food+"",R,L,G,M,B,y=t[0].bonus+"",w,D,q,ae,de,pe=t[0].highScore+"",Ee,Ne,ie,he,ne,b=t[0].level+"",N,Y,Be=t[0].stage+"",Ue,We,_e,Oe,$e,Ge,xe,qe;return{c(){e=S("div"),n=S("div"),n.textContent="Snake",s=V(),o=S("table"),r=S("tr"),i=S("td"),i.textContent="Player",f=S("td"),c=Z(a),d=V(),g=S("tr"),m=S("td"),m.textContent="Score",k=S("td"),h=Z(_),F=V(),E=S("tr"),A=S("td"),A.textContent="Food",I=S("td"),R=Z(P),L=V(),G=S("tr"),M=S("td"),M.textContent="Bonus",B=S("td"),w=Z(y),D=V(),q=S("tr"),ae=S("td"),ae.textContent="High Score",de=S("td"),Ee=Z(pe),Ne=V(),ie=S("tr"),he=S("td"),he.textContent="Level-Stage",ne=S("td"),N=Z(b),Y=S("span"),Y.textContent="-",Ue=Z(Be),We=V(),_e=S("div"),Oe=S("button"),Oe.textContent="Replay",$e=V(),Ge=S("button"),Ge.textContent="Menu",l(n,"class","title svelte-mdywih"),l(i,"class","c1 svelte-mdywih"),l(f,"class","c2 svelte-mdywih"),l(m,"class","c1 svelte-mdywih"),l(k,"class","c2 svelte-mdywih"),l(A,"class","c1 svelte-mdywih"),l(I,"class","c2 svelte-mdywih"),l(M,"class","c1 svelte-mdywih"),l(B,"class","c2 svelte-mdywih"),l(ae,"class","c1 svelte-mdywih"),l(de,"class","c2 svelte-mdywih"),l(he,"class","c1 svelte-mdywih"),l(ne,"class","c2 svelte-mdywih"),l(o,"class","svelte-mdywih"),l(_e,"class","flex svelte-mdywih"),l(e,"class","game-over-screen svelte-mdywih")},m(j,ee){U(j,e,ee),u(e,n),u(e,s),u(e,o),u(o,r),u(r,i),u(r,f),u(f,c),u(o,d),u(o,g),u(g,m),u(g,k),u(k,h),u(o,F),u(o,E),u(E,A),u(E,I),u(I,R),u(o,L),u(o,G),u(G,M),u(G,B),u(B,w),u(o,D),u(o,q),u(q,ae),u(q,de),u(de,Ee),u(o,Ne),u(o,ie),u(ie,he),u(ie,ne),u(ne,N),u(ne,Y),u(ne,Ue),u(e,We),u(e,_e),u(_e,Oe),u(_e,$e),u(_e,Ge),xe||(qe=[re(Oe,"click",t[2]),re(Ge,"click",t[1])],xe=!0)},p(j,[ee]){ee&1&&a!==(a=j[0].playerName+"")&&oe(c,a),ee&1&&_!==(_=j[0].score+"")&&oe(h,_),ee&1&&P!==(P=j[0].food+"")&&oe(R,P),ee&1&&y!==(y=j[0].bonus+"")&&oe(w,y),ee&1&&pe!==(pe=j[0].highScore+"")&&oe(Ee,pe),ee&1&&b!==(b=j[0].level+"")&&oe(N,b),ee&1&&Be!==(Be=j[0].stage+"")&&oe(Ue,Be)},i:T,o:T,d(j){j&&z(e),xe=!1,ue(qe)}}}function It(t,e,n){const s=()=>{console.log("restart game"),le.welcomeScreen()},o=()=>{se.resetScore(),le.startGame()};let r;return se.subscribe(i=>{n(0,r=i)}),[r,s,o]}class Tt extends ${constructor(e){super(),W(this,e,It,Gt,K,{})}}const Mt=300,Ct=60,gt="none";function Se(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function zt(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function Me(t,e,n,s,o){t.dispatchEvent(new CustomEvent(`${e}${o}`,{detail:{event:n,pointersCount:s.length}}))}function Dt(t,e,n,s,o,r=gt){e.style.touchAction=r;let i=[];function f(c){i.push(c),Me(e,t,c,i,"down"),s==null||s(i,c);const d=c.pointerId;function g(E){d===E.pointerId&&(i=zt(E,i),i.length||m(),Me(e,t,E,i,"up"),o==null||o(i,E))}function m(){k(),_(),h(),F()}const k=Se(e,"pointermove",E=>{i=i.map(A=>E.pointerId===A.pointerId?E:A),Me(e,t,E,i,"move"),n==null||n(i,E)}),_=Se(e,"lostpointercapture",E=>{g(E)}),h=Se(e,"pointerup",E=>{g(E)}),F=Se(e,"pointerleave",E=>{i=[],m(),Me(e,t,E,i,"up"),o==null||o(i,E)})}const a=Se(e,"pointerdown",f);return{destroy:()=>{a()}}}function Rt(t,e={timeframe:Mt,minSwipeDistance:Ct,touchAction:gt}){const n="swipe";let s,o,r,i;function f(c,d){o=d.clientX,r=d.clientY,s=Date.now(),c.length===1&&(i=d.target)}function a(c,d){if(d.type==="pointerup"&&c.length===0&&Date.now()-s<e.timeframe){const g=d.clientX-o,m=d.clientY-r,k=Math.abs(g),_=Math.abs(m);let h=null;k>=2*_&&k>e.minSwipeDistance?h=g>0?"right":"left":_>=2*k&&_>e.minSwipeDistance&&(h=m>0?"bottom":"top"),h&&t.dispatchEvent(new CustomEvent(n,{detail:{direction:h,target:i}}))}}return Dt(n,t,null,f,a,e.touchAction)}function Ut(t){let e,n,s,o,r,i,f,a,c,d,g,m,k,_,h,F;return{c(){e=S("div"),n=p("svg"),s=p("g"),o=p("g"),r=p("g"),i=p("g"),f=p("ellipse"),a=p("g"),c=p("path"),d=p("path"),g=p("g"),m=p("path"),k=p("g"),_=p("path"),h=p("g"),F=p("ellipse"),l(s,"id","Layer_1"),l(f,"id","shadow"),l(f,"opacity","0.3"),l(f,"cx","438.7"),l(f,"cy","765.8"),l(f,"rx","283"),l(f,"ry","32.9"),l(c,"id","cup-shadow"),l(c,"fill","#E7F4FA"),l(c,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),l(d,"id","cup-light"),l(d,"fill","#FFFFFF"),l(d,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),l(m,"id","mainFood"),l(m,"fill","#DB343C"),l(m,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),l(_,"id","highlight"),l(_,"opacity","0.3"),l(_,"fill","#FFFFFF"),l(_,"stroke","#000000"),l(_,"stroke-width","0.25"),l(_,"stroke-miterlimit","10"),l(_,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),l(F,"id","c2"),l(F,"fill","#FFFFFF"),l(F,"cx","436.8"),l(F,"cy","144.3"),l(F,"rx","140.6"),l(F,"ry","138.4"),l(h,"id","c1"),l(o,"id","Layer_2"),l(n,"viewBox","0 0 855.6 798.6"),l(e,"class","food bounce-top svelte-h8lqdv"),v(e,"left",t[1].left*t[0]+"px"),v(e,"top",t[1].top*t[0]+"px"),v(e,"width",t[0]-2+"px"),v(e,"height",t[0]-2+"px")},m(E,A){U(E,e,A),u(e,n),u(n,s),u(n,o),u(o,r),u(r,i),u(i,f),u(r,a),u(a,c),u(a,d),u(r,g),u(g,m),u(r,k),u(k,_),u(r,h),u(h,F)},p(E,[A]){A&3&&v(e,"left",E[1].left*E[0]+"px"),A&3&&v(e,"top",E[1].top*E[0]+"px"),A&1&&v(e,"width",E[0]-2+"px"),A&1&&v(e,"height",E[0]-2+"px")},i:T,o:T,d(E){E&&z(e)}}}function xt(t,e,n){let{size:s=0}=e,{data:o}=e;return t.$$set=r=>{"size"in r&&n(0,s=r.size),"data"in r&&n(1,o=r.data)},[s,o]}class Pt extends ${constructor(e){super(),W(this,e,xt,Ut,K,{size:0,data:1})}}function Ht(t){let e,n,s;return{c(){e=p("svg"),n=p("rect"),l(n,"y","0"),l(n,"fill","#0037FF"),l(n,"width","50"),l(n,"height","50"),l(e,"viewBox","0 0 50 50"),l(e,"class",s=be(t[4])+" svelte-zvgok1")},m(o,r){U(o,e,r),u(e,n)},p(o,r){r&16&&s!==(s=be(o[4])+" svelte-zvgok1")&&l(e,"class",s)},d(o){o&&z(e)}}}function Vt(t){let e,n,s;return{c(){e=p("svg"),n=p("rect"),l(n,"y","0"),l(n,"fill","#0037FF"),l(n,"width","50"),l(n,"height","50"),l(e,"viewBox","0 0 50 50"),l(e,"class",s=be(t[4])+" svelte-zvgok1")},m(o,r){U(o,e,r),u(e,n)},p(o,r){r&16&&s!==(s=be(o[4])+" svelte-zvgok1")&&l(e,"class",s)},d(o){o&&z(e)}}}function Xt(t){let e,n,s,o,r,i,f;return{c(){e=p("svg"),n=p("g"),s=p("rect"),o=p("path"),r=p("circle"),i=p("circle"),l(s,"opacity","0"),l(s,"fill","#FFFFFF"),l(s,"width","258"),l(s,"height","258"),l(o,"fill","#0037FF"),l(o,"d",`M147.5,29.2C111.6,29.2,80.1,48,62.6,77H0v104h62.6c17.5,28,49,47.3,84.9,47.3c55,0,99.6-44.6,99.6-99.6\r
          S202.5,29.2,147.5,29.2z`),l(r,"fill","#FFF800"),l(r,"stroke","#000000"),l(r,"stroke-miterlimit","10"),l(r,"cx","184.3"),l(r,"cy","84.5"),l(r,"r","21.8"),l(i,"fill","#FFF800"),l(i,"stroke","#000000"),l(i,"stroke-miterlimit","10"),l(i,"cx","184.3"),l(i,"cy","164.5"),l(i,"r","21.8"),l(e,"viewBox","0 0 258 258"),l(e,"class",f=be(t[4])+" svelte-zvgok1")},m(a,c){U(a,e,c),u(e,n),u(n,s),u(n,o),u(n,r),u(n,i)},p(a,c){c&16&&f!==(f=be(a[4])+" svelte-zvgok1")&&l(e,"class",f)},d(a){a&&z(e)}}}function Kt(t){let e;function n(r,i){return r[2]?Xt:r[3]?Vt:Ht}let s=n(t),o=s(t);return{c(){e=S("div"),o.c(),v(e,"left",t[1].left*t[0]+"px"),v(e,"top",t[1].top*t[0]+"px"),v(e,"width",t[0]+"px"),v(e,"height",t[0]+"px"),l(e,"class","snake-body svelte-zvgok1")},m(r,i){U(r,e,i),o.m(e,null)},p(r,[i]){s===(s=n(r))&&o?o.p(r,i):(o.d(1),o=s(r),o&&(o.c(),o.m(e,null))),i&3&&v(e,"left",r[1].left*r[0]+"px"),i&3&&v(e,"top",r[1].top*r[0]+"px"),i&1&&v(e,"width",r[0]+"px"),i&1&&v(e,"height",r[0]+"px")},i:T,o:T,d(r){r&&z(e),o.d()}}}function Wt(t,e,n){let{size:s=0}=e,{current:o=null}=e,{prev:r=null}=e,{isHead:i=!1}=e,{isTail:f=!1}=e,{direction:a="right"}=e;return t.$$set=c=>{"size"in c&&n(0,s=c.size),"current"in c&&n(1,o=c.current),"prev"in c&&n(5,r=c.prev),"isHead"in c&&n(2,i=c.isHead),"isTail"in c&&n(3,f=c.isTail),"direction"in c&&n(4,a=c.direction)},[s,o,i,f,a,r]}class $t extends ${constructor(e){super(),W(this,e,Wt,Kt,K,{size:0,current:1,prev:5,isHead:2,isTail:3,direction:4})}}function et(t,e,n){const s=t.slice();return s[3]=e[n],s[5]=n,s}function tt(t){let e,n;return e=new $t({props:{isHead:t[5]==0,isTail:t[5]==t[0].length-1,current:t[3],prev:t[5]>0?t[0][t[5]-1]:null,direction:t[1],size:t[2]}}),{c(){te(e.$$.fragment)},m(s,o){J(e,s,o),n=!0},p(s,o){const r={};o&1&&(r.isTail=s[5]==s[0].length-1),o&1&&(r.current=s[3]),o&1&&(r.prev=s[5]>0?s[0][s[5]-1]:null),o&2&&(r.direction=s[1]),o&4&&(r.size=s[2]),e.$set(r)},i(s){n||(C(e.$$.fragment,s),n=!0)},o(s){x(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function qt(t){let e,n,s=t[0],o=[];for(let i=0;i<s.length;i+=1)o[i]=tt(et(t,s,i));const r=i=>x(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Re()},m(i,f){for(let a=0;a<o.length;a+=1)o[a].m(i,f);U(i,e,f),n=!0},p(i,[f]){if(f&7){s=i[0];let a;for(a=0;a<s.length;a+=1){const c=et(i,s,a);o[a]?(o[a].p(c,f),C(o[a],1)):(o[a]=tt(c),o[a].c(),C(o[a],1),o[a].m(e.parentNode,e))}for(ye(),a=s.length;a<o.length;a+=1)r(a);ve()}},i(i){if(!n){for(let f=0;f<s.length;f+=1)C(o[f]);n=!0}},o(i){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)x(o[f]);n=!1},d(i){dt(o,i),i&&z(e)}}}function Yt(t,e,n){let{snakeBodies:s=[]}=e,{direction:o="right"}=e,{size:r=0}=e;return t.$$set=i=>{"snakeBodies"in i&&n(0,s=i.snakeBodies),"direction"in i&&n(1,o=i.direction),"size"in i&&n(2,r=i.size)},[s,o,r]}class jt extends ${constructor(e){super(),W(this,e,Yt,qt,K,{snakeBodies:0,direction:1,size:2})}}var Xe=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(Xe||{});const we=[{bg:"#affbaf",wall:[{type:0,top:2,left:1},{type:0,top:2,left:2},{type:1,top:2,left:3},{type:1,top:2,left:4},{type:0,top:2,left:5},{type:0,top:2,left:6},{type:2,top:1,left:3},{type:2,top:3,left:4}]},{bg:"#fda2f2",wall:[{type:0,top:2,left:2},{type:1,top:2,left:3},{type:1,top:2,left:4},{type:0,top:2,left:5},{type:2,top:1,left:3},{type:2,top:3,left:4}]},{bg:"#7f61bb",wall:[]},{bg:"#c34366",wall:[]}];function Zt(t){let e,n,s,o,r;return{c(){e=S("div"),n=p("svg"),s=p("style"),o=Z(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),r=p("polygon"),l(s,"id","style2"),l(r,"fill","#FFA300"),l(r,"stroke","#EB0000"),l(r,"stroke-width","0.25"),l(r,"stroke-miterlimit","10"),l(r,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),l(r,"class","red"),l(n,"viewBox","0 0 443.3 421.6"),l(e,"class","bonus bounce-top svelte-y90akj"),v(e,"width",t[1]+"px"),v(e,"height",t[1]+"px"),v(e,"left",t[0].left*t[1]+"px"),v(e,"top",t[0].top*t[1]+"px")},m(i,f){U(i,e,f),u(e,n),u(n,s),u(s,o),u(n,r)},p(i,[f]){f&2&&v(e,"width",i[1]+"px"),f&2&&v(e,"height",i[1]+"px"),f&3&&v(e,"left",i[0].left*i[1]+"px"),f&3&&v(e,"top",i[0].top*i[1]+"px")},i:T,o:T,d(i){i&&z(e)}}}function Jt(t,e,n){const s=At();let{data:o}=e,{size:r=0}=e;return ht(()=>{setTimeout(()=>{s("bonusFinished",o.id)},H.BONUS_TIME)}),t.$$set=i=>{"data"in i&&n(0,o=i.data),"size"in i&&n(1,r=i.size)},[o,r]}class Qt extends ${constructor(e){super(),W(this,e,Jt,Zt,K,{data:0,size:1})}}const nt=()=>Date.now().toString(36)+Math.random().toString(36).substr(2);function en(t){let e,n,s;return{c(){e=S("div"),n=S("h1"),s=Z(t[0]),l(n,"class","svelte-1x8upsq"),l(e,"class","message-box svelte-1x8upsq")},m(o,r){U(o,e,r),u(e,n),u(n,s)},p(o,[r]){r&1&&oe(s,o[0])},i:T,o:T,d(o){o&&z(e)}}}function tn(t,e,n){let{message:s=""}=e;return t.$$set=o=>{"message"in o&&n(0,s=o.message)},[s]}class nn extends ${constructor(e){super(),W(this,e,tn,en,K,{message:0})}}function on(t){let e,n,s,o,r,i,f,a,c;return{c(){e=p("svg"),n=p("radialGradient"),s=p("stop"),o=p("stop"),r=p("rect"),i=p("linearGradient"),f=p("stop"),a=p("stop"),c=p("rect"),l(s,"offset","0"),v(s,"stop-color","#333333"),l(o,"offset","1"),v(o,"stop-color","#000000"),l(n,"id","rock_svgid"),l(n,"cx","219.5"),l(n,"cy","219.5"),l(n,"r","219"),l(n,"gradientUnits","userSpaceOnUse"),l(r,"x","0.5"),l(r,"y","0.5"),l(r,"fill","url(#rock_svgid)"),l(r,"stroke","#000000"),l(r,"stroke-miterlimit","10"),l(r,"width","438"),l(r,"height","438"),l(f,"offset","0"),v(f,"stop-color","#000000"),v(f,"stop-opacity","0"),l(a,"offset","1"),v(a,"stop-color","#FFFFFF"),v(a,"stop-opacity","0.5"),l(i,"id","rock_svgid2"),l(i,"gradientUnits","userSpaceOnUse"),l(i,"x1","219"),l(i,"y1","431"),l(i,"x2","219"),l(i,"y2","9.0005"),l(c,"x","8"),l(c,"y","9"),l(c,"fill","url(#rock_svgid2)"),l(c,"width","422"),l(c,"height","422"),l(e,"viewBox","0 0 439 439")},m(d,g){U(d,e,g),u(e,n),u(n,s),u(n,o),u(e,r),u(e,i),u(i,f),u(i,a),u(e,c)},d(d){d&&z(e)}}}function sn(t){let e,n,s,o,r,i,f,a,c,d,g,m,k,_,h,F,E,A,I,P,R,L;return{c(){e=p("svg"),n=p("g"),s=p("linearGradient"),o=p("stop"),r=p("stop"),i=p("rect"),f=p("linearGradient"),a=p("stop"),c=p("stop"),d=p("rect"),g=p("linearGradient"),m=p("stop"),k=p("stop"),_=p("polygon"),h=p("linearGradient"),F=p("stop"),E=p("stop"),A=p("rect"),I=p("linearGradient"),P=p("stop"),R=p("stop"),L=p("rect"),l(o,"offset","0"),v(o,"stop-color","#998675"),l(r,"offset","1"),v(r,"stop-color","#C7B299"),l(s,"id","concrete_SVGID_1_"),l(s,"gradientUnits","userSpaceOnUse"),l(s,"x1","4"),l(s,"y1","96.5"),l(s,"x2","281"),l(s,"y2","96.5"),l(i,"x","4"),l(i,"y","4"),l(i,"fill","url(#concrete_SVGID_1_)"),l(i,"stroke","#CABD99"),l(i,"stroke-width","8"),l(i,"stroke-miterlimit","10"),l(i,"width","277"),l(i,"height","185"),l(a,"offset","0"),v(a,"stop-color","#998675"),l(c,"offset","1"),v(c,"stop-color","#C7B299"),l(f,"id","concrete_SVGID_2_"),l(f,"gradientUnits","userSpaceOnUse"),l(f,"x1","420"),l(f,"y1","189"),l(f,"x2","420"),l(f,"y2","4"),l(d,"x","281"),l(d,"y","4"),l(d,"fill","url(#concrete_SVGID_2_)"),l(d,"stroke","#CABD99"),l(d,"stroke-width","8"),l(d,"stroke-miterlimit","10"),l(d,"width","278"),l(d,"height","185"),l(m,"offset","0"),v(m,"stop-color","#998675"),l(k,"offset","1"),v(k,"stop-color","#C7B299"),l(g,"id","concrete_SVGID_3_"),l(g,"gradientUnits","userSpaceOnUse"),l(g,"x1","281.5"),l(g,"y1","374"),l(g,"x2","281.5"),l(g,"y2","189.0005"),l(_,"fill","url(#concrete_SVGID_3_)"),l(_,"stroke","#CABD99"),l(_,"stroke-width","8"),l(_,"stroke-miterlimit","10"),l(_,"points",`281,189 4,189 4,374 281,374 \r
    559,374 559,189 	`),l(F,"offset","0"),v(F,"stop-color","#998675"),l(E,"offset","1"),v(E,"stop-color","#C7B299"),l(h,"id","concrete_SVGID_4_"),l(h,"gradientUnits","userSpaceOnUse"),l(h,"x1","4"),l(h,"y1","466.5"),l(h,"x2","281"),l(h,"y2","466.5"),l(A,"x","4"),l(A,"y","374"),l(A,"fill","url(#concrete_SVGID_4_)"),l(A,"stroke","#CABD99"),l(A,"stroke-width","8"),l(A,"stroke-miterlimit","10"),l(A,"width","277"),l(A,"height","185"),l(P,"offset","0"),v(P,"stop-color","#998675"),l(R,"offset","1"),v(R,"stop-color","#C7B299"),l(I,"id","concrete_SVGID_5_"),l(I,"gradientUnits","userSpaceOnUse"),l(I,"x1","281"),l(I,"y1","466.5"),l(I,"x2","559"),l(I,"y2","466.5"),l(L,"x","281"),l(L,"y","374"),l(L,"fill","url(#concrete_SVGID_5_)"),l(L,"stroke","#CABD99"),l(L,"stroke-width","8"),l(L,"stroke-miterlimit","10"),l(L,"width","278"),l(L,"height","185"),l(e,"viewBox","0 0 563 563")},m(G,M){U(G,e,M),u(e,n),u(n,s),u(s,o),u(s,r),u(n,i),u(n,f),u(f,a),u(f,c),u(n,d),u(n,g),u(g,m),u(g,k),u(n,_),u(n,h),u(h,F),u(h,E),u(n,A),u(n,I),u(I,P),u(I,R),u(n,L)},d(G){G&&z(e)}}}function ln(t){let e,n,s,o,r,i,f,a,c,d,g,m,k,_,h;return{c(){e=p("svg"),n=p("symbol"),s=p("polygon"),o=p("polygon"),r=p("polygon"),i=p("polygon"),f=p("polygon"),a=p("polygon"),c=p("polygon"),d=p("polygon"),g=p("polygon"),m=p("polygon"),k=p("polygon"),_=p("polygon"),h=p("use"),l(s,"points","27,-29 -27,-29 -27,29 27,29 	"),l(o,"fill","#BF6411"),l(o,"points","-15,29 -27,29 -27,16 -15,16 -2,16 -2,29 	"),l(r,"fill","#BF6411"),l(r,"points","12,29 0,29 0,16 12,16 25,16 25,29 	"),l(i,"fill","#BF6411"),l(i,"points","-27,14 -15,14 -15,2 -27,2 	"),l(f,"fill","#BF6411"),l(f,"points","0,14 -13,14 -13,2 0,2 12,2 12,14 	"),l(a,"fill","#BF6411"),l(a,"points","14,14 27,14 27,2 14,2 	"),l(c,"fill","#BF6411"),l(c,"points","-15,0 -27,0 -27,-13 -15,-13 -2,-13 -2,0 	"),l(d,"fill","#BF6411"),l(d,"points","12,0 0,0 0,-13 12,-13 25,-13 25,0 	"),l(g,"fill","#BF6411"),l(g,"points","-27,-15 -15,-15 -15,-27 -27,-27 	"),l(m,"fill","#BF6411"),l(m,"points","0,-15 -13,-15 -13,-27 0,-27 12,-27 12,-15 	"),l(k,"fill","#BF6411"),l(k,"points","14,-15 27,-15 27,-27 14,-27 	"),l(_,"display","none"),l(_,"fill","none"),l(_,"points","-27,29 27,29 27,-29 -27,-29 	"),l(n,"id","brick1"),l(n,"viewBox","-27 -29 54 58"),wt(h,"xlink:href","#brick1"),l(h,"width","54"),l(h,"height","58"),l(h,"x","-27"),l(h,"y","-29"),l(h,"transform","matrix(1 0 0 -1 27 29)"),l(h,"overflow","visible"),l(e,"viewBox","0 0 54 58")},m(F,E){U(F,e,E),u(e,n),u(n,s),u(n,o),u(n,r),u(n,i),u(n,f),u(n,a),u(n,c),u(n,d),u(n,g),u(n,m),u(n,k),u(n,_),u(e,h)},d(F){F&&z(e)}}}function rn(t){let e;function n(r,i){return r[1].type==Xe.DEFAULT?ln:r[1].type==Xe.CONCRETE?sn:on}let s=n(t),o=s(t);return{c(){e=S("div"),o.c(),l(e,"class","brick svelte-1ezhfpr"),v(e,"top",t[1].top*t[0]+"px"),v(e,"left",t[1].left*t[0]+"px"),v(e,"width",t[0]+"px"),v(e,"height",t[0]+"px")},m(r,i){U(r,e,i),o.m(e,null)},p(r,[i]){s!==(s=n(r))&&(o.d(1),o=s(r),o&&(o.c(),o.m(e,null))),i&3&&v(e,"top",r[1].top*r[0]+"px"),i&3&&v(e,"left",r[1].left*r[0]+"px"),i&1&&v(e,"width",r[0]+"px"),i&1&&v(e,"height",r[0]+"px")},i:T,o:T,d(r){r&&z(e),o.d()}}}function cn(t,e,n){let{size:s=0}=e,{data:o}=e;return t.$$set=r=>{"size"in r&&n(0,s=r.size),"data"in r&&n(1,o=r.data)},[s,o]}class fn extends ${constructor(e){super(),W(this,e,cn,rn,K,{size:0,data:1})}}function ot(t,e,n){const s=t.slice();return s[3]=e[n],s}function st(t){let e,n;return e=new fn({props:{data:t[3],size:t[0]}}),{c(){te(e.$$.fragment)},m(s,o){J(e,s,o),n=!0},p(s,o){const r={};o&2&&(r.data=s[3]),o&1&&(r.size=s[0]),e.$set(r)},i(s){n||(C(e.$$.fragment,s),n=!0)},o(s){x(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function un(t){let e,n,s=t[1],o=[];for(let i=0;i<s.length;i+=1)o[i]=st(ot(t,s,i));const r=i=>x(o[i],1,1,()=>{o[i]=null});return{c(){for(let i=0;i<o.length;i+=1)o[i].c();e=Re()},m(i,f){for(let a=0;a<o.length;a+=1)o[a].m(i,f);U(i,e,f),n=!0},p(i,[f]){if(f&3){s=i[1];let a;for(a=0;a<s.length;a+=1){const c=ot(i,s,a);o[a]?(o[a].p(c,f),C(o[a],1)):(o[a]=st(c),o[a].c(),C(o[a],1),o[a].m(e.parentNode,e))}for(ye(),a=s.length;a<o.length;a+=1)r(a);ve()}},i(i){if(!n){for(let f=0;f<s.length;f+=1)C(o[f]);n=!0}},o(i){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)x(o[f]);n=!1},d(i){dt(o,i),i&&z(e)}}}function an(t,e,n){let s,{size:o=0}=e,r;return se.subscribe(i=>{n(2,r=i)}),t.$$set=i=>{"size"in i&&n(0,o=i.size)},t.$$.update=()=>{t.$$.dirty&4&&n(1,s=we[r.level-1].wall)},[o,s,r]}class dn extends ${constructor(e){super(),W(this,e,an,un,K,{size:0})}}var mt=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(mt||{});const pn=()=>{let t={bonus:[],foods:[]},{update:e,subscribe:n}=Ke(t);return{subscribe:n,addBonus:a=>{e(c=>(c.bonus.findIndex(g=>g.id==a.id)==-1&&(c.bonus.push(a),c.bonus=c.bonus,c=c),c))},removeBonus:a=>{e(c=>{let d=c.bonus.slice(0),g=d.findIndex(m=>m.id==a);return g!=-1&&(d.splice(g,1),c.bonus=d,c=c),c})},addFood:a=>{e(c=>(c.foods.findIndex(g=>g.id==a.id)==-1&&(c.foods.push(a),c.foods=c.foods,c=c),c))},removeFood:a=>{e(c=>{let d=c.foods.slice(0),g=d.findIndex(m=>m.id==a);return g!=-1&&(d.splice(g,1),c.foods=d,c=c),c})},reset:()=>{e(a=>(a={bonus:[],foods:[]},a))}}},ce=pn();function lt(t,e,n){const s=t.slice();return s[41]=e[n],s}function rt(t,e,n){const s=t.slice();return s[44]=e[n],s}function it(t,e){let n,s,o;return s=new Pt({props:{data:e[44],size:e[6]}}),{key:t,first:null,c(){n=Re(),te(s.$$.fragment),this.first=n},m(r,i){U(r,n,i),J(s,r,i),o=!0},p(r,i){e=r;const f={};i[0]&128&&(f.data=e[44]),i[0]&64&&(f.size=e[6]),s.$set(f)},i(r){o||(C(s.$$.fragment,r),o=!0)},o(r){x(s.$$.fragment,r),o=!1},d(r){r&&z(n),Q(s,r)}}}function ct(t,e){let n,s,o;return s=new Qt({props:{data:e[41],size:e[6]}}),s.$on("bonusFinished",e[12]),{key:t,first:null,c(){n=Re(),te(s.$$.fragment),this.first=n},m(r,i){U(r,n,i),J(s,r,i),o=!0},p(r,i){e=r;const f={};i[0]&128&&(f.data=e[41]),i[0]&64&&(f.size=e[6]),s.$set(f)},i(r){o||(C(s.$$.fragment,r),o=!0)},o(r){x(s.$$.fragment,r),o=!1},d(r){r&&z(n),Q(s,r)}}}function ft(t){let e,n;return e=new nn({props:{message:t[5]}}),{c(){te(e.$$.fragment)},m(s,o){J(e,s,o),n=!0},p(s,o){const r={};o[0]&32&&(r.message=s[5]),e.$set(r)},i(s){n||(C(e.$$.fragment,s),n=!0)},o(s){x(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function hn(t){let e,n,s,o,r,i,f,a,c=[],d=new Map,g,m=[],k=new Map,_,h,F,E,A,I,P;r=new dn({props:{size:t[6]}}),f=new jt({props:{direction:t[8],snakeBodies:t[9],size:t[6]}});let R=t[7].foods;const L=y=>y[44].id;for(let y=0;y<R.length;y+=1){let w=rt(t,R,y),D=L(w);d.set(D,c[y]=it(D,w))}let G=t[7].bonus;const M=y=>y[41].id;for(let y=0;y<G.length;y+=1){let w=lt(t,G,y),D=M(w);k.set(D,m[y]=ct(D,w))}let B=t[4]==!0&&ft(t);return{c(){e=S("div"),n=S("div"),n.textContent="Score",s=V(),o=S("main"),te(r.$$.fragment),i=V(),te(f.$$.fragment),a=V();for(let y=0;y<c.length;y+=1)c[y].c();g=V();for(let y=0;y<m.length;y+=1)m[y].c();_=V(),B&&B.c(),h=V(),F=S("div"),F.innerHTML="<span>Pause</span>",v(o,"width",t[2]+"px"),v(o,"height",t[2]+"px"),v(o,"background",we[t[3].level].bg),l(o,"class","svelte-1vcapp3"),l(e,"class","wrap svelte-1vcapp3"),De(()=>t[13].call(e))},m(y,w){U(y,e,w),u(e,n),u(e,s),u(e,o),J(r,o,null),u(o,i),J(f,o,null),u(o,a);for(let D=0;D<c.length;D+=1)c[D].m(o,null);u(o,g);for(let D=0;D<m.length;D+=1)m[D].m(o,null);u(o,_),B&&B.m(o,null),u(e,h),u(e,F),E=St(e,t[13].bind(e)),A=!0,I||(P=[re(window,"keydown",t[11]),vt(Rt.call(null,o,{timeframe:300,minSwipeDistance:60,touchAction:"none"})),re(o,"swipe",t[10])],I=!0)},p(y,w){const D={};w[0]&64&&(D.size=y[6]),r.$set(D);const q={};w[0]&256&&(q.direction=y[8]),w[0]&512&&(q.snakeBodies=y[9]),w[0]&64&&(q.size=y[6]),f.$set(q),w[0]&192&&(R=y[7].foods,ye(),c=Qe(c,w,L,1,y,R,d,o,Je,it,g,rt),ve()),w[0]&4288&&(G=y[7].bonus,ye(),m=Qe(m,w,M,1,y,G,k,o,Je,ct,_,lt),ve()),y[4]==!0?B?(B.p(y,w),w[0]&16&&C(B,1)):(B=ft(y),B.c(),C(B,1),B.m(o,null)):B&&(ye(),x(B,1,1,()=>{B=null}),ve()),(!A||w[0]&4)&&v(o,"width",y[2]+"px"),(!A||w[0]&4)&&v(o,"height",y[2]+"px"),(!A||w[0]&8)&&v(o,"background",we[y[3].level].bg)},i(y){if(!A){C(r.$$.fragment,y),C(f.$$.fragment,y);for(let w=0;w<R.length;w+=1)C(c[w]);for(let w=0;w<G.length;w+=1)C(m[w]);C(B),A=!0}},o(y){x(r.$$.fragment,y),x(f.$$.fragment,y);for(let w=0;w<c.length;w+=1)x(c[w]);for(let w=0;w<m.length;w+=1)x(m[w]);x(B),A=!1},d(y){y&&z(e),Q(r),Q(f);for(let w=0;w<c.length;w+=1)c[w].d();for(let w=0;w<m.length;w+=1)m[w].d();B&&B.d(),E(),I=!1,ue(P)}}}function _n(t,e,n){let s=!1,o=!1,r=Ae.NEXT_LEVEL,i=!1,f,a,c=0,d=0;ht(()=>{console.log(`--onMount = ${d} ${c}`)});let g,m;le.subscribe(b=>{}),se.subscribe(b=>{n(3,g=b)}),ce.subscribe(b=>{n(7,m=b)});const k=()=>{A(Ae.GAME_OVER),clearInterval(F),setTimeout(()=>{I(),w(),le.gameOver()},H.MESSAGE_TIME)};let _=O.RIGHT,h=[],F;function E(b){b.detail.direction,b.detail.target}const A=b=>{n(5,r=b),n(4,o=!0)},I=()=>{n(4,o=!1),n(5,r=Ae.GAME_OVER)},P=()=>{A(Ae.NEXT_LEVEL),clearInterval(F),setTimeout(()=>{I(),se.nextLevel(),se.resetScore(),B(),w()},H.MESSAGE_TIME)},R=b=>{m.bonus.forEach(N=>{y(b,N)&&(ce.removeBonus(N.id),se.getBonus())})},L=()=>{h.length/H.MAX_POINTS>1&&h.length%H.MAX_POINTS==0&&(g.level<we.length-1?P():(clearInterval(F),le.allLevelsCleared()))},G=()=>{let{left:b,top:N}=h[0];return _===O.UP?N-=1:_===O.DOWN?N+=1:_===O.LEFT?b-=1:_===O.RIGHT&&(b+=1),{left:b,top:N}},M=b=>{m.foods.length>0&&y(b,m.foods[0])&&(n(9,h=[...h,h[h.length-1]]),se.eatFood(),ce.removeFood(m.foods[0].id),ie(),g.food%5==0&&he())},B=()=>{let b=we.length-g.level;b=b*H.DELAY,ce.reset(),ie(),F=setInterval(()=>{i=!0,q()&&(i=!1,k()),D();const N=G();R(N),h.pop(),n(9,h=[N,...h]),M(N),L(),i=!1},H.DELAY)},y=(b,N)=>!(b.top<N.top||b.top>N.top||b.left<N.left||b.left>N.left),w=()=>{n(8,_=O.RIGHT),n(9,h=[{left:2,top:0},{left:1,top:0},{left:0,top:0}])},D=()=>{const{top:b,left:N}=h[0];N>=H.MAX_BLOCKS&&_==O.RIGHT&&n(9,h[0].left=-2,h),N<0&&_==O.LEFT&&n(9,h[0].left=H.MAX_BLOCKS+1,h),b<0&&_==O.UP&&n(9,h[0].top=H.MAX_BLOCKS+1,h),b>=H.MAX_BLOCKS&&_==O.DOWN&&n(9,h[0].top=-2,h)},q=()=>h.slice(1).filter(Y=>y(Y,h[0])).length>0,ae=()=>{clearInterval(F)},de=b=>b===me.UP&&_!=O.DOWN?O.UP:b===me.RIGHT&&_!=O.LEFT?O.RIGHT:b===me.LEFT&&_!=O.RIGHT?O.LEFT:b===me.DOWN&&_!=O.UP?O.DOWN:O.UNKNOWN,pe=b=>{switch(b){case O.DOWN:return O.UP;case O.UP:return O.DOWN;case O.LEFT:return O.RIGHT;case O.RIGHT:return O.LEFT;case O.UNKNOWN:return O.UNKNOWN}},Ee=b=>{if(i)return;const N=b.code;if(N===me.SPACEBAR&&(s=!s,s?ae():B()),s)return;const Y=de(N);Y!=O.UNKNOWN&&Y!=pe(Y)&&n(8,_=Y)},Ne=b=>{ce.removeBonus(b.detail)},ie=()=>{const b=nt();let N={top:0,left:0,id:b,type:mt.DEFAULT};N.top=Math.floor(Math.random()*H.MAX_BLOCKS),N.left=Math.floor(Math.random()*H.MAX_BLOCKS),ce.addFood(N)},he=()=>{const b=nt();let N={top:0,left:0,id:b};N.top=Math.floor(Math.random()*H.MAX_BLOCKS),N.left=Math.floor(Math.random()*H.MAX_BLOCKS),ce.addBonus(N)};B(),w();function ne(){f=this.clientWidth,a=this.clientHeight,n(0,f),n(1,a)}return t.$$.update=()=>{t.$$.dirty[0]&7&&(n(2,c=Math.min(f,a)),n(2,c=c-50),n(2,c=Math.min(c,500)),isNaN(c)||n(6,d=Math.floor(c/H.MAX_BLOCKS))),t.$$.dirty[0]&8&&we[g.level-1].wall},[f,a,c,g,o,r,d,m,_,h,E,Ee,Ne,ne]}class He extends ${constructor(e){super(),W(this,e,_n,hn,K,{},null,[-1,-1])}}function gn(t){let e,n,s,o,r,i,f;return{c(){e=S("div"),n=S("div"),n.textContent="Snake",s=V(),o=S("div"),r=S("button"),r.textContent="Start",l(n,"class","title svelte-yxm8be"),l(o,"class","btn svelte-yxm8be"),l(e,"class","start-screen svelte-yxm8be")},m(a,c){U(a,e,c),u(e,n),u(e,s),u(e,o),u(o,r),i||(f=re(r,"click",t[0]),i=!0)},p:T,i:T,o:T,d(a){a&&z(e),i=!1,f()}}}function mn(t){return[()=>{console.log("start game"),le.startGame()}]}class yn extends ${constructor(e){super(),W(this,e,mn,gn,K,{})}}function vn(t){let e,n,s,o,r,i,f,a;return{c(){e=S("div"),n=S("div"),n.textContent="Congratulations !",s=V(),o=S("div"),o.textContent="You have cleared all the levels.",r=V(),i=S("button"),i.textContent="Menu",l(n,"class","title svelte-gyhhqq"),l(e,"class","final svelte-gyhhqq")},m(c,d){U(c,e,d),u(e,n),u(e,s),u(e,o),u(e,r),u(e,i),f||(a=re(i,"click",t[0]),f=!0)},p:T,i:T,o:T,d(c){c&&z(e),f=!1,a()}}}function wn(t){return[()=>{console.log("restart game"),le.welcomeScreen()}]}class bn extends ${constructor(e){super(),W(this,e,wn,vn,K,{})}}var X=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(X||{});const En=()=>{const t=[{status:X.NOT_STARTED,component:yn},{status:X.RUNNING,component:He},{status:X.PAUSED,component:He},{status:X.RESUME,component:He},{status:X.GAME_OVER,component:Tt},{status:X.ALL_LEVELS_CLEARED,component:bn}];let{update:e,subscribe:n}=Ke(t.find(c=>c.status==X.RUNNING));return{subscribe:n,startGame:()=>{e(c=>(c=t.find(d=>d.status==X.RUNNING),c))},pauseGame:()=>{e(c=>(c=t.find(d=>d.status==X.PAUSED),c))},resumeGame:()=>{e(c=>(c=t.find(d=>d.status==X.RUNNING),c))},gameOver:()=>{e(c=>(c=t.find(d=>d.status==X.GAME_OVER),c))},welcomeScreen:()=>{e(c=>(c=t.find(d=>d.status==X.NOT_STARTED),c))},allLevelsCleared:()=>{e(c=>(c=t.find(d=>d.status==X.ALL_LEVELS_CLEARED),c))}}},le=En();function Sn(t){let e,n,s;var o=t[0].component;function r(i){return{}}return o&&(n=new o(r())),{c(){e=S("div"),n&&te(n.$$.fragment),l(e,"class","container svelte-174qdzj")},m(i,f){U(i,e,f),n&&J(n,e,null),s=!0},p(i,[f]){if(o!==(o=i[0].component)){if(n){ye();const a=n;x(a.$$.fragment,1,0,()=>{Q(a,1)}),ve()}o?(n=new o(r()),te(n.$$.fragment),C(n.$$.fragment,1),J(n,e,null)):n=null}},i(i){s||(n&&C(n.$$.fragment,i),s=!0)},o(i){n&&x(n.$$.fragment,i),s=!1},d(i){i&&z(e),n&&Q(n)}}}function kn(t,e,n){let s;return le.subscribe(o=>{n(0,s=o)}),[s]}class An extends ${constructor(e){super(),W(this,e,kn,Sn,K,{})}}new An({target:document.getElementById("app")});
