(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function B(){}function dt(t){return t()}function Je(){return Object.create(null)}function pe(t){t.forEach(dt)}function pt(t){return typeof t=="function"}function j(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function bt(t){return Object.keys(t).length===0}function Se(t){return t==null?"":t}function wt(t){return t&&pt(t.destroy)?t.destroy:B}function a(t,e){t.appendChild(e)}function x(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode.removeChild(t)}function ht(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t){return document.createTextNode(t)}function V(){return Q(" ")}function xe(){return Q("")}function ae(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function r(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Et(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function St(t){return Array.from(t.childNodes)}function le(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}let Be;function kt(){if(Be===void 0){Be=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Be=!0}}return Be}function At(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const s=k("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const o=kt();let i;return o?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=ae(window,"message",l=>{l.source===s.contentWindow&&e()})):(s.src="about:blank",s.onload=()=>{i=ae(s.contentWindow,"resize",e)}),a(t,s),()=>{(o||i&&s.contentWindow)&&i(),D(s)}}function Ft(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,s,e),o}let Ge;function Te(t){Ge=t}function gt(){if(!Ge)throw new Error("Function called outside component initialization");return Ge}function Xe(t){gt().$$.on_mount.push(t)}function Lt(){const t=gt();return(e,n,{cancelable:s=!1}={})=>{const o=t.$$.callbacks[e];if(o){const i=Ft(e,n,{cancelable:s});return o.slice().forEach(l=>{l.call(t,i)}),!i.defaultPrevented}return!0}}const Ne=[],Ve=[],Me=[],Qe=[],Ot=Promise.resolve();let We=!1;function Nt(){We||(We=!0,Ot.then(_t))}function Ue(t){Me.push(t)}const Ke=new Set;let Re=0;function _t(){const t=Ge;do{for(;Re<Ne.length;){const e=Ne[Re];Re++,Te(e),Ct(e.$$)}for(Te(null),Ne.length=0,Re=0;Ve.length;)Ve.pop()();for(let e=0;e<Me.length;e+=1){const n=Me[e];Ke.has(n)||(Ke.add(n),n())}Me.length=0}while(Ne.length);for(;Qe.length;)Qe.pop()();We=!1,Ke.clear(),Te(t)}function Ct(t){if(t.fragment!==null){t.update(),pe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ue)}}const ze=new Set;let de;function we(){de={r:0,c:[],p:de}}function Ee(){de.r||pe(de.c),de=de.p}function R(t,e){t&&t.i&&(ze.delete(t),t.i(e))}function K(t,e,n,s){if(t&&t.o){if(ze.has(t))return;ze.add(t),de.c.push(()=>{ze.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function et(t,e){K(t,1,1,()=>{e.delete(t.key)})}function tt(t,e,n,s,o,i,l,c,u,f,p,d){let h=t.length,w=i.length,_=h;const E={};for(;_--;)E[t[_].key]=_;const L=[],S=new Map,A=new Map;for(_=w;_--;){const F=d(o,i,_),T=n(F);let I=l.get(T);I?s&&I.p(F,e):(I=f(T,F),I.c()),S.set(T,L[_]=I),T in E&&A.set(T,Math.abs(_-E[T]))}const G=new Set,$=new Set;function U(F){R(F,1),F.m(c,p),l.set(F.key,F),p=F.first,w--}for(;h&&w;){const F=L[w-1],T=t[h-1],I=F.key,O=T.key;F===T?(p=F.first,h--,w--):S.has(O)?!l.has(I)||G.has(I)?U(F):$.has(O)?h--:A.get(I)>A.get(O)?($.add(I),U(F)):(G.add(O),h--):(u(T,l),h--)}for(;h--;){const F=t[h];S.has(F.key)||u(F,l)}for(;w;)U(L[w-1]);return L}function se(t){t&&t.c()}function ee(t,e,n,s){const{fragment:o,on_mount:i,on_destroy:l,after_update:c}=t.$$;o&&o.m(e,n),s||Ue(()=>{const u=i.map(dt).filter(pt);l?l.push(...u):pe(u),t.$$.on_mount=[]}),c.forEach(Ue)}function te(t,e){const n=t.$$;n.fragment!==null&&(pe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Tt(t,e){t.$$.dirty[0]===-1&&(Ne.push(t),Nt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(t,e,n,s,o,i,l,c=[-1]){const u=Ge;Te(t);const f=t.$$={fragment:null,ctx:null,props:i,update:B,not_equal:o,bound:Je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Je(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};l&&l(f.root);let p=!1;if(f.ctx=n?n(t,e.props||{},(d,h,...w)=>{const _=w.length?w[0]:h;return f.ctx&&o(f.ctx[d],f.ctx[d]=_)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](_),p&&Tt(t,d)),h}):[],f.update(),p=!0,pe(f.before_update),f.fragment=s?s(f.ctx):!1,e.target){if(e.hydrate){const d=St(e.target);f.fragment&&f.fragment.l(d),d.forEach(D)}else f.fragment&&f.fragment.c();e.intro&&R(t.$$.fragment),ee(t,e.target,e.anchor,e.customElement),_t()}Te(u)}class q{$destroy(){te(this,1),this.$destroy=B}$on(e,n){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(e){this.$$set&&!bt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var C=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(C||{}),W=(t=>(t[t.DELAY=100]="DELAY",t[t.MAX_POINTS=6]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t[t.MAX_BLOCKS=20]="MAX_BLOCKS",t))(W||{}),be=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(be||{}),Ce=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(Ce||{});const ye=[];function je(t,e=B){let n;const s=new Set;function o(c){if(j(t,c)&&(t=c,n)){const u=!ye.length;for(const f of s)f[1](),ye.push(f,t);if(u){for(let f=0;f<ye.length;f+=2)ye[f][0](ye[f+1]);ye.length=0}}}function i(c){o(c(t))}function l(c,u=B){const f=[c,u];return s.add(f),s.size===1&&(n=e(o)||B),c(t),()=>{s.delete(f),s.size===0&&(n(),n=null)}}return{set:o,update:i,subscribe:l}}const Gt=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=je(t);return{subscribe:n,resetScore:()=>{e(c=>(c.food=0,c.bonus=0,c.score=0,c))},eatFood:()=>{e(c=>(c.food=c.food+1,c.score=c.food*5+c.bonus*20,c.score>c.highScore&&(c.highScore=c.score),c))},getBonus:()=>{e(c=>(c.bonus=c.bonus+1,c))},nextLevel:()=>{e(c=>(c.level=c.level+1,c))}}};let ie=Gt();function It(t){let e,n,s,o,i,l,c,u=t[1].playerName+"",f,p,d,h,w,_=t[1].score+"",E,L,S,A,G,$=t[1].food+"",U,F,T,I,O,m=t[1].bonus+"",b,M,Z,he,ge,_e=t[1].highScore+"",ke,Ae,ue,me,re,v=t[1].level+"",N,H,Fe=t[1].stage+"",Pe,Ye,ve,Le,qe,Ie,He,Ze;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",s=V(),o=k("table"),i=k("tr"),l=k("td"),l.textContent="Player",c=k("td"),f=Q(u),p=V(),d=k("tr"),h=k("td"),h.textContent="Score",w=k("td"),E=Q(_),L=V(),S=k("tr"),A=k("td"),A.textContent="Food",G=k("td"),U=Q($),F=V(),T=k("tr"),I=k("td"),I.textContent="Bonus",O=k("td"),b=Q(m),M=V(),Z=k("tr"),he=k("td"),he.textContent="High Score",ge=k("td"),ke=Q(_e),Ae=V(),ue=k("tr"),me=k("td"),me.textContent="Level-Stage",re=k("td"),N=Q(v),H=k("span"),H.textContent="-",Pe=Q(Fe),Ye=V(),ve=k("div"),Le=k("button"),Le.textContent="Replay",qe=V(),Ie=k("button"),Ie.textContent="Menu",r(n,"class","title svelte-1mhd3rb"),r(l,"class","c1 svelte-1mhd3rb"),r(c,"class","c2 svelte-1mhd3rb"),r(h,"class","c1 svelte-1mhd3rb"),r(w,"class","c2 svelte-1mhd3rb"),r(A,"class","c1 svelte-1mhd3rb"),r(G,"class","c2 svelte-1mhd3rb"),r(I,"class","c1 svelte-1mhd3rb"),r(O,"class","c2 svelte-1mhd3rb"),r(he,"class","c1 svelte-1mhd3rb"),r(ge,"class","c2 svelte-1mhd3rb"),r(me,"class","c1 svelte-1mhd3rb"),r(re,"class","c2 svelte-1mhd3rb"),r(o,"class","svelte-1mhd3rb"),r(ve,"class","flex svelte-1mhd3rb"),r(e,"class","game-over-screen svelte-1mhd3rb")},m(J,ne){x(J,e,ne),a(e,n),a(e,s),a(e,o),a(o,i),a(i,l),a(i,c),a(c,f),a(o,p),a(o,d),a(d,h),a(d,w),a(w,E),a(o,L),a(o,S),a(S,A),a(S,G),a(G,U),a(o,F),a(o,T),a(T,I),a(T,O),a(O,b),a(o,M),a(o,Z),a(Z,he),a(Z,ge),a(ge,ke),a(o,Ae),a(o,ue),a(ue,me),a(ue,re),a(re,N),a(re,H),a(re,Pe),a(e,Ye),a(e,ve),a(ve,Le),t[4](Le),a(ve,qe),a(ve,Ie),He||(Ze=[ae(Le,"click",t[3]),ae(Ie,"click",t[2])],He=!0)},p(J,[ne]){ne&2&&u!==(u=J[1].playerName+"")&&le(f,u),ne&2&&_!==(_=J[1].score+"")&&le(E,_),ne&2&&$!==($=J[1].food+"")&&le(U,$),ne&2&&m!==(m=J[1].bonus+"")&&le(b,m),ne&2&&_e!==(_e=J[1].highScore+"")&&le(ke,_e),ne&2&&v!==(v=J[1].level+"")&&le(N,v),ne&2&&Fe!==(Fe=J[1].stage+"")&&le(Pe,Fe)},i:B,o:B,d(J){J&&D(e),t[4](null),He=!1,pe(Ze)}}}function Bt(t,e,n){let s;Xe(()=>{s.focus()});const o=()=>{console.log("restart game"),fe.welcomeScreen()},i=()=>{ie.resetScore(),fe.startGame()};let l;ie.subscribe(u=>{n(1,l=u)});function c(u){Ve[u?"unshift":"push"](()=>{s=u,n(0,s)})}return[s,l,o,i,c]}class Rt extends q{constructor(e){super(),Y(this,e,Bt,It,j,{})}}var mt=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(mt||{}),vt=(t=>(t[t.STAR=0]="STAR",t[t.GEM=1]="GEM",t[t.RUBY=2]="RUBY",t))(vt||{}),P=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(P||{});const Dt=300,Mt=60,yt="none";function Oe(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function zt(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function De(t,e,n,s,o){t.dispatchEvent(new CustomEvent(`${e}${o}`,{detail:{event:n,pointersCount:s.length}}))}function Ut(t,e,n,s,o,i=yt){e.style.touchAction=i;let l=[];function c(f){l.push(f),De(e,t,f,l,"down"),s==null||s(l,f);const p=f.pointerId;function d(S){p===S.pointerId&&(l=zt(S,l),l.length||h(),De(e,t,S,l,"up"),o==null||o(l,S))}function h(){w(),_(),E(),L()}const w=Oe(e,"pointermove",S=>{l=l.map(A=>S.pointerId===A.pointerId?S:A),De(e,t,S,l,"move"),n==null||n(l,S)}),_=Oe(e,"lostpointercapture",S=>{d(S)}),E=Oe(e,"pointerup",S=>{d(S)}),L=Oe(e,"pointerleave",S=>{l=[],h(),De(e,t,S,l,"up"),o==null||o(l,S)})}const u=Oe(e,"pointerdown",c);return{destroy:()=>{u()}}}function xt(t,e={timeframe:Dt,minSwipeDistance:Mt,touchAction:yt}){const n="swipe";let s,o,i,l;function c(f,p){o=p.clientX,i=p.clientY,s=Date.now(),f.length===1&&(l=p.target)}function u(f,p){if(p.type==="pointerup"&&f.length===0&&Date.now()-s<e.timeframe){const d=p.clientX-o,h=p.clientY-i,w=Math.abs(d),_=Math.abs(h);let E=null;w>=2*_&&w>e.minSwipeDistance?E=d>0?"right":"left":_>=2*w&&_>e.minSwipeDistance&&(E=h>0?"bottom":"top"),E&&t.dispatchEvent(new CustomEvent(n,{detail:{direction:E,target:l}}))}}return Ut(n,t,null,c,u,e.touchAction)}function Pt(t){let e,n,s,o,i,l,c,u,f,p,d,h,w,_,E,L;return{c(){e=k("div"),n=g("svg"),s=g("g"),o=g("g"),i=g("g"),l=g("g"),c=g("ellipse"),u=g("g"),f=g("path"),p=g("path"),d=g("g"),h=g("path"),w=g("g"),_=g("path"),E=g("g"),L=g("ellipse"),r(s,"id","Layer_1"),r(c,"id","shadow"),r(c,"opacity","0.3"),r(c,"cx","438.7"),r(c,"cy","765.8"),r(c,"rx","283"),r(c,"ry","32.9"),r(f,"id","cup-shadow"),r(f,"fill","#E7F4FA"),r(f,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),r(p,"id","cup-light"),r(p,"fill","#FFFFFF"),r(p,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),r(h,"id","mainFood"),r(h,"fill","#DB343C"),r(h,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),r(_,"id","highlight"),r(_,"opacity","0.3"),r(_,"fill","#FFFFFF"),r(_,"stroke","#000000"),r(_,"stroke-width","0.25"),r(_,"stroke-miterlimit","10"),r(_,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),r(L,"id","c2"),r(L,"fill","#FFFFFF"),r(L,"cx","436.8"),r(L,"cy","144.3"),r(L,"rx","140.6"),r(L,"ry","138.4"),r(E,"id","c1"),r(o,"id","Layer_2"),r(n,"viewBox","0 0 855.6 798.6"),r(e,"class","food jello-vertical svelte-h8lqdv"),y(e,"left",t[1].left*t[0]+"px"),y(e,"top",t[1].top*t[0]+"px"),y(e,"width",t[0]-2+"px"),y(e,"height",t[0]-2+"px")},m(S,A){x(S,e,A),a(e,n),a(n,s),a(n,o),a(o,i),a(i,l),a(l,c),a(i,u),a(u,f),a(u,p),a(i,d),a(d,h),a(i,w),a(w,_),a(i,E),a(E,L)},p(S,[A]){A&3&&y(e,"left",S[1].left*S[0]+"px"),A&3&&y(e,"top",S[1].top*S[0]+"px"),A&1&&y(e,"width",S[0]-2+"px"),A&1&&y(e,"height",S[0]-2+"px")},i:B,o:B,d(S){S&&D(e)}}}function Ht(t,e,n){let{size:s=0}=e,{data:o}=e;return t.$$set=i=>{"size"in i&&n(0,s=i.size),"data"in i&&n(1,o=i.data)},[s,o]}class Kt extends q{constructor(e){super(),Y(this,e,Ht,Pt,j,{size:0,data:1})}}function $t(t){let e,n,s;return{c(){e=g("svg"),n=g("rect"),r(n,"y","0"),r(n,"fill","#0037FF"),r(n,"width","50"),r(n,"height","50"),r(e,"viewBox","0 0 50 50"),r(e,"class",s=Se(t[4])+" svelte-zvgok1")},m(o,i){x(o,e,i),a(e,n)},p(o,i){i&16&&s!==(s=Se(o[4])+" svelte-zvgok1")&&r(e,"class",s)},d(o){o&&D(e)}}}function Vt(t){let e,n,s;return{c(){e=g("svg"),n=g("rect"),r(n,"y","0"),r(n,"fill","#0037FF"),r(n,"width","50"),r(n,"height","50"),r(e,"viewBox","0 0 50 50"),r(e,"class",s=Se(t[4])+" svelte-zvgok1")},m(o,i){x(o,e,i),a(e,n)},p(o,i){i&16&&s!==(s=Se(o[4])+" svelte-zvgok1")&&r(e,"class",s)},d(o){o&&D(e)}}}function Wt(t){let e,n,s,o,i,l,c;return{c(){e=g("svg"),n=g("g"),s=g("rect"),o=g("path"),i=g("circle"),l=g("circle"),r(s,"opacity","0"),r(s,"fill","#FFFFFF"),r(s,"width","258"),r(s,"height","258"),r(o,"fill","#0037FF"),r(o,"d",`M147.5,29.2C111.6,29.2,80.1,48,62.6,77H0v104h62.6c17.5,28,49,47.3,84.9,47.3c55,0,99.6-44.6,99.6-99.6\r
          S202.5,29.2,147.5,29.2z`),r(i,"fill","#FFF800"),r(i,"stroke","#000000"),r(i,"stroke-miterlimit","10"),r(i,"cx","184.3"),r(i,"cy","84.5"),r(i,"r","21.8"),r(l,"fill","#FFF800"),r(l,"stroke","#000000"),r(l,"stroke-miterlimit","10"),r(l,"cx","184.3"),r(l,"cy","164.5"),r(l,"r","21.8"),r(e,"viewBox","0 0 258 258"),r(e,"class",c=Se(t[4])+" svelte-zvgok1")},m(u,f){x(u,e,f),a(e,n),a(n,s),a(n,o),a(n,i),a(n,l)},p(u,f){f&16&&c!==(c=Se(u[4])+" svelte-zvgok1")&&r(e,"class",c)},d(u){u&&D(e)}}}function Xt(t){let e;function n(i,l){return i[2]?Wt:i[3]?Vt:$t}let s=n(t),o=s(t);return{c(){e=k("div"),o.c(),y(e,"left",t[1].left*t[0]+"px"),y(e,"top",t[1].top*t[0]+"px"),y(e,"width",t[0]+"px"),y(e,"height",t[0]+"px"),r(e,"class","snake-body svelte-zvgok1")},m(i,l){x(i,e,l),o.m(e,null)},p(i,[l]){s===(s=n(i))&&o?o.p(i,l):(o.d(1),o=s(i),o&&(o.c(),o.m(e,null))),l&3&&y(e,"left",i[1].left*i[0]+"px"),l&3&&y(e,"top",i[1].top*i[0]+"px"),l&1&&y(e,"width",i[0]+"px"),l&1&&y(e,"height",i[0]+"px")},i:B,o:B,d(i){i&&D(e),o.d()}}}function jt(t,e,n){let{size:s=0}=e,{current:o=null}=e,{prev:i=null}=e,{isHead:l=!1}=e,{isTail:c=!1}=e,{direction:u="right"}=e;return t.$$set=f=>{"size"in f&&n(0,s=f.size),"current"in f&&n(1,o=f.current),"prev"in f&&n(5,i=f.prev),"isHead"in f&&n(2,l=f.isHead),"isTail"in f&&n(3,c=f.isTail),"direction"in f&&n(4,u=f.direction)},[s,o,l,c,u,i]}class Yt extends q{constructor(e){super(),Y(this,e,jt,Xt,j,{size:0,current:1,prev:5,isHead:2,isTail:3,direction:4})}}function nt(t,e,n){const s=t.slice();return s[3]=e[n],s[5]=n,s}function ot(t){let e,n;return e=new Yt({props:{isHead:t[5]==0,isTail:t[5]==t[0].length-1,current:t[3],prev:t[5]>0?t[0][t[5]-1]:null,direction:t[1],size:t[2]}}),{c(){se(e.$$.fragment)},m(s,o){ee(e,s,o),n=!0},p(s,o){const i={};o&1&&(i.isTail=s[5]==s[0].length-1),o&1&&(i.current=s[3]),o&1&&(i.prev=s[5]>0?s[0][s[5]-1]:null),o&2&&(i.direction=s[1]),o&4&&(i.size=s[2]),e.$set(i)},i(s){n||(R(e.$$.fragment,s),n=!0)},o(s){K(e.$$.fragment,s),n=!1},d(s){te(e,s)}}}function qt(t){let e,n,s=t[0],o=[];for(let l=0;l<s.length;l+=1)o[l]=ot(nt(t,s,l));const i=l=>K(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=xe()},m(l,c){for(let u=0;u<o.length;u+=1)o[u].m(l,c);x(l,e,c),n=!0},p(l,[c]){if(c&7){s=l[0];let u;for(u=0;u<s.length;u+=1){const f=nt(l,s,u);o[u]?(o[u].p(f,c),R(o[u],1)):(o[u]=ot(f),o[u].c(),R(o[u],1),o[u].m(e.parentNode,e))}for(we(),u=s.length;u<o.length;u+=1)i(u);Ee()}},i(l){if(!n){for(let c=0;c<s.length;c+=1)R(o[c]);n=!0}},o(l){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)K(o[c]);n=!1},d(l){ht(o,l),l&&D(e)}}}function Zt(t,e,n){let{data:s=[]}=e,{direction:o="right"}=e,{size:i=0}=e;return t.$$set=l=>{"data"in l&&n(0,s=l.data),"direction"in l&&n(1,o=l.direction),"size"in l&&n(2,i=l.size)},[s,o,i]}class Jt extends q{constructor(e){super(),Y(this,e,Zt,qt,j,{data:0,direction:1,size:2})}}const z=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Qt=t=>{const e=z();let n={top:0,left:0,id:e},s=!1;do n.top=Math.floor(Math.random()*W.MAX_BLOCKS),n.left=Math.floor(Math.random()*W.MAX_BLOCKS),s=!en(n,t);while(s==!1);return n},en=(t,e)=>{for(let n=0;n<e.length;n++)if(e[n].top==t.top&&e[n].left==t.left)return!0;return!1},ce=[{bg:"#1c1c1c",wall:[{id:z(),type:P.ROCK,top:2,left:1},{id:z(),type:P.ROCK,top:2,left:2},{id:z(),type:P.ROCK,top:2,left:3},{id:z(),type:P.ROCK,top:2,left:4},{id:z(),type:P.ROCK,top:2,left:5},{id:z(),type:P.ROCK,top:2,left:6},{id:z(),type:P.ROCK,top:1,left:3},{id:z(),type:P.ROCK,top:3,left:4}]},{bg:"#fda2f2",wall:[{id:z(),type:P.DEFAULT,top:2,left:1},{id:z(),type:P.DEFAULT,top:2,left:2},{id:z(),type:P.ROCK,top:2,left:3},{id:z(),type:P.ROCK,top:2,left:4},{id:z(),type:P.DEFAULT,top:2,left:5},{id:z(),type:P.DEFAULT,top:2,left:6},{id:z(),type:P.CONCRETE,top:1,left:3},{id:z(),type:P.CONCRETE,top:3,left:4}]},{bg:"#7f61bb",wall:[]},{bg:"#c34366",wall:[]}];function tn(t){let e,n,s,o,i;return{c(){e=k("div"),n=g("svg"),s=g("style"),o=Q(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),i=g("polygon"),r(s,"id","style2"),r(i,"fill","#FFA300"),r(i,"stroke","#EB0000"),r(i,"stroke-width","0.25"),r(i,"stroke-miterlimit","10"),r(i,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),r(i,"class","red"),r(n,"viewBox","0 0 443.3 421.6"),r(e,"class","bonus bounce-top svelte-y90akj"),y(e,"width",t[1]+"px"),y(e,"height",t[1]+"px"),y(e,"left",t[0].left*t[1]+"px"),y(e,"top",t[0].top*t[1]+"px")},m(l,c){x(l,e,c),a(e,n),a(n,s),a(s,o),a(n,i)},p(l,[c]){c&2&&y(e,"width",l[1]+"px"),c&2&&y(e,"height",l[1]+"px"),c&3&&y(e,"left",l[0].left*l[1]+"px"),c&3&&y(e,"top",l[0].top*l[1]+"px")},i:B,o:B,d(l){l&&D(e)}}}function nn(t,e,n){const s=Lt();let{data:o}=e,{size:i=0}=e;return Xe(()=>{setTimeout(()=>{s("bonusFinished",o.id)},W.BONUS_TIME)}),t.$$set=l=>{"data"in l&&n(0,o=l.data),"size"in l&&n(1,i=l.size)},[o,i]}class on extends q{constructor(e){super(),Y(this,e,nn,tn,j,{data:0,size:1})}}function sn(t){let e,n,s;return{c(){e=k("div"),n=k("h1"),s=Q(t[0]),r(n,"class","svelte-1x8upsq"),r(e,"class","message-box svelte-1x8upsq")},m(o,i){x(o,e,i),a(e,n),a(n,s)},p(o,[i]){i&1&&le(s,o[0])},i:B,o:B,d(o){o&&D(e)}}}function rn(t,e,n){let{message:s=""}=e;return t.$$set=o=>{"message"in o&&n(0,s=o.message)},[s]}class ln extends q{constructor(e){super(),Y(this,e,rn,sn,j,{message:0})}}function cn(t){let e,n,s,o,i,l,c,u,f;return{c(){e=g("svg"),n=g("radialGradient"),s=g("stop"),o=g("stop"),i=g("rect"),l=g("linearGradient"),c=g("stop"),u=g("stop"),f=g("rect"),r(s,"offset","0"),y(s,"stop-color","#333333"),r(o,"offset","1"),y(o,"stop-color","#000000"),r(n,"id","rock_svgid"),r(n,"cx","219.5"),r(n,"cy","219.5"),r(n,"r","219"),r(n,"gradientUnits","userSpaceOnUse"),r(i,"x","0.5"),r(i,"y","0.5"),r(i,"fill","url(#rock_svgid)"),r(i,"stroke","#000000"),r(i,"stroke-miterlimit","10"),r(i,"width","438"),r(i,"height","438"),r(c,"offset","0"),y(c,"stop-color","#000000"),y(c,"stop-opacity","0"),r(u,"offset","1"),y(u,"stop-color","#FFFFFF"),y(u,"stop-opacity","0.5"),r(l,"id","rock_svgid2"),r(l,"gradientUnits","userSpaceOnUse"),r(l,"x1","219"),r(l,"y1","431"),r(l,"x2","219"),r(l,"y2","9.0005"),r(f,"x","8"),r(f,"y","9"),r(f,"fill","url(#rock_svgid2)"),r(f,"width","422"),r(f,"height","422"),r(e,"viewBox","0 0 439 439")},m(p,d){x(p,e,d),a(e,n),a(n,s),a(n,o),a(e,i),a(e,l),a(l,c),a(l,u),a(e,f)},d(p){p&&D(e)}}}function fn(t){let e,n,s,o,i,l,c,u,f,p,d,h,w,_,E,L,S,A,G,$,U,F;return{c(){e=g("svg"),n=g("g"),s=g("linearGradient"),o=g("stop"),i=g("stop"),l=g("rect"),c=g("linearGradient"),u=g("stop"),f=g("stop"),p=g("rect"),d=g("linearGradient"),h=g("stop"),w=g("stop"),_=g("polygon"),E=g("linearGradient"),L=g("stop"),S=g("stop"),A=g("rect"),G=g("linearGradient"),$=g("stop"),U=g("stop"),F=g("rect"),r(o,"offset","0"),y(o,"stop-color","#998675"),r(i,"offset","1"),y(i,"stop-color","#C7B299"),r(s,"id","concrete_SVGID_1_"),r(s,"gradientUnits","userSpaceOnUse"),r(s,"x1","4"),r(s,"y1","96.5"),r(s,"x2","281"),r(s,"y2","96.5"),r(l,"x","4"),r(l,"y","4"),r(l,"fill","url(#concrete_SVGID_1_)"),r(l,"stroke","#CABD99"),r(l,"stroke-width","8"),r(l,"stroke-miterlimit","10"),r(l,"width","277"),r(l,"height","185"),r(u,"offset","0"),y(u,"stop-color","#998675"),r(f,"offset","1"),y(f,"stop-color","#C7B299"),r(c,"id","concrete_SVGID_2_"),r(c,"gradientUnits","userSpaceOnUse"),r(c,"x1","420"),r(c,"y1","189"),r(c,"x2","420"),r(c,"y2","4"),r(p,"x","281"),r(p,"y","4"),r(p,"fill","url(#concrete_SVGID_2_)"),r(p,"stroke","#CABD99"),r(p,"stroke-width","8"),r(p,"stroke-miterlimit","10"),r(p,"width","278"),r(p,"height","185"),r(h,"offset","0"),y(h,"stop-color","#998675"),r(w,"offset","1"),y(w,"stop-color","#C7B299"),r(d,"id","concrete_SVGID_3_"),r(d,"gradientUnits","userSpaceOnUse"),r(d,"x1","281.5"),r(d,"y1","374"),r(d,"x2","281.5"),r(d,"y2","189.0005"),r(_,"fill","url(#concrete_SVGID_3_)"),r(_,"stroke","#CABD99"),r(_,"stroke-width","8"),r(_,"stroke-miterlimit","10"),r(_,"points",`281,189 4,189 4,374 281,374 \r
    559,374 559,189 	`),r(L,"offset","0"),y(L,"stop-color","#998675"),r(S,"offset","1"),y(S,"stop-color","#C7B299"),r(E,"id","concrete_SVGID_4_"),r(E,"gradientUnits","userSpaceOnUse"),r(E,"x1","4"),r(E,"y1","466.5"),r(E,"x2","281"),r(E,"y2","466.5"),r(A,"x","4"),r(A,"y","374"),r(A,"fill","url(#concrete_SVGID_4_)"),r(A,"stroke","#CABD99"),r(A,"stroke-width","8"),r(A,"stroke-miterlimit","10"),r(A,"width","277"),r(A,"height","185"),r($,"offset","0"),y($,"stop-color","#998675"),r(U,"offset","1"),y(U,"stop-color","#C7B299"),r(G,"id","concrete_SVGID_5_"),r(G,"gradientUnits","userSpaceOnUse"),r(G,"x1","281"),r(G,"y1","466.5"),r(G,"x2","559"),r(G,"y2","466.5"),r(F,"x","281"),r(F,"y","374"),r(F,"fill","url(#concrete_SVGID_5_)"),r(F,"stroke","#CABD99"),r(F,"stroke-width","8"),r(F,"stroke-miterlimit","10"),r(F,"width","278"),r(F,"height","185"),r(e,"viewBox","0 0 563 563")},m(T,I){x(T,e,I),a(e,n),a(n,s),a(s,o),a(s,i),a(n,l),a(n,c),a(c,u),a(c,f),a(n,p),a(n,d),a(d,h),a(d,w),a(n,_),a(n,E),a(E,L),a(E,S),a(n,A),a(n,G),a(G,$),a(G,U),a(n,F)},d(T){T&&D(e)}}}function an(t){let e,n,s,o,i,l,c,u,f,p,d,h,w,_,E;return{c(){e=g("svg"),n=g("symbol"),s=g("polygon"),o=g("polygon"),i=g("polygon"),l=g("polygon"),c=g("polygon"),u=g("polygon"),f=g("polygon"),p=g("polygon"),d=g("polygon"),h=g("polygon"),w=g("polygon"),_=g("polygon"),E=g("use"),r(s,"points","27,-29 -27,-29 -27,29 27,29 	"),r(o,"fill","#BF6411"),r(o,"points","-15,29 -27,29 -27,16 -15,16 -2,16 -2,29 	"),r(i,"fill","#BF6411"),r(i,"points","12,29 0,29 0,16 12,16 25,16 25,29 	"),r(l,"fill","#BF6411"),r(l,"points","-27,14 -15,14 -15,2 -27,2 	"),r(c,"fill","#BF6411"),r(c,"points","0,14 -13,14 -13,2 0,2 12,2 12,14 	"),r(u,"fill","#BF6411"),r(u,"points","14,14 27,14 27,2 14,2 	"),r(f,"fill","#BF6411"),r(f,"points","-15,0 -27,0 -27,-13 -15,-13 -2,-13 -2,0 	"),r(p,"fill","#BF6411"),r(p,"points","12,0 0,0 0,-13 12,-13 25,-13 25,0 	"),r(d,"fill","#BF6411"),r(d,"points","-27,-15 -15,-15 -15,-27 -27,-27 	"),r(h,"fill","#BF6411"),r(h,"points","0,-15 -13,-15 -13,-27 0,-27 12,-27 12,-15 	"),r(w,"fill","#BF6411"),r(w,"points","14,-15 27,-15 27,-27 14,-27 	"),r(_,"display","none"),r(_,"fill","none"),r(_,"points","-27,29 27,29 27,-29 -27,-29 	"),r(n,"id","brick1"),r(n,"viewBox","-27 -29 54 58"),Et(E,"xlink:href","#brick1"),r(E,"width","54"),r(E,"height","58"),r(E,"x","-27"),r(E,"y","-29"),r(E,"transform","matrix(1 0 0 -1 27 29)"),r(E,"overflow","visible"),r(e,"viewBox","0 0 54 58")},m(L,S){x(L,e,S),a(e,n),a(n,s),a(n,o),a(n,i),a(n,l),a(n,c),a(n,u),a(n,f),a(n,p),a(n,d),a(n,h),a(n,w),a(n,_),a(e,E)},d(L){L&&D(e)}}}function un(t){let e;function n(i,l){return i[1].type==P.DEFAULT?an:i[1].type==P.CONCRETE?fn:cn}let s=n(t),o=s(t);return{c(){e=k("div"),o.c(),r(e,"class","brick svelte-1ezhfpr"),y(e,"top",t[1].top*t[0]+"px"),y(e,"left",t[1].left*t[0]+"px"),y(e,"width",t[0]+"px"),y(e,"height",t[0]+"px")},m(i,l){x(i,e,l),o.m(e,null)},p(i,[l]){s!==(s=n(i))&&(o.d(1),o=s(i),o&&(o.c(),o.m(e,null))),l&3&&y(e,"top",i[1].top*i[0]+"px"),l&3&&y(e,"left",i[1].left*i[0]+"px"),l&1&&y(e,"width",i[0]+"px"),l&1&&y(e,"height",i[0]+"px")},i:B,o:B,d(i){i&&D(e),o.d()}}}function dn(t,e,n){let{size:s=0}=e,{data:o}=e;return t.$$set=i=>{"size"in i&&n(0,s=i.size),"data"in i&&n(1,o=i.data)},[s,o]}class pn extends q{constructor(e){super(),Y(this,e,dn,un,j,{size:0,data:1})}}function st(t,e,n){const s=t.slice();return s[3]=e[n],s}function rt(t){let e,n;return e=new pn({props:{data:t[3],size:t[0]}}),{c(){se(e.$$.fragment)},m(s,o){ee(e,s,o),n=!0},p(s,o){const i={};o&2&&(i.data=s[3]),o&1&&(i.size=s[0]),e.$set(i)},i(s){n||(R(e.$$.fragment,s),n=!0)},o(s){K(e.$$.fragment,s),n=!1},d(s){te(e,s)}}}function hn(t){let e,n,s=t[1],o=[];for(let l=0;l<s.length;l+=1)o[l]=rt(st(t,s,l));const i=l=>K(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=xe()},m(l,c){for(let u=0;u<o.length;u+=1)o[u].m(l,c);x(l,e,c),n=!0},p(l,[c]){if(c&3){s=l[1];let u;for(u=0;u<s.length;u+=1){const f=st(l,s,u);o[u]?(o[u].p(f,c),R(o[u],1)):(o[u]=rt(f),o[u].c(),R(o[u],1),o[u].m(e.parentNode,e))}for(we(),u=s.length;u<o.length;u+=1)i(u);Ee()}},i(l){if(!n){for(let c=0;c<s.length;c+=1)R(o[c]);n=!0}},o(l){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)K(o[c]);n=!1},d(l){ht(o,l),l&&D(e)}}}function gn(t,e,n){let s,{size:o=0}=e,i;return ie.subscribe(l=>{n(2,i=l)}),t.$$set=l=>{"size"in l&&n(0,o=l.size)},t.$$.update=()=>{t.$$.dirty&4&&n(1,s=ce[i.level-1].wall)},[o,s,i]}class _n extends q{constructor(e){super(),Y(this,e,gn,hn,j,{size:0})}}const lt=()=>[{id:z(),left:2,top:0},{id:z(),left:1,top:0},{id:z(),left:0,top:0}],mn=()=>{let t={bonus:[],foods:[],snake:lt()},{update:e,subscribe:n}=je(t);return{subscribe:n,addBonus:p=>{e(d=>(d.bonus.findIndex(w=>w.id==p.id)==-1&&(d.bonus.push(p),d.bonus=d.bonus,d=d),d))},removeBonus:p=>{e(d=>{let h=d.bonus.slice(0),w=h.findIndex(_=>_.id==p);return w!=-1&&(h.splice(w,1),d.bonus=h,d=d),d})},addFood:p=>{e(d=>(d.foods.findIndex(w=>w.id==p.id)==-1&&(d.foods.push(p),d.foods=d.foods,d=d),d))},removeFood:p=>{e(d=>{let h=d.foods.slice(0),w=h.findIndex(_=>_.id==p);return w!=-1&&(h.splice(w,1),d.foods=h,d=d),d})},moveSnake:p=>{e(d=>{let h=d.snake;return h.pop(),h=[p,...h],d.snake=h,d})},growSnake:()=>{e(p=>{let d=p.snake;return d=[...d,d[d.length-1]],p.snake=d,p})},reset:()=>{e(p=>(p={bonus:[],foods:[],snake:lt()},p))}}},oe=mn();function it(t,e,n){const s=t.slice();return s[39]=e[n],s}function ct(t,e,n){const s=t.slice();return s[42]=e[n],s}function ft(t,e){let n,s,o;return s=new Kt({props:{data:e[42],size:e[6]}}),{key:t,first:null,c(){n=xe(),se(s.$$.fragment),this.first=n},m(i,l){x(i,n,l),ee(s,i,l),o=!0},p(i,l){e=i;const c={};l[0]&128&&(c.data=e[42]),l[0]&64&&(c.size=e[6]),s.$set(c)},i(i){o||(R(s.$$.fragment,i),o=!0)},o(i){K(s.$$.fragment,i),o=!1},d(i){i&&D(n),te(s,i)}}}function at(t,e){let n,s,o;return s=new on({props:{data:e[39],size:e[6]}}),s.$on("bonusFinished",e[11]),{key:t,first:null,c(){n=xe(),se(s.$$.fragment),this.first=n},m(i,l){x(i,n,l),ee(s,i,l),o=!0},p(i,l){e=i;const c={};l[0]&128&&(c.data=e[39]),l[0]&64&&(c.size=e[6]),s.$set(c)},i(i){o||(R(s.$$.fragment,i),o=!0)},o(i){K(s.$$.fragment,i),o=!1},d(i){i&&D(n),te(s,i)}}}function ut(t){let e,n;return e=new ln({props:{message:t[5]}}),{c(){se(e.$$.fragment)},m(s,o){ee(e,s,o),n=!0},p(s,o){const i={};o[0]&32&&(i.message=s[5]),e.$set(i)},i(s){n||(R(e.$$.fragment,s),n=!0)},o(s){K(e.$$.fragment,s),n=!1},d(s){te(e,s)}}}function vn(t){let e,n,s,o,i,l,c,u,f=[],p=new Map,d,h=[],w=new Map,_,E,L,S,A,G,$;i=new _n({props:{size:t[6]}}),c=new Jt({props:{direction:t[8],data:t[7].snake,size:t[6]}});let U=t[7].foods;const F=m=>m[42].id;for(let m=0;m<U.length;m+=1){let b=ct(t,U,m),M=F(b);p.set(M,f[m]=ft(M,b))}let T=t[7].bonus;const I=m=>m[39].id;for(let m=0;m<T.length;m+=1){let b=it(t,T,m),M=I(b);w.set(M,h[m]=at(M,b))}let O=t[4]==!0&&ut(t);return{c(){e=k("div"),n=k("div"),n.textContent="Score",s=V(),o=k("main"),se(i.$$.fragment),l=V(),se(c.$$.fragment),u=V();for(let m=0;m<f.length;m+=1)f[m].c();d=V();for(let m=0;m<h.length;m+=1)h[m].c();_=V(),O&&O.c(),E=V(),L=k("div"),L.innerHTML="<span>Pause</span>",y(o,"width",t[2]+"px"),y(o,"height",t[2]+"px"),y(o,"background",ce[t[3].level-1].bg),r(o,"class","svelte-48ijvd"),r(e,"class","wrap svelte-48ijvd"),Ue(()=>t[12].call(e))},m(m,b){x(m,e,b),a(e,n),a(e,s),a(e,o),ee(i,o,null),a(o,l),ee(c,o,null),a(o,u);for(let M=0;M<f.length;M+=1)f[M].m(o,null);a(o,d);for(let M=0;M<h.length;M+=1)h[M].m(o,null);a(o,_),O&&O.m(o,null),a(e,E),a(e,L),S=At(e,t[12].bind(e)),A=!0,G||($=[ae(window,"keydown",t[10]),wt(xt.call(null,o,{timeframe:300,minSwipeDistance:60,touchAction:"none"})),ae(o,"swipe",t[9])],G=!0)},p(m,b){const M={};b[0]&64&&(M.size=m[6]),i.$set(M);const Z={};b[0]&256&&(Z.direction=m[8]),b[0]&128&&(Z.data=m[7].snake),b[0]&64&&(Z.size=m[6]),c.$set(Z),b[0]&192&&(U=m[7].foods,we(),f=tt(f,b,F,1,m,U,p,o,et,ft,d,ct),Ee()),b[0]&2240&&(T=m[7].bonus,we(),h=tt(h,b,I,1,m,T,w,o,et,at,_,it),Ee()),m[4]==!0?O?(O.p(m,b),b[0]&16&&R(O,1)):(O=ut(m),O.c(),R(O,1),O.m(o,null)):O&&(we(),K(O,1,1,()=>{O=null}),Ee()),(!A||b[0]&4)&&y(o,"width",m[2]+"px"),(!A||b[0]&4)&&y(o,"height",m[2]+"px"),(!A||b[0]&8)&&y(o,"background",ce[m[3].level-1].bg)},i(m){if(!A){R(i.$$.fragment,m),R(c.$$.fragment,m);for(let b=0;b<U.length;b+=1)R(f[b]);for(let b=0;b<T.length;b+=1)R(h[b]);R(O),A=!0}},o(m){K(i.$$.fragment,m),K(c.$$.fragment,m);for(let b=0;b<f.length;b+=1)K(f[b]);for(let b=0;b<h.length;b+=1)K(h[b]);K(O),A=!1},d(m){m&&D(e),te(i),te(c);for(let b=0;b<f.length;b+=1)f[b].d();for(let b=0;b<h.length;b+=1)h[b].d();O&&O.d(),S(),G=!1,pe($)}}}function yn(t,e,n){let s=!1,o=!1,i=Ce.NEXT_LEVEL,l=!1,c,u,f=0,p=0;Xe(()=>{console.log(`--onMount = ${p} ${f} ${ce[d.level].bg}`)});let d,h;fe.subscribe(v=>{}),ie.subscribe(v=>{n(3,d=v)}),oe.subscribe(v=>{n(7,h=v)});const w=()=>{S(Ce.GAME_OVER),clearInterval(E),setTimeout(()=>{A(),m(),fe.gameOver()},W.MESSAGE_TIME)};let _=C.RIGHT,E;function L(v){v.detail.direction,v.detail.target}const S=v=>{n(5,i=v),n(4,o=!0)},A=()=>{n(4,o=!1),n(5,i=Ce.GAME_OVER)},G=()=>{S(Ce.NEXT_LEVEL),clearInterval(E),setTimeout(()=>{A(),ie.nextLevel(),ie.resetScore(),I(),m()},W.MESSAGE_TIME)},$=v=>{h.bonus.forEach(N=>{O(v,N)&&(oe.removeBonus(N.id),ie.getBonus())})},U=()=>{h.snake.length/W.MAX_POINTS>1&&h.snake.length%W.MAX_POINTS==0&&(d.level<ce.length-1?G():(clearInterval(E),fe.allLevelsCleared()))},F=()=>{let{left:v,top:N}=h.snake[0];return _===C.UP?N-=1:_===C.DOWN?N+=1:_===C.LEFT?v-=1:_===C.RIGHT&&(v+=1),{id:z(),left:v,top:N}},T=v=>{h.foods.length>0&&O(v,h.foods[0])&&(oe.growSnake(),ie.eatFood(),oe.removeFood(h.foods[0].id),ue(),d.food%5==0&&me())},I=()=>{let v=ce.length-d.level;v=v*W.DELAY,oe.reset(),ue(),E=setInterval(()=>{l=!0,M()&&(l=!1,w()),b();const N=F();$(N),oe.moveSnake(N),T(N),U(),l=!1},W.DELAY)},O=(v,N)=>!(v.top<N.top||v.top>N.top||v.left<N.left||v.left>N.left),m=()=>{n(8,_=C.RIGHT)},b=()=>{const{top:v,left:N}=h.snake[0],H=h.snake[0];N>=W.MAX_BLOCKS&&_==C.RIGHT&&(H.left=-2),N<0&&_==C.LEFT&&(H.left=W.MAX_BLOCKS+1),v<0&&_==C.UP&&(H.top=W.MAX_BLOCKS+1),v>=W.MAX_BLOCKS&&_==C.DOWN&&(H.top=-2)},M=()=>h.snake.slice(1).filter(H=>O(H,h.snake[0])).length>0,Z=()=>{clearInterval(E)},he=v=>v===be.UP&&_!=C.DOWN?C.UP:v===be.RIGHT&&_!=C.LEFT?C.RIGHT:v===be.LEFT&&_!=C.RIGHT?C.LEFT:v===be.DOWN&&_!=C.UP?C.DOWN:C.UNKNOWN,ge=v=>{switch(v){case C.DOWN:return C.UP;case C.UP:return C.DOWN;case C.LEFT:return C.RIGHT;case C.RIGHT:return C.LEFT;case C.UNKNOWN:return C.UNKNOWN}},_e=v=>{if(l)return;const N=v.code;if(N===be.SPACEBAR&&(s=!s,s?Z():I()),s)return;const H=he(N);H!=C.UNKNOWN&&H!=ge(H)&&n(8,_=H)},ke=v=>{oe.removeBonus(v.detail)},Ae=()=>{const v=h.snake.slice(0),H=[...ce[d.level-1].wall,...v];return Qt(H)},ue=()=>{if(h.foods.length>0)return;const v=Ae();let N={top:v.top,left:v.left,id:v.id,type:mt.DEFAULT};oe.addFood(N)},me=()=>{const v=Ae();let N={top:v.top,left:v.left,id:v.id,type:vt.STAR};oe.addBonus(N)};I(),m();function re(){c=this.clientWidth,u=this.clientHeight,n(0,c),n(1,u)}return t.$$.update=()=>{t.$$.dirty[0]&7&&(n(2,f=Math.min(c,u)),n(2,f=f-50),n(2,f=Math.min(f,500)),isNaN(f)||n(6,p=Math.floor(f/W.MAX_BLOCKS))),t.$$.dirty[0]&8&&ce[d.level-1].wall},[c,u,f,d,o,i,p,h,_,L,_e,ke,re]}class $e extends q{constructor(e){super(),Y(this,e,yn,vn,j,{},null,[-1,-1])}}function bn(t){let e,n,s,o,i,l,c;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",s=V(),o=k("div"),i=k("button"),i.textContent="Start",r(n,"class","title svelte-3xg2s6"),r(o,"class","btn svelte-3xg2s6"),r(e,"class","start-screen svelte-3xg2s6")},m(u,f){x(u,e,f),a(e,n),a(e,s),a(e,o),a(o,i),l||(c=ae(i,"click",t[0]),l=!0)},p:B,i:B,o:B,d(u){u&&D(e),l=!1,c()}}}function wn(t){return[()=>{console.log("start game"),fe.startGame()}]}class En extends q{constructor(e){super(),Y(this,e,wn,bn,j,{})}}function Sn(t){let e,n,s,o,i,l,c,u;return{c(){e=k("div"),n=k("div"),n.textContent="Congratulations !",s=V(),o=k("div"),o.textContent="You have cleared all the levels.",i=V(),l=k("button"),l.textContent="Menu",r(n,"class","title svelte-gyhhqq"),r(e,"class","final svelte-gyhhqq")},m(f,p){x(f,e,p),a(e,n),a(e,s),a(e,o),a(e,i),a(e,l),c||(u=ae(l,"click",t[0]),c=!0)},p:B,i:B,o:B,d(f){f&&D(e),c=!1,u()}}}function kn(t){return[()=>{console.log("restart game"),fe.welcomeScreen()}]}class An extends q{constructor(e){super(),Y(this,e,kn,Sn,j,{})}}var X=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(X||{});const Fn=()=>{const t=[{status:X.NOT_STARTED,component:En},{status:X.RUNNING,component:$e},{status:X.PAUSED,component:$e},{status:X.RESUME,component:$e},{status:X.GAME_OVER,component:Rt},{status:X.ALL_LEVELS_CLEARED,component:An}];let{update:e,subscribe:n}=je(t.find(f=>f.status==X.NOT_STARTED));return{subscribe:n,startGame:()=>{e(f=>(f=t.find(p=>p.status==X.RUNNING),f))},pauseGame:()=>{e(f=>(f=t.find(p=>p.status==X.PAUSED),f))},resumeGame:()=>{e(f=>(f=t.find(p=>p.status==X.RUNNING),f))},gameOver:()=>{e(f=>(f=t.find(p=>p.status==X.GAME_OVER),f))},welcomeScreen:()=>{e(f=>(f=t.find(p=>p.status==X.NOT_STARTED),f))},allLevelsCleared:()=>{e(f=>(f=t.find(p=>p.status==X.ALL_LEVELS_CLEARED),f))}}},fe=Fn();function Ln(t){let e,n,s;var o=t[0].component;function i(l){return{}}return o&&(n=new o(i())),{c(){e=k("div"),n&&se(n.$$.fragment),r(e,"class","container svelte-174qdzj")},m(l,c){x(l,e,c),n&&ee(n,e,null),s=!0},p(l,[c]){if(o!==(o=l[0].component)){if(n){we();const u=n;K(u.$$.fragment,1,0,()=>{te(u,1)}),Ee()}o?(n=new o(i()),se(n.$$.fragment),R(n.$$.fragment,1),ee(n,e,null)):n=null}},i(l){s||(n&&R(n.$$.fragment,l),s=!0)},o(l){n&&K(n.$$.fragment,l),s=!1},d(l){l&&D(e),n&&te(n)}}}function On(t,e,n){let s;return fe.subscribe(o=>{n(0,s=o)}),[s]}class Nn extends q{constructor(e){super(),Y(this,e,On,Ln,j,{})}}new Nn({target:document.getElementById("app")});
