(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function T(){}function dt(t){return t()}function Je(){return Object.create(null)}function ye(t){t.forEach(dt)}function pt(t){return typeof t=="function"}function j(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function bt(t){return Object.keys(t).length===0}function Fe(t){return t==null?"":t}function Et(t){return t&&pt(t.destroy)?t.destroy:T}function f(t,e){t.appendChild(e)}function M(t,e,n){t.insertBefore(e,n||null)}function B(t){t.parentNode.removeChild(t)}function ht(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t){return document.createTextNode(t)}function $(){return Y(" ")}function xe(){return Y("")}function _e(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function l(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function St(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function kt(t){return Array.from(t.childNodes)}function se(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e,n,o){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}let Ce;function Nt(){if(Ce===void 0){Ce=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ce=!0}}return Ce}function Ft(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const o=k("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const s=Nt();let i;return s?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=_e(window,"message",r=>{r.source===o.contentWindow&&e()})):(o.src="about:blank",o.onload=()=>{i=_e(o.contentWindow,"resize",e)}),f(t,o),()=>{(s||i&&o.contentWindow)&&i(),B(o)}}function At(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,o,e),s}let Le;function De(t){Le=t}function gt(){if(!Le)throw new Error("Function called outside component initialization");return Le}function Xe(t){gt().$$.on_mount.push(t)}function It(){const t=gt();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=At(e,n,{cancelable:o});return s.slice().forEach(r=>{r.call(t,i)}),!i.defaultPrevented}return!0}}const Ge=[],We=[],ze=[],Qe=[],Gt=Promise.resolve();let Ke=!1;function Ot(){Ke||(Ke=!0,Gt.then(_t))}function Pe(t){ze.push(t)}const Ve=new Set;let Ue=0;function _t(){const t=Le;do{for(;Ue<Ge.length;){const e=Ge[Ue];Ue++,De(e),Dt(e.$$)}for(De(null),Ge.length=0,Ue=0;We.length;)We.pop()();for(let e=0;e<ze.length;e+=1){const n=ze[e];Ve.has(n)||(Ve.add(n),n())}ze.length=0}while(Ge.length);for(;Qe.length;)Qe.pop()();Ke=!1,Ve.clear(),De(t)}function Dt(t){if(t.fragment!==null){t.update(),ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Pe)}}const Me=new Set;let ve;function ke(){ve={r:0,c:[],p:ve}}function Ne(){ve.r||ye(ve.c),ve=ve.p}function U(t,e){t&&t.i&&(Me.delete(t),t.i(e))}function W(t,e,n,o){if(t&&t.o){if(Me.has(t))return;Me.add(t),ve.c.push(()=>{Me.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function et(t,e){W(t,1,1,()=>{e.delete(t.key)})}function tt(t,e,n,o,s,i,r,c,a,u,d,p){let m=t.length,h=i.length,v=m;const y={};for(;v--;)y[t[v].key]=v;const F=[],S=new Map,N=new Map;for(v=h;v--;){const I=p(s,i,v),D=n(I);let C=r.get(D);C?o&&C.p(I,e):(C=u(D,I),C.c()),S.set(D,F[v]=C),D in y&&N.set(D,Math.abs(v-y[D]))}const L=new Set,x=new Set;function O(I){U(I,1),I.m(c,d),r.set(I.key,I),d=I.first,h--}for(;m&&h;){const I=F[h-1],D=t[m-1],C=I.key,K=D.key;I===D?(d=I.first,m--,h--):S.has(K)?!r.has(C)||L.has(C)?O(I):x.has(K)?m--:N.get(C)>N.get(K)?(x.add(C),O(I)):(L.add(K),m--):(a(D,r),m--)}for(;m--;){const I=t[m];S.has(I.key)||a(I,r)}for(;h;)O(F[h-1]);return F}function de(t){t&&t.c()}function oe(t,e,n,o){const{fragment:s,on_mount:i,on_destroy:r,after_update:c}=t.$$;s&&s.m(e,n),o||Pe(()=>{const a=i.map(dt).filter(pt);r?r.push(...a):ye(a),t.$$.on_mount=[]}),c.forEach(Pe)}function le(t,e){const n=t.$$;n.fragment!==null&&(ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Lt(t,e){t.$$.dirty[0]===-1&&(Ge.push(t),Ot(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(t,e,n,o,s,i,r,c=[-1]){const a=Le;De(t);const u=t.$$={fragment:null,ctx:null,props:i,update:T,not_equal:s,bound:Je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Je(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(p,m,...h)=>{const v=h.length?h[0]:m;return u.ctx&&s(u.ctx[p],u.ctx[p]=v)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](v),d&&Lt(t,p)),m}):[],u.update(),d=!0,ye(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const p=kt(e.target);u.fragment&&u.fragment.l(p),p.forEach(B)}else u.fragment&&u.fragment.c();e.intro&&U(t.$$.fragment),oe(t,e.target,e.anchor,e.customElement),_t()}De(a)}class ee{$destroy(){le(this,1),this.$destroy=T}$on(e,n){const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(e){this.$$set&&!bt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var G=(t=>(t.UP="up",t.RIGHT="right",t.LEFT="left",t.DOWN="down",t.UNKNOWN="",t))(G||{}),X=(t=>(t[t.DELAY=100]="DELAY",t[t.MAX_POINTS=6]="MAX_POINTS",t[t.BONUS_TIME=5e3]="BONUS_TIME",t[t.MESSAGE_TIME=3e3]="MESSAGE_TIME",t[t.GRID_COUNT=20]="GRID_COUNT",t[t.GRID_PADDING=50]="GRID_PADDING",t[t.GRID_MAX_SIZE=500]="GRID_MAX_SIZE",t))(X||{}),Se=(t=>(t.UP="ArrowUp",t.LEFT="ArrowLeft",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.SPACEBAR="Space",t))(Se||{}),Oe=(t=>(t.NEXT_LEVEL="Next Level",t.GAME_OVER="Game Over",t))(Oe||{});const Ee=[];function Ye(t,e=T){let n;const o=new Set;function s(c){if(j(t,c)&&(t=c,n)){const a=!Ee.length;for(const u of o)u[1](),Ee.push(u,t);if(a){for(let u=0;u<Ee.length;u+=2)Ee[u][0](Ee[u+1]);Ee.length=0}}}function i(c){s(c(t))}function r(c,a=T){const u=[c,a];return o.add(u),o.size===1&&(n=e(s)||T),c(t),()=>{o.delete(u),o.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:r}}const Rt=()=>{let t={playerName:"Abhay",level:1,stage:1,score:0,highScore:0,bonus:0,food:0},{update:e,subscribe:n}=Ye(t);return{subscribe:n,resetScore:()=>{e(c=>(c.food=0,c.bonus=0,c.score=0,c))},eatFood:()=>{e(c=>(c.food=c.food+1,c.score=c.food*5+c.bonus*20,c.score>c.highScore&&(c.highScore=c.score),c))},getBonus:()=>{e(c=>(c.bonus=c.bonus+1,c))},nextLevel:()=>{e(c=>(c.level=c.level+1,c))}}};let he=Rt();function Tt(t){let e,n,o,s,i,r,c,a=t[1].playerName+"",u,d,p,m,h,v=t[1].score+"",y,F,S,N,L,x=t[1].food+"",O,I,D,C,K,ne=t[1].bonus+"",H,pe,re,Z,ie,J=t[1].highScore+"",ce,R,w,E,_,A=t[1].level+"",V,me,we=t[1].stage+"",Re,qe,be,Ae,je,Te,He,Ze;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",o=$(),s=k("table"),i=k("tr"),r=k("td"),r.textContent="Player",c=k("td"),u=Y(a),d=$(),p=k("tr"),m=k("td"),m.textContent="Score",h=k("td"),y=Y(v),F=$(),S=k("tr"),N=k("td"),N.textContent="Food",L=k("td"),O=Y(x),I=$(),D=k("tr"),C=k("td"),C.textContent="Bonus",K=k("td"),H=Y(ne),pe=$(),re=k("tr"),Z=k("td"),Z.textContent="High Score",ie=k("td"),ce=Y(J),R=$(),w=k("tr"),E=k("td"),E.textContent="Level-Stage",_=k("td"),V=Y(A),me=k("span"),me.textContent="-",Re=Y(we),qe=$(),be=k("div"),Ae=k("button"),Ae.textContent="Replay",je=$(),Te=k("button"),Te.textContent="Menu",l(n,"class","title svelte-1mhd3rb"),l(r,"class","c1 svelte-1mhd3rb"),l(c,"class","c2 svelte-1mhd3rb"),l(m,"class","c1 svelte-1mhd3rb"),l(h,"class","c2 svelte-1mhd3rb"),l(N,"class","c1 svelte-1mhd3rb"),l(L,"class","c2 svelte-1mhd3rb"),l(C,"class","c1 svelte-1mhd3rb"),l(K,"class","c2 svelte-1mhd3rb"),l(Z,"class","c1 svelte-1mhd3rb"),l(ie,"class","c2 svelte-1mhd3rb"),l(E,"class","c1 svelte-1mhd3rb"),l(_,"class","c2 svelte-1mhd3rb"),l(s,"class","svelte-1mhd3rb"),l(be,"class","flex svelte-1mhd3rb"),l(e,"class","game-over-screen svelte-1mhd3rb")},m(te,fe){M(te,e,fe),f(e,n),f(e,o),f(e,s),f(s,i),f(i,r),f(i,c),f(c,u),f(s,d),f(s,p),f(p,m),f(p,h),f(h,y),f(s,F),f(s,S),f(S,N),f(S,L),f(L,O),f(s,I),f(s,D),f(D,C),f(D,K),f(K,H),f(s,pe),f(s,re),f(re,Z),f(re,ie),f(ie,ce),f(s,R),f(s,w),f(w,E),f(w,_),f(_,V),f(_,me),f(_,Re),f(e,qe),f(e,be),f(be,Ae),t[4](Ae),f(be,je),f(be,Te),He||(Ze=[_e(Ae,"click",t[3]),_e(Te,"click",t[2])],He=!0)},p(te,[fe]){fe&2&&a!==(a=te[1].playerName+"")&&se(u,a),fe&2&&v!==(v=te[1].score+"")&&se(y,v),fe&2&&x!==(x=te[1].food+"")&&se(O,x),fe&2&&ne!==(ne=te[1].bonus+"")&&se(H,ne),fe&2&&J!==(J=te[1].highScore+"")&&se(ce,J),fe&2&&A!==(A=te[1].level+"")&&se(V,A),fe&2&&we!==(we=te[1].stage+"")&&se(Re,we)},i:T,o:T,d(te){te&&B(e),t[4](null),He=!1,ye(Ze)}}}function Ct(t,e,n){let o;Xe(()=>{o.focus()});const s=()=>{console.log("restart game"),ge.welcomeScreen()},i=()=>{he.resetScore(),ge.startGame()};let r;he.subscribe(a=>{n(1,r=a)});function c(a){We[a?"unshift":"push"](()=>{o=a,n(0,o)})}return[o,r,s,i,c]}class Ut extends ee{constructor(e){super(),Q(this,e,Ct,Tt,j,{})}}var mt=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(mt||{}),vt=(t=>(t[t.STAR=0]="STAR",t[t.GEM=1]="GEM",t[t.RUBY=2]="RUBY",t))(vt||{}),P=(t=>(t[t.DEFAULT=0]="DEFAULT",t[t.ROCK=1]="ROCK",t[t.CONCRETE=2]="CONCRETE",t))(P||{});const Bt=300,zt=60,yt="none";function Ie(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function Mt(t,e){return e.filter(n=>t.pointerId!==n.pointerId)}function Be(t,e,n,o,s){t.dispatchEvent(new CustomEvent(`${e}${s}`,{detail:{event:n,pointersCount:o.length}}))}function Pt(t,e,n,o,s,i=yt){e.style.touchAction=i;let r=[];function c(u){r.push(u),Be(e,t,u,r,"down"),o==null||o(r,u);const d=u.pointerId;function p(S){d===S.pointerId&&(r=Mt(S,r),r.length||m(),Be(e,t,S,r,"up"),s==null||s(r,S))}function m(){h(),v(),y(),F()}const h=Ie(e,"pointermove",S=>{r=r.map(N=>S.pointerId===N.pointerId?S:N),Be(e,t,S,r,"move"),n==null||n(r,S)}),v=Ie(e,"lostpointercapture",S=>{p(S)}),y=Ie(e,"pointerup",S=>{p(S)}),F=Ie(e,"pointerleave",S=>{r=[],m(),Be(e,t,S,r,"up"),s==null||s(r,S)})}const a=Ie(e,"pointerdown",c);return{destroy:()=>{a()}}}function xt(t,e={timeframe:Bt,minSwipeDistance:zt,touchAction:yt}){const n="swipe";let o,s,i,r;function c(u,d){s=d.clientX,i=d.clientY,o=Date.now(),u.length===1&&(r=d.target)}function a(u,d){if(d.type==="pointerup"&&u.length===0&&Date.now()-o<e.timeframe){const p=d.clientX-s,m=d.clientY-i,h=Math.abs(p),v=Math.abs(m);let y=null;h>=2*v&&h>e.minSwipeDistance?y=p>0?"right":"left":v>=2*h&&v>e.minSwipeDistance&&(y=m>0?"bottom":"top"),y&&t.dispatchEvent(new CustomEvent(n,{detail:{direction:y,target:r}}))}}return Pt(n,t,null,c,a,e.touchAction)}function Ht(t){let e,n,o,s,i,r,c,a,u,d,p,m,h,v,y,F;return{c(){e=k("div"),n=g("svg"),o=g("g"),s=g("g"),i=g("g"),r=g("g"),c=g("ellipse"),a=g("g"),u=g("path"),d=g("path"),p=g("g"),m=g("path"),h=g("g"),v=g("path"),y=g("g"),F=g("ellipse"),l(o,"id","Layer_1"),l(c,"id","shadow"),l(c,"opacity","0.3"),l(c,"cx","438.7"),l(c,"cy","765.8"),l(c,"rx","283"),l(c,"ry","32.9"),l(u,"id","cup-shadow"),l(u,"fill","#E7F4FA"),l(u,"d",`M135.4,492.8c0,0,17,201,77,230c81.1,39.2,258,43.7,392,25.1\r
            c100.5-13.9,115.1-120.1,122-154.4c8-39.7,19.5-119,6.5-137S217.4,370.8,135.4,492.8z`),l(d,"id","cup-light"),l(d,"fill","#FFFFFF"),l(d,"d",`M155.8,563.9c0,0,12.5,129.5,68.5,151.7c75.8,30,241,33.4,366.1,19.2\r
            c93.8-10.7,107.5-92,114-118.3c7.5-30.4,22.7-73.8,15.3-89C711.8,510.9,478.4,406.5,155.8,563.9z`),l(m,"id","mainFood"),l(m,"fill","#DB343C"),l(m,"d",`M57,240.8c35.9-55.2,83.5-142,189.1-192.7C365.6-9.3,527.4-11.2,598.8,20.8\r
            c41.7,18.7,160.6,74,214.5,205.5c92,224.4,10.9,261.8-27.3,263.6s-285.6-42.4-347.6-36.1c-59.9,6.1-148.2,2.1-312.4,77.9\r
            C54.4,564.8,8.4,515.8,0.6,479C-3.5,459.8,13.4,307.8,57,240.8z`),l(v,"id","highlight"),l(v,"opacity","0.3"),l(v,"fill","#FFFFFF"),l(v,"stroke","#000000"),l(v,"stroke-width","0.25"),l(v,"stroke-miterlimit","10"),l(v,"d",`M231.4,76.8\r
            c74.3-34.1,184.9-82.6,345-35c148,44,244,176,207,256s-53.4,66.9-110,58c-83-13-226-101-256-120s-175-97-186-111\r
            S189.5,96,231.4,76.8z`),l(F,"id","c2"),l(F,"fill","#FFFFFF"),l(F,"cx","436.8"),l(F,"cy","144.3"),l(F,"rx","140.6"),l(F,"ry","138.4"),l(y,"id","c1"),l(s,"id","Layer_2"),l(n,"viewBox","0 0 855.6 798.6"),l(e,"class","food jello-vertical svelte-h8lqdv"),b(e,"left",t[1].left*t[0]+"px"),b(e,"top",t[1].top*t[0]+"px"),b(e,"width",t[0]-2+"px"),b(e,"height",t[0]-2+"px")},m(S,N){M(S,e,N),f(e,n),f(n,o),f(n,s),f(s,i),f(i,r),f(r,c),f(i,a),f(a,u),f(a,d),f(i,p),f(p,m),f(i,h),f(h,v),f(i,y),f(y,F)},p(S,[N]){N&3&&b(e,"left",S[1].left*S[0]+"px"),N&3&&b(e,"top",S[1].top*S[0]+"px"),N&1&&b(e,"width",S[0]-2+"px"),N&1&&b(e,"height",S[0]-2+"px")},i:T,o:T,d(S){S&&B(e)}}}function Vt(t,e,n){let{size:o=0}=e,{data:s}=e;return t.$$set=i=>{"size"in i&&n(0,o=i.size),"data"in i&&n(1,s=i.data)},[o,s]}class $t extends ee{constructor(e){super(),Q(this,e,Vt,Ht,j,{size:0,data:1})}}function Wt(t){let e,n,o;return{c(){e=g("svg"),n=g("rect"),l(n,"y","0"),l(n,"fill","#0037FF"),l(n,"width","50"),l(n,"height","50"),l(e,"viewBox","0 0 50 50"),l(e,"class",o=Fe(t[4])+" svelte-zvgok1")},m(s,i){M(s,e,i),f(e,n)},p(s,i){i&16&&o!==(o=Fe(s[4])+" svelte-zvgok1")&&l(e,"class",o)},d(s){s&&B(e)}}}function Kt(t){let e,n,o;return{c(){e=g("svg"),n=g("rect"),l(n,"y","0"),l(n,"fill","#0037FF"),l(n,"width","50"),l(n,"height","50"),l(e,"viewBox","0 0 50 50"),l(e,"class",o=Fe(t[4])+" svelte-zvgok1")},m(s,i){M(s,e,i),f(e,n)},p(s,i){i&16&&o!==(o=Fe(s[4])+" svelte-zvgok1")&&l(e,"class",o)},d(s){s&&B(e)}}}function Xt(t){let e,n,o,s,i,r,c;return{c(){e=g("svg"),n=g("g"),o=g("rect"),s=g("path"),i=g("circle"),r=g("circle"),l(o,"opacity","0"),l(o,"fill","#FFFFFF"),l(o,"width","258"),l(o,"height","258"),l(s,"fill","#0037FF"),l(s,"d",`M147.5,29.2C111.6,29.2,80.1,48,62.6,77H0v104h62.6c17.5,28,49,47.3,84.9,47.3c55,0,99.6-44.6,99.6-99.6\r
          S202.5,29.2,147.5,29.2z`),l(i,"fill","#FFF800"),l(i,"stroke","#000000"),l(i,"stroke-miterlimit","10"),l(i,"cx","184.3"),l(i,"cy","84.5"),l(i,"r","21.8"),l(r,"fill","#FFF800"),l(r,"stroke","#000000"),l(r,"stroke-miterlimit","10"),l(r,"cx","184.3"),l(r,"cy","164.5"),l(r,"r","21.8"),l(e,"viewBox","0 0 258 258"),l(e,"class",c=Fe(t[4])+" svelte-zvgok1")},m(a,u){M(a,e,u),f(e,n),f(n,o),f(n,s),f(n,i),f(n,r)},p(a,u){u&16&&c!==(c=Fe(a[4])+" svelte-zvgok1")&&l(e,"class",c)},d(a){a&&B(e)}}}function Yt(t){let e;function n(i,r){return i[2]?Xt:i[3]?Kt:Wt}let o=n(t),s=o(t);return{c(){e=k("div"),s.c(),b(e,"left",t[1].left*t[0]+"px"),b(e,"top",t[1].top*t[0]+"px"),b(e,"width",t[0]+"px"),b(e,"height",t[0]+"px"),l(e,"class","snake-body svelte-zvgok1")},m(i,r){M(i,e,r),s.m(e,null)},p(i,[r]){o===(o=n(i))&&s?s.p(i,r):(s.d(1),s=o(i),s&&(s.c(),s.m(e,null))),r&3&&b(e,"left",i[1].left*i[0]+"px"),r&3&&b(e,"top",i[1].top*i[0]+"px"),r&1&&b(e,"width",i[0]+"px"),r&1&&b(e,"height",i[0]+"px")},i:T,o:T,d(i){i&&B(e),s.d()}}}function qt(t,e,n){let{size:o=0}=e,{current:s=null}=e,{prev:i=null}=e,{isHead:r=!1}=e,{isTail:c=!1}=e,{direction:a="right"}=e;return t.$$set=u=>{"size"in u&&n(0,o=u.size),"current"in u&&n(1,s=u.current),"prev"in u&&n(5,i=u.prev),"isHead"in u&&n(2,r=u.isHead),"isTail"in u&&n(3,c=u.isTail),"direction"in u&&n(4,a=u.direction)},[o,s,r,c,a,i]}class jt extends ee{constructor(e){super(),Q(this,e,qt,Yt,j,{size:0,current:1,prev:5,isHead:2,isTail:3,direction:4})}}function nt(t,e,n){const o=t.slice();return o[3]=e[n],o[5]=n,o}function st(t){let e,n;return e=new jt({props:{isHead:t[5]==0,isTail:t[5]==t[0].length-1,current:t[3],prev:t[5]>0?t[0][t[5]-1]:null,direction:t[1],size:t[2]}}),{c(){de(e.$$.fragment)},m(o,s){oe(e,o,s),n=!0},p(o,s){const i={};s&1&&(i.isTail=o[5]==o[0].length-1),s&1&&(i.current=o[3]),s&1&&(i.prev=o[5]>0?o[0][o[5]-1]:null),s&2&&(i.direction=o[1]),s&4&&(i.size=o[2]),e.$set(i)},i(o){n||(U(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){le(e,o)}}}function Zt(t){let e,n,o=t[0],s=[];for(let r=0;r<o.length;r+=1)s[r]=st(nt(t,o,r));const i=r=>W(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=xe()},m(r,c){for(let a=0;a<s.length;a+=1)s[a].m(r,c);M(r,e,c),n=!0},p(r,[c]){if(c&7){o=r[0];let a;for(a=0;a<o.length;a+=1){const u=nt(r,o,a);s[a]?(s[a].p(u,c),U(s[a],1)):(s[a]=st(u),s[a].c(),U(s[a],1),s[a].m(e.parentNode,e))}for(ke(),a=o.length;a<s.length;a+=1)i(a);Ne()}},i(r){if(!n){for(let c=0;c<o.length;c+=1)U(s[c]);n=!0}},o(r){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)W(s[c]);n=!1},d(r){ht(s,r),r&&B(e)}}}function Jt(t,e,n){let{data:o=[]}=e,{direction:s="right"}=e,{size:i=0}=e;return t.$$set=r=>{"data"in r&&n(0,o=r.data),"direction"in r&&n(1,s=r.direction),"size"in r&&n(2,i=r.size)},[o,s,i]}class Qt extends ee{constructor(e){super(),Q(this,e,Jt,Zt,j,{data:0,direction:1,size:2})}}const z=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),en=t=>{const e=z();let n={top:0,left:0,id:e},o=!1;do n.top=Math.floor(Math.random()*X.GRID_COUNT),n.left=Math.floor(Math.random()*X.GRID_COUNT),o=!wt(n,t);while(o==!1);return n},wt=(t,e)=>{for(let n=0;n<e.length;n++)if(e[n].top==t.top&&e[n].left==t.left)return!0;return!1},tn=t=>{switch(t){case"bottom":return G.DOWN;case"top":return G.UP;case"right":return G.RIGHT;case"left":return G.LEFT;default:return G.UNKNOWN}},nn=(t,e)=>t===Se.UP&&e!=G.DOWN?G.UP:t===Se.RIGHT&&e!=G.LEFT?G.RIGHT:t===Se.LEFT&&e!=G.RIGHT?G.LEFT:t===Se.DOWN&&e!=G.UP?G.DOWN:G.UNKNOWN,sn=t=>{switch(t){case G.DOWN:return G.UP;case G.UP:return G.DOWN;case G.LEFT:return G.RIGHT;case G.RIGHT:return G.LEFT;case G.UNKNOWN:return G.UNKNOWN}},ae=[{bg:"#1c1c1c",wall:[{id:z(),type:P.ROCK,top:2,left:1},{id:z(),type:P.ROCK,top:2,left:2},{id:z(),type:P.ROCK,top:2,left:3},{id:z(),type:P.ROCK,top:2,left:4},{id:z(),type:P.ROCK,top:2,left:5},{id:z(),type:P.ROCK,top:2,left:6},{id:z(),type:P.ROCK,top:1,left:3},{id:z(),type:P.ROCK,top:3,left:4}]},{bg:"#fda2f2",wall:[{id:z(),type:P.DEFAULT,top:2,left:1},{id:z(),type:P.DEFAULT,top:2,left:2},{id:z(),type:P.ROCK,top:2,left:3},{id:z(),type:P.ROCK,top:2,left:4},{id:z(),type:P.DEFAULT,top:2,left:5},{id:z(),type:P.DEFAULT,top:2,left:6},{id:z(),type:P.CONCRETE,top:1,left:3},{id:z(),type:P.CONCRETE,top:3,left:4}]},{bg:"#7f61bb",wall:[]},{bg:"#c34366",wall:[]}];function on(t){let e,n,o,s,i;return{c(){e=k("div"),n=g("svg"),o=g("style"),s=Y(`.red {\r
        fill: red;\r
        animation: blink 250ms linear infinite;\r
      }\r
      @keyframes blink {\r
        0% {\r
          fill: yellow;\r
        }\r
        50% {\r
          /* opacity: 0.5; */\r
        }\r
        100% {\r
          fill: red;\r
        }\r
      }\r
    `),i=g("polygon"),l(o,"id","style2"),l(i,"fill","#FFA300"),l(i,"stroke","#EB0000"),l(i,"stroke-width","0.25"),l(i,"stroke-miterlimit","10"),l(i,"points",`221.7,0.3 290.1,138.9 443.1,161.1 \r
        332.4,269 358.5,421.4 221.7,349.5 84.8,421.4 111,269 0.3,161.1 153.3,138.9 `),l(i,"class","red"),l(n,"viewBox","0 0 443.3 421.6"),l(e,"class","bonus bounce-top svelte-y90akj"),b(e,"width",t[1]+"px"),b(e,"height",t[1]+"px"),b(e,"left",t[0].left*t[1]+"px"),b(e,"top",t[0].top*t[1]+"px")},m(r,c){M(r,e,c),f(e,n),f(n,o),f(o,s),f(n,i)},p(r,[c]){c&2&&b(e,"width",r[1]+"px"),c&2&&b(e,"height",r[1]+"px"),c&3&&b(e,"left",r[0].left*r[1]+"px"),c&3&&b(e,"top",r[0].top*r[1]+"px")},i:T,o:T,d(r){r&&B(e)}}}function ln(t,e,n){const o=It();let{data:s}=e,{size:i=0}=e;return Xe(()=>{setTimeout(()=>{o("bonusFinished",s.id)},X.BONUS_TIME)}),t.$$set=r=>{"data"in r&&n(0,s=r.data),"size"in r&&n(1,i=r.size)},[s,i]}class rn extends ee{constructor(e){super(),Q(this,e,ln,on,j,{data:0,size:1})}}function cn(t){let e,n,o;return{c(){e=k("div"),n=k("h1"),o=Y(t[0]),l(n,"class","svelte-1x8upsq"),l(e,"class","message-box svelte-1x8upsq")},m(s,i){M(s,e,i),f(e,n),f(n,o)},p(s,[i]){i&1&&se(o,s[0])},i:T,o:T,d(s){s&&B(e)}}}function fn(t,e,n){let{message:o=""}=e;return t.$$set=s=>{"message"in s&&n(0,o=s.message)},[o]}class un extends ee{constructor(e){super(),Q(this,e,fn,cn,j,{message:0})}}function an(t){let e,n,o,s,i,r,c,a,u;return{c(){e=g("svg"),n=g("radialGradient"),o=g("stop"),s=g("stop"),i=g("rect"),r=g("linearGradient"),c=g("stop"),a=g("stop"),u=g("rect"),l(o,"offset","0"),b(o,"stop-color","#333333"),l(s,"offset","1"),b(s,"stop-color","#000000"),l(n,"id","rock_svgid"),l(n,"cx","219.5"),l(n,"cy","219.5"),l(n,"r","219"),l(n,"gradientUnits","userSpaceOnUse"),l(i,"x","0.5"),l(i,"y","0.5"),l(i,"fill","url(#rock_svgid)"),l(i,"stroke","#000000"),l(i,"stroke-miterlimit","10"),l(i,"width","438"),l(i,"height","438"),l(c,"offset","0"),b(c,"stop-color","#000000"),b(c,"stop-opacity","0"),l(a,"offset","1"),b(a,"stop-color","#FFFFFF"),b(a,"stop-opacity","0.5"),l(r,"id","rock_svgid2"),l(r,"gradientUnits","userSpaceOnUse"),l(r,"x1","219"),l(r,"y1","431"),l(r,"x2","219"),l(r,"y2","9.0005"),l(u,"x","8"),l(u,"y","9"),l(u,"fill","url(#rock_svgid2)"),l(u,"width","422"),l(u,"height","422"),l(e,"viewBox","0 0 439 439")},m(d,p){M(d,e,p),f(e,n),f(n,o),f(n,s),f(e,i),f(e,r),f(r,c),f(r,a),f(e,u)},d(d){d&&B(e)}}}function dn(t){let e,n,o,s,i,r,c,a,u,d,p,m,h,v,y,F,S,N,L,x,O,I;return{c(){e=g("svg"),n=g("g"),o=g("linearGradient"),s=g("stop"),i=g("stop"),r=g("rect"),c=g("linearGradient"),a=g("stop"),u=g("stop"),d=g("rect"),p=g("linearGradient"),m=g("stop"),h=g("stop"),v=g("polygon"),y=g("linearGradient"),F=g("stop"),S=g("stop"),N=g("rect"),L=g("linearGradient"),x=g("stop"),O=g("stop"),I=g("rect"),l(s,"offset","0"),b(s,"stop-color","#998675"),l(i,"offset","1"),b(i,"stop-color","#C7B299"),l(o,"id","concrete_SVGID_1_"),l(o,"gradientUnits","userSpaceOnUse"),l(o,"x1","4"),l(o,"y1","96.5"),l(o,"x2","281"),l(o,"y2","96.5"),l(r,"x","4"),l(r,"y","4"),l(r,"fill","url(#concrete_SVGID_1_)"),l(r,"stroke","#CABD99"),l(r,"stroke-width","8"),l(r,"stroke-miterlimit","10"),l(r,"width","277"),l(r,"height","185"),l(a,"offset","0"),b(a,"stop-color","#998675"),l(u,"offset","1"),b(u,"stop-color","#C7B299"),l(c,"id","concrete_SVGID_2_"),l(c,"gradientUnits","userSpaceOnUse"),l(c,"x1","420"),l(c,"y1","189"),l(c,"x2","420"),l(c,"y2","4"),l(d,"x","281"),l(d,"y","4"),l(d,"fill","url(#concrete_SVGID_2_)"),l(d,"stroke","#CABD99"),l(d,"stroke-width","8"),l(d,"stroke-miterlimit","10"),l(d,"width","278"),l(d,"height","185"),l(m,"offset","0"),b(m,"stop-color","#998675"),l(h,"offset","1"),b(h,"stop-color","#C7B299"),l(p,"id","concrete_SVGID_3_"),l(p,"gradientUnits","userSpaceOnUse"),l(p,"x1","281.5"),l(p,"y1","374"),l(p,"x2","281.5"),l(p,"y2","189.0005"),l(v,"fill","url(#concrete_SVGID_3_)"),l(v,"stroke","#CABD99"),l(v,"stroke-width","8"),l(v,"stroke-miterlimit","10"),l(v,"points",`281,189 4,189 4,374 281,374 \r
    559,374 559,189 	`),l(F,"offset","0"),b(F,"stop-color","#998675"),l(S,"offset","1"),b(S,"stop-color","#C7B299"),l(y,"id","concrete_SVGID_4_"),l(y,"gradientUnits","userSpaceOnUse"),l(y,"x1","4"),l(y,"y1","466.5"),l(y,"x2","281"),l(y,"y2","466.5"),l(N,"x","4"),l(N,"y","374"),l(N,"fill","url(#concrete_SVGID_4_)"),l(N,"stroke","#CABD99"),l(N,"stroke-width","8"),l(N,"stroke-miterlimit","10"),l(N,"width","277"),l(N,"height","185"),l(x,"offset","0"),b(x,"stop-color","#998675"),l(O,"offset","1"),b(O,"stop-color","#C7B299"),l(L,"id","concrete_SVGID_5_"),l(L,"gradientUnits","userSpaceOnUse"),l(L,"x1","281"),l(L,"y1","466.5"),l(L,"x2","559"),l(L,"y2","466.5"),l(I,"x","281"),l(I,"y","374"),l(I,"fill","url(#concrete_SVGID_5_)"),l(I,"stroke","#CABD99"),l(I,"stroke-width","8"),l(I,"stroke-miterlimit","10"),l(I,"width","278"),l(I,"height","185"),l(e,"viewBox","0 0 563 563")},m(D,C){M(D,e,C),f(e,n),f(n,o),f(o,s),f(o,i),f(n,r),f(n,c),f(c,a),f(c,u),f(n,d),f(n,p),f(p,m),f(p,h),f(n,v),f(n,y),f(y,F),f(y,S),f(n,N),f(n,L),f(L,x),f(L,O),f(n,I)},d(D){D&&B(e)}}}function pn(t){let e,n,o,s,i,r,c,a,u,d,p,m,h,v,y;return{c(){e=g("svg"),n=g("symbol"),o=g("polygon"),s=g("polygon"),i=g("polygon"),r=g("polygon"),c=g("polygon"),a=g("polygon"),u=g("polygon"),d=g("polygon"),p=g("polygon"),m=g("polygon"),h=g("polygon"),v=g("polygon"),y=g("use"),l(o,"points","27,-29 -27,-29 -27,29 27,29 	"),l(s,"fill","#BF6411"),l(s,"points","-15,29 -27,29 -27,16 -15,16 -2,16 -2,29 	"),l(i,"fill","#BF6411"),l(i,"points","12,29 0,29 0,16 12,16 25,16 25,29 	"),l(r,"fill","#BF6411"),l(r,"points","-27,14 -15,14 -15,2 -27,2 	"),l(c,"fill","#BF6411"),l(c,"points","0,14 -13,14 -13,2 0,2 12,2 12,14 	"),l(a,"fill","#BF6411"),l(a,"points","14,14 27,14 27,2 14,2 	"),l(u,"fill","#BF6411"),l(u,"points","-15,0 -27,0 -27,-13 -15,-13 -2,-13 -2,0 	"),l(d,"fill","#BF6411"),l(d,"points","12,0 0,0 0,-13 12,-13 25,-13 25,0 	"),l(p,"fill","#BF6411"),l(p,"points","-27,-15 -15,-15 -15,-27 -27,-27 	"),l(m,"fill","#BF6411"),l(m,"points","0,-15 -13,-15 -13,-27 0,-27 12,-27 12,-15 	"),l(h,"fill","#BF6411"),l(h,"points","14,-15 27,-15 27,-27 14,-27 	"),l(v,"display","none"),l(v,"fill","none"),l(v,"points","-27,29 27,29 27,-29 -27,-29 	"),l(n,"id","brick1"),l(n,"viewBox","-27 -29 54 58"),St(y,"xlink:href","#brick1"),l(y,"width","54"),l(y,"height","58"),l(y,"x","-27"),l(y,"y","-29"),l(y,"transform","matrix(1 0 0 -1 27 29)"),l(y,"overflow","visible"),l(e,"viewBox","0 0 54 58")},m(F,S){M(F,e,S),f(e,n),f(n,o),f(n,s),f(n,i),f(n,r),f(n,c),f(n,a),f(n,u),f(n,d),f(n,p),f(n,m),f(n,h),f(n,v),f(e,y)},d(F){F&&B(e)}}}function hn(t){let e;function n(i,r){return i[1].type==P.DEFAULT?pn:i[1].type==P.CONCRETE?dn:an}let o=n(t),s=o(t);return{c(){e=k("div"),s.c(),l(e,"class","brick svelte-1ezhfpr"),b(e,"top",t[1].top*t[0]+"px"),b(e,"left",t[1].left*t[0]+"px"),b(e,"width",t[0]+"px"),b(e,"height",t[0]+"px")},m(i,r){M(i,e,r),s.m(e,null)},p(i,[r]){o!==(o=n(i))&&(s.d(1),s=o(i),s&&(s.c(),s.m(e,null))),r&3&&b(e,"top",i[1].top*i[0]+"px"),r&3&&b(e,"left",i[1].left*i[0]+"px"),r&1&&b(e,"width",i[0]+"px"),r&1&&b(e,"height",i[0]+"px")},i:T,o:T,d(i){i&&B(e),s.d()}}}function gn(t,e,n){let{size:o=0}=e,{data:s}=e;return t.$$set=i=>{"size"in i&&n(0,o=i.size),"data"in i&&n(1,s=i.data)},[o,s]}class _n extends ee{constructor(e){super(),Q(this,e,gn,hn,j,{size:0,data:1})}}function ot(t,e,n){const o=t.slice();return o[3]=e[n],o}function lt(t){let e,n;return e=new _n({props:{data:t[3],size:t[0]}}),{c(){de(e.$$.fragment)},m(o,s){oe(e,o,s),n=!0},p(o,s){const i={};s&2&&(i.data=o[3]),s&1&&(i.size=o[0]),e.$set(i)},i(o){n||(U(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){le(e,o)}}}function mn(t){let e,n,o=t[1],s=[];for(let r=0;r<o.length;r+=1)s[r]=lt(ot(t,o,r));const i=r=>W(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=xe()},m(r,c){for(let a=0;a<s.length;a+=1)s[a].m(r,c);M(r,e,c),n=!0},p(r,[c]){if(c&3){o=r[1];let a;for(a=0;a<o.length;a+=1){const u=ot(r,o,a);s[a]?(s[a].p(u,c),U(s[a],1)):(s[a]=lt(u),s[a].c(),U(s[a],1),s[a].m(e.parentNode,e))}for(ke(),a=o.length;a<s.length;a+=1)i(a);Ne()}},i(r){if(!n){for(let c=0;c<o.length;c+=1)U(s[c]);n=!0}},o(r){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)W(s[c]);n=!1},d(r){ht(s,r),r&&B(e)}}}function vn(t,e,n){let o,{size:s=0}=e,i;return he.subscribe(r=>{n(2,i=r)}),t.$$set=r=>{"size"in r&&n(0,s=r.size)},t.$$.update=()=>{t.$$.dirty&4&&n(1,o=ae[i.level-1].wall)},[s,o,i]}class yn extends ee{constructor(e){super(),Q(this,e,vn,mn,j,{size:0})}}const rt=()=>[{id:z(),left:2,top:0},{id:z(),left:1,top:0},{id:z(),left:0,top:0}],wn=()=>{let t={bonus:[],foods:[],snake:rt()},{update:e,subscribe:n}=Ye(t);return{subscribe:n,addBonus:d=>{e(p=>(p.bonus.findIndex(h=>h.id==d.id)==-1&&(p.bonus.push(d),p.bonus=p.bonus,p=p),p))},removeBonus:d=>{e(p=>{let m=p.bonus.slice(0),h=m.findIndex(v=>v.id==d);return h!=-1&&(m.splice(h,1),p.bonus=m,p=p),p})},addFood:d=>{e(p=>(p.foods.findIndex(h=>h.id==d.id)==-1&&(p.foods.push(d),p.foods=p.foods,p=p),p))},removeFood:d=>{e(p=>{let m=p.foods.slice(0),h=m.findIndex(v=>v.id==d);return h!=-1&&(m.splice(h,1),p.foods=m,p=p),p})},moveSnake:d=>{e(p=>{let m=p.snake;return m.pop(),m=[d,...m],p.snake=m,p})},growSnake:()=>{e(d=>{let p=d.snake;return p=[...p,p[p.length-1]],d.snake=p,d})},reset:()=>{e(d=>(d={bonus:[],foods:[],snake:rt()},d))}}},ue=wn();function it(t,e,n){const o=t.slice();return o[37]=e[n],o}function ct(t,e,n){const o=t.slice();return o[40]=e[n],o}function ft(t,e){let n,o,s;return o=new $t({props:{data:e[40],size:e[6]}}),{key:t,first:null,c(){n=xe(),de(o.$$.fragment),this.first=n},m(i,r){M(i,n,r),oe(o,i,r),s=!0},p(i,r){e=i;const c={};r[0]&128&&(c.data=e[40]),r[0]&64&&(c.size=e[6]),o.$set(c)},i(i){s||(U(o.$$.fragment,i),s=!0)},o(i){W(o.$$.fragment,i),s=!1},d(i){i&&B(n),le(o,i)}}}function ut(t,e){let n,o,s;return o=new rn({props:{data:e[37],size:e[6]}}),o.$on("bonusFinished",e[11]),{key:t,first:null,c(){n=xe(),de(o.$$.fragment),this.first=n},m(i,r){M(i,n,r),oe(o,i,r),s=!0},p(i,r){e=i;const c={};r[0]&128&&(c.data=e[37]),r[0]&64&&(c.size=e[6]),o.$set(c)},i(i){s||(U(o.$$.fragment,i),s=!0)},o(i){W(o.$$.fragment,i),s=!1},d(i){i&&B(n),le(o,i)}}}function at(t){let e,n;return e=new un({props:{message:t[5]}}),{c(){de(e.$$.fragment)},m(o,s){oe(e,o,s),n=!0},p(o,s){const i={};s[0]&32&&(i.message=o[5]),e.$set(i)},i(o){n||(U(e.$$.fragment,o),n=!0)},o(o){W(e.$$.fragment,o),n=!1},d(o){le(e,o)}}}function bn(t){let e,n,o,s,i=t[3].score+"",r,c,a,u,d=t[3].bonus+"",p,m,h,v,y,F,S,N=[],L=new Map,x,O=[],I=new Map,D,C,K,ne,H,pe,re;v=new yn({props:{size:t[6]}}),F=new Qt({props:{direction:t[8],data:t[7].snake,size:t[6]}});let Z=t[7].foods;const ie=w=>w[40].id;for(let w=0;w<Z.length;w+=1){let E=ct(t,Z,w),_=ie(E);L.set(_,N[w]=ft(_,E))}let J=t[7].bonus;const ce=w=>w[37].id;for(let w=0;w<J.length;w+=1){let E=it(t,J,w),_=ce(E);I.set(_,O[w]=ut(_,E))}let R=t[4]==!0&&at(t);return{c(){e=k("div"),n=k("div"),o=k("div"),s=Y("Score : "),r=Y(i),c=$(),a=k("div"),u=Y("Bonus : "),p=Y(d),m=$(),h=k("main"),de(v.$$.fragment),y=$(),de(F.$$.fragment),S=$();for(let w=0;w<N.length;w+=1)N[w].c();x=$();for(let w=0;w<O.length;w+=1)O[w].c();D=$(),R&&R.c(),C=$(),K=k("div"),K.innerHTML="<span>Pause</span>",l(n,"class","scorecard svelte-g9guyn"),b(n,"width",t[2]+"px"),b(h,"width",t[2]+"px"),b(h,"height",t[2]+"px"),b(h,"background",ae[t[3].level-1].bg),l(h,"class","svelte-g9guyn"),l(e,"class","wrap svelte-g9guyn"),Pe(()=>t[12].call(e))},m(w,E){M(w,e,E),f(e,n),f(n,o),f(o,s),f(o,r),f(n,c),f(n,a),f(a,u),f(a,p),f(e,m),f(e,h),oe(v,h,null),f(h,y),oe(F,h,null),f(h,S);for(let _=0;_<N.length;_+=1)N[_].m(h,null);f(h,x);for(let _=0;_<O.length;_+=1)O[_].m(h,null);f(h,D),R&&R.m(h,null),f(e,C),f(e,K),ne=Ft(e,t[12].bind(e)),H=!0,pe||(re=[_e(window,"keydown",t[10]),Et(xt.call(null,h,{timeframe:150,minSwipeDistance:30,touchAction:"none"})),_e(h,"swipe",t[9])],pe=!0)},p(w,E){(!H||E[0]&8)&&i!==(i=w[3].score+"")&&se(r,i),(!H||E[0]&8)&&d!==(d=w[3].bonus+"")&&se(p,d),(!H||E[0]&4)&&b(n,"width",w[2]+"px");const _={};E[0]&64&&(_.size=w[6]),v.$set(_);const A={};E[0]&256&&(A.direction=w[8]),E[0]&128&&(A.data=w[7].snake),E[0]&64&&(A.size=w[6]),F.$set(A),E[0]&192&&(Z=w[7].foods,ke(),N=tt(N,E,ie,1,w,Z,L,h,et,ft,x,ct),Ne()),E[0]&2240&&(J=w[7].bonus,ke(),O=tt(O,E,ce,1,w,J,I,h,et,ut,D,it),Ne()),w[4]==!0?R?(R.p(w,E),E[0]&16&&U(R,1)):(R=at(w),R.c(),U(R,1),R.m(h,null)):R&&(ke(),W(R,1,1,()=>{R=null}),Ne()),(!H||E[0]&4)&&b(h,"width",w[2]+"px"),(!H||E[0]&4)&&b(h,"height",w[2]+"px"),(!H||E[0]&8)&&b(h,"background",ae[w[3].level-1].bg)},i(w){if(!H){U(v.$$.fragment,w),U(F.$$.fragment,w);for(let E=0;E<Z.length;E+=1)U(N[E]);for(let E=0;E<J.length;E+=1)U(O[E]);U(R),H=!0}},o(w){W(v.$$.fragment,w),W(F.$$.fragment,w);for(let E=0;E<N.length;E+=1)W(N[E]);for(let E=0;E<O.length;E+=1)W(O[E]);W(R),H=!1},d(w){w&&B(e),le(v),le(F);for(let E=0;E<N.length;E+=1)N[E].d();for(let E=0;E<O.length;E+=1)O[E].d();R&&R.d(),ne(),pe=!1,ye(re)}}}function En(t,e,n){let o,s=!1,i=!1,r=Oe.NEXT_LEVEL,c=!1,a,u,d=0,p=0;Xe(()=>{console.log(`--onMount = ${p} ${d} ${ae[m.level].bg}`)});let m,h;ge.subscribe(_=>{}),he.subscribe(_=>{n(3,m=_)}),ue.subscribe(_=>{n(7,h=_)});const v=()=>{N(Oe.GAME_OVER),clearInterval(F),setTimeout(()=>{L(),H(),ge.gameOver()},X.MESSAGE_TIME)};let y=G.RIGHT,F;function S(_){o=_.detail.direction,_.detail.target,n(8,y=tn(o))}const N=_=>{n(5,r=_),n(4,i=!0)},L=()=>{n(4,i=!1),n(5,r=Oe.GAME_OVER)},x=()=>{N(Oe.NEXT_LEVEL),clearInterval(F),setTimeout(()=>{L(),he.nextLevel(),he.resetScore(),K(),H()},X.MESSAGE_TIME)},O=_=>{h.bonus.forEach(A=>{ne(_,A)&&(ue.removeBonus(A.id),he.getBonus())})},I=()=>{h.snake.length/X.MAX_POINTS>1&&h.snake.length%X.MAX_POINTS==0&&(m.level<ae.length-1?x():(clearInterval(F),ge.allLevelsCleared()))},D=()=>{let{left:_,top:A}=h.snake[0];return y===G.UP?A-=1:y===G.DOWN?A+=1:y===G.LEFT?_-=1:y===G.RIGHT&&(_+=1),{id:z(),left:_,top:A}},C=_=>{h.foods.length>0&&ne(_,h.foods[0])&&(ue.growSnake(),he.eatFood(),ue.removeFood(h.foods[0].id),R(),m.food%5==0&&w())},K=()=>{let _=ae.length-m.level;_=_*X.DELAY,ue.reset(),R(),F=setInterval(()=>{c=!0,re()&&(c=!1,v()),pe();const A=D();O(A),ue.moveSnake(A),C(A),I(),c=!1},X.DELAY)},ne=(_,A)=>!(_.top<A.top||_.top>A.top||_.left<A.left||_.left>A.left),H=()=>{n(8,y=G.RIGHT)},pe=()=>{const{top:_,left:A}=h.snake[0],V=h.snake[0];A>=X.GRID_COUNT&&y==G.RIGHT&&(V.left=-2),A<0&&y==G.LEFT&&(V.left=X.GRID_COUNT+1),_<0&&y==G.UP&&(V.top=X.GRID_COUNT+1),_>=X.GRID_COUNT&&y==G.DOWN&&(V.top=-2)},re=()=>{const _=h.snake.slice(1),A=ae[m.level-1].wall,V=h.snake[0],me=[..._,...A];return wt(V,me)},Z=()=>{clearInterval(F)},ie=_=>{if(c)return;const A=_.code;if(A===Se.SPACEBAR&&(s=!s,s?Z():K()),s)return;const V=nn(A,y);V!=G.UNKNOWN&&V!=sn(V)&&n(8,y=V)},J=_=>{ue.removeBonus(_.detail)},ce=()=>{const _=h.snake.slice(0),A=ae[m.level-1].wall,V=h.foods.slice(0),me=h.bonus.slice(0),we=[...A,..._,...V,...me];return en(we)},R=()=>{if(h.foods.length>0)return;const _=ce();let A={top:_.top,left:_.left,id:_.id,type:mt.DEFAULT};ue.addFood(A)},w=()=>{const _=ce();let A={top:_.top,left:_.left,id:_.id,type:vt.STAR};ue.addBonus(A)};K(),H();function E(){a=this.clientWidth,u=this.clientHeight,n(0,a),n(1,u)}return t.$$.update=()=>{t.$$.dirty[0]&7&&(n(2,d=Math.min(a,u)),n(2,d=d-X.GRID_PADDING),n(2,d=Math.min(d,X.GRID_MAX_SIZE)),isNaN(d)||n(6,p=Math.floor(d/X.GRID_COUNT))),t.$$.dirty[0]&8&&ae[m.level-1].wall},[a,u,d,m,i,r,p,h,y,S,ie,J,E]}class $e extends ee{constructor(e){super(),Q(this,e,En,bn,j,{},null,[-1,-1])}}function Sn(t){let e,n,o,s,i,r,c;return{c(){e=k("div"),n=k("div"),n.textContent="Snake",o=$(),s=k("div"),i=k("button"),i.textContent="Start",l(n,"class","title svelte-3xg2s6"),l(s,"class","btn svelte-3xg2s6"),l(e,"class","start-screen svelte-3xg2s6")},m(a,u){M(a,e,u),f(e,n),f(e,o),f(e,s),f(s,i),r||(c=_e(i,"click",t[0]),r=!0)},p:T,i:T,o:T,d(a){a&&B(e),r=!1,c()}}}function kn(t){return[()=>{console.log("start game"),ge.startGame()}]}class Nn extends ee{constructor(e){super(),Q(this,e,kn,Sn,j,{})}}function Fn(t){let e,n,o,s,i,r,c,a;return{c(){e=k("div"),n=k("div"),n.textContent="Congratulations !",o=$(),s=k("div"),s.textContent="You have cleared all the levels.",i=$(),r=k("button"),r.textContent="Menu",l(n,"class","title svelte-gyhhqq"),l(e,"class","final svelte-gyhhqq")},m(u,d){M(u,e,d),f(e,n),f(e,o),f(e,s),f(e,i),f(e,r),c||(a=_e(r,"click",t[0]),c=!0)},p:T,i:T,o:T,d(u){u&&B(e),c=!1,a()}}}function An(t){return[()=>{console.log("restart game"),ge.welcomeScreen()}]}class In extends ee{constructor(e){super(),Q(this,e,An,Fn,j,{})}}var q=(t=>(t.NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.PAUSED="PAUSED",t.RESUME="RESUME",t.GAME_OVER="GAME OVER",t.ALL_LEVELS_CLEARED="ALL_LEVELS_CLEARED",t))(q||{});const Gn=()=>{const t=[{status:q.NOT_STARTED,component:Nn},{status:q.RUNNING,component:$e},{status:q.PAUSED,component:$e},{status:q.RESUME,component:$e},{status:q.GAME_OVER,component:Ut},{status:q.ALL_LEVELS_CLEARED,component:In}];let{update:e,subscribe:n}=Ye(t.find(u=>u.status==q.RUNNING));return{subscribe:n,startGame:()=>{e(u=>(u=t.find(d=>d.status==q.RUNNING),u))},pauseGame:()=>{e(u=>(u=t.find(d=>d.status==q.PAUSED),u))},resumeGame:()=>{e(u=>(u=t.find(d=>d.status==q.RUNNING),u))},gameOver:()=>{e(u=>(u=t.find(d=>d.status==q.GAME_OVER),u))},welcomeScreen:()=>{e(u=>(u=t.find(d=>d.status==q.NOT_STARTED),u))},allLevelsCleared:()=>{e(u=>(u=t.find(d=>d.status==q.ALL_LEVELS_CLEARED),u))}}},ge=Gn();function On(t){let e,n,o;var s=t[0].component;function i(r){return{}}return s&&(n=new s(i())),{c(){e=k("div"),n&&de(n.$$.fragment),l(e,"class","container svelte-174qdzj")},m(r,c){M(r,e,c),n&&oe(n,e,null),o=!0},p(r,[c]){if(s!==(s=r[0].component)){if(n){ke();const a=n;W(a.$$.fragment,1,0,()=>{le(a,1)}),Ne()}s?(n=new s(i()),de(n.$$.fragment),U(n.$$.fragment,1),oe(n,e,null)):n=null}},i(r){o||(n&&U(n.$$.fragment,r),o=!0)},o(r){n&&W(n.$$.fragment,r),o=!1},d(r){r&&B(e),n&&le(n)}}}function Dn(t,e,n){let o;return ge.subscribe(s=>{n(0,o=s)}),[o]}class Ln extends ee{constructor(e){super(),Q(this,e,Dn,On,j,{})}}new Ln({target:document.getElementById("app")});
